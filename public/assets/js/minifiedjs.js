function validatenewsletterTerms(n,t){var i=$("#"+NewsLetter.Data.NewLettersTermsandConditionsID);i.prop("checked")?(t.IsValid=!0,document.getElementById("cvNewLetterTermsandConditions").style.display="none"):t.IsValid=!1}function LoadModal(){document.getElementById("pnlNewsLetterSignupError").style.display="none";document.getElementById("pnlNewsLetterSignupForm").style.display="block";document.getElementById("pnlNewsLetterSignupThanks").style.display="none";document.getElementById("cvNewsLetterSignupEmailExist").style.display="none";document.getElementById(NewsLetter.Data.RevNewsLetterSignupEmailID).style.display="none";document.getElementById(NewsLetter.Data.RfvNewsLetterSignupEmailID).style.display="none";document.getElementById("cvNewLetterTermsandConditions").style.display="none"}function showNewsLetterSubscribeModal(){if(!NewsLetter.Data.isBIPopupShown){LoadModal();var t=$(".newsletter-modal"),n=t.find(".modal-content"),i=t.find(".dss-subscribe-popup");$(i).attr("id","newsletterTopMenu");window.isRTLbool?$(n).css("height",""):$(n).css("height","");$(n).css("bottom","");$(".newsletter-modal").on("show.bs.modal",function(){$("#"+NewsLetter.Data.NewLettersTermsandConditionsID).removeAttr("checked")}).on("shown.bs.modal",function(){$("#txtNewsLetterSignupEmail").val("");$("#txtNewsLetterSignupEmail").focus();NewsLetter.Data.userBIPopupShown=!0}).on("hidden.bs.modal",function(){NewsLetter.Data.userBIPopupShown=!1}).modal({keyboard:!1,show:!0})}}function showBINewsLetter(){var t=NewsLetter.Data.ClosedCookieExpireDays,r=$.cookie("BINewsLetter"),u=$.cookie("NewsLetterSubscribed"),f=NewsLetter.Data.HideBI;if(!NewsLetter.Data.isBIPopupShown&&!NewsLetter.Data.userBIPopupShown&&r!="true"&&u!="true"&&f!="True"&&$(window).width()>767){LoadModal();var i=$(".newsletter-modal"),n=i.find(".modal-content"),e=i.find(".dss-subscribe-popup");$(e).attr("id","newsletterBI");window.isRTLbool?$(n).css("height",""):$(n).css("height","");$(n).css("bottom","");$(n).attr("id","bussiness-newslettermodal");$(n).addClass("business-modal visitdubai-modal");$(n).appendTo("body");$("#bussiness-newslettermodal #txtNewsLetterSignupEmail").val("");$("#bussiness-newslettermodal #txtNewsLetterSignupEmail").focus();$(window).width()>767&&$(window).width()<=1024&&$(n).css("bottom",140);$("#bussiness-newslettermodal .b-close").click(function(){var n=new Date;parseInt(t)>0?n.setTime(n.getTime()+parseInt(t)*36e5):n.setTime(n.getTime()+36e5);$.cookie("BINewsLetter",!0,{expires:n});NewsLetter.Data.isBIPopupShown=!1;$("#bussiness-newslettermodal").removeClass("business-modal visitdubai-modal");$("#bussiness-newslettermodal").appendTo("#newsletter-normal");$("#bussiness-newslettermodal").removeAttr("id")});NewsLetter.Data.isBIPopupShown=!0}}function showCreateAccountSubscribeModal(){if(typeof ajaxCreateAccount=="undefined")document.getElementById("pnlCreateAccountSignupError").style.display="none",document.getElementById("pnlCreateAccountSignupForm").style.display="block",document.getElementById("pnlCreateAccountSignupThanks").style.display="none",$(".createaccount-modal").on("show.bs.modal",function(){$("#"+NewsLetter.Data.CreateAccountSignupNameID).val("");$("#"+NewsLetter.Data.CreateAccountSignupLastNameID).val("");$("#"+NewsLetter.Data.PasswordPopupID).val("");$("#"+NewsLetter.Data.ConfirmPasswordPopupID).val("");$("#"+NewsLetter.Data.CreateAccountSignupNameID).focus();$("#txtNewsLetterSignupEmail").val()!=""&&($("#txtCreateAccountSignupEmail").val($("#txtNewsLetterSignupEmail").val()),$("#txtCreateAccountSignupEmail").attr("readonly",!0));$.cookie("NewsLetterAccountOpened",!0);$(".createaccount-modal .close,.createaccount-modal .skip-button").click(function(){$(".createaccount-modal").hide();$(".modal-backdrop").remove();$.cookie("NewsLetterAccountOpened",!1)})}).on("shown.bs.modal",function(){$.cookie("NewsLetterAccountOpened",!0)}).on("hidden.bs.modal",function(){$.cookie("NewsLetterAccountOpened",!1)}).modal("show").show();else{var n=ajaxCreateAccounturl+"?email="+$("#txtNewsLetterSignupEmail").val();$("#newsletter-container").append('<iframe id="create-account-iframe" width="100%" height="100%"  frameborder="0" allowfullscreen src="'+n+'"><\/iframe>');setTimeout(function(){var n=!1,t=$("#create-account-iframe").contents();t.find(".close").click(function(){closeIframe();clearInterval(n)});t.find(".modal-content").click(function(n){n.stopPropagation()});t.find("body").click(function(){closeIframe();clearInterval(n)});t.find(".skip-button").click(function(){closeIframe();clearInterval(n)});n=setInterval(function(){var t=document.getElementById("create-account-iframe").contentWindow.location.search.split("?createaccount=")[1],i;t!=undefined&&($("#create-account-iframe").remove(),i=window.location.protocol+"//"+window.location.host+"?createaccount="+t,window.location.replace(i),clearInterval(n))},100)},500)}}function closeIframe(){setTimeout(function(){$("#create-account-iframe").remove()},300)}function accountLoading(){Page_ClientValidate("CreateAccountCreateAccountSignup")&&$.blockUI({message:'<div id="block-ui-loading"><ul class="bokeh"><li><\/li><li><\/li><li><\/li><\/ul><\/div>'})}function validateCountry(n,t){var i=$("#"+NewsLetter.Data.CountryID);t.IsValid=$("#"+NewsLetter.Data.CountryID).val()!=NewsLetter.Data.CountryLabel?!0:!1}function validateTerms(n,t){var i=$("#"+NewsLetter.Data.AccTermsandConditionsID);t.IsValid=i.prop("checked")?!0:!1}function userEmailExist(n,t){$("#"+NewsLetter.Data.CreateAccountSignupEmailID).val()!=""?(CheckUserExist(),t.IsValid=userExist?!0:!1):t.IsValid=!1}function CheckUserExist(){var n=!1;$.ajax({url:"/api/triplanneruserexist",contentType:"application/json; charset=utf-8",method:"POST",async:!1,cache:!1,timeout:3e4,data:JSON.stringify({UserEmail:$("#"+NewsLetter.Data.CreateAccountSignupEmailID).val()}),dataType:"json",success:function(t){return t=="exist"?(userExist=!1,n=!1):(userExist=!0,n=!0)},error:function(){return userExist=!1,n=!1}})}function FlightBooking(){var n=window.open("","_blank");$.ajax({url:"/api/getflighturl",contentType:"application/json; charset=utf-8",method:"POST",data:JSON.stringify({Depart:document.getElementById(TransparentBookingWidget.Data.TbFromClientID).value,Adults:document.getElementById(TransparentBookingWidget.Data.AdultsID).value,Childrens:document.getElementById(TransparentBookingWidget.Data.ChildrenID).value,Infants:document.getElementById(TransparentBookingWidget.Data.InfantsID).value,Returndate:document.getElementById(TransparentBookingWidget.Data.TbReturnDateID).value,DepartDate:document.getElementById(TransparentBookingWidget.Data.TbDepartDateID).value,ContextID:document.getElementById(TransparentBookingWidget.Data.HdfCurrentbookingItemIdID).value}),dataType:"json",success:function(t){n.location=t},error:function(){}})}function HotelBooking(){var n=window.open("","_blank");$.ajax({url:"/api/gethotelurl",contentType:"application/json; charset=utf-8",method:"POST",data:JSON.stringify({CheckIn:document.getElementById(TransparentBookingWidget.Data.CheckInID).value,CheckOut:document.getElementById(TransparentBookingWidget.Data.CheckOutID).value,Guests:document.getElementById(TransparentBookingWidget.Data.GuestsID).value,ContextID:document.getElementById(TransparentBookingWidget.Data.HdfCurrentbookingItemIdID).value}),dataType:"json",success:function(t){n.location=t},error:function(){}})}function getQueryStringParams(n){for(var t,u=window.location.search.substring(1),r=u.split("&"),i=0;i<r.length;i++)if(t=r[i].split("="),t[0]==n)return decodeURI(t[1])}function checkWindowWidth(n){return $(window).width()<=n}function clearRows(){$(".tout").each(function(){$(this).removeClass("last")});showTiles()}function showTiles(){$(".tout").removeClass("hidden")}function every(n,t,i){n.each(function(n){++n%t==0&&i($(this),n)})}function filterCalendar(n,t){var i=DTCM.CalendarControl;n&&i.filters.setFilter(0,n,function(n){t&&n.setFilter(1,t);i.forceCall=!0;i.ajaxLoadContent(i.startDate,i.toDate,i.view=="map")})}function DTCMCalendarControlInitial(){DTCM.CalendarControl.switchMap()}function DTCMCalendarControlswitchMap(){DTCM.CalendarControl.switchMap()}function DTCM_CalendarInitial(){isMapEnabled?DTCM.CalendarControl.switchCalendarMap():isMapEnabled=!0}function DTCM_CalendarSwitchMap(){DTCM.CalendarControl.switchCalendarMap()}function DTCM_DealsInitial(){isMapEnabled?DTCM.CalendarControl.switchDealsMap():isMapEnabled=!0}function DTCM_DealsSwitchMap(){DTCM.CalendarControl.switchDealsMap()}function DTCMCategoriesInitial(){isMapEnabled?DTCM.CalendarControl.switchCategoriesMap():isMapEnabled=!0}function DTCMCategoriesSwitchMap(){DTCM.CalendarControl.SearchObject.ReloadFilters=!1;DTCM.CalendarControl.switchCategoriesMap()}function option(n,t){return $('<option value="'+(n||"")+'">'+(t||n||"")+"<\/option>")}function div(n,t){return $("<div "+(t||"")+" >"+n+"<\/div>")}function anchor(n,t,i){return $('<a href="'+t+'" title="'+n+'" '+(i||"")+" >"+n+"<\/a>")}function li(n,t){return $("<li "+(t||"")+">"+(n||"")+"<\/li>")}function normalize(n){for(var i=[],t=0;n[t]&&n[t].length>0;)i.push(n[t]),t++;return i}function htmlEncode(n,t){return n?jQuery("<div "+(t||"")+" />").text(n).html():""}function htmlDecode(n,t){return n?$("<div "+(t||"")+" />").html(n).text():""}function findPiece(n,t){return n.filter(function(){return $(this).data("template-piece")==t})}function createFilterItem(n,t,i,r){var e=i.clone(),o="chbFilter_"+filterItemIndex,s=!1,u,f;if(r==""&&(s=!0),e.removeAttr("id"),u=e.find("[data-template-piece]"),findPiece(u,"label-for").attr("for",o).attr("id","lblFilter_"+filterItemIndex),findPiece(u,"checkbox-item").attr("id",o),findPiece(u,"checkbox-item").attr("name",o),findPiece(u,"checkbox-item").checked,s&&(findPiece(u,"checkbox-item").attr("data-checkbox-all",!0),findPiece(u,"checkbox-item").attr("data-check","chbFilter_0")),n.relatedItemsCount!=0||s){findPiece(u,"hidden-field-item").attr("id","hfFilter_"+filterItemIndex);findPiece(u,"hidden-field-item").attr("name","hfFilter_"+filterItemIndex);for(f in n)f=="id"&&(findPiece(u,f).val(n[f]),findPiece(u,"hidden-field-item").val(n[f]),findPiece(u,"label-for").addClass("id-"+n[f].replace("{","").replace("}","")),findPiece(u,"checkbox-item").attr("data-check-related",r)),f=="name"&&findPiece(u,f).text(n[f]),f=="relatedItemsCount"&&findPiece(u,f).text("("+n[f]+")"),f=="hasChildren"&&n[f]&&(e.addClass("has-sub-cat"),$.each(n.childList,function(n,t){createFilterItem(t,$(".sub-cat",e),$("#templateSubFilter"),o)})),t.append(e),filterItemIndex++}}function createItem(n,t,i,r){var i=i.clone().removeAttr("id style"),f=i.find("[data-template-piece]"),u,o,e,s,h,c,a;for(u in n)if(u=="imageURL")findPiece(f,u).attr("src",n[u]);else if(u=="category"){if(n.category.length>0){for(o="",e=0;e<n.category.length;e++)if(n.category[e]){var y=findPiece(f,u),p=n.category[e].name,v=n.category[e].id,l=n.category[e].parentID||"";l.length>0&&(s=l,l=v,v=s,delete s);y.append("<div class='prel-blocks-tags'>"+p+"<\/div>");h="";e!=0&&(h="|");o=o+h+n.category[e].id}findPiece(f,"hidden-field-item").val(o);findPiece(f,"hidden-field-item").attr("id","hfItemCategories_"+r)}}else u=="url"?n[u]=="ISQUICK"?(findPiece(f,u).addClass("QuickEventLinkdisabled"),findPiece(f,u).attr({title:n.name||""}),findPiece(f,u).removeAttr("href")):findPiece(f,u).attr({href:n[u],title:n.name||""}):u=="eventDate"&&r?findPiece(f,u).text(r):u=="tripPlannerID"?findPiece(f,u).attr({onclick:"$tripPlanner.addActivity('"+n.id+'\', this, {gaCAT: "Events Calendar", gaAction: "EC Added Event"}); return false;'}):u=="rating"?(findPiece(f,u).addClass("r"+n[u]),n[u]==0&&findPiece(f,u).addClass("hidden")):u=="guid"?findPiece(f,"tarating").attr({"data-tripadvisorguid":n.guid}):u=="reviews"?findPiece(f,u).text(n[u]):u=="eventDate"&&r==undefined&&$(".dsf_content_wrap").html()!=undefined?(c=n[u],a="<strong>"+c.split(" ")[0]+"<\/strong>"+c.split(" ")[1],findPiece(f,u).html(a)):findPiece(f,u).html(n[u]);n.eventDate===undefined&&findPiece(f,"eventDate").text(r);t.append(i)}function createDealItem(n,t,i,r){var i=i.clone().removeAttr("id style"),f=i.find("[data-template-piece]"),u,o,e,s,h;for(u in n)if(u=="imageURL")findPiece(f,u).attr("src",n[u]);else if(u=="category"){if(n.category.length>0){for(o="",e=0;e<n.category.length;e++)if(n.category[e]){var a=findPiece(f,u),v=n.category[e].name,l=n.category[e].id,c=n.category[e].parentID||"";c.length>0&&(s=c,c=l,l=s,delete s);a.append("<div class='prel-blocks-tags'>"+v+"<\/div>");h="";e!=0&&(h="|");o=o+h+n.category[e].id}findPiece(f,"hidden-field-item").val(o);findPiece(f,"hidden-field-item").attr("id","hfItemCategories_"+r)}}else u=="url"?n[u]=="ISQUICK"?(findPiece(f,u).addClass("QuickEventLinkdisabled"),findPiece(f,u).attr({title:n.name||""}),findPiece(f,u).removeAttr("href")):findPiece(f,u).attr({href:n[u],title:n.name||""}):u=="eventDate"&&r?findPiece(f,u).text(r):u=="tripPlannerID"?findPiece(f,u).attr({onclick:"$tripPlanner.addActivity('"+n.id+'\', this, {gaCAT: "Deals and Offers", gaAction: "Added Deal or Offer"}); return false;'}):findPiece(f,u).html(n[u]);t.append(i)}function fakeInfiHide(){var n=$(".infi-container"),t=n.find(".gallery-item"),i=n.children();infiIncrement=Math.floor(n.width()/t.width());$.each(i,function(n,t){n>infiStartNumber&&$(t).addClass("invisible")});setTimeout(function(){n.css({height:(~~(infiStartNumber/infiIncrement)+1)*290})},1e3)}function fakeInfiShow(){var n=$(".infi-container"),i=n.find(".gallery-item"),t=n.children();infiIncrement=Math.floor(n.width()/i.width());infiStartNumber+infiIncrement<=t.length&&(infiStartNumber+=infiIncrement,$.each(t,function(n,t){n<=infiStartNumber&&$(t).removeClass("invisible")}),n.css({minHeight:(~~(infiStartNumber/infiIncrement)+1)*290,height:"auto"}))}function selectDateRange(n,t,i){var u,f,r,e,o;r=new Date;u=new Date;f=new Date;e=!1;DTCM.CalendarControl.showFeaturedOnly=!1;DTCM.CalendarControl.currentSearchCase="";switch(n){case"featured":DTCM.CalendarControl.showFeaturedOnly=!0;break;case"all":DTCM.CalendarControl.showAllDates=!0;break;case"today":u=r;f=r;break;case"tomorrow":u.setDate(r.getDate()+1);f.setDate(r.getDate()+1);break;case"weekend":u.setDate(r.getDate()+(5-r.getDay()));f.setDate(u.getDate()+1);break;case"week":f.setDate(u.getDate()+6);break;case"month":f.setDate(new Date(new Date(r.getYear(),r.getMonth()+1,1)-1).getDate());break;case"mydates":o=$(window).width()<=768?1:2;console.log(o);$("html, body").animate({scrollTop:45},500);$(".calendar-overlay, #datepicker").show();$(".calendar_filter").removeClass("hidden");$("html").addClass("calendar-overlay-enable");e=!0;$("#datepicker").find(".ui-datepicker-days-cell-over").attr("class","");userSetDates&&($("#datepicker-start").datepicker("option","defaultDate",$("#from").val()),$(".calendar-search-now").removeClass("inactive"))}selectingRange=!0;e||i==null||t==null||(t.datepicker("setDate",u),i.datepicker("setDate",f),DTCM.CalendarControl.showFeaturedOnly?($("#from").val(""),$("#to").val("")):($("#from").val($.datepicker.formatDate($.datepicker._defaults.dateFormat,u)),$("#to").val($.datepicker.formatDate($.datepicker._defaults.dateFormat,f))),$("#datepicker-horizontal").datepicker("refresh"),$("#datepicker-start").datepicker("refresh"),$("#datepicker-horizontal").find(".ui-datepicker-purple").removeClass("ui-datepicker-purple"),$("#datepicker-horizontal").find(".dp-highlight").first().addClass("ui-datepicker-purple"),$("#datepicker-horizontal").find(".dp-highlight").last().addClass("ui-datepicker-purple"),selectingRange=!1,searchEventCalendarRange())}function resetRange(){selectingRange||$("#datepicker-select").ddslick("select",{index:$("#datepicker-select option").length-1})}function resetCalendar(n){n=n.toString();$("#from").val("");$("#to").val("");userSetDates=!1;$.datepicker._clearDate($("#datepicker-start"));$("#datepicker-start").datepicker("refresh").promise().done(function(){Modernizr.touch||$('#datepicker-start td:not(".ui-state-disabled")').append('<div class="tooltip select-start">'+$("#selectStartDate").val()+"<\/div>")});$("#datepicker-start").find(".ui-datepicker-current-day").attr("class","");$(".start-date-text").removeClass("hide");$(".end-date-text").addClass("hide");$(".show-events-text").addClass("hide")}function postFilters(){var n={dateFrom:$("#from").val(),dateTo:$("#to").val(),perPage:$(".select-items-per-page .dd-selected-value").val(),checkedFilters:$(".checkbox-field input:checkbox:checked").map(function(){return $("#"+$(this).attr("name").toString().replace("chb","hf")).val()})};DTCM.CalendarControl.ajaxLoadFilters()}function resetFilterMap(){$("[data-checkbox-all]").attr("checked","checked").change();DTCM.MapControl.loadResults(DTCM.MapControl.searchText,!0,0,!1)}function filterMap(){DTCM.MapControl.loadResults(DTCM.MapControl.searchText,!0,0,!0);DTCM.is.mobileBrowser()&&$("body, html").animate({scrollTop:$(".filter-anchor").offset().top})}function dsfFilterMap(n){DTCM.MapControl.loadResults("DSFMap",!0,0,!0,n);DTCM.is.mobileBrowser()&&$("body, html").animate({scrollTop:$(".filter-anchor").offset().top})}function resetEventCalendarRange(){$("#from").val("");$("#to").val("");resetRange()}function resetFilterEventCalendar(){$("[data-checkbox-all]").attr("checked","checked").change();DTCM.CalendarControl.ajaxLoadSearchResults($("#from").val(),$("#to").val(),!0,0,!1,DTCM.CalendarControl.currentSearchCase)}function resetFilterDeals(){$("[data-checkbox-all]").attr("checked","checked").change();DTCM.CalendarControl.ajaxLoadDealsResults($("#from").val(),$("#to").val(),!0,0,!1,DTCM.CalendarControl.currentSearchCase)}function filterEventCalendar(){DTCM.CalendarControl.ajaxLoadSearchResults($("#from").val(),$("#to").val(),!0,0,!0,DTCM.CalendarControl.currentSearchCase);DTCM.is.mobileBrowser()&&$("body, html").animate({scrollTop:$(".filter-anchor").offset().top})}function filterDeals(){var n=DTCM.CalendarControl;n.forceCall=!0;n.ajaxLoadSearchResults($("#from").val(),$("#to").val(),!0,0,!0,DTCM.CalendarControl.currentSearchCase);DTCM.is.mobileBrowser()&&$("body, html").animate({scrollTop:$(".filter-anchor").offset().top})}function searchEventCalendarRange(){$(".calendar-overlay").is(":visible")&&$(".calendar-search-now").hasClass("inactive")||($(".datepicker").hide(),$(".calendar-overlay").hide(),$("html").removeClass("calendar-overlay-enable"),$(".calendar_filter").addClass("hidden"))}function unmatchResets(){collapseTile(!0)}function hideTiles(){$(".tiles-container").each(function(){var n=$(this).find(".tout");n.length==8?(n.removeClass("hidden"),n.slice(-2).addClass("hidden")):n.length==4&&(n.removeClass("hidden"),n.slice(-1).addClass("hidden"))})}function collapseTile(n){var t,i;if(!tileAnimation){if(tileAnimation=!0,t=$(".expanded_content"),t.length<=0){tileAnimation=!1;return}$(".activeTile").removeClass("activeTile");current=-1;i=parseInt(t.attr("id").replace("tout_content_",""));n?(t.appendTo(findTile(i)).slideUp(1),t.removeClass("expanded_content"),tileAnimation=!1):t.slideUp(200,function(){t.appendTo(findTile(i));t.removeClass("expanded_content");tileAnimation=!1})}}function findTile(n){var t=null;return $(".tout").each(function(){$(this).data("tile-index")==n&&(t=$(this))}),t}function expandTile(n){if(!tileAnimation){tileAnimation=!0;var i=n.find(".tout_content"),r=n.hasClass("last")?n:n.nextAll(".last:visible:first"),t;t=$(window).width()>480?n.offset().top-76:n.offset().top+76;$("html, body").animate({scrollTop:t});current=n.data("tile-index");i.prop("id","tout_content_"+n.data("tile-index")).addClass("expanded_content").insertAfter(r).slideDown(1e3,function(){tileAnimation=!1});n.addClass("activeTile")}}function printMap(){var n=$('input[name="print"]:checked').val();$(".map_dubai, .map_page_wrap").addClass(n);$(".print_options, .modal-window-print").hide();window.print();$(".map_dubai, .map_page_wrap").removeClass(n)}function setAutoCompleteSearch(n,t){n=$(n);t=$(t);n.keydown(function(n){n.keyCode===13&&(window.shouldSubmit=!0,t.click())});$(n).autocomplete({serviceUrl:window.location.href,width:260,autoSelectFirst:!1,lookupLimit:6,minLength:1,triggerSelectOnValidInput:!1,onSelect:function(){t.click()}})}function FixNotValidatedControls(){for(var n,t=[],i=0;i<Page_Validators.length;i++)n=Page_Validators[i],n.isvalid?DTCM.Array.Find(t)==-1&&$(n).parent().removeClass("error"):(t.push(n.controltovalidate),$(n).parent().addClass("error"));return t}function ClientValidate(){$("#errorMessageLoginInvalidUserPass").hide();$("#errorMessageLoginInvalidUserPassSocial").hide();var n=FixNotValidatedControls();n.length>0?($("#errorMessageLogin").show(),$("#errorMessageLoginSocial").show()):($("#errorMessageLogin").hide(),$("#errorMessageLoginSocial").hide())}function FixNotValidatedControlsForgotPass(){for(var n,t=[],i=0;i<Page_Validators.length;i++)n=Page_Validators[i],n.isvalid?DTCM.Array.Find(t)==-1&&$(n).parent().removeClass("error"):(t.push(n.controltovalidate),$(n).parent().addClass("error"));return t}function ClientValidateForgotPass(){var n=FixNotValidatedControlsForgotPass();n.length>0?$("#errorMessageForgotPassNotFound").css("display")=="none"&&$("#errorMessageForgotPass").show():$("#errorMessageForgotPass").hide()}function FixNotValidatedControlsResetPass(){for(var n,t=[],i=0;i<Page_Validators.length;i++)n=Page_Validators[i],n.isvalid?DTCM.Array.Find(t)==-1&&($("#"+n.controltovalidate).removeClass("error"),$(n).parent().removeClass("error")):(t.push(n.controltovalidate),$("#"+n.controltovalidate).addClass("error"),$(n).parent().addClass("error"));return t}function ClearAllErrors(){var t,n;for($("#errorMessageLogin").hide(),$("#errorMessageLoginInvalidUserPass").hide(),$("#errorMessageForgotPassNotFound").hide(),$("#errorMessageForgotPass").hide(),$("#errorMessageCreateAccount").hide(),$("#txtResetPasswordEmail").val(""),$("#txtResetPasswordEmailSocial").val(""),$("#errorMessageLoginSocial").hide(),$("#errorMessageLoginInvalidUserPassSocial").hide(),t=0;t<Page_Validators.length;t++)n=Page_Validators[t],n.isvalid||($("#"+n.controltovalidate).removeClass("error"),$(n).parent().removeClass("error"),n.isvalid=!0,ValidatorUpdateDisplay(n))}function ClientValidateResetPass(){var n=FixNotValidatedControlsResetPass()}function ResetPassEmailCheck(n,t){var i=$("#"+n.controltovalidate),r=i.val();return $.ajax({url:"/api/validate/forgotpassword",type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(r),dataType:"json"}).done(function(){}).fail(function(n,t,i){alert(i)}),t.IsValid=!1}function SetErrorResetPass(){$("#txtResetPasswordEmail").addClass("error");$("#txtResetPasswordEmail").parent().addClass("error")}function ifShowLogin(){setTimeout(function(){var n=FixNotValidatedControls();$("#errorMessageLoginInvalidUserPass").show()},200)}function ifShowResetPass(){setTimeout(function(){$("#btnResetPass").click();var n=FixNotValidatedControlsResetPass()},200)}function ifShowForgotPass(){setTimeout(function(){$(".signup_nav_wrap").hide();$(".forgotten_nav_wrap").show();var n=FixNotValidatedControls();$("#txtForgotPassEmail").parent().parent().addClass("error");n.length>0?$("#errorMessageForgotPassNotFound").show():$("#errorMessageForgotPassNotFound").hide()},200)}function ifshowForgotPassConfirm(){setTimeout(function(){$(".signup_nav_wrap").hide();$(".confirmation_nav_wrap").show()},200)}function ClearContactUsForm(){return $('.form-leftside input[type="text"], textarea, select').each(function(){$(this).val("");$(this).closest(".sub-form-element-holder").removeClass("error");$(this).removeClass("error")}),$(".validator").each(function(){$(this).hide()}),!1}function ClientValidateSuggestionForm(){Page_Validators.forEach(function(n){n.isvalid?($("#"+n.controltovalidate).removeClass("error"),$(n).parent().removeClass("error"),n.id==dynamicSelectors.revEmail&&$("#"+n.controltovalidate).val()==""&&($("#"+n.controltovalidate).addClass("error"),$(n).parent().addClass("error"))):($("#"+n.controltovalidate).addClass("error"),$(n).parent().addClass("error"))});0&&($(dynamicSelectors.tbEmail).addClass("error"),$(dynamicSelectors.tbEmail).parent().addClass("error"))}function bindSelects(){$(dynamicSelectors.ddlFeedbackType).off("change.typeSelect").on("change.typeSelect",function(n){n.preventDefault();$(dynamicSelectors.ddlFeedbackType).val()!=2?$(dynamicSelectors.tbMessage).text(dynamicSelectors.enterYourQuestion):$(dynamicSelectors.tbMessage).text(dynamicSelectors.enterYourComplaint)})}function ScrollToItemList(){$("body, html").animate({scrollTop:$(".switch-inner").offset().top-$(".main_nav").height()})}function btnApplyDatesClick(){DTCM.btnApplyDatesClick()}function btnSearchClick(){DTCM.CalendarControl.SearchObject.Skip=0;DTCM.CalendarControl.SearchObject.ReloadFilters=!0;DTCM.CalendarControl.SearchObject.TabValue="";DTCM.CalendarControl.SearchObject.SearchBy="keyword";DTCM.CalendarControl.ajaxLoadEvents()}function btnApplyFiltersClick(){DTCM.CalendarControl.SearchObject.Skip=0;DTCM.CalendarControl.SearchObject.ReloadFilters=!1;$(".cat-dir-page-content").length&&DTCM.CalendarControl.ajaxLoadCategories();$(".deals-offers-init").length&&DTCM.CalendarControl.ajaxLoadDeals();$(".calendar-page-init").length&&DTCM.CalendarControl.ajaxLoadEvents();DTCM.is.mobileBrowser()&&$("body, html").animate({scrollTop:$(".filter-anchor").offset().top})}function ResetFilters(){$("[data-checkbox-all]").attr("checked","checked").change();DTCM.CalendarControl.SearchObject.ReloadFilters=!0;DTCM.CalendarControl.SearchObject.SearchValue=$('.search-field input[type="text"]').val();$(".cat-dir-page-content").length&&DTCM.CalendarControl.ajaxLoadCategories();$(".deals-offers-init").length&&DTCM.CalendarControl.ajaxLoadDeals();$(".calendar-page-init").length&&DTCM.CalendarControl.ajaxLoadEvents()}function TabClick(n,t){t?($(".calendar-switch-tabs").removeClass("active"),$("#"+t).eq(0).addClass("active"),DTCM.CalendarControl.SearchObject.SearchBy="type",DTCM.CalendarControl.SearchObject.ReloadFilters=!0,DTCM.CalendarControl.SearchObject.Skip=0,DTCM.CalendarControl.SearchObject.TabValue=n,DTCM.CalendarControl.ajaxLoadDeals()):($(".calendar-switch-tabs").removeClass("active"),n=="ef"?$(".calendar-switch-tabs").eq(0).addClass("active"):$(".calendar-switch-tabs").eq(1).addClass("active"),DTCM.CalendarControl.SearchObject.Skip=0,DTCM.CalendarControl.SearchObject.ReloadFilters=!0,DTCM.CalendarControl.SearchObject.TabValue=n,DTCM.CalendarControl.ajaxLoadEvents())}function GetTabsResults(n){from=new Date($("#from").val());to=new Date($("#to").val());$(".calendar-switch-tabs").removeClass("active");n=="festivals"?$(".calendar-switch-tabs").eq(0).addClass("active"):$(".calendar-switch-tabs").eq(1).addClass("active");DTCM.CalendarControl.currentSearchCase=n;DTCM.CalendarControl.SearchObject.ReloadFilters=!0;DTCM.CalendarControl.ajaxLoadSearchResults(from,to,!0,0,!1,n)}function SelectAllCheckboxes(){var t=$(".photo-gallery-container").find('input[type="checkbox"]:checked'),i=$("#select-all").prop("checked"),n=t.length>0?!0:!1,r=n?dynamicSelectors.TranslateSelectAll:dynamicSelectors.TranslateDeselectAll;n?(disableLinkButton(dynamicSelectors.pressClientID),actionPressButton.addClass("grey")):(enableLinkButton(dynamicSelectors.pressClientID),actionPressButton.removeClass("grey"));allPressCheckboxes.each(function(){$(this).prop("checked",i)}).promise().done(function(){$("#label-select-all").text(r)})}function HasCheckedCheckboxes(){var t=$(".photo-gallery-container").find('input[type="checkbox"]:checked'),r=$("#select-all").prop("checked"),n=t.length>0?!0:!1,i=n?dynamicSelectors.TranslateDeselectAll:dynamicSelectors.TranslateSelectAll;n?(actionPressButton.attr("class","banner-buttons-red font_25"),enableLinkButton(dynamicSelectors.pressClientID)):(actionPressButton.attr("class","banner-buttons-red grey font_25"),disableLinkButton(dynamicSelectors.pressClientID));$("#select-all").prop("checked",n);$("#label-select-all").text(i)}function enableLinkButton(n){document.getElementById(n).disabled="";document.getElementById(n).onclick=""}function disableLinkButton(n){console.log(n);document.getElementById(n).disabled="disabled";document.getElementById(n).onclick=function(){return!1}}function startAnimation(){ANIMATION_RUNNING&&stopAnimation();ANIMATION_RUNNING=!0;$("#loaderContainer").show();SECONDS_BETWEEN_FRAMES=1/12;setTimeout("continueAnimation()",SECONDS_BETWEEN_FRAMES/1e3)}function continueAnimation(){cXpos+=128;cIndex+=1;cIndex>=cTotalFrames&&(cXpos=0,cIndex=0);document.getElementById("loaderImage")&&(document.getElementById("loaderImage").style.backgroundPosition=-cXpos+"px 0");cPreloaderTimeout=setTimeout("continueAnimation()",SECONDS_BETWEEN_FRAMES*1e3)}function stopAnimation(){clearTimeout(cPreloaderTimeout);cPreloaderTimeout=!1;$("#loaderContainer").hide();ANIMATION_RUNNING=!1}function initLoadingAnimation(n){n.append('<div id="loaderContainer"><div id="loaderImage"><\/div><\/div>');startAnimation()}function destroyLoadingAnimation(){stopAnimation();$("#loaderContainer").remove()}function goToMapPage(n){n=Number(n);console.log(isDSFMap);isDSFMap==!0?(console.log("in DSFMap"),DTCM.MapControl.searchText="DSFMap",DTCM.MapControl.loadResults(DTCM.MapControl.searchText,!0,n,!0,DSFMapCategory)):DTCM.MapControl.loadResults(DTCM.MapControl.searchText,!0,n,!0);$(".search-result-page a").show();n==0?$(".search-result-page a").eq(0).hide():n==$(".search-result-page a").length-3&&$(".search-result-page a").eq(-1).hide();DTCM.Page.goToTop()}function goToMapPrev(){var n=Number($(".search-result-page a.current").attr("data-page"));(n=n-2,n<0)||(isDSFMap==!0?DTCM.MapControl.loadResults("DSFMap",!0,n,!0,DSFMapCategory):DTCM.MapControl.loadResults(DTCM.MapControl.searchText,!0,n,!0),$(".search-result-page a").show(),n==0?$(".search-result-page a").eq(0).hide():n==$(".search-result-page a").length-3&&$(".search-result-page a").eq(-1).hide(),DTCM.Page.goToTop())}function goToMapNext(){var n=Number($(".search-result-page a.current").attr("data-page"));n>=$(".search-result-page ul a").length||(isDSFMap==!0?DTCM.MapControl.loadResults("DSFMap",!0,n,!0,DSFMapCategory):DTCM.MapControl.loadResults(DTCM.MapControl.searchText,!0,n,!0),$(".search-result-page a").show(),n==0?$(".search-result-page a").eq(0).hide():n==$(".search-result-page a").length-3&&$(".search-result-page a").eq(-1).hide(),DTCM.Page.goToTop())}function goToDealsPage(n){n=Number(n);DTCM.CalendarControl.SearchObject.Skip=n;DTCM.CalendarControl.ajaxLoadDeals();$(".search-result-page a").show();n==0?$(".search-result-page a").eq(0).hide():n==$(".search-result-page a").length-3&&$(".search-result-page a").eq(-1).hide();DTCM.CalendarControl.moveToTop()}function goToDealsPrev(){var n=Number($(".search-result-page a.current").attr("data-page"));(n=n-2,n<0)||(DTCM.CalendarControl.SearchObject.Skip=n,DTCM.CalendarControl.ajaxLoadDeals(),DTCM.CalendarControl.moveToTop())}function goToDealsNext(){var n=Number($(".search-result-page a.current").attr("data-page")),t=Number($(".search-result-page a.last").attr("data-page"));n>=t||(DTCM.CalendarControl.SearchObject.Skip=n,DTCM.CalendarControl.ajaxLoadDeals(),DTCM.CalendarControl.moveToTop())}function goToCategoryPage(n){n=Number(n);DTCM.CalendarControl.SearchObject.ReloadFilters=!1;DTCM.CalendarControl.SearchObject.Skip=n;DTCM.CalendarControl.ajaxLoadCategories();$(".search-result-page a").show();n==0?$(".search-result-page a").eq(0).hide():n==$(".search-result-page a").length-3&&$(".search-result-page a").eq(-1).hide();DTCM.CalendarControl.moveToTop()}function goToCategoryPrev(){var n=Number($(".search-result-page a.current").attr("data-page"));(n=n-2,n<0)||(DTCM.CalendarControl.SearchObject.ReloadFilters=!1,DTCM.CalendarControl.SearchObject.Skip=n,DTCM.CalendarControl.ajaxLoadCategories(),DTCM.CalendarControl.moveToTop())}function goToCategoryNext(){var n=Number($(".search-result-page a.current").attr("data-page")),t=Number($(".search-result-page a.last").attr("data-page"));(n==0&&(n=1),n>=t)||(DTCM.CalendarControl.SearchObject.ReloadFilters=!1,DTCM.CalendarControl.SearchObject.Skip=n,DTCM.CalendarControl.ajaxLoadCategories(),DTCM.CalendarControl.moveToTop())}function goToCalendarPageNew(n){n=Number(n);DTCM.CalendarControl.SearchObject.Skip=n;DTCM.CalendarControl.ajaxLoadEvents();$(".search-result-page a").show();n==0?$(".search-result-page a").eq(0).hide():n==$(".search-result-page a").length-3&&$(".search-result-page a").eq(-1).hide();DTCM.CalendarControl.moveToTop()}function goToCalendarPrevNew(){var n=Number($(".search-result-page a.current").attr("data-page"));(n=n-2,n<0)||(DTCM.CalendarControl.SearchObject.Skip=n,DTCM.CalendarControl.ajaxLoadEvents(),DTCM.CalendarControl.moveToTop())}function goToCalendarNextNew(){var n=Number($(".search-result-page a.current").attr("data-page")),t=Number($(".search-result-page a.last").attr("data-page"));n>=t||(DTCM.CalendarControl.SearchObject.Skip=n,DTCM.CalendarControl.ajaxLoadEvents(),DTCM.CalendarControl.moveToTop())}function goToCalendarPage(n){n=Number(n);DTCM.CalendarControl.ajaxLoadSearchResults($("#from").val(),$("#to").val(),!0,n,!0,DTCM.CalendarControl.currentSearchCase);$(".search-result-page a").show();n==0?$(".search-result-page a").eq(0).hide():n==$(".search-result-page a").length-3&&$(".search-result-page a").eq(-1).hide();DTCM.CalendarControl.moveToTop()}function goToCalendarPrev(){var n=Number($(".search-result-page a.current").attr("data-page"));(n=n-2,n<0)||(DTCM.CalendarControl.ajaxLoadSearchResults($("#from").val(),$("#to").val(),!0,n,!0,DTCM.CalendarControl.currentSearchCase),DTCM.CalendarControl.moveToTop())}function goToCalendarNext(){var n=Number($(".search-result-page a.current").attr("data-page")),t=Number($(".search-result-page a.last").attr("data-page"));n>=t||(DTCM.CalendarControl.ajaxLoadSearchResults($("#from").val(),$("#to").val(),!0,n,!0,DTCM.CalendarControl.currentSearchCase),DTCM.CalendarControl.moveToTop())}function getQueryStrings(){for(var i=location.href,t=i.substring(i.indexOf("?")+1).split("&"),n=0,r={};n<t.length;n++)t[n]=t[n].split("="),r[t[n][0]]=decodeURIComponent(unescape(t[n][1]));return r}function initLightboxVideo(n){var r=jQuery,i=null,f,e,t,o,u;n.toLowerCase().indexOf("youku.com")>-1&&(i=n.replace("https://player.youku.com/embed/",""),i.indexOf("v_show")>-1&&(f=/id_(\w+)/,e=f.exec(i),i=e[1]));t=n.replace("https://www.youtube.com/embed/","").replace("https://www.youtube.com/watch?v=","").replace("https://youtu.be/","");t=t.split("&");t=t[0].split("?");t=t[0];document.cookie.search("DTCM_itinerary_ytID="+t)<0&&(o=r("#lightboxOverlay"),u=r("#lightbox"),u.css({top:r(window).scrollTop()+r(window).height()/5}),o.width(r(document).width()).height(r(document).height()).fadeIn(300,function(){var n,r;i!=null&&i?u.show().addClass("video-contains").find(".lb-iframe").attr("src","https://player.youku.com/embed/"+i):u.show().addClass("video-contains").find(".lb-iframe").attr("src","https://www.youtube.com/embed/"+t+"?autoplay=1&rel=0&enablejsapi=1");u.find(".lb-nav, .lb-loader").hide();n=new Date;n.setTime(n.getTime()+31536e6);r="expires="+n.toUTCString();document.cookie="DTCM_itinerary_ytID="+t+"; "+r}))}function initLightBoxMapPOIs(n,t){var r=$("#lightboxOverlay"),i=$("#lightbox");i.addClass("lightboxMap");i.css({top:$(window).scrollTop()+$(window).height()/5});r.width($(document).width()).height($(document).height()).fadeIn(300,function(){i.show().addClass("video-contains");i.find(".lb-iframe").hide();i.find(".lb-nav, .lb-loader").hide();i.find(".lb-outerContainer").hide();i.find(".mapContainer").length==0&&(i.append('<div class="mapContainer"><div id="map-canvas"><\/div><\/div>'),DTCM.MapControl.GenerateMap(n,t))})}function initializeLBMapPOIs(n,t){document.getElementById("map-canvas")&&(tabsMapSinglePOI=new google.maps.Map(document.getElementById("map-canvas"),{zoom:10,scrollwheel:!1,styles:[{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"transit.station.airport",stylers:[{visibility:"off"}]}]}),LoadLastViewedPois(t))}function initializeMapPOIs(n,t){if(document.getElementById("map-canvas")){var i={zoom:10,scrollwheel:!1,center:n,styles:[{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"transit.station.airport",stylers:[{visibility:"off"}]}]};tabsMapSinglePOI=new google.maps.Map(document.getElementById("map-canvas"),i);LoadLastViewedPois(t)}}function LoadLastViewedPois(n){for(var i,r,u,t=0;t<n.length;t++)typeof n[t].item.imageurl=="undefined"?i=n[t].imageurl:typeof n[t].imageurl=="undefined"&&(i=n[t].item.imageurl),r=n[t].guid?n[t].guid:null,u={geo:n[t].geo,index:n[t].index,guid:r,name:n[t].item.name,location:n[t].item.location,url:n[t].item.url,rating:n[t].item.rating,address:n[t].item.address,locationpoi:n[t].item.locationpoi,hideinfowindow:n[t].item.hideinfowindow,imageurl:i},new DTCM.LabelMarker(tabsMapSinglePOI,u)}function openInfowindowFromList(){$("body").on("click",".map-list-items .add_button_v2",function(){DTCM.Page.goToTop();google.maps.event.trigger(DTCM.MarkersArray.markers[$(this).parents(".events-wrapper").index()],"click")})}function ifSocialShowLogin(){setTimeout(function(){var n=FixNotValidatedControls();$("#errorMessageLoginInvalidUserPassSocial").show()},200)}function SetErrorResetPassSocial(){$("#txtResetPasswordEmailSocial").addClass("error");$("#txtResetPasswordEmailSocial").parent().addClass("error")}function ClientValidateResetPassSocial(){var n=FixNotValidatedControlsResetPass()}function showSmallPopup(){var r=document.getElementById("hdfSmallPopupName"),n="",i,t;r!=null&&(n=r.value);i=document.getElementById("hdfSmallPopupDays");t=1;i!=null&&(t=parseInt(i.value));n!=""&&getCookie(n)!="1"&&($(".popup-bar").show(),$(".homepage_section").css("top","90px"),$(".popup-bar .close").click(function(i){i.preventDefault();setCookie(n,"1",t);$(".popup-bar").hide();$(".homepage_section").css("top","0px");$(".main_nav_container").css("top","31px")}),$(".storeimg").click(function(){setCookie(n,"1",t);$(".popup-bar").hide();$(".homepage_section").css("top","0px");$(".main_nav_container").css("top","31px")}),getMobileOperatingSystem())}function getMobileOperatingSystem(){var n=navigator.userAgent||navigator.vendor||window.opera||window.safari||window.chrome||window.browser}function getCookie(n){var t=document.cookie,i=t.indexOf(" "+n+"="),r;return i==-1&&(i=t.indexOf(n+"=")),i==-1?t=null:(i=t.indexOf("=",i)+1,r=t.indexOf(";",i),r==-1&&(r=t.length),t=unescape(t.substring(i,r))),t}function setCookie(n,t,i){var r=new Date,u=r.getDate()+i;r.setDate(u);document.cookie=n+"="+escape(t)+(i==null?"":";path=/ ;expires="+r.toGMTString())}function IsChinaInstance(){return $("body").attr("data-chineseinstance")}function OpenForgotPasswordModal(){ClearAllErrors();$("#modal-reset-password").length>0&&($("#dtcm-modal-overlay").before($("#modal-reset-password")),$("#resetpassworddiv").show(),$("#resetpasswordthanks").hide(),$("#dtcm-modal-overlay").show(),$("#modal-reset-password").show(),$("#txtResetPasswordEmail").focus())}function CloseForgotPasswordModal(){$("#dtcm-modal-overlay").hide();$("#modal-reset-password").hide()}function SendForgotPassword(){Page_ClientValidate("ResetPass")&&($.blockUI({message:'<div id="block-ui-loading"><ul class="bokeh"><li><\/li><li><\/li><li><\/li><\/ul><\/div>'}),$.ajax({url:"/api/user/forgotpassword",method:"GET",data:{useremail:$("#txtResetPasswordEmail").val()},dataType:"json",success:function(n){n.success?($("#resetpassworddiv").hide(),$("#verifytokenDesc").text(n.successMsg),$("#resendverifytokensuccess").text(n.successMsg),$("#verifytokendiv").show()):($("#resetpassworddiv").hide(),$("#resetpassworderror").show());$.unblockUI()},error:function(){$("#resetpassworddiv").hide();$("#resetpassworderror").show();$.unblockUI()}}))}function ReSendAccountToken(){$("#txtToken").val("");$("#verifytokenerror").css("display","none");$.blockUI({message:'<div id="block-ui-loading"><ul class="bokeh"><li><\/li><li><\/li><li><\/li><\/ul><\/div>'});$.ajax({url:"/api/user/resendtoken",method:"GET",data:{useremail:$("#userEmail").val()},dataType:"json",success:function(n){n.success&&($("#resetpassworddiv").hide(),$("#verifytokenDesc").text(" "),$("#resendverifytokensuccess").text(n.successMsg),$("#resendverifytokensuccess").show());$.unblockUI()},error:function(){$.unblockUI()}})}function ReSendForgotPassword(){$("#txtToken").val("");$("#verifytokenerror").css("display","none");$.blockUI({message:'<div id="block-ui-loading"><ul class="bokeh"><li><\/li><li><\/li><li><\/li><\/ul><\/div>'});$.ajax({url:"/api/user/forgotpassword",method:"GET",data:{useremail:$("#txtResetPasswordEmail").val()},dataType:"json",success:function(n){n.success?($("#resetpassworddiv").hide(),$("#verifytokenDesc").text(" "),$("#resendverifytokensuccess").text(n.successMsg),$("#resendverifytokensuccess").show()):($("#verifytokendiv").hide(),$("#resetpassworderror").show());$.unblockUI()},error:function(){$("#verifytokendiv").hide();$("#resetpassworderror").show();$.unblockUI()}})}function VerifyForgotPasswordToken(){Page_ClientValidate("VerifyToken")&&($.blockUI({message:'<div id="block-ui-loading"><ul class="bokeh"><li><\/li><li><\/li><li><\/li><\/ul><\/div>'}),$.ajax({url:"/api/user/verifytoken",method:"GET",data:{useremail:$("#txtResetPasswordEmail").val(),token:$("#txtToken").val()},dataType:"json",success:function(n){n.success?($("#resetpassworddiv").hide(),$("#verifytokendiv").hide(),$("#changepassworddiv").show()):($("#resetpassworddiv").hide(),$("#changepassworddiv").hide(),$("#verifytokenerror").css("display","block"));$.unblockUI()},error:function(){$("#resetpassworddiv").hide();$("#verifytokendiv").hide();$("#resetpassworderror").show();$.unblockUI()}}))}function IsChinaInstance(){return $("body").attr("data-chineseinstance")}function openNewTabUrl(n){var t=window.document.createElement("a"),i;t.target="_blank";t.href=n;i=window.document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null);t.dispatchEvent(i)}function preventDefault(n){n=n||window.event;n.preventDefault&&n.preventDefault();n.returnValue=!1}function preventDefaultForScrollKeys(n){if(scrollkeys[n.keyCode])return preventDefault(n),!1}function arrayContains(n,t,i){for(var r in n)if(i&&n[r][i]==t)return!0;return!1}function PdfDownload(n){return $("#"+PanelPageContent.Data.HdnPdfCurrentId).val($(n).data("itemid")),!1}function fnItineraryDownloadButtonClick(){if(Page_ClientValidate("NewsLetterItineraryDownload")){$.blockUI({message:'<div id="block-ui-loading"><ul class="bokeh"><li><\/li><li><\/li><li><\/li><\/ul><\/div>'});var n=document.getElementById("txtItineraryDownloadEmail").value,t=document.getElementById("hdfCurrentItemId").value,i=document.getElementById("hdfCountry").value,r=document.getElementById("hdfSiteURL").value,u=document.getElementById("hdnItineraryDomain").value,f=u;$.ajax({url:"/api/saveitinerarydownload",contentType:"application/json; charset=utf-8",method:"POST",data:JSON.stringify({UserEmail:n,EmailPath:t,SiteURL:r,UserCountry:i,Domain:f}),dataType:"json",success:function(t){t=="success"?($("#"+hdnemailControlId).val(n),document.getElementById("pnlItineraryDownloadForm").style.display="none",document.getElementById("pnlItineraryDownloadThanks").style.display="block",__doPostBack(downLoadLinkButtonId,""),setTimeout(function(){$(".itinerarydownload-modal").modal("hide")},5e3)):(document.getElementById("pnlItineraryDownloadForm").style.display="block",document.getElementById("pnlItineraryDownloadThanks").style.display="none",setTimeout(function(){$(".itinerarydownload-modal").modal("hide")},5e3));$.unblockUI()},error:function(){$.unblockUI()}})}}function ShowPdfDownload(n,t,i){hdnemailControlId=n;downLoadLinkButtonId=t;i!=undefined&&i!=""&&$("#plhcontent_0_hdnPdfCurrentId").val(i);document.getElementById("pnlItineraryDownloadForm").style.display="block";document.getElementById("pnlItineraryDownloadThanks").style.display="none";$(".itinerarydownload-modal").modal("show")}function setCookie(n,t,i){var r=new Date,u;r.setTime(r.getTime()+i*864e5);u="expires="+r.toGMTString();document.cookie=n+"="+t+"; "+u+"domain=."+location.hostname+";path=/"}function getCookie(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++){for(t=u[i];t.charAt(0)==" ";)t=t.substring(1);if(t.indexOf(r)==0)return t.substring(r.length,t.length)}return""}function setAccessibilityModes(){getCookie("color-mode")==="contrast"?($("body").append('<link id="contrast-mode" rel="stylesheet" href="/assets/css/accessibility/contrast.css?v=123"/>'),$("html").addClass("contrast-mode"),$("#colours-blind").prop("checked",!0)):$("#dtcm-colours").prop("checked",!0);getCookie("font-mode")!=""&&getCookie("font-mode")!=null?($("body").append('<link class="font-mode" rel="stylesheet" href="/assets/css/accessibility/'+getCookie("font-mode")+'.css?v=123"/>'),$("html").addClass(getCookie("font-mode")),$("."+getCookie("font-mode")).addClass("active")):$(".font-default").addClass("active")}function aaa_getKeyCode(n){return n==null?event.keyCode:n.keyCode}function openMenu(n){$(n).parent(".high-level").addClass("hover");$(n).parent(".high-level").find(".sub-level,.nav-column-middle").addClass("open-menu");$(".essential-items").show();$(".megamenu-overlay").remove();$("body").append("<div class='megamenu-overlay'><\/div>")}function closeMenu(){$(".category-link").parent(".high-level").removeClass("hover");$(".category-link").parent(".high-level").find(".sub-level,.nav-column-middle").removeClass("open-menu");$(".essential-items").hide();$(".megamenu-overlay").remove()}function disableEnableTabindex(){$(".trip_button_dss,.visitdubai-modal .close,#btnSearchHotels,.dubai .nav .sub_menu li a,.detail-page-container h3 span,#tabMenu li,.atcb-link,.dsf_high_tab li a,#btnSearchFlights,.btn-blue-summer,a.video_background,.tp_btn-sign-in,.tp_btn-add-activities,.modal-prompt-holder-find-account .close-button").attr("tabindex","0");setTimeout(function(){$(".event-page-map a,.event-page-map area").attr("tabindex","-1")},3e3);$(".hl-home a,.tile-category-title,.remote-switch,.chip-slider .slick-arrow,.banner-slide-wrap .slick-arrow,form .stars input[type='radio'],.tout .tile-category-title, .tile .tile-category-title,.twitter_first_container a,.my-tiles-wrapper ul li .tiles-copy-wrapper a,.hotels-filter-section li .checkbox-field input[type='checkbox'],.trip_items  .availability-content .input-container input,.trip_items  .availability-content .select-items-cat a.directory-go-button,.featured-slider-dsf li a,.hl-home a").attr("tabindex","-1");$(".nav_location .dd-selected,.nav_location ul.dd-options li a,.booking-widget-tab .dd-selected,.booking-widget-tab .dd-options .dd-option,.select-container.guests  .dd-options .dd-option,.select-container.guests  .dd-selected,.select-items-per-page .dd-options .dd-option,.select-items-per-page .dd-selected,.availability-content.single-hotel .dd-options .dd-option,.availability-content.single-hotel .dd-selected,.form-element-holder .dd-options .dd-option,.form-element-holder .dd-selected").attr("href","javascript:void(0)");$("#skip-link").attr("tabindex","1");$(".meta_nav_wrap ul li a.tab_button").attr("tabindex","2");$(".nav-accessibility .label-accessibility,.accessibility-wrap a,.accessibility-wrap input").attr("tabindex","3");$(".nav_location .dd-selected,.nav_location ul.dd-options li a").attr("tabindex","4");$("li.nav_prompt a,.signup_nav_wrap input,.signup_nav_wrap a").not(".user-greeting").not(".disabled").attr("tabindex","5");$(".mobile_nav a").attr("tabindex","7");$(".mobile_nav .nav-section .sub-level li > .sub-level a").attr("tabindex","7");$(".main_nav_container .nav_logo.department-logo").attr("tabindex","6");$(".hl-home a").attr("tabindex","-1");$(".nav_prompt").hasClass("user-greeting")&&($(".signup_nav a,.signup_nav input,.banner-slide-wrap .slick-arrow,").attr("tabindex","-1"),$(".signup_nav #recaptcha1").hide())}function AcceptCookie(){$.cookie("CookieAccepted","true",{expires:365});$("#panelCookie").hide()}function CloseCookie(){$("#panelCookie").hide()}var NewsLetter,userExist,TransparentBookingWidget,i18n,CustomFormButtons,dubai,TripPlannerConfig,$tripPlanner,DTCM,$jscomp,isDSFMap,DSFMapCategory,filterItemIndex,isMapEnabled,infiStartNumber,infiIncrement,fiveYears,mapPane,api,tileAnimation,current,tabsMapSinglePOI,dateFormat,isIE,itDetailPage,switchTo5x,checkChina,scrollkeys,iframeWidth,iframeHeight,GAtrack,PanelPageContent,hdnemailControlId,downLoadLinkButtonId,$back_to_top,silofirstload,$aaa_previousActiveElement,$aaa_lastMenuItem,disableEnableTabindexintialized;if(!function(n){function t(n,t){if(!(n.originalEvent.touches.length>1)){n.preventDefault();var i=n.originalEvent.changedTouches[0],r=document.createEvent("MouseEvents");r.initMouseEvent(t,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null);n.target.dispatchEvent(r)}}if(n.support.touch="ontouchend"in document,n.support.touch){var r,i=n.ui.mouse.prototype,u=i._mouseInit,f=i._mouseDestroy;i._touchStart=function(n){var i=this;!r&&i._mouseCapture(n.originalEvent.changedTouches[0])&&(r=!0,i._touchMoved=!1,t(n,"mouseover"),t(n,"mousemove"),t(n,"mousedown"))};i._touchMove=function(n){r&&(this._touchMoved=!0,t(n,"mousemove"))};i._touchEnd=function(n){r&&(t(n,"mouseup"),t(n,"mouseout"),this._touchMoved||t(n,"click"),r=!1)};i._mouseInit=function(){var t=this;t.element.bind({touchstart:n.proxy(t,"_touchStart"),touchmove:n.proxy(t,"_touchMove"),touchend:n.proxy(t,"_touchEnd")});u.call(t)};i._mouseDestroy=function(){var t=this;t.element.unbind({touchstart:n.proxy(t,"_touchStart"),touchmove:n.proxy(t,"_touchMove"),touchend:n.proxy(t,"_touchEnd")});f.call(t)}}}(jQuery),window.Modernizr=function(n,t,i){function l(n){c.cssText=n}function ct(n,t){return l(v.join(n+";")+(t||""))}function h(n,t){return typeof n===t}function a(n,t){return!!~(""+n).indexOf(t)}function rt(n,t){var u,r;for(u in n)if(r=n[u],!a(r,"-")&&c[r]!==i)return t=="pfx"?r:!0;return!1}function lt(n,t,r){var f,u;for(f in n)if(u=t[n[f]],u!==i)return r===!1?n[f]:h(u,"function")?u.bind(r||t):u;return!1}function f(n,t,i){var r=n.charAt(0).toUpperCase()+n.slice(1),u=(n+" "+et.join(r+" ")+r).split(" ");return h(t,"string")||h(t,"undefined")?rt(u,t):(u=(n+" "+ot.join(r+" ")+r).split(" "),lt(u,t,i))}function at(){u.input=function(i){for(var r=0,u=i.length;r<u;r++)y[i[r]]=i[r]in e;return y.list&&(y.list=!!t.createElement("datalist")&&!!n.HTMLDataListElement),y}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" "));u.inputtypes=function(n){for(var u=0,r,f,o,h=n.length;u<h;u++)e.setAttribute("type",f=n[u]),r=e.type!=="text",r&&(e.value=d,e.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(f)&&e.style.WebkitAppearance!==i?(s.appendChild(e),o=t.defaultView,r=o.getComputedStyle&&o.getComputedStyle(e,null).WebkitAppearance!=="textfield"&&e.offsetHeight!==0,s.removeChild(e)):/^(search|tel)$/.test(f)||(r=/^(url|email)$/.test(f)?e.checkValidity&&e.checkValidity()===!1:e.value!=d)),st[n[u]]=!!r;return st}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var u={},k=!0,s=t.documentElement,o="modernizr",ut=t.createElement(o),c=ut.style,e=t.createElement("input"),d=":)",vt={}.toString,v=" -webkit- -moz- -o- -ms- ".split(" "),ft="Webkit Moz O ms",et=ft.split(" "),ot=ft.toLowerCase().split(" "),r={},st={},y={},g=[],nt=g.slice,p,w=function(n,i,r,u){var l,a,c,v,f=t.createElement("div"),h=t.body,e=h||t.createElement("body");if(parseInt(r,10))while(r--)c=t.createElement("div"),c.id=u?u[r]:o+(r+1),f.appendChild(c);return l=["&#173;",'<style id="s',o,'">',n,"<\/style>"].join(""),f.id=o,(h?f:e).innerHTML+=l,e.appendChild(f),h||(e.style.background="",e.style.overflow="hidden",v=s.style.overflow,s.style.overflow="hidden",s.appendChild(e)),a=i(f,n),h?f.parentNode.removeChild(f):(e.parentNode.removeChild(e),s.style.overflow=v),!!a},ht=function(){function n(n,u){u=u||t.createElement(r[n]||"div");n="on"+n;var f=n in u;return f||(u.setAttribute||(u=t.createElement("div")),u.setAttribute&&u.removeAttribute&&(u.setAttribute(n,""),f=h(u[n],"function"),h(u[n],"undefined")||(u[n]=i),u.removeAttribute(n))),u=null,f}var r={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return n}(),tt={}.hasOwnProperty,it,b;it=!h(tt,"undefined")&&!h(tt.call,"undefined")?function(n,t){return tt.call(n,t)}:function(n,t){return t in n&&h(n.constructor.prototype[t],"undefined")};Function.prototype.bind||(Function.prototype.bind=function(n){var t=this,i,r;if(typeof t!="function")throw new TypeError;return i=nt.call(arguments,1),r=function(){var f,e,u;return this instanceof r?(f=function(){},f.prototype=t.prototype,e=new f,u=t.apply(e,i.concat(nt.call(arguments))),Object(u)===u?u:e):t.apply(n,i.concat(nt.call(arguments)))},r});r.flexbox=function(){return f("flexWrap")};r.flexboxlegacy=function(){return f("boxDirection")};r.canvas=function(){var n=t.createElement("canvas");return!!n.getContext&&!!n.getContext("2d")};r.canvastext=function(){return!!u.canvas&&!!h(t.createElement("canvas").getContext("2d").fillText,"function")};r.touch=function(){var i;return"ontouchstart"in n||n.DocumentTouch&&t instanceof DocumentTouch?i=!0:w(["@media (",v.join("touch-enabled),("),o,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(n){i=n.offsetTop===9}),i};r.geolocation=function(){return"geolocation"in navigator};r.postmessage=function(){return!!n.postMessage};r.websqldatabase=function(){return!!n.openDatabase};r.indexedDB=function(){return!!f("indexedDB",n)};r.hashchange=function(){return ht("hashchange",n)&&(t.documentMode===i||t.documentMode>7)};r.history=function(){return!!n.history&&!!history.pushState};r.draganddrop=function(){var n=t.createElement("div");return"draggable"in n||"ondragstart"in n&&"ondrop"in n};r.websockets=function(){return"WebSocket"in n||"MozWebSocket"in n};r.rgba=function(){return l("background-color:rgba(150,255,150,.5)"),a(c.backgroundColor,"rgba")};r.hsla=function(){return l("background-color:hsla(120,40%,100%,.5)"),a(c.backgroundColor,"rgba")||a(c.backgroundColor,"hsla")};r.multiplebgs=function(){return l("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(c.background)};r.backgroundsize=function(){return f("backgroundSize")};r.borderimage=function(){return f("borderImage")};r.borderradius=function(){return f("borderRadius")};r.boxshadow=function(){return f("boxShadow")};r.textshadow=function(){return t.createElement("div").style.textShadow===""};r.opacity=function(){return ct("opacity:.55"),/^0.55$/.test(c.opacity)};r.cssanimations=function(){return f("animationName")};r.csscolumns=function(){return f("columnCount")};r.cssgradients=function(){var n="background-image:";return l((n+"-webkit- ".split(" ").join("gradient(linear,left top,right bottom,from(#9f9),to(white));"+n)+v.join("linear-gradient(left top,#9f9, white);"+n)).slice(0,-n.length)),a(c.backgroundImage,"gradient")};r.cssreflections=function(){return f("boxReflect")};r.csstransforms=function(){return!!f("transform")};r.csstransforms3d=function(){var n=!!f("perspective");return n&&"webkitPerspective"in s.style&&w("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t){n=t.offsetLeft===9&&t.offsetHeight===3}),n};r.csstransitions=function(){return f("transition")};r.generatedcontent=function(){var n;return w(["#",o,"{font:0/0 a}#",o,':after{content:"',d,'";visibility:hidden;font:3px/1 a}'].join(""),function(t){n=t.offsetHeight>=3}),n};r.video=function(){var i=t.createElement("video"),n=!1;try{(n=!!i.canPlayType)&&(n=new Boolean(n),n.ogg=i.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),n.h264=i.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),n.webm=i.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(r){}return n};r.audio=function(){var i=t.createElement("audio"),n=!1;try{(n=!!i.canPlayType)&&(n=new Boolean(n),n.ogg=i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),n.mp3=i.canPlayType("audio/mpeg;").replace(/^no$/,""),n.wav=i.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),n.m4a=(i.canPlayType("audio/x-m4a;")||i.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(r){}return n};r.localstorage=function(){try{return localStorage.setItem(o,o),localStorage.removeItem(o),!0}catch(n){return!1}};r.sessionstorage=function(){try{return sessionStorage.setItem(o,o),sessionStorage.removeItem(o),!0}catch(n){return!1}};r.webworkers=function(){return!!n.Worker};r.applicationcache=function(){return!!n.applicationCache};for(b in r)it(r,b)&&(p=b.toLowerCase(),u[p]=r[b](),g.push((u[p]?"":"no-")+p));return u.input||at(),u.addTest=function(n,t){if(typeof n=="object")for(var r in n)it(n,r)&&u.addTest(r,n[r]);else{if(n=n.toLowerCase(),u[n]!==i)return u;t=typeof t=="function"?t():t;typeof k!="undefined"&&k&&(s.className+=" "+(t?"":"no-")+n);u[n]=t}return u},l(""),ut=e=null,function(n,t){function v(n,t){var i=n.createElement("p"),r=n.getElementsByTagName("head")[0]||n.documentElement;return i.innerHTML="x<style>"+t+"<\/style>",r.insertBefore(i.lastChild,r.firstChild)}function s(){var n=r.elements;return typeof n=="string"?n.split(" "):n}function u(n){var t=a[n[l]];return t||(t={},o++,n[l]=o,a[o]=t),t}function h(n,r,f){if(r||(r=t),i)return r.createElement(n);f||(f=u(r));var e;return e=f.cache[n]?f.cache[n].cloneNode():b.test(n)?(f.cache[n]=f.createElem(n)).cloneNode():f.createElem(n),e.canHaveChildren&&!w.test(n)&&!e.tagUrn?f.frag.appendChild(e):e}function y(n,r){if(n||(n=t),i)return n.createDocumentFragment();r=r||u(n);for(var e=r.frag.cloneNode(),f=0,o=s(),h=o.length;f<h;f++)e.createElement(o[f]);return e}function p(n,t){t.cache||(t.cache={},t.createElem=n.createElement,t.createFrag=n.createDocumentFragment,t.frag=t.createFrag());n.createElement=function(i){return r.shivMethods?h(i,n,t):t.createElem(i)};n.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+s().join().replace(/[\w\-]+/g,function(n){return t.createElem(n),t.frag.createElement(n),'c("'+n+'")'})+");return n}")(r,t.frag)}function c(n){n||(n=t);var f=u(n);return r.shivCSS&&!e&&!f.hasCSS&&(f.hasCSS=!!v(n,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),i||p(n,f),n}var f=n.html5||{},w=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,b=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,e,l="_html5shiv",o=0,a={},i,r;(function(){try{var n=t.createElement("a");n.innerHTML="<xyz><\/xyz>";e="hidden"in n;i=n.childNodes.length==1||function(){t.createElement("a");var n=t.createDocumentFragment();return typeof n.cloneNode=="undefined"||typeof n.createDocumentFragment=="undefined"||typeof n.createElement=="undefined"}()}catch(r){e=!0;i=!0}})();r={elements:f.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:"3.7.0",shivCSS:f.shivCSS!==!1,supportsUnknownElements:i,shivMethods:f.shivMethods!==!1,type:"default",shivDocument:c,createElement:h,createDocumentFragment:y};n.html5=r;c(t)}(this,t),u._version="2.7.1",u._prefixes=v,u._domPrefixes=ot,u._cssomPrefixes=et,u.hasEvent=ht,u.testProp=function(n){return rt([n])},u.testAllProps=f,u.testStyles=w,s.className=s.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(k?" js "+g.join(" "):""),u}(this,this.document),function(n,t,i){function h(n){return"[object Function]"==y.call(n)}function c(n){return"string"==typeof n}function l(){}function w(n){return!n||"loaded"==n||"complete"==n||"uninitialized"==n}function e(){var n=a.shift();v=1;n?n.t?s(function(){("c"==n.t?u.injectCss:u.injectJs)(n.s,0,n.a,n.x,n.e,1)},0):(n(),e()):v=0}function ut(n,i,f,h,c,l,y){function k(t){if(!nt&&w(p.readyState)&&(tt.r=nt=1,!v&&e(),p.onload=p.onreadystatechange=null,t)){"img"!=n&&s(function(){g.removeChild(p)},50);for(var u in r[i])r[i].hasOwnProperty(u)&&r[i][u].onload()}}var y=y||u.errorTimeout,p=t.createElement(n),nt=0,b=0,tt={t:f,s:i,e:c,a:l,x:y};1===r[i]&&(b=1,r[i]=[]);"object"==n?p.data=i:(p.src=i,p.type=n);p.width=p.height="0";p.onerror=p.onload=p.onreadystatechange=function(){k.call(this,b)};a.splice(h,0,tt);"img"!=n&&(b||2===r[i]?(g.insertBefore(p,d?null:o),s(k,y)):r[i].push(p))}function ft(n,t,i,r,u){return v=0,t=t||"j",c(n)?ut("c"==t?et:nt,n,t,this.i++,i,r,u):(a.splice(this.i++,0,n),1==a.length&&e()),this}function b(){var n=u;return n.loader={load:ft,i:0},n}var f=t.documentElement,s=n.setTimeout,o=t.getElementsByTagName("script")[0],y={}.toString,a=[],v=0,k="MozAppearance"in f.style,d=k&&!!t.createRange().compareNode,g=d?f:o.parentNode,f=n.opera&&"[object Opera]"==y.call(n.opera),f=!!t.attachEvent&&!f,nt=k?"object":f?"script":"img",et=f?"script":nt,tt=Array.isArray||function(n){return"[object Array]"==y.call(n)},p=[],r={},it={timeout:function(n,t){return t.length&&(n.timeout=t[0]),n}},rt,u;u=function(n){function a(n){for(var n=n.split("!"),f=p.length,t=n.pop(),e=n.length,t={url:t,origUrl:t,prefixes:n},u,r,i=0;i<e;i++)r=n[i].split("="),(u=it[r.shift()])&&(t=u(t,r));for(i=0;i<f;i++)t=p[i](t);return t}function f(n,t,u,f,e){var o=a(n),s=o.autoCallback;o.url.split(".").pop().split("?").shift();o.bypass||(t&&(t=h(t)?t:t[n]||t[f]||t[n.split("/").pop().split("?")[0]]),o.instead?o.instead(n,t,u,f,e):(r[o.url]?o.noexec=!0:r[o.url]=1,u.load(o.url,o.forceCSS||!o.forceJS&&"css"==o.url.split(".").pop().split("?").shift()?"c":i,o.noexec,o.attrs,o.timeout),(h(t)||h(s))&&u.load(function(){b();t&&t(o.origUrl,e,f);s&&s(o.origUrl,e,f);r[o.url]=2})))}function s(n,t){function a(n,o){if(n){if(c(n))o||(i=function(){var n=[].slice.call(arguments);s.apply(this,n);u()}),f(n,i,t,0,e);else if(Object(n)===n)for(r in v=function(){var t=0,i;for(i in n)n.hasOwnProperty(i)&&t++;return t}(),n)n.hasOwnProperty(r)&&(!o&&!--v&&(h(i)?i=function(){var n=[].slice.call(arguments);s.apply(this,n);u()}:i[r]=function(n){return function(){var t=[].slice.call(arguments);n&&n.apply(this,t);u()}}(s[r])),f(n[r],i,t,r,e))}else o||u()}var e=!!n.test,o=n.load||n.both,i=n.callback||l,s=i,u=n.complete||l,v,r;a(e?n.yep:n.nope,!!o);o&&a(o)}var e,t,o=this.yepnope.loader;if(c(n))f(n,0,o,0);else if(tt(n))for(e=0;e<n.length;e++)t=n[e],c(t)?f(t,0,o,0):tt(t)?u(t):Object(t)===t&&s(t,o);else Object(n)===n&&s(n,o)};u.addPrefix=function(n,t){it[n]=t};u.addFilter=function(n){p.push(n)};u.errorTimeout=1e4;null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",rt=function(){t.removeEventListener("DOMContentLoaded",rt,0);t.readyState="complete"},0));n.yepnope=b();n.yepnope.executeStack=e;n.yepnope.injectJs=function(n,i,r,f,h,c){var a=t.createElement("script"),v,y,f=f||u.errorTimeout;a.src=n;for(y in r)a.setAttribute(y,r[y]);i=c?e:i||l;a.onreadystatechange=a.onload=function(){!v&&w(a.readyState)&&(v=1,i(),a.onload=a.onreadystatechange=null)};s(function(){v||(v=1,i(1))},f);h?a.onload():o.parentNode.insertBefore(a,o)};n.yepnope.injectCss=function(n,i,r,u,f,h){var u=t.createElement("link"),c,i=h?e:i||l;u.href=n;u.rel="stylesheet";u.type="text/css";for(c in r)u.setAttribute(c,r[c]);f||(o.parentNode.insertBefore(u,o),s(i,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},NewsLetter=NewsLetter||{},NewsLetter.Data={isBIPopupShown:!1,userBIPopupShown:!1,InterestList:$("#NewsLetter-InterestList").val(),CookieExpireDays:$("#NewsLetter-CookieExpireDays").val()===undefined?20:parseInt($("#NewsLetter-CookieExpireDays").val()),ClosedCookieExpireDays:$("#NewsLetter-ClosedCookieExpireDay").val()===undefined?20:parseInt($("#NewsLetter-ClosedCookieExpireDay").val()),NewLettersTermsandConditionsID:$("#NewsLetter-NewLettersTermsandConditionsID").val(),RevNewsLetterSignupEmailID:$("#NewsLetter-RevNewsLetterSignupEmailID").val(),RfvNewsLetterSignupEmailID:$("#NewsLetter-RfvNewsLetterSignupEmailID").val(),IntervalTime:$("#NewsLetter-IntervalTime").val()===undefined?"5000":$("#NewsLetter-IntervalTime").val(),HideBI:$("#NewsLetter-HideBI").val()===undefined?"True":$("#NewsLetter-HideBI").val(),CountryLabel:$("#NewsLetter-CountryLabel").val(),CountryID:$("#NewsLetter-CountryID").val(),AccTermsandConditionsID:$("#NewsLetter-AccTermsandConditionsID").val(),CreateAccountSignupNameID:$("#NewsLetter-CreateAccountSignupNameID").val(),CreateAccountSignupLastNameID:$("#NewsLetter-CreateAccountSignupLastNameID").val(),PasswordPopupID:$("#NewsLetter-PasswordPopupID").val(),ConfirmPasswordPopupID:$("#NewsLetter-ConfirmPasswordPopupID").val(),CreateAccountSignupEmailID:$("#NewsLetter-CreateAccountSignupEmailID").val(),fnNewsLetterSignupButtonClick:function(){var n;if(LoadModal(),Page_ClientValidate("NewsLetterNewsLetterSignup")){$.blockUI({message:'<div id="block-ui-loading"><ul class="bokeh"><li><\/li><li><\/li><li><\/li><\/ul><\/div>'});var t=$("#txtNewsLetterSignupEmail").val(),i=document.getElementById("hdfNewsLetterCurrentItemId").value,r=document.getElementById("hdfNewsLetterCountry").value,u=document.getElementById("hdfNewsLetterSiteURL").value;$.ajax({url:"/api/newslettersubscribeuser",contentType:"application/json; charset=utf-8",method:"POST",data:JSON.stringify({UserEmail:t,EmailPath:i,SiteURL:u,UserCountry:r,Language:currentLanguage,Interests:NewsLetter.Data.InterestList}),dataType:"json",success:function(n){if(n=="emailexist")document.getElementById("cvNewsLetterSignupEmailExist").style.display="block";else if(n=="savefailure")document.getElementById("pnlNewsLetterSignupThanks").style.display="none",document.getElementById("pnlNewsLetterSignupError").style.display="block";else{var i=NewsLetter.Data.CookieExpireDays,t=new Date;parseInt(i)>0?(t.setDate(t.getDate()+parseInt(i)),$.cookie("NewsLetterSubscribed",!0,{expires:t})):$.cookie("NewsLetterSubscribed",!0);n=="tripplannerexist"?(document.getElementById("pnlNewsLetterSignupForm").style.display="none",document.getElementById("pnlNewsLetterSignupThanks").style.display="block",$(".newsletter-modal").show(),setTimeout(function(){$("#bussiness-newslettermodal").length>0?($("#bussiness-newslettermodal").removeClass("business-modal visitdubai-modal"),$("#bussiness-newslettermodal").appendTo("#newsletter-normal"),$("#bussiness-newslettermodal").removeAttr("id"),NewsLetter.Data.isBIPopupShown=!1):$(".newsletter-modal").modal("hide")},5e3)):($("#bussiness-newslettermodal").length>0?($("#bussiness-newslettermodal").removeClass("business-modal visitdubai-modal"),$("#bussiness-newslettermodal").appendTo("#newsletter-normal"),$("#bussiness-newslettermodal").removeAttr("id"),NewsLetter.Data.isBIPopupShown=!1):$(".newsletter-modal").modal("hide"),showCreateAccountSubscribeModal())}$.unblockUI()},error:function(){$.unblockUI()}})}else $("#bussiness-newslettermodal").length>0&&(n=$("#bussiness-newslettermodal"),$("#bussiness-newslettermodal .form-wrap>span").is(":visible"))}},$(document).ready(function(){var n=NewsLetter.Data.IntervalTime;n==""&&(n=5e3);setInterval("showBINewsLetter()",parseInt(n))}),$("#"+NewsLetter.Data.NewLettersTermsandConditionsID).change(function(){$(this).is(":checked")&&(document.getElementById("cvNewLetterTermsandConditions").style.display="none")}),$(".newsletter-modal input").keydown(function(n){n.keyCode==13&&NewsLetter.Data.fnNewsLetterSignupButtonClick()}),userExist=!1,TransparentBookingWidget=TransparentBookingWidget||{},TransparentBookingWidget.Data={TbFromClientID:$("#TransparentBookingWidget-TbFromClientID").val(),AdultsID:$("#TransparentBookingWidget-AdultsID").val(),ChildrenID:$("#TransparentBookingWidget-ChildrenID").val(),InfantsID:$("#TransparentBookingWidget-InfantsID").val(),TbReturnDateID:$("#TransparentBookingWidget-TbReturnDateID").val(),TbDepartDateID:$("#TransparentBookingWidget-TbDepartDateID").val(),HdfCurrentbookingItemIdID:$("#TransparentBookingWidget-HdfCurrentbookingItemIdID").val(),CheckInID:$("#TransparentBookingWidget-CheckInID").val(),CheckOutID:$("#TransparentBookingWidget-CheckOutID").val(),GuestsID:$("#TransparentBookingWidget-GuestsID").val()},$(document).ready(function(){$("#"+TransparentBookingWidget.Data.TbFromClientID).autocomplete({serviceUrl:window.location.href,width:260,autoSelectFirst:!0,lookupLimit:6,minLength:1,triggerSelectOnValidInput:!1,paramName:"queryflightto",containerExtraClass:"booking-widget-page-suggestions"})}),$(document).ready(function(){if(TransparentBookingWidget.Data.TbFromClientID===undefined)return!1;$(".vertical-booking-widget .booking-widget-hotels .trip-datepicker").datepicker({dateFormat:"dd/mm/y",minDate:$(".vertical-booking-widget .booking-widget-hotels .check-in-datepicker").val()==""?0:$(".vertical-booking-widget .booking-widget-hotels .check-in-datepicker").val(),onSelect:function(){if($(this).hasClass("check-in-datepicker")){$(".vertical-booking-widget .booking-widget-hotels .check-out-datepicker").datepicker("destroy");$(".vertical-booking-widget .booking-widget-hotels .check-out-datepicker").val("").text("");var n=$(".vertical-booking-widget .booking-widget-hotels .check-in-datepicker").val().toString().split("/"),t=new Date(Number(n[2])+2e3,Number(n[1])-1,Number(n[0])+1);$(".vertical-booking-widget .booking-widget-hotels .check-out-datepicker").datepicker({dateFormat:"dd/mm/y",minDate:t})}}});$(".vertical-booking-widget .booking-widget-flights .trip-datepicker").datepicker({dateFormat:"dd/mm/y",minDate:$(".vertical-booking-widget .booking-widget-flights .check-in-datepicker").val()==""?0:$(".vertical-booking-widget .booking-widget-flights .check-in-datepicker").val(),onSelect:function(){if($(this).hasClass("check-in-datepicker")){$(".vertical-booking-widget .booking-widget-flights .check-out-datepicker").datepicker("destroy");$(".vertical-booking-widget .booking-widget-flights .check-out-datepicker").val("").text("");var n=$(".vertical-booking-widget .booking-widget-flights .check-in-datepicker").val().toString().split("/"),t=new Date(Number(n[2])+2e3,Number(n[1])-1,Number(n[0])+1);$(".vertical-booking-widget .booking-widget-flights .check-out-datepicker").datepicker({dateFormat:"dd/mm/y",minDate:t})}}});var t=$(".vertical-booking-widget .booking-widget-hotels").find(".banner-buttons-red"),n=$(".vertical-booking-widget .booking-widget-hotels").find(".trip-datepicker");t.on("click",function(){var t=0,i=/^(?:(?:31(\/)(?:0?[13578]|1[02]))\1|(?:(?:29|30)(\/)(?:0?[1,3-9]|1[0-2])\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:29(\/|-|\.)0?2\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\d|2[0-8])(\/|-|\.)(?:(?:0?[1-9])|(?:1[0-2]))\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$/;return n.removeClass("error"),n.each(function(){var n=this.value;i.test(n)||($(this).addClass("error"),t++)}),t>0?!1:void 0})}),$(document).ready(function(){$(window).width()<=740&&$(".vertical-booking-widget .trip-planner-event-tabs").removeClass("cf")}),i18n=window.i18n||{lightbox:{album:"Image %n of %t",close:"Close",next:"Next",prev:"Prev"}},window.i18n=i18n,window.matchMedia||(window.matchMedia=function(){"use strict";var t=window.styleMedia||window.media;if(!t){var n=document.createElement("style"),i=document.getElementsByTagName("script")[0],r=null;n.type="text/css";n.id="matchmediajs-test";i.parentNode.insertBefore(n,i);r="getComputedStyle"in window&&window.getComputedStyle(n,null)||n.currentStyle;t={matchMedium:function(t){var i="@media "+t+"{ #matchmediajs-test { width: 1px; } }";return n.styleSheet?n.styleSheet.cssText=i:n.textContent=i,r.width==="1px"}}}return function(n){return{matches:t.matchMedium(n||"all"),media:n||"all"}}}()),function(){if(window.matchMedia&&window.matchMedia("all").addListener)return!1;var t=window.matchMedia,u=t("only all").matches,i=!1,r=0,n=[],f=function(){clearTimeout(r);r=setTimeout(function(){for(var u,s,i=0,f=n.length;i<f;i++){var r=n[i].mql,e=n[i].listeners||[],o=t(r.media).matches;if(o!==r.matches)for(r.matches=o,u=0,s=e.length;u<s;u++)e[u].call(window,r)}},30)};window.matchMedia=function(r){var o=t(r),e=[],s=0;return o.addListener=function(t){u&&(i||(i=!0,window.addEventListener("resize",f,!0)),s===0&&(s=n.push({mql:o,listeners:e})),e.push(t))},o.removeListener=function(n){for(var t=0,i=e.length;t<i;t++)e[t]===n&&e.splice(t,1)},o}}(),function(n,t,i){var r=t.matchMedia;"undefined"!=typeof module&&module.exports?module.exports=i(r):"function"==typeof define&&define.amd?define(function(){return t[n]=i(r)}):t[n]=i(r)}("enquire",this,function(n){"use strict";function t(n,t){var r,i=0,u=n.length;for(i;u>i&&(r=t(n[i],i),r!==!1);i++);}function f(n){return"[object Array]"===Object.prototype.toString.apply(n)}function e(n){return"function"==typeof n}function i(n){this.options=n;n.deferSetup||this.setup()}function r(t,i){this.query=t;this.isUnconditional=i;this.handlers=[];this.mql=n(t);var r=this;this.listener=function(n){r.mql=n;r.assess()};this.mql.addListener(this.listener)}function u(){if(!n)throw Error("matchMedia not present, legacy browsers require a polyfill");this.queries={};this.browserIsIncapable=!n("only all").matches}return i.prototype={setup:function(){this.options.setup&&this.options.setup();this.initialised=!0},on:function(){this.initialised||this.setup();this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(n){return this.options===n||this.options.match===n}},r.prototype={addHandler:function(n){var t=new i(n);this.handlers.push(t);this.matches()&&t.on()},removeHandler:function(n){var i=this.handlers;t(i,function(t,r){if(t.equals(n))return(t.destroy(),!i.splice(r,1))})},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){t(this.handlers,function(n){n.destroy()});this.mql.removeListener(this.listener);this.handlers.length=0},assess:function(){var n=this.matches()?"on":"off";t(this.handlers,function(t){t[n]()})}},u.prototype={register:function(n,i,u){var o=this.queries,s=u&&this.browserIsIncapable;return o[n]||(o[n]=new r(n,s)),e(i)&&(i={match:i}),f(i)||(i=[i]),t(i,function(t){o[n].addHandler(t)}),this},unregister:function(n,t){var i=this.queries[n];return i&&(t?i.removeHandler(t):(i.clear(),delete this.queries[n])),this}},new u}),function(n){function t(t,r,f,o,s){function b(){var n,t;c.unbind("webkitTransitionEnd transitionend otransitionend oTransitionEnd");r&&i(r,f,o,s);s.startOrder=[];s.newOrder=[];s.origSort=[];s.checkSort=[];k.removeStyle(s.prefix+"filter, filter, "+s.prefix+"transform, transform, opacity, display").css(s.clean).removeAttr("data-checksum");window.atob||k.css({display:"none",opacity:"0"});n=s.resizeContainer?"height":"";c.removeStyle(s.prefix+"transition, transition, "+s.prefix+"perspective, perspective, "+s.prefix+"perspective-origin, perspective-origin, "+n);s.layoutMode=="list"?(l.css({display:s.targetDisplayList,opacity:"1"}),s.origDisplay=s.targetDisplayList):(l.css({display:s.targetDisplayGrid,opacity:"1"}),s.origDisplay=s.targetDisplayGrid);s.origLayout=s.layoutMode;t=setTimeout(function(){if(k.removeStyle(s.prefix+"transition, transition"),s.mixing=!1,typeof s.onMixEnd=="function"){var n=s.onMixEnd.call(this,s);s=n?n:s}})}var rt,a,g,k,c,nt,it,tt,y,ut;for(clearInterval(s.failsafe),s.mixing=!0,s.filter=t,typeof s.onMixStart=="function"&&(rt=s.onMixStart.call(this,s),s=rt?rt:s),a=s.transitionSpeed,tt=0;tt<2;tt++)y=tt==0?y=s.prefix:"",s.transition[y+"transition"]="all "+a+"ms linear",s.transition[y+"transform"]=y+"translate3d(0,0,0)",s.perspective[y+"perspective"]=s.perspectiveDistance+"px",s.perspective[y+"perspective-origin"]=s.perspectiveOrigin;g=s.targetSelector;k=o.find(g);k.each(function(){this.data={}});c=k.parent();c.css(s.perspective);s.easingFallback="ease-in-out";s.easing=="smooth"&&(s.easing="cubic-bezier(0.25, 0.46, 0.45, 0.94)");s.easing=="snap"&&(s.easing="cubic-bezier(0.77, 0, 0.175, 1)");s.easing=="windback"&&(s.easing="cubic-bezier(0.175, 0.885, 0.320, 1.275)",s.easingFallback="cubic-bezier(0.175, 0.885, 0.320, 1)");s.easing=="windup"&&(s.easing="cubic-bezier(0.6, -0.28, 0.735, 0.045)",s.easingFallback="cubic-bezier(0.6, 0.28, 0.735, 0.045)");nt=s.layoutMode=="list"&&s.listEffects!=null?s.listEffects:s.effects;Array.prototype.indexOf&&(s.fade=nt.indexOf("fade")>-1?"0":"",s.scale=nt.indexOf("scale")>-1?"scale(.01)":"",s.rotateZ=nt.indexOf("rotateZ")>-1?"rotate(180deg)":"",s.rotateY=nt.indexOf("rotateY")>-1?"rotateY(90deg)":"",s.rotateX=nt.indexOf("rotateX")>-1?"rotateX(90deg)":"",s.blur=nt.indexOf("blur")>-1?"blur(8px)":"",s.grayscale=nt.indexOf("grayscale")>-1?"grayscale(100%)":"");var l=n(),p=n(),w=[],ft=!1;typeof t=="string"?w=u(t):(ft=!0,n.each(t,function(n){w[n]=u(this)}));s.filterLogic=="or"?(w[0]==""&&w.shift(),w.length<1?p=p.add(o.find(g+":visible")):k.each(function(){var t=n(this),i;ft?(i=0,n.each(w,function(){this.length?t.is("."+this.join(", ."))&&i++:i>0&&i++}),i==w.length?l=l.add(t):p=p.add(t)):t.is("."+w.join(", ."))?l=l.add(t):p=p.add(t)})):(l=l.add(c.find(g+"."+w.join("."))),p=p.add(c.find(g+":not(."+w.join(".")+"):visible")));var et=l.length,d=n(),v=n(),h=n();if(p.each(function(){var t=n(this);t.css("display")!="none"&&(d=d.add(t),h=h.add(t))}),l.filter(":visible").length==et&&!d.length&&!r){if(s.origLayout==s.layoutMode)return b(),!1;if(l.length==1)return s.layoutMode=="list"?(o.addClass(s.listClass),o.removeClass(s.gridClass),h.css("display",s.targetDisplayList)):(o.addClass(s.gridClass),o.removeClass(s.listClass),h.css("display",s.targetDisplayGrid)),b(),!1}if(s.origHeight=c.height(),l.length){if(o.removeClass(s.failClass),l.each(function(){var t=n(this);t.css("display")=="none"?v=v.add(t):h=h.add(t)}),s.origLayout!=s.layoutMode&&s.animateGridList==!1)return s.layoutMode=="list"?(o.addClass(s.listClass),o.removeClass(s.gridClass),h.css("display",s.targetDisplayList)):(o.addClass(s.gridClass),o.removeClass(s.listClass),h.css("display",s.targetDisplayGrid)),b(),!1;if(!window.atob||(k.css(s.clean),h.each(function(){this.data.origPos=n(this).offset()}),s.layoutMode=="list"?(o.addClass(s.listClass),o.removeClass(s.gridClass),v.css("display",s.targetDisplayList)):(o.addClass(s.gridClass),o.removeClass(s.listClass),v.css("display",s.targetDisplayGrid)),v.each(function(){this.data.showInterPos=n(this).offset()}),d.each(function(){this.data.hideInterPos=n(this).offset()}),h.each(function(){this.data.preInterPos=n(this).offset()}),s.layoutMode=="list"?h.css("display",s.targetDisplayList):h.css("display",s.targetDisplayGrid),r&&i(r,f,o,s),r&&e(s.origSort,s.checkSort)))return b(),!1;for(d.hide(),v.each(function(){this.data.finalPos=n(this).offset()}),h.each(function(){this.data.finalPrePos=n(this).offset()}),s.newHeight=c.height(),r&&i("reset",null,o,s),v.hide(),h.css("display",s.origDisplay),s.origDisplay=="block"?(o.addClass(s.listClass),v.css("display",s.targetDisplayList)):(o.removeClass(s.listClass),v.css("display",s.targetDisplayGrid)),s.resizeContainer&&c.css("height",s.origHeight+"px"),it={},tt=0;tt<2;tt++)y=tt==0?y=s.prefix:"",it[y+"transform"]=s.scale+" "+s.rotateX+" "+s.rotateY+" "+s.rotateZ,it[y+"filter"]=s.blur+" "+s.grayscale;v.css(it);h.each(function(){var t=this.data,f=n(this),r,i,u;for(f.hasClass("mix_tohide")?(t.preTX=t.origPos.left-t.hideInterPos.left,t.preTY=t.origPos.top-t.hideInterPos.top):(t.preTX=t.origPos.left-t.preInterPos.left,t.preTY=t.origPos.top-t.preInterPos.top),r={},i=0;i<2;i++)u=i==0?u=s.prefix:"",r[u+"transform"]="translate("+t.preTX+"px,"+t.preTY+"px)";f.css(r)});s.layoutMode=="list"?(o.addClass(s.listClass),o.removeClass(s.gridClass)):(o.addClass(s.gridClass),o.removeClass(s.listClass));ut=setTimeout(function(){var u,r,i,t;if(s.resizeContainer){for(u={},i=0;i<2;i++)t=i==0?t=s.prefix:"",u[t+"transition"]="all "+a+"ms ease-in-out",u.height=s.newHeight+"px";c.css(u)}for(d.css("opacity",s.fade),v.css("opacity",1),v.each(function(){var i=this.data,r,u,t;for(i.tX=i.finalPos.left-i.showInterPos.left,i.tY=i.finalPos.top-i.showInterPos.top,r={},u=0;u<2;u++)t=u==0?t=s.prefix:"",r[t+"transition-property"]=t+"transform, "+t+"filter, opacity",r[t+"transition-timing-function"]=s.easing+", linear, linear",r[t+"transition-duration"]=a+"ms",r[t+"transition-delay"]="0",r[t+"transform"]="translate("+i.tX+"px,"+i.tY+"px)",r[t+"filter"]="none";n(this).css("-webkit-transition","all "+a+"ms "+s.easingFallback).css(r)}),h.each(function(){var t=this.data,i,r,u;for(t.tX=t.finalPrePos.left!=0?t.finalPrePos.left-t.preInterPos.left:0,t.tY=t.finalPrePos.left!=0?t.finalPrePos.top-t.preInterPos.top:0,i={},r=0;r<2;r++)u=r==0?u=s.prefix:"",i[u+"transition"]="all "+a+"ms "+s.easing,i[u+"transform"]="translate("+t.tX+"px,"+t.tY+"px)";n(this).css("-webkit-transition","all "+a+"ms "+s.easingFallback).css(i)}),r={},i=0;i<2;i++)t=i==0?t=s.prefix:"",r[t+"transition"]="all "+a+"ms "+s.easing+", "+t+"filter "+a+"ms linear, opacity "+a+"ms linear",r[t+"transform"]=s.scale+" "+s.rotateX+" "+s.rotateY+" "+s.rotateZ,r[t+"filter"]=s.blur+" "+s.grayscale,r.opacity=s.fade;d.css(r);c.bind("webkitTransitionEnd transitionend otransitionend oTransitionEnd",function(t){(t.originalEvent.propertyName.indexOf("transform")>-1||t.originalEvent.propertyName.indexOf("opacity")>-1)&&(g.indexOf(".")>-1?n(t.target).hasClass(g.replace(".",""))&&b():n(t.target).is(g)&&b())})},10);s.failsafe=setTimeout(function(){s.mixing&&b()},a+400)}else{if(s.resizeContainer&&c.css("height",s.origHeight+"px"),!window.atob)return b(),!1;d=p;ut=setTimeout(function(){var r,u,i,n,t;if(c.css(s.perspective),s.resizeContainer){for(r={},n=0;n<2;n++)t=n==0?t=s.prefix:"",r[t+"transition"]="height "+a+"ms ease-in-out",r.height=s.minHeight+"px";c.css(r)}if(k.css(s.transition),u=p.length,u){for(i={},n=0;n<2;n++)t=n==0?t=s.prefix:"",i[t+"transform"]=s.scale+" "+s.rotateX+" "+s.rotateY+" "+s.rotateZ,i[t+"filter"]=s.blur+" "+s.grayscale,i.opacity=s.fade;d.css(i);c.bind("webkitTransitionEnd transitionend otransitionend oTransitionEnd",function(n){(n.originalEvent.propertyName.indexOf("transform")>-1||n.originalEvent.propertyName.indexOf("opacity")>-1)&&(o.addClass(s.failClass),b())})}else s.mixing=!1},10)}}function i(t,i,r,u){function o(n,i){var r=isNaN(n.attr(t)*1)?n.attr(t).toLowerCase():n.attr(t)*1,u=isNaN(i.attr(t)*1)?i.attr(t).toLowerCase():i.attr(t)*1;return r<u?-1:r>u?1:0}function e(n){i=="asc"?f.prepend(n).prepend(" "):f.append(n).append(" ")}function s(n){for(var t=n.slice(),u=t.length,i=u,r,f;i--;)r=parseInt(Math.random()*u),f=t[i],t[i]=t[r],t[r]=f;return t}r.find(u.targetSelector).wrapAll('<div class="mix_sorter"/>');var f=r.find(".mix_sorter");if(u.origSort.length||f.find(u.targetSelector+":visible").each(function(){n(this).wrap("<s/>");u.origSort.push(n(this).parent().html().replace(/\s+/g,""));n(this).unwrap()}),f.empty(),t=="reset")n.each(u.startOrder,function(){f.append(this).append(" ")});else if(t=="default")n.each(u.origOrder,function(){e(this)});else if(t=="random")u.newOrder.length||(u.newOrder=s(u.startOrder)),n.each(u.newOrder,function(){f.append(this).append(" ")});else if(t=="custom")n.each(i,function(){e(this)});else{if(typeof u.origOrder[0].attr(t)=="undefined")return console.log("No such attribute found. Terminating"),!1;u.newOrder.length||(n.each(u.origOrder,function(){u.newOrder.push(n(this))}),u.newOrder.sort(o));n.each(u.newOrder,function(){e(this)})}u.checkSort=[];f.find(u.targetSelector+":visible").each(function(t){var i=n(this);t==0&&i.attr("data-checksum","1");i.wrap("<s/>");u.checkSort.push(i.parent().html().replace(/\s+/g,""));i.unwrap()});r.find(u.targetSelector).unwrap()}function f(n){for(var i=["Webkit","Moz","O","ms"],t=0;t<i.length;t++)if(i[t]+"Transition"in n.style)return i[t];return"transition"in n.style?"":!1}function e(n,t){if(n.length!=t.length)return!1;for(var i=0;i<t.length;i++)if(n[i].compare&&!n[i].compare(t[i])||n[i]!==t[i])return!1;return!0}function u(t){t=t.replace(/\s{2,}/g," ");var i=t.split(" ");return n.each(i,function(n){this=="all"&&(i[n]="mix_all")}),i[0]==""&&i.shift(),i}var r={init:function(r){return this.each(function(){var v=window.navigator.appVersion.match(/Chrome\/(\d+)\./),l=v?parseInt(v[1],10):!1,p=function(t){var i=n(t)[0],u=i.parentElement,r=document.createElement("div"),f=document.createDocumentFragment();u.insertBefore(r,i);f.appendChild(i);u.replaceChild(i,r);f=null;r=null},u,e,a,y,o,s,c,h,w;for((l&&l==31||l==32)&&p(this),u={targetSelector:".mix",filterSelector:".filter",sortSelector:".sort",buttonEvent:"click",effects:["fade","scale"],listEffects:null,easing:"smooth",layoutMode:"grid",targetDisplayGrid:"inline-block",targetDisplayList:"block",listClass:"",gridClass:"",transitionSpeed:600,showOnLoad:"all",sortOnLoad:!1,multiFilter:!1,filterLogic:"or",resizeContainer:!0,minHeight:0,failClass:"fail",perspectiveDistance:"3000",perspectiveOrigin:"50% 50%",animateGridList:!0,onMixLoad:null,onMixStart:null,onMixEnd:null,container:null,origOrder:[],startOrder:[],newOrder:[],origSort:[],checkSort:[],filter:"",mixing:!1,origDisplay:"",origLayout:"",origHeight:0,newHeight:0,isTouch:!1,resetDelay:0,failsafe:null,prefix:"",easingFallback:"ease-in-out",transition:{},perspective:{},clean:{},fade:"1",scale:"",rotateX:"",rotateY:"",rotateZ:"",blur:"",grayscale:""},r&&n.extend(u,r),this.config=u,n.support.touch=("ontouchend"in document),n.support.touch&&(u.isTouch=!0,u.resetDelay=350),u.container=n(this),e=u.container,u.prefix=f(e[0]),u.prefix=u.prefix?"-"+u.prefix.toLowerCase()+"-":"",e.find(u.targetSelector).each(function(){u.origOrder.push(n(this))}),u.sortOnLoad&&(n.isArray(u.sortOnLoad)?(a=u.sortOnLoad[0],y=u.sortOnLoad[1],n(u.sortSelector+"[data-sort="+u.sortOnLoad[0]+"][data-order="+u.sortOnLoad[1]+"]").addClass("active")):(n(u.sortSelector+"[data-sort="+u.sortOnLoad+"]").addClass("active"),a=u.sortOnLoad,u.sortOnLoad="desc"),i(a,y,e,u)),o=0;o<2;o++)s=o==0?s=u.prefix:"",u.transition[s+"transition"]="all "+u.transitionSpeed+"ms ease-in-out",u.perspective[s+"perspective"]=u.perspectiveDistance+"px",u.perspective[s+"perspective-origin"]=u.perspectiveOrigin;for(o=0;o<2;o++)s=o==0?s=u.prefix:"",u.clean[s+"transition"]="none";u.layoutMode=="list"?(e.addClass(u.listClass),u.origDisplay=u.targetDisplayList):(e.addClass(u.gridClass),u.origDisplay=u.targetDisplayGrid);u.origLayout=u.layoutMode;c=u.showOnLoad.split(" ");n.each(c,function(){n(u.filterSelector+'[data-filter="'+this+'"]').addClass("active")});e.find(u.targetSelector).addClass("mix_all");c[0]=="all"&&(c[0]="mix_all",u.showOnLoad="mix_all");h=n();n.each(c,function(){h=h.add(n("."+this))});h.each(function(){var t=n(this);u.layoutMode=="list"?t.css("display",u.targetDisplayList):t.css("display",u.targetDisplayGrid);t.css(u.transition)});w=setTimeout(function(){u.mixing=!0;h.css("opacity","1");var n=setTimeout(function(){if(u.layoutMode=="list"?h.removeStyle(u.prefix+"transition, transition").css({display:u.targetDisplayList,opacity:1}):h.removeStyle(u.prefix+"transition, transition").css({display:u.targetDisplayGrid,opacity:1}),u.mixing=!1,typeof u.onMixLoad=="function"){var n=u.onMixLoad.call(this,u);u=n?n:u}},u.transitionSpeed)},10);u.filter=u.showOnLoad;n(u.sortSelector).bind(u.buttonEvent,function(){if(!u.mixing){var i=n(this),r=i.attr("data-sort"),f=i.attr("data-order");if(i.hasClass("active")){if(r!="random")return!1}else n(u.sortSelector).removeClass("active"),i.addClass("active");e.find(u.targetSelector).each(function(){u.startOrder.push(n(this))});t(u.filter,r,f,e,u)}});n(u.filterSelector).bind(u.buttonEvent,function(){var i,r,f;u.mixing||(i=n(this),u.multiFilter==!1?(n(u.filterSelector).removeClass("active"),i.addClass("active"),u.filter=i.attr("data-filter"),n(u.filterSelector+'[data-filter="'+u.filter+'"]').addClass("active")):(r=i.attr("data-filter"),i.hasClass("active")?(i.removeClass("active"),f=new RegExp("(\\s|^)"+r),u.filter=u.filter.replace(f,"")):(i.addClass("active"),u.filter=u.filter+" "+r)),t(u.filter,null,null,e,u))})})},toGrid:function(){return this.each(function(){var i=this.config;i.layoutMode!="grid"&&(i.layoutMode="grid",t(i.filter,null,null,n(this),i))})},toList:function(){return this.each(function(){var i=this.config;i.layoutMode!="list"&&(i.layoutMode="list",t(i.filter,null,null,n(this),i))})},filter:function(i){return this.each(function(){var r=this.config;r.mixing||(n(r.filterSelector).removeClass("active"),n(r.filterSelector+'[data-filter="'+i+'"]').addClass("active"),t(i,null,null,n(this),r))})},sort:function(i){return this.each(function(){var r=this.config,e=n(this),u,f;r.mixing||(n(r.sortSelector).removeClass("active"),n.isArray(i)?(u=i[0],f=i[1],n(r.sortSelector+'[data-sort="'+i[0]+'"][data-order="'+i[1]+'"]').addClass("active")):(n(r.sortSelector+'[data-sort="'+i+'"]').addClass("active"),u=i,f="desc"),e.find(r.targetSelector).each(function(){r.startOrder.push(n(this))}),t(r.filter,u,f,e,r))})},multimix:function(i){return this.each(function(){var r=this.config,u=n(this);multiOut={filter:r.filter,sort:null,order:"desc",layoutMode:r.layoutMode};n.extend(multiOut,i);r.mixing||(n(r.filterSelector).add(r.sortSelector).removeClass("active"),n(r.filterSelector+'[data-filter="'+multiOut.filter+'"]').addClass("active"),typeof multiOut.sort!="undefined"&&(n(r.sortSelector+'[data-sort="'+multiOut.sort+'"][data-order="'+multiOut.order+'"]').addClass("active"),u.find(r.targetSelector).each(function(){r.startOrder.push(n(this))})),r.layoutMode=multiOut.layoutMode,t(multiOut.filter,multiOut.sort,multiOut.order,u,r))})},remix:function(i){return this.each(function(){var r=this.config,u=n(this);r.origOrder=[];u.find(r.targetSelector).each(function(){var t=n(this);t.addClass("mix_all");r.origOrder.push(t)});r.mixing||typeof i=="undefined"||(n(r.filterSelector).removeClass("active"),n(r.filterSelector+'[data-filter="'+i+'"]').addClass("active"),t(i,null,null,u,r))})}};n.fn.mixitup=function(n){return r[n]?r[n].apply(this,Array.prototype.slice.call(arguments,1)):typeof n=="object"||!n?r.init.apply(this,arguments):void 0};n.fn.removeStyle=function(t){return this.each(function(){var r=n(this),i;t=t.replace(/\s+/g,"");i=t.split(",");n.each(i,function(){var n=new RegExp(this.toString()+"[^;]+;?","g");r.attr("style",function(t,i){if(i)return i.replace(n,"")})})})}}(jQuery),function(n){"use strict";typeof define=="function"&&define.amd?define(["jquery"],n):typeof exports=="object"&&typeof require=="function"?n(require("jquery")):n(jQuery)}(function(n){"use strict";function i(t,r){var f=n.noop,u=this,e={ajaxSettings:{},autoSelectFirst:!1,appendTo:document.body,serviceUrl:null,lookup:null,onSelect:null,width:"auto",minChars:1,maxHeight:300,deferRequestBy:0,params:{},formatResult:i.formatResult,delimiter:null,zIndex:9999,type:"GET",noCache:!1,onSearchStart:f,onSearchComplete:f,onSearchError:f,preserveInput:!1,containerClass:"autocomplete-suggestions",containerExtraClass:"",tabDisabled:!1,dataType:"text",currentRequest:null,triggerSelectOnValidInput:!0,preventBadQueries:!0,lookupFilter:function(n,t,i){return n.value.toLowerCase().indexOf(i)!==-1},paramName:"query",transformResult:function(t){return typeof t=="string"?n.parseJSON(t):t},showNoSuggestionNotice:!1,noSuggestionNotice:"No results",orientation:"bottom",forceFixPosition:!1};u.element=t;u.el=n(t);u.suggestions=[];u.badQueries=[];u.selectedIndex=-1;u.currentValue=u.element.value;u.intervalId=0;u.cachedResponse={};u.onChangeInterval=null;u.onChange=null;u.isLocal=!1;u.suggestionsContainer=null;u.noSuggestionsContainer=null;u.options=n.extend({},e,r);u.classes={selected:"autocomplete-selected",suggestion:"autocomplete-suggestion"};u.hint=null;u.hintValue="";u.selection=null;u.initialize();u.setOptions(r)}var r=function(){return{escapeRegExChars:function(n){return n.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},createNode:function(n,t){var i=document.createElement("div");return i.className=n+" "+t,i.style.position="absolute",i.style.display="none",i}}}(),t={ESC:27,TAB:9,RETURN:13,LEFT:37,UP:38,RIGHT:39,DOWN:40};i.utils=r;n.Autocomplete=i;i.formatResult=function(n,t){if(!t)return n.value;var i="("+r.escapeRegExChars(t)+")";return n.value.replace(new RegExp(i,"gi"),"<strong>$1<\/strong>").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/&lt;(\/?strong)&gt;/g,"<$1>")};i.prototype={killerFn:null,initialize:function(){var t=this,f="."+t.classes.suggestion,e=t.classes.selected,u=t.options,r;t.element.setAttribute("autocomplete","off");t.killerFn=function(i){n(i.target).closest("."+t.options.containerClass).length||(t.killSuggestions(),t.disableKillerFn())};t.noSuggestionsContainer=n('<div class="autocomplete-no-suggestion"><\/div>').html(this.options.noSuggestionNotice).get(0);t.suggestionsContainer=i.utils.createNode(u.containerClass,u.containerExtraClass);r=n(t.suggestionsContainer);r.appendTo(u.appendTo);u.width!=="auto"&&r.css("width",u.width);r.on("mouseover.autocomplete",f,function(){t.activate(n(this).data("index"))});r.on("mouseout.autocomplete",function(){t.selectedIndex=-1;r.children("."+e).removeClass(e)});r.on("click.autocomplete",f,function(){return t.select(n(this).data("index")),!1});t.fixPositionCapture=function(){t.visible&&t.fixPosition()};n(window).on("resize.autocomplete",t.fixPositionCapture);t.el.on("keydown.autocomplete",function(n){t.onKeyPress(n)});t.el.on("keyup.autocomplete",function(n){t.onKeyUp(n)});t.el.on("blur.autocomplete",function(){t.onBlur()});t.el.on("focus.autocomplete",function(){t.onFocus()});t.el.on("change.autocomplete",function(n){t.onKeyUp(n)});t.el.on("input.autocomplete",function(n){t.onKeyUp(n)})},onFocus:function(){var n=this;n.fixPosition();n.el.val().length>=n.options.minChars&&n.onValueChange()},onBlur:function(){this.enableKillerFn()},abortAjax:function(){var n=this;n.currentRequest&&(n.currentRequest.abort(),n.currentRequest=null)},setOptions:function(t){var r=this,i=r.options;n.extend(i,t);r.isLocal=n.isArray(i.lookup);r.isLocal&&(i.lookup=r.verifySuggestionsFormat(i.lookup));i.orientation=r.validateOrientation(i.orientation,"bottom");n(r.suggestionsContainer).css({"max-height":i.maxHeight+"px",width:i.width+"px","z-index":i.zIndex})},clearCache:function(){this.cachedResponse={};this.badQueries=[]},clear:function(){this.clearCache();this.currentValue="";this.suggestions=[]},disable:function(){var n=this;n.disabled=!0;clearInterval(n.onChangeInterval);n.abortAjax()},enable:function(){this.disabled=!1},fixPosition:function(){var t=this,i=n(t.suggestionsContainer),s=i.parent().get(0),a,o;if(s===document.body||t.options.forceFixPosition){var f=t.options.orientation,e=i.outerHeight(),h=t.el.outerHeight(),u=t.el.offset(),r={top:u.top,left:u.left};if(f==="auto"){var v=n(window).height(),c=n(window).scrollTop(),l=-c+u.top-e,y=c+v-(u.top+h+e);f=Math.max(l,y)===l?"top":"bottom"}r.top+=f==="top"?-e:h;s!==document.body&&(a=i.css("opacity"),t.visible||i.css("opacity",0).show(),o=i.offsetParent().offset(),r.top-=o.top,r.left-=o.left,t.visible||i.css("opacity",a).hide());t.options.width==="auto"&&(r.width=t.el.outerWidth()+"px");i.css(r)}},enableKillerFn:function(){var t=this;n(document).on("click.autocomplete",t.killerFn)},disableKillerFn:function(){var t=this;n(document).off("click.autocomplete",t.killerFn)},killSuggestions:function(){var n=this;n.stopKillSuggestions();n.intervalId=window.setInterval(function(){n.visible&&(n.options.preserveInput||n.el.val(n.currentValue),n.hide());n.stopKillSuggestions()},50)},stopKillSuggestions:function(){window.clearInterval(this.intervalId)},isCursorAtEnd:function(){var i=this,n=i.el.val().length,r=i.element.selectionStart,t;return typeof r=="number"?r===n:document.selection?(t=document.selection.createRange(),t.moveStart("character",-n),n===t.text.length):!0},onKeyPress:function(n){var i=this;if(!i.disabled&&!i.visible&&n.which===t.DOWN&&i.currentValue){i.suggest();return}if(!i.disabled&&i.visible){switch(n.which){case t.ESC:i.el.val(i.currentValue);i.hide();break;case t.RIGHT:if(i.hint&&i.options.onHint&&i.isCursorAtEnd()){i.selectHint();break}return;case t.TAB:if(i.hint&&i.options.onHint){i.selectHint();return}if(i.selectedIndex===-1){i.hide();return}if(i.select(i.selectedIndex),i.options.tabDisabled===!1)return;break;case t.RETURN:if(i.selectedIndex===-1){i.hide();return}i.select(i.selectedIndex);break;case t.UP:i.moveUp();break;case t.DOWN:i.moveDown();break;default:return}n.stopImmediatePropagation();n.preventDefault()}},onKeyUp:function(n){var i=this;if(!i.disabled){switch(n.which){case t.UP:case t.DOWN:return}clearInterval(i.onChangeInterval);i.currentValue!==i.el.val()&&(i.findBestHint(),i.options.deferRequestBy>0?i.onChangeInterval=setInterval(function(){i.onValueChange()},i.options.deferRequestBy):i.onValueChange())}},onValueChange:function(){var t=this,r=t.options,u=t.el.val(),i=t.getQuery(u);if(t.selection&&t.currentValue!==i&&(t.selection=null,(r.onInvalidateSelection||n.noop).call(t.element)),clearInterval(t.onChangeInterval),t.currentValue=u,t.selectedIndex=-1,r.triggerSelectOnValidInput&&t.isExactMatch(i)){t.select(0);return}i.length<r.minChars?t.hide():t.getSuggestions(i)},isExactMatch:function(n){var t=this.suggestions;return t.length===1&&t[0].value.toLowerCase()===n.toLowerCase()},getQuery:function(t){var r=this.options.delimiter,i;return r?(i=t.split(r),n.trim(i[i.length-1])):t},getSuggestionsLocal:function(t){var f=this,r=f.options,e=t.toLowerCase(),o=r.lookupFilter,u=parseInt(r.lookupLimit,10),i;return i={suggestions:n.grep(r.lookup,function(n){return o(n,t,e)})},u&&i.suggestions.length>u&&(i.suggestions=i.suggestions.slice(0,u)),i},getSuggestions:function(t){var u,i=this,r=i.options,f=r.serviceUrl,e,o,s;if(r.params[r.paramName]=t,e=r.ignoreParams?null:r.params,r.onSearchStart.call(i.element,r.params)!==!1){if(n.isFunction(r.lookup)){r.lookup(t,function(n){i.suggestions=n.suggestions;i.suggest();r.onSearchComplete.call(i.element,t,n.suggestions)});return}i.isLocal?u=i.getSuggestionsLocal(t):(n.isFunction(f)&&(f=f.call(i.element,t)),o=f+"?"+n.param(e||{}),u=i.cachedResponse[o]);u&&n.isArray(u.suggestions)?(i.suggestions=u.suggestions,i.suggest(),r.onSearchComplete.call(i.element,t,u.suggestions)):i.isBadQuery(t)?r.onSearchComplete.call(i.element,t,[]):(i.abortAjax(),s={url:f,data:e,type:r.type,dataType:r.dataType},n.extend(s,r.ajaxSettings),i.currentRequest=n.ajax(s).done(function(n){var u;i.currentRequest=null;u=r.transformResult(n,t);i.processResponse(u,t,o);r.onSearchComplete.call(i.element,t,u.suggestions)}).fail(function(n,u,f){r.onSearchError.call(i.element,t,n,u,f)}))}},isBadQuery:function(n){if(!this.options.preventBadQueries)return!1;for(var t=this.badQueries,i=t.length;i--;)if(n.indexOf(t[i])===0)return!0;return!1},hide:function(){var t=this,i=n(t.suggestionsContainer);n.isFunction(t.options.onHide)&&t.visible&&t.options.onHide.call(t.element,i);t.visible=!1;t.selectedIndex=-1;clearInterval(t.onChangeInterval);n(t.suggestionsContainer).hide();t.signalHint(null)},suggest:function(){if(!this.suggestions.length){this.options.showNoSuggestionNotice?this.noSuggestions():this.hide();return}var t=this,i=t.options,o=i.groupBy,c=i.formatResult,u=t.getQuery(t.currentValue),s=t.classes.suggestion,l=t.classes.selected,r=n(t.suggestionsContainer),a=n(t.noSuggestionsContainer),h=i.beforeRender,f="",e,v=function(n){var t=n.data[o];return e===t?"":(e=t,'<div class="autocomplete-group"><strong>'+e+"<\/strong><\/div>")};if(i.triggerSelectOnValidInput&&t.isExactMatch(u)){t.select(0);return}n.each(t.suggestions,function(n,t){o&&(f+=v(t,u,n));f+='<div class="'+s+'" data-index="'+n+'">'+c(t,u,n)+"<\/div>"});this.adjustContainerWidth();a.detach();r.html(f);n.isFunction(h)&&h.call(t.element,r,t.suggestions);t.fixPosition();r.show();i.autoSelectFirst&&(t.selectedIndex=0,r.scrollTop(0),r.children("."+s).first().addClass(l));t.visible=!0;t.findBestHint()},noSuggestions:function(){var t=this,i=n(t.suggestionsContainer),r=n(t.noSuggestionsContainer);this.adjustContainerWidth();r.detach();i.empty();i.append(r);t.fixPosition();i.show();t.visible=!0},adjustContainerWidth:function(){var t=this,r=t.options,i,u=n(t.suggestionsContainer);r.width==="auto"&&(i=t.el.outerWidth(),u.css("width",i>0?i:300))},findBestHint:function(){var t=this,i=t.el.val().toLowerCase(),r=null;i&&(n.each(t.suggestions,function(n,t){var u=t.value.toLowerCase().indexOf(i)===0;return u&&(r=t),!u}),t.signalHint(r))},signalHint:function(t){var r="",i=this;t&&(r=i.currentValue+t.value.substr(i.currentValue.length));i.hintValue!==r&&(i.hintValue=r,i.hint=t,(this.options.onHint||n.noop)(r))},verifySuggestionsFormat:function(t){return t.length&&typeof t[0]=="string"?n.map(t,function(n){return{value:n,data:null}}):t},validateOrientation:function(t,i){return t=n.trim(t||"").toLowerCase(),n.inArray(t,["auto","bottom","top"])===-1&&(t=i),t},processResponse:function(n,t,i){var r=this,u=r.options;(n.suggestions=r.verifySuggestionsFormat(n.suggestions),u.noCache||(r.cachedResponse[i]=n,u.preventBadQueries&&!n.suggestions.length&&r.badQueries.push(t)),t===r.getQuery(r.currentValue))&&(r.suggestions=n.suggestions,r.suggest())},activate:function(t){var i=this,r,u=i.classes.selected,f=n(i.suggestionsContainer),e=f.find("."+i.classes.suggestion);return(f.find("."+u).removeClass(u),i.selectedIndex=t,i.selectedIndex!==-1&&e.length>i.selectedIndex)?(r=e.get(i.selectedIndex),n(r).addClass(u),r):null},selectHint:function(){var t=this,i=n.inArray(t.hint,t.suggestions);t.select(i)},select:function(n){var t=this;t.hide();t.onSelect(n);t.disableKillerFn()},moveUp:function(){var t=this;if(t.selectedIndex!==-1){if(t.selectedIndex===0){n(t.suggestionsContainer).children().first().removeClass(t.classes.selected);t.selectedIndex=-1;t.el.val(t.currentValue);t.findBestHint();return}t.adjustScroll(t.selectedIndex-1)}},moveDown:function(){var n=this;n.selectedIndex!==n.suggestions.length-1&&n.adjustScroll(n.selectedIndex+1)},adjustScroll:function(t){var i=this,u=i.activate(t),r,f,o,e;u&&(e=n(u).outerHeight(),r=u.offsetTop,f=n(i.suggestionsContainer).scrollTop(),o=f+i.options.maxHeight-e,r<f?n(i.suggestionsContainer).scrollTop(r):r>o&&n(i.suggestionsContainer).scrollTop(r-i.options.maxHeight+e),i.options.preserveInput||i.el.val(i.getValue(i.suggestions[t].value)),i.signalHint(null))},onSelect:function(t){var i=this,u=i.options.onSelect,r=i.suggestions[t];i.currentValue=i.getValue(r.value);i.currentValue===i.el.val()||i.options.preserveInput||i.el.val(i.currentValue);i.signalHint(null);i.suggestions=[];i.selection=r;n.isFunction(u)&&u.call(i.element,r)},getValue:function(n){var r=this,u=r.options.delimiter,t,i;return u?(t=r.currentValue,i=t.split(u),i.length===1)?n:t.substr(0,t.length-i[i.length-1].length)+n:n},dispose:function(){var t=this;t.el.off(".autocomplete").removeData("autocomplete");t.disableKillerFn();n(window).off("resize.autocomplete",t.fixPositionCapture);n(t.suggestionsContainer).remove()}};n.fn.autocomplete=n.fn.devbridgeAutocomplete=function(t,r){var u="autocomplete";return arguments.length?this.each(function(){var e=n(this),f=e.data(u);typeof t=="string"?f&&typeof f[t]=="function"&&f[t](r):(f&&f.dispose&&f.dispose(),f=new i(this,t),e.data(u,f))}):this.first().data(u)}}),!function(n){var t=/MSIE [1-7]\./.test(navigator.userAgent),i=4;n.watermarker=function(){};n.extend(n.watermarker,{defaults:{color:"#999",left:0,top:0,fallback:!1,animDuration:300,minOpacity:.6},setDefaults:function(t){n.extend(n.watermarker.defaults,t)},checkVal:function(t,i){return 0===t.length?n(i).show():n(i).hide(),t.length>0},html5_support:function(){var n=document.createElement("input");return"placeholder"in n}});n.fn.watermark=function(r,u){var f;return u=n.extend({},n.watermarker.defaults,u),f=this.filter("textarea, input:not(:checkbox,:radio,:file,:submit,:reset)"),u.fallback&&n.watermarker.html5_support()?this:(f.each(function(){var f,h,v,s,e,c,l,o,a=0;f=n(this);c=f.attr("id");"processed"!==f.attr("data-jq-watermark")&&(h=void 0!==f.attr("placeholder")&&""!==f.attr("placeholder")?"placeholder":"title",v=void 0===r||""===r?n(this).attr(h):r,s=n('<span class="watermark_container"><\/span>'),e=n('<label class="watermark" for="'+c+'">'+v+"<\/label>"),"placeholder"===h&&f.removeAttr("placeholder"),s.css({display:"inline-block",position:"relative"}),"true"===f.attr("data-percent-width")&&s.css("width","100%"),"true"===f.attr("data-percent-height")&&s.css("height","100%"),t&&s.css({zoom:1,display:"inline"}),f.wrap(s).attr("data-jq-watermark","processed"),"textarea"===this.nodeName.toLowerCase()?(o=parseInt(f.css("line-height"),10),o="normal"===o?parseInt(f.css("font-size"),10):o,a="auto"!==f.css("padding-top")?parseInt(f.css("padding-top"),10):0):(o=f.outerHeight(),0>=o&&(o="auto"!==f.css("padding-top")?parseInt(f.css("padding-top"),10):0,o+="auto"!==f.css("padding-bottom")?parseInt(f.css("padding-bottom"),10):0,o+="auto"!==f.css("height")?parseInt(f.css("height"),10):0)),a+="auto"!==f.css("margin-top")?parseInt(f.css("margin-top"),10):0,l="auto"!==f.css("margin-left")?parseInt(f.css("margin-left"),10):0,l+="auto"!==f.css("padding-left")?parseInt(f.css("padding-left"),10):0,e.css({position:"absolute",display:"block",fontFamily:f.css("font-family"),fontSize:f.css("font-size"),color:u.color,left:i+u.left+l,top:u.top+a,height:o,lineHeight:o+"px",textAlign:"left",pointerEvents:"none"}),n.watermarker.checkVal(f.val(),e),c||e.data("jq_watermark_element",f).click(function(){n(n(this).data("jq_watermark_element")).trigger("click").trigger("focus")}),f.before(e).bind("focus.jq_watermark",function(){n.watermarker.checkVal(n(this).val(),e)||e.stop().fadeTo(u.animDuration,u.minOpacity)}).bind("blur.jq_watermark change.jq_watermark",function(){n.watermarker.checkVal(n(this).val(),e)||e.stop().fadeTo(u.animDuration,1)}).bind("keydown.jq_watermark, paste.jq_watermark",function(){n(e).hide()}).bind("keyup.jq_watermark",function(){n.watermarker.checkVal(n(this).val(),e)}))}),this)};n(function(){n(".jq_watermark").watermark()})}(jQuery),function(n,t){function r(t){n.fn.cycle.debug&&i(t)}function i(){window.console&&console.log&&console.log("[cycle] "+Array.prototype.join.call(arguments," "))}function u(t,i,r){var u=n(t).data("cycle.opts"),f;u&&(f=!!t.cyclePause,f&&u.paused?u.paused(t,u,i,r):!f&&u.resumed&&u.resumed(t,u,i,r))}function c(r,e,o){function h(t,r,u){if(!t&&!0===r){if(t=n(u).data("cycle.opts"),!t)return i("options not found, can not resume"),!1;u.cycleTimeout&&(clearTimeout(u.cycleTimeout),u.cycleTimeout=0);f(t.elements,t,1,!t.backwards)}}if(r.cycleStop===t&&(r.cycleStop=0),(e===t||null===e)&&(e={}),e.constructor==String)switch(e){case"destroy":case"stop":var s=n(r).data("cycle.opts");return s?(r.cycleStop++,r.cycleTimeout&&clearTimeout(r.cycleTimeout),r.cycleTimeout=0,s.elements&&n(s.elements).stop(),n(r).removeData("cycle.opts"),"destroy"==e&&l(r,s),!1):!1;case"toggle":return r.cyclePause=1===r.cyclePause?0:1,h(r.cyclePause,o,r),u(r),!1;case"pause":return r.cyclePause=1,u(r),!1;case"resume":return r.cyclePause=0,h(!1,o,r),u(r),!1;case"prev":case"next":return(s=n(r).data("cycle.opts"),!s)?(i('options not found, "prev/next" ignored'),!1):("string"==typeof o&&(s.oneTimeFx=o),n.fn.cycle[e](s),!1);default:e={fx:e}}else if(e.constructor==Number)return(s=e,e=n(r).data("cycle.opts"),!e)?(i("options not found, can not advance slide"),!1):0>s||s>=e.elements.length?(i("invalid slide index: "+s),!1):(e.nextSlide=s,r.cycleTimeout&&(clearTimeout(r.cycleTimeout),r.cycleTimeout=0),"string"==typeof o&&(e.oneTimeFx=o),f(e.elements,e,1,s>=e.currSlide),!1);return e}function o(t,i){if(!n.support.opacity&&i.cleartype&&t.style.filter)try{t.style.removeAttribute("filter")}catch(r){}}function l(t,i){i.next&&n(i.next).unbind(i.prevNextEvent);i.prev&&n(i.prev).unbind(i.prevNextEvent);(i.pager||i.pagerAnchorBuilder)&&n.each(i.pagerAnchors||[],function(){this.unbind().remove()});i.pagerAnchors=null;n(t).unbind("mouseenter.cycle mouseleave.cycle");i.destroy&&i.destroy(i)}function a(r,s,c,l,a){var k,b=n.extend({},n.fn.cycle.defaults,l||{},n.metadata?r.metadata():n.meta?r.data():{}),g=n.isFunction(r.data)?r.data(b.metaAttr):null,tt,d,it,et,ot;if(g&&(b=n.extend(b,g)),b.autostop&&(b.countdown=b.autostopCount||c.length),tt=r[0],r.data("cycle.opts",b),b.$cont=r,b.stopCount=tt.cycleStop,b.elements=c,b.before=b.before?[b.before]:[],b.after=b.after?[b.after]:[],!n.support.opacity&&b.cleartype&&b.after.push(function(){o(this,b)}),b.continuous&&b.after.push(function(){f(c,b,0,!b.backwards)}),v(b),n.support.opacity||!b.cleartype||b.cleartypeNoBg||h(s),"static"==r.css("position")&&r.css("position","relative"),b.width&&r.width(b.width),b.height&&"auto"!=b.height&&r.height(b.height),b.startingSlide!==t?(b.startingSlide=parseInt(b.startingSlide,10),b.startingSlide>=c.length||0>b.startSlide?b.startingSlide=0:k=!0):b.startingSlide=b.backwards?c.length-1:0,b.random){for(b.randomMap=[],g=0;g<c.length;g++)b.randomMap.push(g);if(b.randomMap.sort(function(){return Math.random()-.5}),k)for(k=0;k<c.length;k++)b.startingSlide==b.randomMap[k]&&(b.randomIndex=k);else b.randomIndex=1,b.startingSlide=b.randomMap[1]}else b.startingSlide>=c.length&&(b.startingSlide=0);if(b.currSlide=b.startingSlide||0,d=b.startingSlide,s.css({position:"absolute",top:0,left:0}).hide().each(function(t){t=b.backwards?d?t<=d?c.length+(t-d):d-t:c.length-t:d?t>=d?c.length-(t-d):d-t:c.length-t;n(this).css("z-index",t)}),n(c[d]).css("opacity",1).show(),o(c[d],b),b.fit&&(b.aspect?s.each(function(){var t=n(this),i=!0===b.aspect?t.width()/t.height():b.aspect;b.width&&t.width()!=b.width&&(t.width(b.width),t.height(b.width/i));b.height&&t.height()<b.height&&(t.height(b.height),t.width(b.height*i))}):(b.width&&s.width(b.width),b.height&&"auto"!=b.height&&s.height(b.height))),b.center&&(!b.fit||b.aspect)&&s.each(function(){var t=n(this);t.css({"margin-left":b.width?(b.width-t.width())/2+"px":0,"margin-top":b.height?(b.height-t.height())/2+"px":0})}),!b.center||b.fit||b.slideResize||s.each(function(){var t=n(this);t.css({"margin-left":b.width?(b.width-t.width())/2+"px":0,"margin-top":b.height?(b.height-t.height())/2+"px":0})}),(b.containerResize||b.containerResizeHeight)&&1>r.innerHeight()){for(it=g=k=0;it<c.length;it++){var nt=n(c[it]),rt=nt[0],ut=nt.outerWidth(),ft=nt.outerHeight();ut||(ut=rt.offsetWidth||rt.width||nt.attr("width"));ft||(ft=rt.offsetHeight||rt.height||nt.attr("height"));k=ut>k?ut:k;g=ft>g?ft:g}b.containerResize&&0<k&&0<g&&r.css({width:k+"px",height:g+"px"});b.containerResizeHeight&&0<g&&r.css({height:g+"px"})}if((et=!1,b.pause&&r.bind("mouseenter.cycle",function(){et=!0;this.cyclePause++;u(tt,!0)}).bind("mouseleave.cycle",function(){et&&this.cyclePause--;u(tt,!0)}),!1===y(b))||(ot=!1,l.requeueAttempts=l.requeueAttempts||0,s.each(function(){var t=n(this);if(this.cycleH=b.fit&&b.height?b.height:t.height()||this.offsetHeight||this.height||t.attr("height")||0,this.cycleW=b.fit&&b.width?b.width:t.width()||this.offsetWidth||this.width||t.attr("width")||0,t.is("img")&&0===this.cycleH&&0===this.cycleW&&!this.complete){if(a.s&&b.requeueOnImageNotLoaded&&100>++l.requeueAttempts)return i(l.requeueAttempts," - img slide not loaded, requeuing slideshow: ",this.src,this.cycleW,this.cycleH),setTimeout(function(){n(a.s,a.c).cycle(l)},b.requeueTimeout),ot=!0,!1;i("could not determine size of image: "+this.src,this.cycleW,this.cycleH)}return!0}),ot))return!1;if(b.cssBefore=b.cssBefore||{},b.cssAfter=b.cssAfter||{},b.cssFirst=b.cssFirst||{},b.animIn=b.animIn||{},b.animOut=b.animOut||{},s.not(":eq("+d+")").css(b.cssBefore),n(s[d]).css(b.cssFirst),b.timeout)for(b.timeout=parseInt(b.timeout,10),b.speed.constructor==String&&(b.speed=n.fx.speeds[b.speed]||parseInt(b.speed,10)),b.sync||(b.speed/=2),k="none"==b.fx?0:"shuffle"==b.fx?500:250;b.timeout-b.speed<k;)b.timeout+=b.speed;if(b.easing&&(b.easeIn=b.easeOut=b.easing),b.speedIn||(b.speedIn=b.speed),b.speedOut||(b.speedOut=b.speed),b.slideCount=c.length,b.currSlide=b.lastSlide=d,b.random?(++b.randomIndex==c.length&&(b.randomIndex=0),b.nextSlide=b.randomMap[b.randomIndex]):b.nextSlide=b.backwards?0===b.startingSlide?c.length-1:b.startingSlide-1:b.startingSlide>=c.length-1?0:b.startingSlide+1,!b.multiFx)if(k=n.fn.cycle.transitions[b.fx],n.isFunction(k))k(r,s,b);else if("custom"!=b.fx&&!b.multiFx)return i("unknown transition: "+b.fx,"; slideshow terminating"),!1;return r=s[d],b.skipInitializationCallbacks||(b.before.length&&b.before[0].apply(r,[r,r,b,!0]),b.after.length&&b.after[0].apply(r,[r,r,b,!0])),b.next&&n(b.next).bind(b.prevNextEvent,function(){return e(b,1)}),b.prev&&n(b.prev).bind(b.prevNextEvent,function(){return e(b,0)}),(b.pager||b.pagerAnchorBuilder)&&w(c,b),p(b,c),b}function v(t){t.original={before:[],after:[]};t.original.cssBefore=n.extend({},t.cssBefore);t.original.cssAfter=n.extend({},t.cssAfter);t.original.animIn=n.extend({},t.animIn);t.original.animOut=n.extend({},t.animOut);n.each(t.before,function(){t.original.before.push(this)});n.each(t.after,function(){t.original.after.push(this)})}function y(t){var u,e,f=n.fn.cycle.transitions,o;if(0<t.fx.indexOf(",")){for(t.multiFx=!0,t.fxs=t.fx.replace(/\s*/g,"").split(","),u=0;u<t.fxs.length;u++)o=t.fxs[u],e=f[o],e&&f.hasOwnProperty(o)&&n.isFunction(e)||(i("discarding unknown transition: ",o),t.fxs.splice(u,1),u--);if(!t.fxs.length)return i("No valid transitions named; slideshow terminating."),!1}else if("all"==t.fx)for(u in t.multiFx=!0,t.fxs=[],f)f.hasOwnProperty(u)&&(e=f[u],f.hasOwnProperty(u)&&n.isFunction(e)&&t.fxs.push(u));if(t.multiFx&&t.randomizeEffects){for(e=Math.floor(20*Math.random())+30,u=0;u<e;u++)f=Math.floor(Math.random()*t.fxs.length),t.fxs.push(t.fxs.splice(f,1)[0]);r("randomized fx sequence: ",t.fxs)}return!0}function p(t,i){t.addSlide=function(r,u){var f=n(r),e=f[0];if(t.autostopCount||t.countdown++,i[u?"unshift":"push"](e),t.els&&t.els[u?"unshift":"push"](e),t.slideCount=i.length,t.random&&(t.randomMap.push(t.slideCount-1),t.randomMap.sort(function(){return Math.random()-.5})),f.css("position","absolute"),f[u?"prependTo":"appendTo"](t.$cont),u&&(t.currSlide++,t.nextSlide++),n.support.opacity||!t.cleartype||t.cleartypeNoBg||h(f),t.fit&&t.width&&f.width(t.width),t.fit&&t.height&&"auto"!=t.height&&f.height(t.height),e.cycleH=t.fit&&t.height?t.height:f.height(),e.cycleW=t.fit&&t.width?t.width:f.width(),f.css(t.cssBefore),(t.pager||t.pagerAnchorBuilder)&&n.fn.cycle.createPagerAnchor(i.length-1,e,n(t.pager),i,t),n.isFunction(t.onAddSlide))t.onAddSlide(f);else f.hide()}}function f(i,u,e,o){function p(){var n=0;u.timeout&&!u.continuous?(n=s(i[u.currSlide],i[u.nextSlide],u,o),"shuffle"==u.fx&&(n-=u.speedOut)):u.continuous&&l.cyclePause&&(n=10);0<n&&(l.cycleTimeout=setTimeout(function(){f(i,u,0,!u.backwards)},n))}var l=u.$cont[0],c=i[u.currSlide],h=i[u.nextSlide],a,v,y;e&&u.busy&&u.manualTrump&&(r("manualTrump in go(), stopping active transition"),n(i).stop(!0,!0),u.busy=0,clearTimeout(l.cycleTimeout));u.busy?r("transition active, ignoring new tx request"):l.cycleStop==u.stopCount&&(0!==l.cycleTimeout||e)&&(e||l.cyclePause||u.bounce||!(u.autostop&&0>=--u.countdown||u.nowrap&&!u.random&&u.nextSlide<u.currSlide)?(a=!1,!e&&l.cyclePause||u.nextSlide==u.currSlide?p():(a=!0,v=u.fx,c.cycleH=c.cycleH||n(c).height(),c.cycleW=c.cycleW||n(c).width(),h.cycleH=h.cycleH||n(h).height(),h.cycleW=h.cycleW||n(h).width(),u.multiFx&&(o&&(u.lastFx===t||++u.lastFx>=u.fxs.length)?u.lastFx=0:!o&&(u.lastFx===t||0>--u.lastFx)&&(u.lastFx=u.fxs.length-1),v=u.fxs[u.lastFx]),u.oneTimeFx&&(v=u.oneTimeFx,u.oneTimeFx=null),n.fn.cycle.resetState(u,v),u.before.length&&n.each(u.before,function(n,t){l.cycleStop==u.stopCount&&t.apply(h,[c,h,u,o])}),y=function(){u.busy=0;n.each(u.after,function(n,t){l.cycleStop==u.stopCount&&t.apply(h,[c,h,u,o])});l.cycleStop||p()},r("tx firing("+v+"); currSlide: "+u.currSlide+"; nextSlide: "+u.nextSlide),u.busy=1,u.fxFn?u.fxFn(c,h,u,y,o,e&&u.fastOnEvent):n.isFunction(n.fn.cycle[u.fx])?n.fn.cycle[u.fx](c,h,u,y,o,e&&u.fastOnEvent):n.fn.cycle.custom(c,h,u,y,o,e&&u.fastOnEvent)),(a||u.nextSlide==u.currSlide)&&(u.lastSlide=u.currSlide,u.random?(u.currSlide=u.nextSlide,++u.randomIndex==i.length&&(u.randomIndex=0,u.randomMap.sort(function(){return Math.random()-.5})),u.nextSlide=u.randomMap[u.randomIndex],u.nextSlide==u.currSlide&&(u.nextSlide=u.currSlide==u.slideCount-1?0:u.currSlide+1)):u.backwards?(e=0>u.nextSlide-1)&&u.bounce?(u.backwards=!u.backwards,u.nextSlide=1,u.currSlide=0):(u.nextSlide=e?i.length-1:u.nextSlide-1,u.currSlide=e?0:u.nextSlide+1):(e=u.nextSlide+1==i.length)&&u.bounce?(u.backwards=!u.backwards,u.nextSlide=i.length-2,u.currSlide=i.length-1):(u.nextSlide=e?0:u.nextSlide+1,u.currSlide=e?i.length-1:u.nextSlide-1)),a&&u.pager&&u.updateActivePagerLink(u.pager,u.currSlide,u.activePagerClass)):u.end&&u.end(u))}function s(n,t,i,u){if(i.timeoutFn){for(n=i.timeoutFn.call(n,n,t,i,u);"none"!=i.fx&&250>n-i.speed;)n+=i.speed;if(r("calculated timeout: "+n+"; speed: "+i.speed),!1!==n)return n}return i.timeout}function e(t,i){var e=i?1:-1,r=t.elements,u=t.$cont[0],o=u.cycleTimeout;if(o&&(clearTimeout(o),u.cycleTimeout=0),t.random&&0>e)t.randomIndex--,-2==--t.randomIndex?t.randomIndex=r.length-2:-1==t.randomIndex&&(t.randomIndex=r.length-1),t.nextSlide=t.randomMap[t.randomIndex];else if(t.random)t.nextSlide=t.randomMap[t.randomIndex];else if(t.nextSlide=t.currSlide+e,0>t.nextSlide){if(t.nowrap)return!1;t.nextSlide=r.length-1}else if(t.nextSlide>=r.length){if(t.nowrap)return!1;t.nextSlide=0}return u=t.onPrevNextEvent||t.prevNextClick,n.isFunction(u)&&u(0<e,t.nextSlide,r[t.nextSlide]),f(r,t,1,i),!1}function w(t,i){var r=n(i.pager);n.each(t,function(u,f){n.fn.cycle.createPagerAnchor(u,f,r,t,i)});i.updateActivePagerLink(i.pager,i.startingSlide,i.activePagerClass)}function h(t){function i(n){return n=parseInt(n,10).toString(16),2>n.length?"0"+n:n}function u(t){for(;t&&"html"!=t.nodeName.toLowerCase();t=t.parentNode){var r=n.css(t,"background-color");if(r&&0<=r.indexOf("rgb"))return t=r.match(/\d+/g),"#"+i(t[0])+i(t[1])+i(t[2]);if(r&&"transparent"!=r)return r}return"#ffffff"}r("applying clearType background-color hack");t.each(function(){n(this).css("background-color",u(this))})}n.expr[":"].paused=function(n){return n.cyclePause};n.fn.cycle=function(t,u){var e={s:this.selector,c:this.context};return 0===this.length&&"stop"!=t?!n.isReady&&e.s?(i("DOM not ready, queuing slideshow"),n(function(){n(e.s,e.c).cycle(t,u)}),this):(i("terminating; zero elements found by selector"+(n.isReady?"":" (DOM not ready)")),this):this.each(function(){var l=c(this,t,u),o;if(!1!==l){l.updateActivePagerLink=l.updateActivePagerLink||n.fn.cycle.updateActivePagerLink;this.cycleTimeout&&clearTimeout(this.cycleTimeout);this.cycleStop=this.cycleTimeout=this.cyclePause=0;var h=n(this),y=l.slideExpr?n(l.slideExpr,this):h.children(),v=y.get();2>v.length?i("terminating; too few slides: "+v.length):(o=a(h,y,v,l,e),!1!==o&&(h=o.continuous?10:s(v[o.currSlide],v[o.nextSlide],o,!o.backwards))&&(h+=o.delay||0,10>h&&(h=10),r("first timeout: "+h),this.cycleTimeout=setTimeout(function(){f(v,o,0,!l.backwards)},h)))}})};n.fn.cycle.resetState=function(t,i){i=i||t.fx;t.before=[];t.after=[];t.cssBefore=n.extend({},t.original.cssBefore);t.cssAfter=n.extend({},t.original.cssAfter);t.animIn=n.extend({},t.original.animIn);t.animOut=n.extend({},t.original.animOut);t.fxFn=null;n.each(t.original.before,function(){t.before.push(this)});n.each(t.original.after,function(){t.after.push(this)});var r=n.fn.cycle.transitions[i];n.isFunction(r)&&r(t.$cont,n(t.elements),t)};n.fn.cycle.updateActivePagerLink=function(t,i,r){n(t).each(function(){n(this).children().removeClass(r).eq(i).addClass(r)})};n.fn.cycle.next=function(n){e(n,1)};n.fn.cycle.prev=function(n){e(n,0)};n.fn.cycle.createPagerAnchor=function(t,i,e,o,s){var h,l,c,a;n.isFunction(s.pagerAnchorBuilder)?(i=s.pagerAnchorBuilder(t,i),r("pagerAnchorBuilder("+t+", el) returned: "+i)):i='<a href="#">'+(t+1)+"<\/a>";i&&(h=n(i),0===h.parents("body").length&&(l=[],1<e.length?(e.each(function(){var t=h.clone(!0);n(this).append(t);l.push(t[0])}),h=n(l)):h.appendTo(e)),s.pagerAnchors=s.pagerAnchors||[],s.pagerAnchors.push(h),e=function(i){i.preventDefault();s.nextSlide=t;i=s.$cont[0];var r=i.cycleTimeout;r&&(clearTimeout(r),i.cycleTimeout=0);i=s.onPagerEvent||s.pagerClick;n.isFunction(i)&&i(s.nextSlide,o[s.nextSlide]);f(o,s,1,s.currSlide<t)},/mouseenter|mouseover/i.test(s.pagerEvent)?h.hover(e,function(){}):h.bind(s.pagerEvent,e),/^click/.test(s.pagerEvent)||s.allowPagerClickBubble||h.bind("click.cycle",function(){return!1}),c=s.$cont[0],a=!1,s.pauseOnPagerHover&&h.hover(function(){a=!0;c.cyclePause++;u(c,!0,!0)},function(){a&&c.cyclePause--;u(c,!0,!0)}))};n.fn.cycle.hopsFromLast=function(n,t){var i=n.lastSlide,r=n.currSlide;return t?r>i?r-i:n.slideCount-i:r<i?i-r:i+n.slideCount-r};n.fn.cycle.commonReset=function(t,i,r,u,f,e){n(r.elements).not(t).hide();"undefined"==typeof r.cssBefore.opacity&&(r.cssBefore.opacity=1);r.cssBefore.display="block";r.slideResize&&!1!==u&&0<i.cycleW&&(r.cssBefore.width=i.cycleW);r.slideResize&&!1!==f&&0<i.cycleH&&(r.cssBefore.height=i.cycleH);r.cssAfter=r.cssAfter||{};r.cssAfter.display="none";n(t).css("zIndex",r.slideCount+(!0===e?1:0));n(i).css("zIndex",r.slideCount+(!0===e?0:1))};n.fn.cycle.custom=function(t,i,r,u,f,e){var h=n(t),c=n(i),l=r.speedIn,o,a,s;t=r.speedOut;o=r.easeIn;i=r.easeOut;a=r.animInDelay;f=r.animOutDelay;c.css(r.cssBefore);e&&(l=t="number"==typeof e?e:1,o=i=null);s=function(){c.delay(a).animate(r.animIn,l,o,function(){u()})};h.delay(f).animate(r.animOut,t,i,function(){h.css(r.cssAfter);r.sync||s()});r.sync&&s()};n.fn.cycle.transitions={fade:function(t,i,r){i.not(":eq("+r.currSlide+")").css("opacity",0);r.before.push(function(t,i,r){n.fn.cycle.commonReset(t,i,r);r.cssBefore.opacity=0});r.animIn={opacity:1};r.animOut={opacity:0};r.cssBefore={top:0,left:0}}};n.fn.cycle.ver=function(){return"3.0.3"};n.fn.cycle.defaults={activePagerClass:"activeSlide",after:null,allowPagerClickBubble:!1,animIn:null,animInDelay:0,animOut:null,animOutDelay:0,aspect:!1,autostop:0,autostopCount:0,backwards:!1,before:null,center:null,cleartype:!n.support.opacity,cleartypeNoBg:!1,containerResize:1,containerResizeHeight:0,continuous:0,cssAfter:null,cssBefore:null,delay:0,easeIn:null,easeOut:null,easing:null,end:null,fastOnEvent:0,fit:0,fx:"fade",fxFn:null,height:"auto",manualTrump:!0,metaAttr:"cycle",next:null,nowrap:0,onPagerEvent:null,onPrevNextEvent:null,pager:null,pagerAnchorBuilder:null,pagerEvent:"click.cycle",pause:0,pauseOnPagerHover:0,prev:null,prevNextEvent:"click.cycle",random:0,randomizeEffects:1,requeueOnImageNotLoaded:!0,requeueTimeout:250,rev:0,shuffle:null,skipInitializationCallbacks:!1,slideExpr:null,slideResize:1,speed:1e3,speedIn:null,speedOut:null,startingSlide:t,sync:1,timeout:4e3,timeoutFn:null,updateActivePagerLink:null,width:null}}(jQuery),function(n){n.fn.cycle.transitions.none=function(t,i,r){r.fxFn=function(t,i,r,u){n(i).show();n(t).hide();u()}};n.fn.cycle.transitions.fadeout=function(t,i,r){i.not(":eq("+r.currSlide+")").css({display:"block",opacity:1});r.before.push(function(t,i,r,u,f,e){n(t).css("zIndex",r.slideCount+(!0!==e?1:0));n(i).css("zIndex",r.slideCount+(!0!==e?0:1))});r.animIn.opacity=1;r.animOut.opacity=0;r.cssBefore.opacity=1;r.cssBefore.display="block";r.cssAfter.zIndex=0};n.fn.cycle.transitions.scrollUp=function(t,i,r){t.css("overflow","hidden");r.before.push(n.fn.cycle.commonReset);t=t.height();r.cssBefore.top=t;r.cssBefore.left=0;r.cssFirst.top=0;r.animIn.top=0;r.animOut.top=-t};n.fn.cycle.transitions.scrollDown=function(t,i,r){t.css("overflow","hidden");r.before.push(n.fn.cycle.commonReset);t=t.height();r.cssFirst.top=0;r.cssBefore.top=-t;r.cssBefore.left=0;r.animIn.top=0;r.animOut.top=t};n.fn.cycle.transitions.scrollLeft=function(t,i,r){t.css("overflow","hidden");r.before.push(n.fn.cycle.commonReset);t=t.width();r.cssFirst.left=0;r.cssBefore.left=t;r.cssBefore.top=0;r.animIn.left=0;r.animOut.left=0-t};n.fn.cycle.transitions.scrollRight=function(t,i,r){t.css("overflow","hidden");r.before.push(n.fn.cycle.commonReset);t=t.width();r.cssFirst.left=0;r.cssBefore.left=-t;r.cssBefore.top=0;r.animIn.left=0;r.animOut.left=t};n.fn.cycle.transitions.scrollHorz=function(t,i,r){t.css("overflow","hidden").width();r.before.push(function(t,i,r,u){r.rev&&(u=!u);n.fn.cycle.commonReset(t,i,r);r.cssBefore.left=u?i.cycleW-1:1-i.cycleW;r.animOut.left=u?-t.cycleW:t.cycleW});r.cssFirst.left=0;r.cssBefore.top=0;r.animIn.left=0;r.animOut.top=0};n.fn.cycle.transitions.scrollRTL=function(t,i,r){t.css("overflow","hidden").width();r.before.push(function(t,i,r,u){r.rev&&(u=!u);n.fn.cycle.commonReset(t,i,r);r.cssBefore.left=u?1-i.cycleW:i.cycleW-1;r.animOut.left=u?t.cycleW:-t.cycleW});r.cssFirst.left=0;r.cssBefore.top=0;r.animIn.left=0;r.animOut.top=0};n.fn.cycle.transitions.scrollVert=function(t,i,r){t.css("overflow","hidden");r.before.push(function(t,i,r,u){r.rev&&(u=!u);n.fn.cycle.commonReset(t,i,r);r.cssBefore.top=u?1-i.cycleH:i.cycleH-1;r.animOut.top=u?t.cycleH:-t.cycleH});r.cssFirst.top=0;r.cssBefore.left=0;r.animIn.top=0;r.animOut.left=0};n.fn.cycle.transitions.slideX=function(t,i,r){r.before.push(function(t,i,r){n(r.elements).not(t).hide();n.fn.cycle.commonReset(t,i,r,!1,!0);r.animIn.width=i.cycleW});r.cssBefore.left=0;r.cssBefore.top=0;r.cssBefore.width=0;r.animIn.width="show";r.animOut.width=0};n.fn.cycle.transitions.slideY=function(t,i,r){r.before.push(function(t,i,r){n(r.elements).not(t).hide();n.fn.cycle.commonReset(t,i,r,!0,!1);r.animIn.height=i.cycleH});r.cssBefore.left=0;r.cssBefore.top=0;r.cssBefore.height=0;r.animIn.height="show";r.animOut.height=0};n.fn.cycle.transitions.shuffle=function(t,i,r){for(t=t.css("overflow","visible").width(),i.css({left:0,top:0}),r.before.push(function(t,i,r){n.fn.cycle.commonReset(t,i,r,!0,!0,!0)}),r.speedAdjusted||(r.speed/=2,r.speedAdjusted=!0),r.random=0,r.shuffle=r.shuffle||{left:-t,top:15},r.els=[],t=0;t<i.length;t++)r.els.push(i[t]);for(t=0;t<r.currSlide;t++)r.els.push(r.els.shift());r.fxFn=function(t,i,r,u,f){var e,o;r.rev&&(f=!f);e=f?n(t):n(i);n(i).css(r.cssBefore);o=r.slideCount;e.animate(r.shuffle,r.speedIn,r.easeIn,function(){for(var i=n.fn.cycle.hopsFromLast(r,f),s=0;s<i;s++)f?r.els.push(r.els.shift()):r.els.unshift(r.els.pop());if(f)for(i=0,s=r.els.length;i<s;i++)n(r.els[i]).css("z-index",s-i+o);else i=n(t).css("z-index"),e.css("z-index",parseInt(i,10)+1+o);e.animate({left:0,top:0},r.speedOut,r.easeOut,function(){n(f?this:t).hide();u&&u()})})};n.extend(r.cssBefore,{display:"block",opacity:1,top:0,left:0})};n.fn.cycle.transitions.turnUp=function(t,i,r){r.before.push(function(t,i,r){n.fn.cycle.commonReset(t,i,r,!0,!1);r.cssBefore.top=i.cycleH;r.animIn.height=i.cycleH;r.animOut.width=i.cycleW});r.cssFirst.top=0;r.cssBefore.left=0;r.cssBefore.height=0;r.animIn.top=0;r.animOut.height=0};n.fn.cycle.transitions.turnDown=function(t,i,r){r.before.push(function(t,i,r){n.fn.cycle.commonReset(t,i,r,!0,!1);r.animIn.height=i.cycleH;r.animOut.top=t.cycleH});r.cssFirst.top=0;r.cssBefore.left=0;r.cssBefore.top=0;r.cssBefore.height=0;r.animOut.height=0};n.fn.cycle.transitions.turnLeft=function(t,i,r){r.before.push(function(t,i,r){n.fn.cycle.commonReset(t,i,r,!1,!0);r.cssBefore.left=i.cycleW;r.animIn.width=i.cycleW});r.cssBefore.top=0;r.cssBefore.width=0;r.animIn.left=0;r.animOut.width=0};n.fn.cycle.transitions.turnRight=function(t,i,r){r.before.push(function(t,i,r){n.fn.cycle.commonReset(t,i,r,!1,!0);r.animIn.width=i.cycleW;r.animOut.left=t.cycleW});n.extend(r.cssBefore,{top:0,left:0,width:0});r.animIn.left=0;r.animOut.width=0};n.fn.cycle.transitions.zoom=function(t,i,r){r.before.push(function(t,i,r){n.fn.cycle.commonReset(t,i,r,!1,!1,!0);r.cssBefore.top=i.cycleH/2;r.cssBefore.left=i.cycleW/2;n.extend(r.animIn,{top:0,left:0,width:i.cycleW,height:i.cycleH});n.extend(r.animOut,{width:0,height:0,top:t.cycleH/2,left:t.cycleW/2})});r.cssFirst.top=0;r.cssFirst.left=0;r.cssBefore.width=0;r.cssBefore.height=0};n.fn.cycle.transitions.fadeZoom=function(t,i,r){r.before.push(function(t,i,r){n.fn.cycle.commonReset(t,i,r,!1,!1);r.cssBefore.left=i.cycleW/2;r.cssBefore.top=i.cycleH/2;n.extend(r.animIn,{top:0,left:0,width:i.cycleW,height:i.cycleH})});r.cssBefore.width=0;r.cssBefore.height=0;r.animOut.opacity=0};n.fn.cycle.transitions.blindX=function(t,i,r){t=t.css("overflow","hidden").width();r.before.push(function(t,i,r){n.fn.cycle.commonReset(t,i,r);r.animIn.width=i.cycleW;r.animOut.left=t.cycleW});r.cssBefore.left=t;r.cssBefore.top=0;r.animIn.left=0;r.animOut.left=t};n.fn.cycle.transitions.blindY=function(t,i,r){t=t.css("overflow","hidden").height();r.before.push(function(t,i,r){n.fn.cycle.commonReset(t,i,r);r.animIn.height=i.cycleH;r.animOut.top=t.cycleH});r.cssBefore.top=t;r.cssBefore.left=0;r.animIn.top=0;r.animOut.top=t};n.fn.cycle.transitions.blindZ=function(t,i,r){i=t.css("overflow","hidden").height();t=t.width();r.before.push(function(t,i,r){n.fn.cycle.commonReset(t,i,r);r.animIn.height=i.cycleH;r.animOut.top=t.cycleH});r.cssBefore.top=i;r.cssBefore.left=t;r.animIn.top=0;r.animIn.left=0;r.animOut.top=i;r.animOut.left=t};n.fn.cycle.transitions.growX=function(t,i,r){r.before.push(function(t,i,r){n.fn.cycle.commonReset(t,i,r,!1,!0);r.cssBefore.left=this.cycleW/2;r.animIn.left=0;r.animIn.width=this.cycleW;r.animOut.left=0});r.cssBefore.top=0;r.cssBefore.width=0};n.fn.cycle.transitions.growY=function(t,i,r){r.before.push(function(t,i,r){n.fn.cycle.commonReset(t,i,r,!0,!1);r.cssBefore.top=this.cycleH/2;r.animIn.top=0;r.animIn.height=this.cycleH;r.animOut.top=0});r.cssBefore.height=0;r.cssBefore.left=0};n.fn.cycle.transitions.curtainX=function(t,i,r){r.before.push(function(t,i,r){n.fn.cycle.commonReset(t,i,r,!1,!0,!0);r.cssBefore.left=i.cycleW/2;r.animIn.left=0;r.animIn.width=this.cycleW;r.animOut.left=t.cycleW/2;r.animOut.width=0});r.cssBefore.top=0;r.cssBefore.width=0};n.fn.cycle.transitions.curtainY=function(t,i,r){r.before.push(function(t,i,r){n.fn.cycle.commonReset(t,i,r,!0,!1,!0);r.cssBefore.top=i.cycleH/2;r.animIn.top=0;r.animIn.height=i.cycleH;r.animOut.top=t.cycleH/2;r.animOut.height=0});r.cssBefore.height=0;r.cssBefore.left=0};n.fn.cycle.transitions.cover=function(t,i,r){var u=r.direction||"left",f=t.css("overflow","hidden").width(),e=t.height();r.before.push(function(t,i,r){n.fn.cycle.commonReset(t,i,r);r.cssAfter.display="";"right"==u?r.cssBefore.left=-f:"up"==u?r.cssBefore.top=e:"down"==u?r.cssBefore.top=-e:r.cssBefore.left=f});r.animIn.left=0;r.animIn.top=0;r.cssBefore.top=0;r.cssBefore.left=0};n.fn.cycle.transitions.uncover=function(t,i,r){var u=r.direction||"left",f=t.css("overflow","hidden").width(),e=t.height();r.before.push(function(t,i,r){n.fn.cycle.commonReset(t,i,r,!0,!0,!0);"right"==u?r.animOut.left=f:"up"==u?r.animOut.top=-e:"down"==u?r.animOut.top=e:r.animOut.left=-f});r.animIn.left=0;r.animIn.top=0;r.cssBefore.top=0;r.cssBefore.left=0};n.fn.cycle.transitions.toss=function(t,i,r){var u=t.css("overflow","visible").width(),f=t.height();r.before.push(function(t,i,r){n.fn.cycle.commonReset(t,i,r,!0,!0,!0);r.animOut.left||r.animOut.top?r.animOut.opacity=0:n.extend(r.animOut,{left:2*u,top:-f/2,opacity:0})});r.cssBefore.left=0;r.cssBefore.top=0;r.animIn.left=0};n.fn.cycle.transitions.wipe=function(t,i,r){var u=t.css("overflow","hidden").width(),f=t.height(),e;r.cssBefore=r.cssBefore||{};r.clip&&(/l2r/.test(r.clip)?e="rect(0px 0px "+f+"px 0px)":/r2l/.test(r.clip)?e="rect(0px "+u+"px "+f+"px "+u+"px)":/t2b/.test(r.clip)?e="rect(0px "+u+"px 0px 0px)":/b2t/.test(r.clip)?e="rect("+f+"px "+u+"px "+f+"px 0px)":/zoom/.test(r.clip)&&(t=parseInt(f/2,10),i=parseInt(u/2,10),e="rect("+t+"px "+i+"px "+t+"px "+i+"px)"));r.cssBefore.clip=r.cssBefore.clip||e||"rect(0px 0px 0px 0px)";t=r.cssBefore.clip.match(/(\d+)/g);var o=parseInt(t[0],10),s=parseInt(t[1],10),h=parseInt(t[2],10),c=parseInt(t[3],10);r.before.push(function(t,i,r){var a,v,e,l;t!=i&&(a=n(t),v=n(i),n.fn.cycle.commonReset(t,i,r,!0,!0,!1),r.cssAfter.display="block",e=1,l=parseInt(r.speedIn/13,10)-1,function y(){var n=o?o-parseInt(o/l*e,10):0,t=c?c-parseInt(c/l*e,10):0,i=h<f?h+parseInt(e*((f-h)/l||1),10):f,r=s<u?s+parseInt(e*((u-s)/l||1),10):u;v.css({clip:"rect("+n+"px "+r+"px "+i+"px "+t+"px)"});e++<=l?setTimeout(y,13):a.css("display","none")}())});n.extend(r.cssBefore,{display:"block",opacity:1,top:0,left:0});r.animIn={left:0};r.animOut={left:0}}}(jQuery),!function(n,t,i){n.fn.jScrollPane=function(r){function u(r,u){function oi(t){var u,d,g,c,p,w,nt=!1,tt=!1;if(f=t,o===i)p=r.scrollTop(),w=r.scrollLeft(),r.css({overflow:"hidden",padding:0}),h=r.innerWidth()+st,s=r.innerHeight(),r.width(h),o=n('<div class="jspPane" />').css("padding",ai).append(r.children()),e=n('<div class="jspContainer" />').css({width:h+"px",height:s+"px"}).append(o).appendTo(r);else{if(r.css("width",""),nt=f.stickToBottom&&or(),tt=f.stickToRight&&sr(),c=r.innerWidth()+st!=h||r.outerHeight()!=s,c&&(h=r.innerWidth()+st,s=r.innerHeight(),e.css({width:h+"px",height:s+"px"})),!c&&gi==y&&o.outerHeight()==v)return r.width(h),void 0;gi=y;o.css("width","");r.width(h);e.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}o.css("overflow","auto");y=t.contentWidth?t.contentWidth:o[0].scrollWidth;v=o[0].scrollHeight;o.css("overflow","");ci=y/h;ni=v/s;k=ni>1;b=ci>1;b||k?(r.addClass("jspScrollable"),u=f.maintainPosition&&(l||a),u&&(d=rt(),g=ut()),nr(),tr(),ir(),u&&(at(tt?y-h:d,!1),it(nt?v-s:g,!1)),lr(),hr(),br(),f.enableKeyboardNavigation&&vr(),f.clickOnTrack&&ur(),pr(),f.hijackInternalLinks&&wr()):(r.removeClass("jspScrollable"),o.css({top:0,left:0,width:e.width()-st}),cr(),ar(),yr(),ki());f.autoReinitialise&&!pt?pt=setInterval(function(){oi(f)},f.autoReinitialiseDelay):!f.autoReinitialise&&pt&&clearInterval(pt);p&&r.scrollTop(0)&&it(p,!1);w&&r.scrollLeft(0)&&at(w,!1);r.trigger("jsp-initialised",[b||k])}function nr(){k&&(e.append(n('<div class="jspVerticalBar" />').append(n('<div class="jspCap jspCapTop" />'),n('<div class="jspTrack" />').append(n('<div class="jspDrag" />').append(n('<div class="jspDragTop" />'),n('<div class="jspDragBottom" />'))),n('<div class="jspCap jspCapBottom" />'))),ti=e.find(">.jspVerticalBar"),g=ti.find(">.jspTrack"),p=g.find(">.jspDrag"),f.showArrows&&(wt=n('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",tt(0,-1)).bind("click.jsp",vt),bt=n('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",tt(0,1)).bind("click.jsp",vt),f.arrowScrollOnHover&&(wt.bind("mouseover.jsp",tt(0,-1,wt)),bt.bind("mouseover.jsp",tt(0,1,bt))),bi(g,f.verticalArrowPositions,wt,bt)),yt=s,e.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){yt-=n(this).outerHeight()}),p.hover(function(){p.addClass("jspHover")},function(){p.removeClass("jspHover")}).bind("mousedown.jsp",function(t){n("html").bind("dragstart.jsp selectstart.jsp",vt);p.addClass("jspActive");var i=t.pageY-p.position().top;return n("html").bind("mousemove.jsp",function(n){ht(n.pageY-i,!1)}).bind("mouseup.jsp mouseleave.jsp",di),!1}),pi())}function pi(){g.height(yt+"px");l=0;li=f.verticalGutter+g.outerWidth();o.width(h-li-st);try{0===ti.position().left&&o.css("margin-left",li+"px")}catch(n){}}function tr(){b&&(e.append(n('<div class="jspHorizontalBar" />').append(n('<div class="jspCap jspCapLeft" />'),n('<div class="jspTrack" />').append(n('<div class="jspDrag" />').append(n('<div class="jspDragLeft" />'),n('<div class="jspDragRight" />'))),n('<div class="jspCap jspCapRight" />'))),ii=e.find(">.jspHorizontalBar"),nt=ii.find(">.jspTrack"),w=nt.find(">.jspDrag"),f.showArrows&&(kt=n('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",tt(-1,0)).bind("click.jsp",vt),dt=n('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",tt(1,0)).bind("click.jsp",vt),f.arrowScrollOnHover&&(kt.bind("mouseover.jsp",tt(-1,0,kt)),dt.bind("mouseover.jsp",tt(1,0,dt))),bi(nt,f.horizontalArrowPositions,kt,dt)),w.hover(function(){w.addClass("jspHover")},function(){w.removeClass("jspHover")}).bind("mousedown.jsp",function(t){n("html").bind("dragstart.jsp selectstart.jsp",vt);w.addClass("jspActive");var i=t.pageX-w.position().left;return n("html").bind("mousemove.jsp",function(n){lt(n.pageX-i,!1)}).bind("mouseup.jsp mouseleave.jsp",di),!1}),ct=e.innerWidth(),wi())}function wi(){e.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){ct-=n(this).outerWidth()});nt.width(ct+"px");a=0}function ir(){if(b&&k){var t=nt.outerHeight(),i=g.outerWidth();yt-=t;n(ii).find(">.jspCap:visible,>.jspArrow").each(function(){ct+=n(this).outerWidth()});ct-=i;s-=i;h-=t;nt.parent().append(n('<div class="jspCorner" />').css("width",t+"px"));pi();wi()}b&&o.width(e.outerWidth()-st+"px");v=o.outerHeight();ni=v/s;b&&(ot=Math.ceil(1/ci*ct),ot>f.horizontalDragMaxWidth?ot=f.horizontalDragMaxWidth:ot<f.horizontalDragMinWidth&&(ot=f.horizontalDragMinWidth),w.width(ot+"px"),ft=ct-ot,hi(a));k&&(et=Math.ceil(1/ni*yt),et>f.verticalDragMaxHeight?et=f.verticalDragMaxHeight:et<f.verticalDragMinHeight&&(et=f.verticalDragMinHeight),p.height(et+"px"),d=yt-et,si(l))}function bi(n,t,i,r){var e,u="before",f="after";"os"==t&&(t=/Mac/.test(navigator.platform)?"after":"split");t==u?f=t:t==f&&(u=t,e=i,i=r,r=e);n[u](i)[f](r)}function tt(n,t,i){return function(){return rr(n,t,this,i),this.blur(),!1}}function rr(t,i,r,u){r=n(r).addClass("jspActive");var o,e,s=!0,h=function(){0!==t&&c.scrollByX(t*f.arrowButtonSpeed);0!==i&&c.scrollByY(i*f.arrowButtonSpeed);e=setTimeout(h,s?f.initialDelay:f.arrowRepeatFreq);s=!1};h();o=u?"mouseout.jsp":"mouseup.jsp";u=u||n("html");u.bind(o,function(){r.removeClass("jspActive");e&&clearTimeout(e);e=null;u.unbind(o)})}function ur(){ki();k&&g.bind("mousedown.jsp",function(t){if(t.originalTarget===i||t.originalTarget==t.currentTarget){var r,e=n(this),y=e.offset(),o=t.pageY-y.top-l,h=!0,a=function(){var p=e.offset(),n=t.pageY-p.top-et/2,i=s*f.scrollPagePercent,y=d*i/(v-s);if(0>o)l-y>n?c.scrollByY(-i):ht(n);else{if(!(o>0))return u(),void 0;n>l+y?c.scrollByY(i):ht(n)}r=setTimeout(a,h?f.initialDelay:f.trackClickRepeatFreq);h=!1},u=function(){r&&clearTimeout(r);r=null;n(document).unbind("mouseup.jsp",u)};return a(),n(document).bind("mouseup.jsp",u),!1}});b&&nt.bind("mousedown.jsp",function(t){if(t.originalTarget===i||t.originalTarget==t.currentTarget){var r,e=n(this),v=e.offset(),o=t.pageX-v.left-a,s=!0,l=function(){var p=e.offset(),n=t.pageX-p.left-ot/2,i=h*f.scrollPagePercent,v=ft*i/(y-h);if(0>o)a-v>n?c.scrollByX(-i):lt(n);else{if(!(o>0))return u(),void 0;n>a+v?c.scrollByX(i):lt(n)}r=setTimeout(l,s?f.initialDelay:f.trackClickRepeatFreq);s=!1},u=function(){r&&clearTimeout(r);r=null;n(document).unbind("mouseup.jsp",u)};return l(),n(document).bind("mouseup.jsp",u),!1}})}function ki(){nt&&nt.unbind("mousedown.jsp");g&&g.unbind("mousedown.jsp")}function di(){n("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp");p&&p.removeClass("jspActive");w&&w.removeClass("jspActive")}function ht(n,t){k&&(0>n?n=0:n>d&&(n=d),t===i&&(t=f.animateScroll),t?c.animate(p,"top",n,si):(p.css("top",n),si(n)))}function si(n){n===i&&(n=p.position().top);e.scrollTop(0);l=n;var t=0===l,u=l==d,h=n/d,f=-h*(v-s);(ri!=t||fi!=u)&&(ri=t,fi=u,r.trigger("jsp-arrow-change",[ri,fi,ui,ei]));fr(t,u);o.css("top",f);r.trigger("jsp-scroll-y",[-f,t,u]).trigger("scroll")}function lt(n,t){b&&(0>n?n=0:n>ft&&(n=ft),t===i&&(t=f.animateScroll),t?c.animate(w,"left",n,hi):(w.css("left",n),hi(n)))}function hi(n){n===i&&(n=w.position().left);e.scrollTop(0);a=n;var t=0===a,u=a==ft,s=n/ft,f=-s*(y-h);(ui!=t||ei!=u)&&(ui=t,ei=u,r.trigger("jsp-arrow-change",[ri,fi,ui,ei]));er(t,u);o.css("left",f);r.trigger("jsp-scroll-x",[-f,t,u]).trigger("scroll")}function fr(n,t){f.showArrows&&(wt[n?"addClass":"removeClass"]("jspDisabled"),bt[t?"addClass":"removeClass"]("jspDisabled"))}function er(n,t){f.showArrows&&(kt[n?"addClass":"removeClass"]("jspDisabled"),dt[t?"addClass":"removeClass"]("jspDisabled"))}function it(n,t){var i=n/(v-s);ht(i*d,t)}function at(n,t){var i=n/(y-h);lt(i*ft,t)}function gt(t,i,r){var u,v,y,p,w,b,k,l,a,o=0,c=0;try{u=n(t)}catch(d){return}for(v=u.outerHeight(),y=u.outerWidth(),e.scrollTop(0),e.scrollLeft(0);!u.is(".jspPane");)if(o+=u.position().top,c+=u.position().left,u=u.offsetParent(),/^body|html$/i.test(u[0].nodeName))return;p=ut();b=p+s;p>o||i?l=o-f.horizontalGutter:o+v>b&&(l=o-s+v+f.horizontalGutter);isNaN(l)||it(l,r);w=rt();k=w+h;w>c||i?a=c-f.horizontalGutter:c+y>k&&(a=c-h+y+f.horizontalGutter);isNaN(a)||at(a,r)}function rt(){return-o.position().left}function ut(){return-o.position().top}function or(){var n=v-s;return n>20&&n-ut()<10}function sr(){var n=y-h;return n>20&&n-rt()<10}function hr(){e.unbind(yi).bind(yi,function(n,t,i,r){var e=a,o=l,u=n.deltaFactor||f.mouseWheelSpeed;return c.scrollBy(i*u,-r*u,!1),e==a&&o==l})}function cr(){e.unbind(yi)}function vt(){return!1}function lr(){o.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(n){gt(n.target,!1)})}function ar(){o.find(":input,a").unbind("focus.jsp")}function vr(){function h(){var n=a,r=l;switch(t){case 40:c.scrollByY(f.keyboardSpeed,!1);break;case 38:c.scrollByY(-f.keyboardSpeed,!1);break;case 34:case 32:c.scrollByY(s*f.scrollPagePercent,!1);break;case 33:c.scrollByY(-s*f.scrollPagePercent,!1);break;case 39:c.scrollByX(f.keyboardSpeed,!1);break;case 37:c.scrollByX(-f.keyboardSpeed,!1)}return i=n!=a||r!=l}var t,i,u=[];b&&u.push(ii[0]);k&&u.push(ti[0]);o.focus(function(){r.focus()});r.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(r){if(r.target===this||u.length&&n(r.target).closest(u).length){var f=a,e=l;switch(r.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:t=r.keyCode;h();break;case 35:it(v-s);t=null;break;case 36:it(0);t=null}return i=r.keyCode==t&&f!=a||e!=l,!i}}).bind("keypress.jsp",function(n){return n.keyCode==t&&h(),!i});f.hideFocus?(r.css("outline","none"),"hideFocus"in e[0]&&r.attr("hideFocus",!0)):(r.css("outline",""),"hideFocus"in e[0]&&r.attr("hideFocus",!1))}function yr(){r.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function pr(){if(location.hash&&location.hash.length>1){var t,r,i=escape(location.hash.substr(1));try{t=n("#"+i+', a[name="'+i+'"]')}catch(u){return}t.length&&o.find(i)&&(0===e.scrollTop()?r=setInterval(function(){e.scrollTop()>0&&(gt(t,!0),n(document).scrollTop(e.position().top),clearInterval(r))},50):(gt(t,!0),n(document).scrollTop(e.position().top)))}}function wr(){n(document.body).data("jspHijack")||(n(document.body).data("jspHijack",!0),n(document.body).delegate("a[href*=#]","click",function(i){var f,r,u,s,e,o,c=this.href.substr(0,this.href.indexOf("#")),h=location.href;if(-1!==location.href.indexOf("#")&&(h=location.href.substr(0,location.href.indexOf("#"))),c===h){f=escape(this.href.substr(this.href.indexOf("#")+1));try{r=n("#"+f+', a[name="'+f+'"]')}catch(l){return}r.length&&(u=r.closest(".jspScrollable"),s=u.data("jsp"),s.scrollToElement(r,!0),u[0].scrollIntoView&&(e=n(t).scrollTop(),o=r.offset().top,(e>o||o>e+n(t).height())&&u[0].scrollIntoView()),i.preventDefault())}}))}function br(){var u,f,t,i,n,r=!1;e.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(e){var o=e.originalEvent.touches[0];u=rt();f=ut();t=o.pageX;i=o.pageY;n=!1;r=!0}).bind("touchmove.jsp",function(e){if(r){var o=e.originalEvent.touches[0],s=a,h=l;return c.scrollTo(u+t-o.pageX,f+i-o.pageY),n=n||Math.abs(t-o.pageX)>5||Math.abs(i-o.pageY)>5,s==a&&h==l}}).bind("touchend.jsp",function(){r=!1}).bind("click.jsp-touchclick",function(){if(n)return(n=!1,!1)})}function kr(){var n=ut(),t=rt();r.removeClass("jspScrollable").unbind(".jsp");r.replaceWith(vi.append(o.children()));vi.scrollTop(n);vi.scrollLeft(t);pt&&clearInterval(pt)}var f,o,h,s,e,y,v,ci,ni,k,b,p,d,l,w,ft,a,ti,g,li,yt,et,wt,bt,ii,nt,ct,ot,kt,dt,pt,ai,st,gi,c=this,ri=!0,ui=!0,fi=!1,ei=!1,vi=r.clone(!1,!1).empty(),yi=n.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";"border-box"===r.css("box-sizing")?(ai=0,st=0):(ai=r.css("paddingTop")+" "+r.css("paddingRight")+" "+r.css("paddingBottom")+" "+r.css("paddingLeft"),st=(parseInt(r.css("paddingLeft"),10)||0)+(parseInt(r.css("paddingRight"),10)||0));n.extend(c,{reinitialise:function(t){t=n.extend({},f,t);oi(t)},scrollToElement:function(n,t,i){gt(n,t,i)},scrollTo:function(n,t,i){at(n,i);it(t,i)},scrollToX:function(n,t){at(n,t)},scrollToY:function(n,t){it(n,t)},scrollToPercentX:function(n,t){at(n*(y-h),t)},scrollToPercentY:function(n,t){it(n*(v-s),t)},scrollBy:function(n,t,i){c.scrollByX(n,i);c.scrollByY(t,i)},scrollByX:function(n,t){var i=rt()+Math[0>n?"floor":"ceil"](n),r=i/(y-h);lt(r*ft,t)},scrollByY:function(n,t){var i=ut()+Math[0>n?"floor":"ceil"](n),r=i/(v-s);ht(r*d,t)},positionDragX:function(n,t){lt(n,t)},positionDragY:function(n,t){ht(n,t)},animate:function(n,t,i,r){var u={};u[t]=i;n.animate(u,{duration:f.animateDuration,easing:f.animateEase,queue:!1,step:r})},getContentPositionX:function(){return rt()},getContentPositionY:function(){return ut()},getContentWidth:function(){return y},getContentHeight:function(){return v},getPercentScrolledX:function(){return rt()/(y-h)},getPercentScrolledY:function(){return ut()/(v-s)},getIsScrollableH:function(){return b},getIsScrollableV:function(){return k},getContentPane:function(){return o},scrollToBottom:function(n){ht(d,n)},hijackInternalLinks:n.noop,destroy:function(){kr()}});oi(u)}return r=n.extend({},n.fn.jScrollPane.defaults,r),n.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){r[this]=r[this]||r.speed}),this.each(function(){var t=n(this),i=t.data("jsp");i?i.reinitialise(r):(n("script",t).filter('[type="text/javascript"],:not([type])').remove(),i=new u(t,r),t.data("jsp",i))})};n.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:i,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}}(jQuery,this),function(n){typeof define=="function"&&define.amd?define(["jquery"],n):typeof exports=="object"?module.exports=n:n(jQuery)}(function(n){function u(i){var r=i||window.event,y=c.call(arguments,1),s=0,e=0,u=0,l=0,a,v;if(i=n.event.fix(r),i.type="mousewheel","detail"in r&&(u=r.detail*-1),"wheelDelta"in r&&(u=r.wheelDelta),"wheelDeltaY"in r&&(u=r.wheelDeltaY),"wheelDeltaX"in r&&(e=r.wheelDeltaX*-1),"axis"in r&&r.axis===r.HORIZONTAL_AXIS&&(e=u*-1,u=0),s=u===0?e:u,"deltaY"in r&&(u=r.deltaY*-1,s=u),"deltaX"in r&&(e=r.deltaX,u===0&&(s=e*-1)),u!==0||e!==0)return r.deltaMode===1?(a=n.data(this,"mousewheel-line-height"),s*=a,u*=a,e*=a):r.deltaMode===2&&(v=n.data(this,"mousewheel-page-height"),s*=v,u*=v,e*=v),l=Math.max(Math.abs(u),Math.abs(e)),(!t||l<t)&&(t=l,o(r,l)&&(t/=40)),o(r,l)&&(s/=40,e/=40,u/=40),s=Math[s>=1?"floor":"ceil"](s/t),e=Math[e>=1?"floor":"ceil"](e/t),u=Math[u>=1?"floor":"ceil"](u/t),i.deltaX=e,i.deltaY=u,i.deltaFactor=t,i.deltaMode=0,y.unshift(i,s,e,u),f&&clearTimeout(f),f=setTimeout(h,200),(n.event.dispatch||n.event.handle).apply(this,y)}function h(){t=null}function o(n,t){return r.settings.adjustOldDeltas&&n.type==="mousewheel"&&t%120==0}var s=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],i="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],c=Array.prototype.slice,f,t,e,r;if(n.event.fixHooks)for(e=s.length;e;)n.event.fixHooks[s[--e]]=n.event.mouseHooks;r=n.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var t=i.length;t;)this.addEventListener(i[--t],u,!1);else this.onmousewheel=u;n.data(this,"mousewheel-line-height",r.getLineHeight(this));n.data(this,"mousewheel-page-height",r.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var n=i.length;n;)this.removeEventListener(i[--n],u,!1);else this.onmousewheel=null},getLineHeight:function(t){return parseInt(n(t)["offsetParent"in n.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(t){return n(t).height()},settings:{adjustOldDeltas:!0}};n.fn.extend({mousewheel:function(n){return n?this.bind("mousewheel",n):this.trigger("mousewheel")},unmousewheel:function(n){return this.unbind("mousewheel",n)}})}),function(n){"use strict";n.extend({simpleWeather:function(t){t=n.extend({zipcode:"",woeid:"2357536",location:"",unit:"f",success:function(){},error:function(){}},t);var i=new Date,r="http://query.yahooapis.com/v1/public/yql?format=json&rnd="+i.getFullYear()+i.getMonth()+i.getDay()+i.getHours()+"&diagnostics=true&callback=?&diagnostics=true&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&q=";if(t.location!=="")r+='select * from weather.forecast where location in (select id from weather.search where query="'+t.location+'") and u="'+t.unit+'"';else if(t.zipcode!=="")r+='select * from weather.forecast where location in ("'+t.zipcode+'") and u="'+t.unit+'"';else if(t.woeid!=="")r+="select * from weather.forecast where woeid="+t.woeid+' and u="'+t.unit+'"';else return t.error("Could not retrieve weather due to an invalid WOEID or location."),!1;return n.getJSON(r,function(i){i!==null&&i.query.results!==null&&i.query.results.channel.description!=="Yahoo! Weather Error"?n.each(i.query.results,function(n,i){var r,f,e,o,s;i.constructor.toString().indexOf("Array")!==-1&&(i=i[0]);var u=new Date,it=new Date(u.toDateString()+" "+i.astronomy.sunrise),rt=new Date(u.toDateString()+" "+i.astronomy.sunset);if(r=u>it&&u<rt?"d":"n",f=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW","N"],e=f[Math.round(i.wind.direction/22.5)],o=i.item.condition.temp<80&&i.atmosphere.humidity<40?-42.379+2.04901523*i.item.condition.temp+10.14333127*i.atmosphere.humidity-.22475541*i.item.condition.temp*i.atmosphere.humidity-6.83783*Math.pow(10,-3)*Math.pow(i.item.condition.temp,2)-5.481717*Math.pow(10,-2)*Math.pow(i.atmosphere.humidity,2)+1.22874*Math.pow(10,-3)*Math.pow(i.item.condition.temp,2)*i.atmosphere.humidity+8.5282*Math.pow(10,-4)*i.item.condition.temp*Math.pow(i.atmosphere.humidity,2)-1.99*Math.pow(10,-6)*Math.pow(i.item.condition.temp,2)*Math.pow(i.atmosphere.humidity,2):i.item.condition.temp,t.unit==="f")var h="c",c=Math.round(5/9*(i.item.condition.temp-32)),l=Math.round(5/9*(i.item.forecast[0].high-32)),a=Math.round(5/9*(i.item.forecast[0].low-32)),v=Math.round(5/9*(i.item.forecast[1].high-32)),y=Math.round(5/9*(i.item.forecast[1].low-32)),p=Math.round(5/9*(i.item.forecast[1].high-32)),w=Math.round(5/9*(i.item.forecast[1].low-32)),b=Math.round(5/9*(i.item.forecast[2].high-32)),k=Math.round(5/9*(i.item.forecast[2].low-32)),d=Math.round(5/9*(i.item.forecast[3].high-32)),g=Math.round(5/9*(i.item.forecast[3].low-32)),nt=Math.round(5/9*(i.item.forecast[4].high-32)),tt=Math.round(5/9*(i.item.forecast[4].low-32));else var h="f",c=Math.round(9/5*i.item.condition.temp+32),l=Math.round(9/5*i.item.forecast[0].high+32),a=Math.round(9/5*i.item.forecast[0].low+32),v=Math.round(5/9*(i.item.forecast[1].high+32)),y=Math.round(5/9*(i.item.forecast[1].low+32)),p=Math.round(5/9*(i.item.forecast[1].high+32)),w=Math.round(5/9*(i.item.forecast[1].low+32)),b=Math.round(5/9*(i.item.forecast[2].high+32)),k=Math.round(5/9*(i.item.forecast[2].low+32)),d=Math.round(5/9*(i.item.forecast[3].high+32)),g=Math.round(5/9*(i.item.forecast[3].low+32)),nt=Math.round(5/9*(i.item.forecast[4].high+32)),tt=Math.round(5/9*(i.item.forecast[4].low+32));s={title:i.item.title,temp:i.item.condition.temp,tempAlt:c,code:i.item.condition.code,todayCode:i.item.forecast[0].code,timeOfDay:r,units:{temp:i.units.temperature,distance:i.units.distance,pressure:i.units.pressure,speed:i.units.speed,tempAlt:h},currently:i.item.condition.text,high:i.item.forecast[0].high,highAlt:l,low:i.item.forecast[0].low,lowAlt:a,forecast:i.item.forecast[0].text,wind:{chill:i.wind.chill,direction:e,speed:i.wind.speed},humidity:i.atmosphere.humidity,heatindex:o,pressure:i.atmosphere.pressure,rising:i.atmosphere.rising,visibility:i.atmosphere.visibility,sunrise:i.astronomy.sunrise,sunset:i.astronomy.sunset,description:i.item.description,thumbnail:"http://l.yimg.com/a/i/us/nws/weather/gr/"+i.item.condition.code+r+"s.png",image:"http://l.yimg.com/a/i/us/nws/weather/gr/"+i.item.condition.code+r+".png",day:i.item.forecast[0].day,tomorrow:{high:i.item.forecast[1].high,highAlt:v,low:i.item.forecast[1].low,lowAlt:y,forecast:i.item.forecast[1].text,code:i.item.forecast[1].code,date:i.item.forecast[1].date,day:i.item.forecast[1].day,image:"http://l.yimg.com/a/i/us/nws/weather/gr/"+i.item.forecast[1].code+"d.png"},forecasts:{one:{high:i.item.forecast[1].high,highAlt:p,low:i.item.forecast[1].low,lowAlt:w,forecast:i.item.forecast[1].text,code:i.item.forecast[1].code,date:i.item.forecast[1].date,day:i.item.forecast[1].day,image:"http://l.yimg.com/a/i/us/nws/weather/gr/"+i.item.forecast[1].code+"d.png"},two:{high:i.item.forecast[2].high,highAlt:b,low:i.item.forecast[2].low,lowAlt:k,forecast:i.item.forecast[2].text,code:i.item.forecast[2].code,date:i.item.forecast[2].date,day:i.item.forecast[2].day,image:"http://l.yimg.com/a/i/us/nws/weather/gr/"+i.item.forecast[2].code+"d.png"},three:{high:i.item.forecast[3].high,highAlt:d,low:i.item.forecast[3].low,lowAlt:g,forecast:i.item.forecast[3].text,code:i.item.forecast[3].code,date:i.item.forecast[3].date,day:i.item.forecast[3].day,image:"http://l.yimg.com/a/i/us/nws/weather/gr/"+i.item.forecast[3].code+"d.png"},four:{high:i.item.forecast[4].high,highAlt:nt,low:i.item.forecast[4].low,lowAlt:tt,forecast:i.item.forecast[4].text,code:i.item.forecast[4].code,date:i.item.forecast[4].date,day:i.item.forecast[4].day,image:"http://l.yimg.com/a/i/us/nws/weather/gr/"+i.item.forecast[4].code+"d.png"}},city:i.location.city,country:i.location.country,region:i.location.region,updated:i.item.pubDate,link:i.item.link};t.success(s)}):i.query.results===null?t.error("An invalid WOEID or location was provided."):t.error("There was an error retrieving the latest weather information. Please try again.")}),this}})}(jQuery),function(n){n.fn.hoverIntent=function(t,i,r){var u={interval:100,sensitivity:7,timeout:0};u=typeof t=="object"?n.extend(u,t):n.isFunction(i)?n.extend(u,{over:t,out:i,selector:r}):n.extend(u,{over:t,out:t,selector:i});var f,e,o,s,h=function(n){f=n.pageX;e=n.pageY},c=function(t,i){if(i.hoverIntent_t=clearTimeout(i.hoverIntent_t),Math.abs(o-f)+Math.abs(s-e)<u.sensitivity)return n(i).off("mousemove.hoverIntent",h),i.hoverIntent_s=1,u.over.apply(i,[t]);o=f;s=e;i.hoverIntent_t=setTimeout(function(){c(t,i)},u.interval)},a=function(n,t){return t.hoverIntent_t=clearTimeout(t.hoverIntent_t),t.hoverIntent_s=0,u.out.apply(t,[n])},l=function(t){var r=jQuery.extend({},t),i=this;if(i.hoverIntent_t&&(i.hoverIntent_t=clearTimeout(i.hoverIntent_t)),t.type=="mouseenter"){o=r.pageX;s=r.pageY;n(i).on("mousemove.hoverIntent",h);i.hoverIntent_s!=1&&(i.hoverIntent_t=setTimeout(function(){c(r,i)},u.interval))}else n(i).off("mousemove.hoverIntent",h),i.hoverIntent_s==1&&(i.hoverIntent_t=setTimeout(function(){a(r,i)},u.timeout))};return this.on({"mouseenter.hoverIntent":l,"mouseleave.hoverIntent":l},u.selector)}}(jQuery),function(n,t){"use strict";var r,i;n.uaMatch=function(n){n=n.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(n)||/(webkit)[ \/]([\w.]+)/.exec(n)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(n)||/(msie) ([\w.]+)/.exec(n)||n.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(n)||[];return{browser:t[1]||"",version:t[2]||"0"}};r=n.uaMatch(t.navigator.userAgent);i={};r.browser&&(i[r.browser]=!0,i.version=r.version);i.chrome?i.webkit=!0:i.webkit&&(i.safari=!0);n.browser=i}(jQuery,window),function(n){var r={vertical:!1,rtl:!1,start:1,offset:1,size:null,scroll:3,visible:null,animation:"normal",easing:"swing",auto:0,wrap:null,initCallback:null,setupCallback:null,reloadCallback:null,itemLoadCallback:null,itemFirstInCallback:null,itemFirstOutCallback:null,itemLastInCallback:null,itemLastOutCallback:null,itemVisibleInCallback:null,itemVisibleOutCallback:null,animationStepCallback:null,buttonNextHTML:"<div><\/div>",buttonPrevHTML:"<div><\/div>",buttonNextEvent:"click",buttonPrevEvent:"click",buttonNextCallback:null,buttonPrevCallback:null,itemFallbackDimension:null},i=!1,t;n(window).bind("load.jcarousel",function(){i=!0});n.jcarousel=function(t,u){var h,c;this.options=n.extend({},r,u||{});this.autoStopped=this.locked=!1;this.buttonPrevState=this.buttonNextState=this.buttonPrev=this.buttonNext=this.list=this.clip=this.container=null;u&&u.rtl!==void 0||(this.options.rtl=(n(t).attr("dir")||n("html").attr("dir")||"").toLowerCase()=="rtl");this.wh=this.options.vertical?"height":"width";this.lt=this.options.vertical?"top":this.options.rtl?"right":"left";for(var e="",s=t.className.split(" "),o=0;o<s.length;o++)if(s[o].indexOf("jcarousel-skin")!=-1){n(t).removeClass(s[o]);e=s[o];break}t.nodeName.toUpperCase()=="UL"||t.nodeName.toUpperCase()=="OL"?(this.list=n(t),this.clip=this.list.parents(".jcarousel-clip"),this.container=this.list.parents(".jcarousel-container")):(this.container=n(t),this.list=this.container.find("ul,ol").eq(0),this.clip=this.container.find(".jcarousel-clip"));this.clip.size()===0&&(this.clip=this.list.wrap("<div><\/div>").parent());this.container.size()===0&&(this.container=this.clip.wrap("<div><\/div>").parent());e!==""&&this.container.parent()[0].className.indexOf("jcarousel-skin")==-1&&this.container.wrap('<div class=" '+e+'"><\/div>');this.buttonPrev=n(".jcarousel-prev",this.container);this.buttonPrev.size()===0&&this.options.buttonPrevHTML!==null&&(this.buttonPrev=n(this.options.buttonPrevHTML).appendTo(this.container));this.buttonPrev.addClass(this.className("jcarousel-prev"));this.buttonNext=n(".jcarousel-next",this.container);this.buttonNext.size()===0&&this.options.buttonNextHTML!==null&&(this.buttonNext=n(this.options.buttonNextHTML).appendTo(this.container));this.buttonNext.addClass(this.className("jcarousel-next"));this.clip.addClass(this.className("jcarousel-clip")).css({position:"relative"});this.list.addClass(this.className("jcarousel-list")).css({overflow:"hidden",position:"relative",top:0,margin:0,padding:0}).css(this.options.rtl?"right":"left",0);this.container.addClass(this.className("jcarousel-container")).css({position:"relative"});!this.options.vertical&&this.options.rtl&&this.container.addClass("jcarousel-direction-rtl").attr("dir","rtl");var l=this.options.visible!==null?Math.ceil(this.clipping()/this.options.visible):null,e=this.list.children("li"),f=this;e.size()>0&&(h=0,c=this.options.offset,e.each(function(){f.format(this,c++);h+=f.dimension(this,l)}),this.list.css(this.wh,h+100+"px"),u&&u.size!==void 0||(this.options.size=e.size()));this.container.css("display","block");this.buttonNext.css("display","block");this.buttonPrev.css("display","block");this.funcNext=function(){f.next()};this.funcPrev=function(){f.prev()};this.funcResize=function(){f.resizeTimer&&clearTimeout(f.resizeTimer);f.resizeTimer=setTimeout(function(){f.reload()},100)};this.options.initCallback!==null&&this.options.initCallback(this,"init");!i&&n.browser.safari?(this.buttons(!1,!1),n(window).bind("load.jcarousel",function(){f.setup()})):this.setup()};t=n.jcarousel;t.fn=t.prototype={jcarousel:"0.2.8"};t.fn.extend=t.extend=n.extend;t.fn.extend({setup:function(){if(this.prevLast=this.prevFirst=this.last=this.first=null,this.animating=!1,this.tail=this.resizeTimer=this.timer=null,this.inTail=!1,!this.locked){this.list.css(this.lt,this.pos(this.options.offset)+"px");var t=this.pos(this.options.start,!0);this.prevFirst=this.prevLast=null;this.animate(t,!1);n(window).unbind("resize.jcarousel",this.funcResize).bind("resize.jcarousel",this.funcResize);this.options.setupCallback!==null&&this.options.setupCallback(this)}},reset:function(){this.list.empty();this.list.css(this.lt,"0px");this.list.css(this.wh,"10px");this.options.initCallback!==null&&this.options.initCallback(this,"reset");this.setup()},reload:function(){if(this.tail!==null&&this.inTail&&this.list.css(this.lt,t.intval(this.list.css(this.lt))+this.tail),this.tail=null,this.inTail=!1,this.options.reloadCallback!==null&&this.options.reloadCallback(this),this.options.visible!==null){var i=this,u=Math.ceil(this.clipping()/this.options.visible),n=0,r=0;this.list.children("li").each(function(t){n+=i.dimension(this,u);t+1<i.first&&(r=n)});this.list.css(this.wh,n+"px");this.list.css(this.lt,-r+"px")}this.scroll(this.first,!1)},lock:function(){this.locked=!0;this.buttons()},unlock:function(){this.locked=!1;this.buttons()},size:function(n){return n!==void 0&&(this.options.size=n,this.locked||this.buttons()),this.options.size},has:function(n,t){var i,r;for(t!==void 0&&t||(t=n),this.options.size!==null&&t>this.options.size&&(t=this.options.size),i=n;i<=t;i++)if(r=this.get(i),!r.length||r.hasClass("jcarousel-item-placeholder"))return!1;return!0},get:function(t){return n(">.jcarousel-item-"+t,this.list)},add:function(i,r){var u=this.get(i),f=0,e=n(r),s,o;if(u.length===0){for(o=t.intval(i),u=this.create(i);;)if(s=this.get(--o),o<=0||s.length){o<=0?this.list.prepend(u):s.after(u);break}}else f=this.dimension(u);return e.get(0).nodeName.toUpperCase()=="LI"?(u.replaceWith(e),u=e):u.empty().append(r),this.format(u.removeClass(this.className("jcarousel-item-placeholder")),i),e=this.options.visible!==null?Math.ceil(this.clipping()/this.options.visible):null,f=this.dimension(u,e)-f,i>0&&i<this.first&&this.list.css(this.lt,t.intval(this.list.css(this.lt))-f+"px"),this.list.css(this.wh,t.intval(this.list.css(this.wh))+f+"px"),u},remove:function(n){var i=this.get(n),r;!i.length||n>=this.first&&n<=this.last||(r=this.dimension(i),n<this.first&&this.list.css(this.lt,t.intval(this.list.css(this.lt))+r+"px"),i.remove(),this.list.css(this.wh,t.intval(this.list.css(this.wh))-r+"px"))},next:function(){this.tail!==null&&!this.inTail?this.scrollTail(!1):this.scroll((this.options.wrap=="both"||this.options.wrap=="last")&&this.options.size!==null&&this.last==this.options.size?1:this.first+this.options.scroll)},prev:function(){this.tail!==null&&this.inTail?this.scrollTail(!0):this.scroll((this.options.wrap=="both"||this.options.wrap=="first")&&this.options.size!==null&&this.first==1?this.options.size:this.first-this.options.scroll)},scrollTail:function(n){if(!this.locked&&!this.animating&&this.tail){this.pauseAuto();var i=t.intval(this.list.css(this.lt)),i=n?i+this.tail:i-this.tail;this.inTail=!n;this.prevFirst=this.first;this.prevLast=this.last;this.animate(i)}},scroll:function(n,t){this.locked||this.animating||(this.pauseAuto(),this.animate(this.pos(n),t))},pos:function(n,i){var s=t.intval(this.list.css(this.lt));if(this.locked||this.animating)return s;this.options.wrap!="circular"&&(n=n<1?1:this.options.size&&n>this.options.size?this.options.size:n);for(var o=this.first>n,h=this.options.wrap!="circular"&&this.first<=1?1:this.first,e=o?this.get(h):this.get(this.last),r=o?h:h-1,u=null,f=0,v=!1,c=0;o?--r>=n:++r<n;)u=this.get(r),v=!u.length,u.length===0&&(u=this.create(r).addClass(this.className("jcarousel-item-placeholder")),e[o?"before":"after"](u),this.first!==null&&this.options.wrap=="circular"&&this.options.size!==null&&(r<=0||r>this.options.size))&&(e=this.get(this.index(r)),e.length&&(u=this.add(r,e.clone(!0)))),e=u,c=this.dimension(u),v&&(f+=c),this.first!==null&&(this.options.wrap=="circular"||r>=1&&(this.options.size===null||r<=this.options.size))&&(s=o?s+c:s-c);for(var h=this.clipping(),y=[],a=0,l=0,e=this.get(n-1),r=n;++a;){if(u=this.get(r),v=!u.length,u.length===0&&(u=this.create(r).addClass(this.className("jcarousel-item-placeholder")),e.length===0?this.list.prepend(u):e[o?"before":"after"](u),this.first!==null&&this.options.wrap=="circular"&&this.options.size!==null&&(r<=0||r>this.options.size)&&(e=this.get(this.index(r)),e.length&&(u=this.add(r,e.clone(!0))))),e=u,c=this.dimension(u),c===0)throw Error("jCarousel: No width/height set for items. This will cause an infinite loop. Aborting...");if(this.options.wrap!="circular"&&this.options.size!==null&&r>this.options.size?y.push(u):v&&(f+=c),l+=c,l>=h)break;r++}for(u=0;u<y.length;u++)y[u].remove();if(f>0&&(this.list.css(this.wh,this.dimension(this.list)+f+"px"),o&&(s-=f,this.list.css(this.lt,t.intval(this.list.css(this.lt))-f+"px"))),f=n+a-1,this.options.wrap!="circular"&&this.options.size&&f>this.options.size&&(f=this.options.size),r>f)for(a=0,r=f,l=0;++a;){if(u=this.get(r--),!u.length)break;if(l+=this.dimension(u),l>=h)break}for(r=f-a+1,this.options.wrap!="circular"&&r<1&&(r=1),this.inTail&&o&&(s+=this.tail,this.inTail=!1),this.tail=null,this.options.wrap!="circular"&&f==this.options.size&&f-a+1>=1&&(o=t.intval(this.get(f).css(this.options.vertical?"marginBottom":"marginRight")),l-o>h)&&(this.tail=l-h-o),i&&n===this.options.size&&this.tail&&(s-=this.tail,this.inTail=!0);n-->r;)s+=this.dimension(this.get(n));return this.prevFirst=this.first,this.prevLast=this.last,this.first=r,this.last=f,s},animate:function(t,i){var r,f,u;this.locked||this.animating||(this.animating=!0,r=this,u=function(){if(r.animating=!1,t===0&&r.list.css(r.lt,0),!r.autoStopped&&(r.options.wrap=="circular"||r.options.wrap=="both"||r.options.wrap=="last"||r.options.size===null||r.last<r.options.size||r.last==r.options.size&&r.tail!==null&&!r.inTail)&&r.startAuto(),r.buttons(),r.notify("onAfterAnimation"),r.options.wrap=="circular"&&r.options.size!==null)for(var n=r.prevFirst;n<=r.prevLast;n++)n===null||n>=r.first&&n<=r.last||!(n<1||n>r.options.size)||r.remove(n)},this.notify("onBeforeAnimation"),this.options.animation&&i!==!1?(f=this.options.vertical?{top:t}:this.options.rtl?{right:t}:{left:t},u={duration:this.options.animation,easing:this.options.easing,complete:u},n.isFunction(this.options.animationStepCallback)&&(u.step=this.options.animationStepCallback),this.list.animate(f,u)):(this.list.css(this.lt,t+"px"),u()))},startAuto:function(n){if(n!==void 0&&(this.options.auto=n),this.options.auto===0)return this.stopAuto();if(this.timer===null){this.autoStopped=!1;var t=this;this.timer=window.setTimeout(function(){t.next()},this.options.auto*1e3)}},stopAuto:function(){this.pauseAuto();this.autoStopped=!0},pauseAuto:function(){this.timer!==null&&(window.clearTimeout(this.timer),this.timer=null)},buttons:function(n,t){n==null&&(n=!this.locked&&this.options.size!==0&&(this.options.wrap&&this.options.wrap!="first"||this.options.size===null||this.last<this.options.size),!this.locked&&(!this.options.wrap||this.options.wrap=="first")&&this.options.size!==null&&this.last>=this.options.size)&&(n=this.tail!==null&&!this.inTail);t!=null||(t=!this.locked&&this.options.size!==0&&(this.options.wrap&&this.options.wrap!="last"||this.first>1),this.locked||this.options.wrap&&this.options.wrap!="last"||this.options.size===null||this.first!=1)||(t=this.tail!==null&&this.inTail);var i=this;this.buttonNext.size()>0?(this.buttonNext.unbind(this.options.buttonNextEvent+".jcarousel",this.funcNext),n&&this.buttonNext.bind(this.options.buttonNextEvent+".jcarousel",this.funcNext),this.buttonNext[n?"removeClass":"addClass"](this.className("jcarousel-next-disabled")).attr("disabled",n?!1:!0),this.options.buttonNextCallback!==null&&this.buttonNext.data("jcarouselstate")!=n&&this.buttonNext.each(function(){i.options.buttonNextCallback(i,this,n)}).data("jcarouselstate",n)):this.options.buttonNextCallback!==null&&this.buttonNextState!=n&&this.options.buttonNextCallback(i,null,n);this.buttonPrev.size()>0?(this.buttonPrev.unbind(this.options.buttonPrevEvent+".jcarousel",this.funcPrev),t&&this.buttonPrev.bind(this.options.buttonPrevEvent+".jcarousel",this.funcPrev),this.buttonPrev[t?"removeClass":"addClass"](this.className("jcarousel-prev-disabled")).attr("disabled",t?!1:!0),this.options.buttonPrevCallback!==null&&this.buttonPrev.data("jcarouselstate")!=t&&this.buttonPrev.each(function(){i.options.buttonPrevCallback(i,this,t)}).data("jcarouselstate",t)):this.options.buttonPrevCallback!==null&&this.buttonPrevState!=t&&this.options.buttonPrevCallback(i,null,t);this.buttonNextState=n;this.buttonPrevState=t},notify:function(n){var t=this.prevFirst===null?"init":this.prevFirst<this.first?"next":"prev";this.callback("itemLoadCallback",n,t);this.prevFirst!==this.first&&(this.callback("itemFirstInCallback",n,t,this.first),this.callback("itemFirstOutCallback",n,t,this.prevFirst));this.prevLast!==this.last&&(this.callback("itemLastInCallback",n,t,this.last),this.callback("itemLastOutCallback",n,t,this.prevLast));this.callback("itemVisibleInCallback",n,t,this.first,this.last,this.prevFirst,this.prevLast);this.callback("itemVisibleOutCallback",n,t,this.prevFirst,this.prevLast,this.first,this.last)},callback:function(t,i,r,u,f,e,o){var h,c,t,s;if(!(this.options[t]==null||typeof this.options[t]!="object"&&i!="onAfterAnimation")&&(h=typeof this.options[t]=="object"?this.options[t][i]:this.options[t],n.isFunction(h)))if(c=this,u===void 0)h(c,r,i);else if(f===void 0)this.get(u).each(function(){h(c,this,u,r,i)});else for(t=function(n){c.get(n).each(function(){h(c,this,n,r,i)})},s=u;s<=f;s++)s===null||s>=e&&s<=o||t(s)},create:function(n){return this.format("<li><\/li>",n)},format:function(t,i){for(var t=n(t),u=t.get(0).className.split(" "),r=0;r<u.length;r++)u[r].indexOf("jcarousel-")!=-1&&t.removeClass(u[r]);return t.addClass(this.className("jcarousel-item")).addClass(this.className("jcarousel-item-"+i)).css({float:this.options.rtl?"right":"left","list-style":"none"}).attr("jcarouselindex",i),t},className:function(n){return n+" "+n+(this.options.vertical?"-vertical":"-horizontal")},dimension:function(i,r){var u=n(i),f;return r==null?this.options.vertical?u.outerHeight(!0)||t.intval(this.options.itemFallbackDimension):u.outerWidth(!0)||t.intval(this.options.itemFallbackDimension):(f=this.options.vertical?r-t.intval(u.css("marginTop"))-t.intval(u.css("marginBottom")):r-t.intval(u.css("marginLeft"))-t.intval(u.css("marginRight")),n(u).css(this.wh,f+"px"),this.dimension(u))},clipping:function(){return this.options.vertical?this.clip[0].offsetHeight-t.intval(this.clip.css("borderTopWidth"))-t.intval(this.clip.css("borderBottomWidth")):this.clip[0].offsetWidth-t.intval(this.clip.css("borderLeftWidth"))-t.intval(this.clip.css("borderRightWidth"))},index:function(n,t){return t==null&&(t=this.options.size),Math.round(((n-1)/t-Math.floor((n-1)/t))*t)+1}});t.extend({defaults:function(t){return n.extend(r,t||{})},intval:function(n){return n=parseInt(n,10),isNaN(n)?0:n},windowLoaded:function(){i=!0}});n.fn.jcarousel=function(i){if(typeof i=="string"){var r=n(this).data("jcarousel"),u=Array.prototype.slice.call(arguments,1);return r[i].apply(r,u)}return this.each(function(){var r=n(this).data("jcarousel");r?(i&&n.extend(r.options,i),r.reload()):n(this).data("jcarousel",new t(this,i))})}}(jQuery),function(n){"";"use strict";var i={text:{play:"",stop:"",previous:"Previous",next:"Next",loading:"Loading"},transition:[1],showCaption:!1,IESafe:!1,showTooltips:!1,carousel:!1,swipe:!0,carouselVertical:!1,animationFinished:null,buildFinished:null,bindsFinished:null,startOn:0,thumbOpacity:.3,hoverPause:!1,animationSpeed:600,fadeThumbsIn:!1,carouselOptions:{},thumbChangeEvent:"click.pikachoose",stopOnClick:!1,hideThumbnails:!1},t;n.fn.PikaChoose=function(i){return this.each(function(){n(this).data("pikachoose",new t(this,i))})};n.PikaChoose=function(t,r){var u,f,e,o;if(this.options=n.extend({},i,r||{}),this.list=null,this.image=null,this.anchor=null,this.caption=null,this.imgNav=null,this.imgPlay=null,this.imgPrev=null,this.imgNext=null,this.textNext=null,this.textPrev=null,this.previous=null,this.next=null,this.aniWrap=null,this.aniDiv=null,this.aniImg=null,this.thumbs=null,this.transition=null,this.active=null,this.tooltip=null,this.animating=!1,this.stillOut=null,this.counter=null,this.timeOut=null,this.pikaStage=null,typeof this.options.data!="undefined"&&(t=n("<ul><\/ul>").addClass("jcarousel-skin-pika").appendTo(t),n.each(this.options.data,function(){var i=null;typeof this.link!="undefined"?(i=n("<li><a href='"+this.link+"'><img><\/a><\/li>").appendTo(t),typeof this.title!="undefined"&&i.find("a").attr("title",this.title)):i=n("<li><img><\/li>").appendTo(t);typeof this.caption!="undefined"&&i.append("<span>"+this.caption+"<\/span>");typeof this.thumbnail!="undefined"?(i.find("img").attr("ref",this.image),i.find("img").attr("src",this.thumbnail)):i.find("img").attr("src",this.image)})),t instanceof jQuery||t.nodeName.toUpperCase()=="UL"||t.nodeName.toUpperCase()=="OL")this.list=n(t),this.build(),this.bindEvents();else return;for(u=0,f=0,e=0;e<25;e++)o='<div col="'+u+'" row="'+f+'"><\/div>',this.aniDiv.append(o),u++,u==5&&(f++,u=0)};t=n.PikaChoose;t.fn=t.prototype={version:"96"};n.fn.pikachoose=n.fn.PikaChoose;t.fn.extend=t.extend=n.extend;t.fn.extend({build:function(){var t,i,r;this.step=0;this.options.pikaStage?(this.wrap=this.options.pikaStage,this.wrap.addClass("pika-stage")):this.wrap=n("<div class='pika-stage'><\/div>").insertBefore(this.list);this.image=n("<img>").appendTo(this.wrap);this.video=n('<iframe src="">').appendTo(this.wrap);this.imgNav=n("<div class='pika-imgnav'><\/div>").insertAfter(this.video);this.imgPlay=n("<a><\/a>").appendTo(this.imgNav);this.counter=n("<span class='pika-counter'><\/span>").appendTo(this.imgNav);this.options.autoPlay?this.imgPlay.addClass("pause"):this.imgPlay.addClass("play");this.imgPrev=n("<a class='previous'><\/a>").insertAfter(this.imgPlay);this.imgNext=n("<a class='next'><\/a>").insertAfter(this.imgPrev);this.caption=n("<div class='caption'><\/div>").insertBefore(this.imgNav.parents(".pika-stage")).hide();this.tooltip=n("<div class='pika-tooltip'><\/div>").insertAfter(this.list).hide();this.aniWrap=n("<div class='pika-aniwrap'><\/div>").insertAfter(this.caption);this.aniImg=n("<img>").appendTo(this.aniWrap).hide();this.aniDiv=n("<div class='pika-ani'><\/div>").appendTo(this.aniWrap);this.textNav=n("<div class='pika-textnav'><\/div>").insertAfter(this.aniWrap);this.textPrev=n("<a class='previous'>"+this.options.text.previous+"<\/a>").appendTo(this.textNav);this.textNext=n("<a class='next'>"+this.options.text.next+"<\/a>").appendTo(this.textNav);this.list.addClass("pika-thumbs");this.thumbs=this.list.find("img");this.loader=n("<div class='pika-loader'><\/div>").appendTo(this.wrap).hide().html(this.options.text.loading);this.active=this.thumbs.eq(this.options.startOn);this.finishAnimating({index:this.options.startOn,source:this.active.attr("ref")||this.active.attr("src"),caption:this.active.parents("li:first").find("span:first").html(),clickThrough:this.active.parent().attr("href")||"",clickThroughTarget:this.active.parent().attr("target")||"",clickThroughTitle:this.active.parent().attr("title")||""});this.aniDiv.css({position:"relative"});t=this;this.updateThumbs();this.options.fadeThumbsIn&&this.list.fadeIn();this.options.hideThumbnails&&this.list.hide();this.options.carousel&&n.fn.jcarousel&&(i={vertical:this.options.carouselVertical,initCallback:function(n){jQuery(n.list).find("img").click(function(i,r){if(typeof r!="undefined"&&r.how=="auto"&&t.options.autoPlay===!1)return!1;var u=parseInt(jQuery(this).parents(".jcarousel-item").attr("jcarouselindex"),10),f=jQuery(this).parents("ul").find("li:last").attr("jcarouselindex")==u-1?!0:!1;f||(u=u-2<=0?0:u-2);u++;n.scroll(u)})}},r=n.extend({},i,this.options.carouselOptions||{}),this.list.jcarousel(r));this.options.swipe&&n.fn.touchwipe&&this.wrap.touchwipe({wipeLeft:function(){t.Next()},wipeRight:function(){t.Prev()}});typeof this.options.buildFinished=="function"&&this.options.buildFinished(this)},createThumb:function(t){var i=t,r=this,u;(this.thumbs=this.list.find("img"),typeof n.data(t[0],"source")=="undefined")&&(t.parents("li:first").wrapInner("<div class='clip' />"),i.hide(),n.data(t[0],"clickThrough",i.parent("a").attr("href")||""),n.data(t[0],"clickThroughTarget",i.parent("a").attr("target")||""),n.data(t[0],"clickThroughTitle",i.parent("a").attr("title")||""),i.parent("a").length>0&&i.unwrap(),n.data(t[0],"caption",i.next("span").html()||""),i.next("span").remove(),n.data(t[0],"source",i.attr("ref")||i.attr("src")),n.data(t[0],"imageTitle",i.attr("title")||""),n.data(t[0],"imageAlt",i.attr("alt")||""),n.data(t[0],"index",this.thumbs.index(t)),n.data(t[0],"order",i.closest("ul").find("li").index(i.parents("li"))),u=n.data(t[0]),n("<img />").on("load",{data:u},function(){var f,t,s,h;typeof r.options.buildThumbStart=="function"&&r.options.buildThumbStart(r);var c=n(this),e=this.width,o=this.height;e===0&&(e=c.attr("width"));o===0&&(o=c.attr("height"));f=parseInt(i.parents(".clip").css("height").slice(0,-2),10);t=parseInt(i.parents(".clip").css("width").slice(0,-2),10);t===0&&(t=i.parents("li:first").outerWidth());f===0&&(f=i.parents("li:first").outerHeight());s=t/e;h=f/o;s<h?(i.css({height:"100%"}),i.fadeTo(.001,0),i.css({left:-(i.outerWidth()-t)/2}),i.hide()):i.css({width:"100%"});i.hover(function(){(clearTimeout(r.stillOut),n(this).stop(!0,!0).fadeTo(250,1),r.options.showTooltips)&&r.tooltip.show().stop(!0,!0).html(u.caption).animate({top:n(this).parent().position().top,left:n(this).parent().position().left,opacity:1},"fast")},function(){n(this).hasClass("active")||(n(this).stop(!0,!0).fadeTo(250,r.options.thumbOpacity),r.stillOut=setTimeout(r.hideTooltip,700))});u.order==r.options.startOn?(i.fadeTo(250,1),i.addClass("active"),i.parents("li").eq(0).addClass("active")):i.fadeTo(250,r.options.thumbOpacity);typeof r.options.buildThumbFinish=="function"&&r.options.buildThumbFinish(r)}).attr("src",i.attr("src")))},bindEvents:function(){this.thumbs.on(this.options.thumbChangeEvent,{self:this},this.imgClick);this.imgNext.on("click.pikachoose",{self:this},this.nextClick);this.textNext.on("click.pikachoose",{self:this},this.nextClick);this.imgPrev.on("click.pikachoose",{self:this},this.prevClick);this.textPrev.on("click.pikachoose",{self:this},this.prevClick);this.imgPlay.unbind("click.pikachoose").on("click.pikachoose",{self:this},this.playClick);this.wrap.unbind("mouseenter.pikachoose").on("mouseenter.pikachoose",{self:this},function(n){n.data.self.imgNav.stop(!0,!0).fadeTo("slow",1);n.data.self.options.hoverPause===!0&&clearTimeout(n.data.self.timeOut)});this.wrap.unbind("mouseleave.pikachoose").on("mouseleave.pikachoose",{self:this},function(n){n.data.self.imgNav.stop(!0,!0).fadeTo("slow",0);n.data.self.options.autoPlay&&n.data.self.options.hoverPause&&(n.data.self.timeOut=setTimeout(function(n){return function(){n.nextClick()}}(n.data.self),n.data.self.options.speed))});this.tooltip.unbind("mouseenter.pikachoose").on("mouseenter.pikachoose",{self:this},function(n){clearTimeout(n.data.self.stillOut)});this.tooltip.unbind("mouseleave.pikachoose").on("mouseleave.pikachoose",{self:this},function(n){n.data.self.stillOut=setTimeout(n.data.self.hideTooltip,700)});typeof this.options.bindsFinished=="function"&&this.options.bindsFinished(this)},hideTooltip:function(){n(".pika-tooltip").animate({opacity:.01})},imgClick:function(t,i){var r=t.data.self,u=n.data(this),f=!1,e,o;if(!r.animating){if(typeof i=="undefined"||i.how!="auto")r.options.autoPlay&&r.options.stopOnClick?r.imgPlay.trigger("click"):clearTimeout(r.timeOut);else if(!r.options.autoPlay)return!1;n(this).attr("src")!==n.data(this).source&&r.loader.fadeIn("fast");u.source.indexOf("youtube")>-1&&(f=!0);typeof r.options.beforeAnimation=="function"&&r.options.beforeAnimation(r,f);r.caption.fadeOut("slow");r.animating=!0;r.active.fadeTo(300,r.options.thumbOpacity).removeClass("active");r.active.parents(".active").eq(0).removeClass("active");r.active=n(this);r.active.addClass("active").fadeTo(200,1);r.active.parents("li").eq(0).addClass("active");f?(r.image.fadeOut(),r.animating=!1,e=u.source.split("?v=")[1],o="http://www.youtube.com/embed/{src}",r.video.attr("src",o.replace("{src}",e)),r.video.fadeIn(),r.loader.fadeOut("fast")):(r.video.fadeOut().attr("src",""),r.image.fadeIn(),n("<img />").on("load",{self:r,data:u},function(){r.loader.fadeOut("fast");r.aniDiv.css({height:r.image.height(),width:r.image.width()}).show();r.aniDiv.children("div").css({width:"20%",height:"20%",float:"left"});var t=0;r.options.transition[0]==-1?t=Math.floor(Math.random()*7)+1:(t=r.options.transition[r.step],r.step++,r.step>=r.options.transition.length&&(r.step=0));r.options.IESafe&&n.browser.msie&&(t=1);r.doAnimation(t,u)}).attr("src",n.data(this).source))}},doAnimation:function(t,i){var r;this.aniWrap.css({position:"absolute",top:this.wrap.css("padding-top"),left:this.wrap.css("padding-left"),width:this.wrap.width()});r=this;r.image.stop(!0,!1);r.caption.stop().fadeOut();var u=r.aniDiv.children("div").eq(0).width(),f=r.aniDiv.children("div").eq(0).height(),e=new Image;n(e).attr("src",i.source);(e.height!=r.image.height()||e.width!=r.image.width())&&t!==0&&t!==1&&t!==7;r.aniDiv.css({height:r.image.height(),width:r.image.width()});r.aniDiv.children().each(function(){var t=n(this),r=Math.floor(t.parent().width()/5)*t.attr("col"),u=Math.floor(t.parent().height()/5)*t.attr("row");t.css({background:"url("+i.source+") -"+r+"px -"+u+"px","background-size":t.parent().width()+"px "+t.parent().height()+"px",width:"0px",height:"0px",position:"absolute",top:u+"px",left:r+"px",float:"none"})});r.aniDiv.hide();r.aniImg.hide();switch(t){case 0:r.image.stop(!0,!0).fadeOut(r.options.animationSpeed,function(){r.image.attr("src",i.source).fadeIn(r.options.animationSpeed,function(){r.finishAnimating(i)})});break;case 1:r.aniDiv.hide();r.aniImg.height(r.image.height()).hide().attr("src",i.source);r.wrap.css({height:r.image.height()});n.when(r.image.fadeOut(r.options.animationSpeed),r.aniImg.eq(0).fadeIn(r.options.animationSpeed)).done(function(){r.finishAnimating(i)});break;case 2:r.aniDiv.show().children().hide().each(function(t){var e=t*30;n(this).css({opacity:.1}).show().delay(e).animate({opacity:1,width:u,height:f},200,"linear",function(){r.aniDiv.find("div").index(this)==24&&r.finishAnimating(i)})});break;case 3:r.aniDiv.show().children("div:lt(5)").hide().each(function(){var t=n(this).attr("col")*100;n(this).css({opacity:.1,width:u}).show().delay(t).animate({opacity:1,height:r.image.height()},r.options.animationSpeed,"linear",function(){r.aniDiv.find(" div").index(this)==4&&r.finishAnimating(i)})});break;case 4:r.aniDiv.show().children().hide().each(function(t){if(!(t>4)){var e=n(this).attr("col")*30,o=r.gapper(n(this),f,u),s=r.options.animationSpeed*.7;n(this).css({opacity:.1,height:"100%"}).show().delay(e).animate({opacity:1,width:o.width},s,"linear",function(){r.aniDiv.find(" div").index(this)==4&&r.finishAnimating(i)})}});break;case 5:r.aniDiv.show().children().show().each(function(t){var e=t*Math.floor(Math.random()*5)*7,o=r.gapper(n(this),f,u);n(".animation div").index(this)==24&&(e=700);n(this).css({height:o.height,width:o.width,opacity:.01}).delay(e).animate({opacity:1},r.options.animationSpeed,function(){r.aniDiv.find(" div").index(this)==24&&r.finishAnimating(i)})});break;case 6:r.aniDiv.height(r.image.height()).hide().css({background:"url("+i.source+") top left no-repeat"});r.aniDiv.children("div").hide();r.aniDiv.css({width:0}).show().animate({width:r.image.width()},r.options.animationSpeed,function(){r.finishAnimating(i);r.aniDiv.css({background:"transparent"})});break;case 7:r.wrap.css({overflow:"hidden"});r.aniImg.height(r.image.height()).hide().attr("src",i.source);r.aniDiv.hide();r.image.css({position:"relative"}).animate({left:"-"+r.wrap.outerWidth()+"px"});r.aniImg.show();r.aniWrap.css({left:r.wrap.outerWidth()}).show().animate({left:"0px"},r.options.animationSpeed,function(){r.finishAnimating(i)})}},finishAnimating:function(t){var i,u,r;this.animating=!1;this.image.attr("src",t.source);this.image.attr("alt",t.imageAlt);this.image.attr("title",t.imageTitle);this.image.css({left:"0"});this.image.show();i=this;n("<img />").on("load",function(){i.aniImg.fadeOut("fast");i.aniDiv.fadeOut("fast")}).attr("src",t.source);u=t.index+1;r=this.thumbs.length;this.counter.html(u+"/"+r);t.clickThrough!==""?(this.anchor===null&&(this.anchor=this.image.wrap("<a>").parent()),this.anchor.attr("href",t.clickThrough),this.anchor.attr("title",t.clickThroughTitle),this.anchor.attr("target",t.clickThroughTarget)):(this.image.parent("a").length>0&&this.image.unwrap(),this.anchor=null);this.options.showCaption&&t.caption!==""&&t.caption!==null&&this.caption.html(t.caption).fadeTo("slow",1);this.options.autoPlay&&r>1&&(this.timeOut=setTimeout(function(n){return function(){n.nextClick()}}(this),this.options.speed,this.timeOut));typeof this.options.animationFinished=="function"&&this.options.animationFinished(this)},gapper:function(n,t,i){var r;return n.attr("row")==4&&(r=this.aniDiv.height()-t*5+t,t=r),n.attr("col")==4&&(r=this.aniDiv.width()-i*5+i,i=r),{height:t,width:i}},nextClick:function(n){var r="natural",i=null,t;try{i=n.data.self;typeof n.data.self.options.next=="function"&&n.data.self.options.next(this)}catch(u){i=this;r="auto"}return t=i.active.parents("li:first").next().find("img"),t.length===0&&(t=i.list.find("img").eq(0)),t.trigger("click",{how:r}),t},prevClick:function(n){typeof n.data.self.options.previous=="function"&&n.data.self.options.previous(this);var i=n.data.self,t=i.active.parents("li:first").prev().find("img");return t.length===0&&(t=i.list.find("img:last")),t.trigger("click"),t},playClick:function(n){var t=n.data.self;return t.options.autoPlay=!t.options.autoPlay,t.imgPlay.toggleClass("play").toggleClass("pause"),t.options.autoPlay?t.nextClick():clearTimeout(t.timeOut),t.options.autoPlay?"playing":"paused"},Next:function(){var n={data:{self:this}};return this.nextClick(n)},Prev:function(){var n={data:{self:this}};return this.prevClick(n)},GoTo:function(n){var i={data:{self:this}},t=this.list.find("img").eq(n);if(t.length>0)return t.trigger("click"),t;throw"Image not found. Images are 0 indexed.";},Play:function(){if(this.options.autoPlay)return"playing";var n={data:{self:this}};return this.playClick(n)},Pause:function(){if(!this.options.autoPlay)return"paused";var n={data:{self:this}};return this.playClick(n)},updateThumbs:function(){var t=this;this.thumbs=this.list.find("img");this.thumbs.each(function(){t.createThumb(n(this),t)})}})}(jQuery),function(n){n.fn.touchwipe=function(t){var i={min_move_x:20,min_move_y:20,wipeLeft:function(){},wipeRight:function(){},wipeUp:function(){},wipeDown:function(){},preventDefaultEvents:!0};return t&&n.extend(i,t),this.each(function(){function u(){this.removeEventListener("touchmove",f);n=null;t=!1}function f(f){if(i.preventDefaultEvents&&f.preventDefault(),t){var s=f.touches[0].pageX,h=f.touches[0].pageY,e=n-s,o=r-h;Math.abs(e)>=i.min_move_x?(u(),e>0?i.wipeLeft():i.wipeRight()):Math.abs(o)>=i.min_move_y&&(u(),o>0?i.wipeDown():i.wipeUp())}}function e(i){i.touches.length==1&&(n=i.touches[0].pageX,r=i.touches[0].pageY,t=!0,this.addEventListener("touchmove",f,!1))}var n,r,t=!1;"ontouchstart"in document.documentElement&&this.addEventListener("touchstart",e,!1)}),this}}(jQuery),function(n){typeof define=="function"&&define.amd&&define.amd.jQuery?define(["jquery"],n):n(jQuery)}(function(n){function ft(t){return t&&t.allowPageScroll===undefined&&(t.swipe!==undefined||t.swipeStatus!==undefined)&&(t.allowPageScroll=p),t.click!==undefined&&t.tap===undefined&&(t.tap=t.click),t||(t={}),t=n.extend({},n.fn.swipe.defaults,t),this.each(function(){var r=n(this),i=r.data(h);i||(i=new et(this,t),r.data(h,i))})}function et(ft,et){function di(t){if(!vu()&&!(n(t.target).closest(et.excludedElements,ot).length>0)){var u=t.originalEvent?t.originalEvent:t,f,e=r?u.touches[0]:u;return(ht=rt,r?ct=u.touches.length:t.preventDefault(),at=0,vt=null,bt=null,lt=0,kt=0,dt=0,yt=1,wt=0,st=pu(),si=bu(),br(),!r||ct===et.fingers||et.fingers===l||ui()?(er(0,e),wi=ni(),ct==2&&(er(1,u.touches[1]),kt=dt=or(st[0].start,st[1].start)),(et.swipeStatus||et.pinchStatus)&&(f=pt(u,ht))):f=!1,f===!1)?(ht=i,pt(u,ht),f):(et.hold&&(ki=setTimeout(n.proxy(function(){ot.trigger("hold",[u.target]);et.hold&&(f=et.hold.call(ot,u,u.target))},this),et.longTapThreshold)),ai(!0),null)}}function gi(n){var u=n.originalEvent?n.originalEvent:n,o,h,f,e,c;ht===t||ht===i||kr()||(h=r?u.touches[0]:u,f=dr(h),hi=ni(),r&&(ct=u.touches.length),et.hold&&clearTimeout(ki),ht=s,ct==2&&(kt==0?(er(1,u.touches[1]),kt=dt=or(st[0].start,st[1].start)):(dr(u.touches[1]),dt=or(st[0].end,st[1].end),bt=du(st[0].end,st[1].end)),yt=ku(kt,dt),wt=Math.abs(kt-dt)),ct===et.fingers||et.fingers===l||!r||ui()?(vt=tf(f.start,f.end),iu(n,vt),at=gu(f.start,f.end),lt=nu(),wu(vt,at),(et.swipeStatus||et.pinchStatus)&&(o=pt(u,ht)),(!et.triggerOnTouchEnd||et.triggerOnTouchLeave)&&(e=!0,et.triggerOnTouchLeave&&(c=rf(this),e=uf(f.end,c)),!et.triggerOnTouchEnd&&e?ht=ir(s):et.triggerOnTouchLeave&&!e&&(ht=ir(t)),(ht==i||ht==t)&&pt(u,ht))):(ht=i,pt(u,ht)),o===!1&&(ht=i,pt(u,ht)))}function nr(n){var u=n.originalEvent;return r&&u.touches.length>0?(au(),!0):(kr()&&(ct=bi),hi=ni(),lt=nu(),ur()||!rr()?(ht=i,pt(u,ht)):et.triggerOnTouchEnd||et.triggerOnTouchEnd==!1&&ht===s?(n.preventDefault(),ht=t,pt(u,ht)):!et.triggerOnTouchEnd&&pr()?(ht=t,ri(u,ht,w)):ht===s&&(ht=i,pt(u,ht)),ai(!1),null)}function ii(){ct=0;hi=0;wi=0;kt=0;dt=0;yt=1;br();ai(!1)}function tr(n){var i=n.originalEvent;et.triggerOnTouchLeave&&(ht=ir(t),pt(i,ht))}function sr(){ot.unbind(ei,di);ot.unbind(oi,ii);ot.unbind(yi,gi);ot.unbind(pi,nr);ti&&ot.unbind(ti,tr);ai(!1)}function ir(n){var r=n,f=hr(),u=rr(),e=ur();return!f||e?r=i:u&&n==s&&(!et.triggerOnTouchEnd||et.triggerOnTouchLeave)?r=t:!u&&n==t&&et.triggerOnTouchLeave&&(r=i),r}function pt(n,u){var f=undefined;return uu()||ar()?f=ri(n,u,g):(ru()||ui())&&f!==!1&&(f=ri(n,u,nt)),cu()&&f!==!1?f=ri(n,u,tt):lu()&&f!==!1?f=ri(n,u,it):hu()&&f!==!1&&(f=ri(n,u,w)),u===i&&ii(n),u===t&&(r?n.touches.length==0&&ii(n):ii(n)),f}function ri(r,s,h){var c=undefined;if(h==g){if(ot.trigger("swipeStatus",[s,vt||null,at||0,lt||0,ct,st]),et.swipeStatus&&(c=et.swipeStatus.call(ot,r,s,vt||null,at||0,lt||0,ct,st),c===!1))return!1;if(s==t&&lr()){if(ot.trigger("swipe",[vt,at,lt,ct,st]),et.swipe&&(c=et.swipe.call(ot,r,vt,at,lt,ct,st),c===!1))return!1;switch(vt){case u:ot.trigger("swipeLeft",[vt,at,lt,ct,st]);et.swipeLeft&&(c=et.swipeLeft.call(ot,r,vt,at,lt,ct,st));break;case f:ot.trigger("swipeRight",[vt,at,lt,ct,st]);et.swipeRight&&(c=et.swipeRight.call(ot,r,vt,at,lt,ct,st));break;case e:ot.trigger("swipeUp",[vt,at,lt,ct,st]);et.swipeUp&&(c=et.swipeUp.call(ot,r,vt,at,lt,ct,st));break;case o:ot.trigger("swipeDown",[vt,at,lt,ct,st]);et.swipeDown&&(c=et.swipeDown.call(ot,r,vt,at,lt,ct,st))}}}if(h==nt){if(ot.trigger("pinchStatus",[s,bt||null,wt||0,lt||0,ct,yt,st]),et.pinchStatus&&(c=et.pinchStatus.call(ot,r,s,bt||null,wt||0,lt||0,ct,yt,st),c===!1))return!1;if(s==t&&cr())switch(bt){case v:ot.trigger("pinchIn",[bt||null,wt||0,lt||0,ct,yt,st]);et.pinchIn&&(c=et.pinchIn.call(ot,r,bt||null,wt||0,lt||0,ct,yt,st));break;case y:ot.trigger("pinchOut",[bt||null,wt||0,lt||0,ct,yt,st]);et.pinchOut&&(c=et.pinchOut.call(ot,r,bt||null,wt||0,lt||0,ct,yt,st))}}return h==w?(s===i||s===t)&&(clearTimeout(li),clearTimeout(ki),fr()&&!eu()?(gt=ni(),li=setTimeout(n.proxy(function(){gt=null;ot.trigger("tap",[r.target]);et.tap&&(c=et.tap.call(ot,r,r.target))},this),et.doubleTapThreshold)):(gt=null,ot.trigger("tap",[r.target]),et.tap&&(c=et.tap.call(ot,r,r.target)))):h==tt?(s===i||s===t)&&(clearTimeout(li),gt=null,ot.trigger("doubletap",[r.target]),et.doubleTap&&(c=et.doubleTap.call(ot,r,r.target))):h==it&&(s===i||s===t)&&(clearTimeout(li),gt=null,ot.trigger("longtap",[r.target]),et.longTap&&(c=et.longTap.call(ot,r,r.target))),c}function rr(){var n=!0;return et.threshold!==null&&(n=at>=et.threshold),n}function ur(){var n=!1;return et.cancelThreshold!==null&&vt!==null&&(n=gr(vt)-at>=et.cancelThreshold),n}function tu(){return et.pinchThreshold!==null?wt>=et.pinchThreshold:!0}function hr(){return et.maxTimeThreshold?lt>=et.maxTimeThreshold?!1:!0:!0}function iu(n,t){if(et.allowPageScroll===p||ui())n.preventDefault();else{var i=et.allowPageScroll===d;switch(t){case u:(et.swipeLeft&&i||!i&&et.allowPageScroll!=b)&&n.preventDefault();break;case f:(et.swipeRight&&i||!i&&et.allowPageScroll!=b)&&n.preventDefault();break;case e:(et.swipeUp&&i||!i&&et.allowPageScroll!=k)&&n.preventDefault();break;case o:(et.swipeDown&&i||!i&&et.allowPageScroll!=k)&&n.preventDefault()}}}function cr(){var n=vr(),t=yr(),i=tu();return n&&t&&i}function ui(){return!!(et.pinchStatus||et.pinchIn||et.pinchOut)}function ru(){return!!(cr()&&ui())}function lr(){var n=hr(),t=rr(),i=vr(),r=yr(),u=ur();return!u&&r&&i&&t&&n}function ar(){return!!(et.swipe||et.swipeStatus||et.swipeLeft||et.swipeRight||et.swipeUp||et.swipeDown)}function uu(){return!!(lr()&&ar())}function vr(){return ct===et.fingers||et.fingers===l||!r}function yr(){return st[0].end.x!==0}function pr(){return!!et.tap}function fr(){return!!et.doubleTap}function fu(){return!!et.longTap}function wr(){if(gt==null)return!1;var n=ni();return fr()&&n-gt<=et.doubleTapThreshold}function eu(){return wr()}function ou(){return(ct===1||!r)&&(isNaN(at)||at<et.threshold)}function su(){return lt>et.longTapThreshold&&at<ut}function hu(){return!!(ou()&&pr())}function cu(){return!!(wr()&&fr())}function lu(){return!!(su()&&fu())}function au(){ci=ni();bi=event.touches.length+1}function br(){ci=0;bi=0}function kr(){var n=!1,t;return ci&&(t=ni()-ci,t<=et.fingerReleaseThreshold&&(n=!0)),n}function vu(){return!!(ot.data(h+"_intouch")===!0)}function ai(n){n===!0?(ot.bind(yi,gi),ot.bind(pi,nr),ti&&ot.bind(ti,tr)):(ot.unbind(yi,gi,!1),ot.unbind(pi,nr,!1),ti&&ot.unbind(ti,tr,!1));ot.data(h+"_intouch",n===!0)}function er(n,t){var i=t.identifier!==undefined?t.identifier:0;return st[n].identifier=i,st[n].start.x=st[n].end.x=t.pageX||t.clientX,st[n].start.y=st[n].end.y=t.pageY||t.clientY,st[n]}function dr(n){var i=n.identifier!==undefined?n.identifier:0,t=yu(i);return t.end.x=n.pageX||n.clientX,t.end.y=n.pageY||n.clientY,t}function yu(n){for(var t=0;t<st.length;t++)if(st[t].identifier==n)return st[t]}function pu(){for(var t=[],n=0;n<=5;n++)t.push({start:{x:0,y:0},end:{x:0,y:0},identifier:0});return t}function wu(n,t){t=Math.max(t,gr(n));si[n].distance=t}function gr(n){return si[n]?si[n].distance:undefined}function bu(){var n={};return n[u]=vi(u),n[f]=vi(f),n[e]=vi(e),n[o]=vi(o),n}function vi(n){return{direction:n,distance:0}}function nu(){return hi-wi}function or(n,t){var i=Math.abs(n.x-t.x),r=Math.abs(n.y-t.y);return Math.round(Math.sqrt(i*i+r*r))}function ku(n,t){var i=t/n*1;return i.toFixed(2)}function du(){return yt<1?y:v}function gu(n,t){return Math.round(Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2)))}function nf(n,t){var r=n.x-t.x,u=t.y-n.y,f=Math.atan2(u,r),i=Math.round(f*180/Math.PI);return i<0&&(i=360-Math.abs(i)),i}function tf(n,t){var i=nf(n,t);return i<=45&&i>=0?u:i<=360&&i>=315?u:i>=135&&i<=225?f:i>45&&i<135?o:e}function ni(){var n=new Date;return n.getTime()}function rf(t){t=n(t);var i=t.offset();return{left:i.left,right:i.left+t.outerWidth(),top:i.top,bottom:i.top+t.outerHeight()}}function uf(n,t){return n.x>t.left&&n.x<t.right&&n.y>t.top&&n.y<t.bottom}var fi=r||c||!et.fallbackToMouseEvents,ei=fi?c?a?"MSPointerDown":"pointerdown":"touchstart":"mousedown",yi=fi?c?a?"MSPointerMove":"pointermove":"touchmove":"mousemove",pi=fi?c?a?"MSPointerUp":"pointerup":"touchend":"mouseup",ti=fi?null:"mouseleave",oi=c?a?"MSPointerCancel":"pointercancel":"touchcancel",at=0,vt=null,lt=0,kt=0,dt=0,yt=1,wt=0,bt=0,si=null,ot=n(ft),ht="start",ct=0,st=null,wi=0,hi=0,ci=0,bi=0,gt=0,li=null,ki=null;try{ot.bind(ei,di);ot.bind(oi,ii)}catch(ff){n.error("events not supported "+ei+","+oi+" on jQuery.swipe")}this.enable=function(){return ot.bind(ei,di),ot.bind(oi,ii),ot};this.disable=function(){return sr(),ot};this.destroy=function(){return sr(),ot.data(h,null),ot};this.option=function(t,i){if(et[t]!==undefined){if(i===undefined)return et[t];et[t]=i}else n.error("Option "+t+" does not exist on jQuery.swipe.options");return null}}var u="left",f="right",e="up",o="down",v="in",y="out",p="none",d="auto",g="swipe",nt="pinch",w="tap",tt="doubletap",it="longtap",b="horizontal",k="vertical",l="all",ut=10,rt="start",s="move",t="end",i="cancel",r="ontouchstart"in window,a=window.navigator.msPointerEnabled&&!window.navigator.pointerEnabled,c=window.navigator.pointerEnabled||window.navigator.msPointerEnabled,h="TouchSwipe";n.fn.swipe=function(t){var r=n(this),i=r.data(h);if(i&&typeof t=="string"){if(i[t])return i[t].apply(this,Array.prototype.slice.call(arguments,1));n.error("Method "+t+" does not exist on jQuery.swipe")}else if(!i&&(typeof t=="object"||!t))return ft.apply(this,arguments);return r};n.fn.swipe.defaults={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:"label, button, input, select, textarea, a, .noSwipe"};n.fn.swipe.phases={PHASE_START:rt,PHASE_MOVE:s,PHASE_END:t,PHASE_CANCEL:i};n.fn.swipe.directions={LEFT:u,RIGHT:f,UP:e,DOWN:o,IN:v,OUT:y};n.fn.swipe.pageScroll={NONE:p,HORIZONTAL:b,VERTICAL:k,AUTO:d};n.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,ALL:l}}),CustomFormButtons=window.CustomFormButtons||{},function(n){CustomFormButtons=function(){function u(i){var u=n(i);u.each(function(){$inputs=n(this).find(t.inputNames);$inputs.each(function(){var i=n(this);i.attr("data-check")&&i.is(":checked")&&(n(t.inputNames+'[data-check-related="'+i.attr("data-check")+'"]').attr("checked",!0),n(t.inputNames+'[data-check-related="'+i.attr("data-check")+'"]').parent().addClass("checked"));i.is(":checked")?i.parent().addClass("checked"):i.parent().removeClass("checked")});$inputs.on("change",r)})}function f(i,u){var f=n(i);f.each(function(){$inputs=n(this).find(t.inputNames);$inputs.each(function(){var i=n(this);i.attr("data-check")&&i.is(":checked")&&i.parent(".checkbox-field").find('input[type="hidden"]').val()=="{"+u+"}"&&(n(t.inputNames+'[data-check-related="'+i.attr("data-check")+'"]').attr("checked",!0),n(t.inputNames+'[data-check-related="'+i.attr("data-check")+'"]').parent().addClass("checked"));i.is(":checked")&&i.parent(".checkbox-field").find('input[type="hidden"]').val()=="{"+u+"}"?i.parent().addClass("checked"):i.parent().removeClass("checked")});$inputs.on("change",r)})}function i(t){t.length<=0||t.each(function(){n(this).removeAttr("checked");n(this).parent().removeClass("checked")})}function r(){var r=n(this);if(this.type==="radio")r.is(":checked")?(r.closest(t.radioGroupName).find(".checked").removeClass("checked"),r.parent().addClass("checked")):r.trigger("click").parent().addClass("checked");else if(this.type==="checkbox"){var f=n('.form-checkbox[data-check-related="'+r.attr("data-check")+'"]'),u=r.parents(".has-sub-cat"),e=r.parents(".sub-cat"),o=u.find('.sub-cat input[type="checkbox"]'),s=n('.form-checkbox[data-check="'+r.attr("data-check")+'"]');r.is(":checked")&&!r.parent().hasClass("checked")?(r.prop("checked",!0),r.parent().addClass("checked")):(r.prop("checked",!1),r.parent().removeClass("checked"));r.attr("data-check")?r.is(":checked")?n('.form-checkbox[data-check-related="'+r.attr("data-check")+'"], .sub-cat .form-checkbox').not(":checked").prop("checked",!0).parent().addClass("checked"):n('.form-checkbox[data-check-related="'+r.attr("data-check")+'"]:checked, .sub-cat .form-checkbox:checked').prop("checked",!1).parent().removeClass("checked"):r.attr("data-check-related")&&(r.parent().hasClass("has-sub-cat")&&r.is(":checked")?n('.form-checkbox[data-check-related="'+r.attr("id")+'"]').not(":checked").prop("checked",!0).parent().addClass("checked"):r.parent().hasClass("has-sub-cat")&&!r.is(":checked")&&n('.form-checkbox[data-check-related="'+r.attr("id")+'"]').prop("checked",!1).parent().removeClass("checked"),r.parent().parent().hasClass("sub-cat")&&(n('.form-checkbox[data-check-related="'+r.attr("data-check-related")+'"]:checked').length==0&&n("#"+r.attr("data-check-related")+":checked").trigger("click"),n('.form-checkbox[data-check-related="'+r.attr("data-check-related")+'"]:checked').length==n('.form-checkbox[data-check-related="'+r.attr("data-check-related")+'"]').length&&n("#"+r.attr("data-check-related")).not(":checked").trigger("click"),n('.form-checkbox[data-check-related="'+r.attr("data-check-related")+'"]:checked').length<n('.form-checkbox[data-check-related="'+r.attr("data-check-related")+'"]').length&&i(n("#"+r.attr("data-check-related")+":checked"))),n('.form-checkbox[data-check-related="'+r.attr("data-check-related")+'"]').length==n('.form-checkbox[data-check-related="'+r.attr("data-check-related")+'"]:checked').length?n('.form-checkbox[data-check="'+r.attr("data-check-related")+'"]').prop("checked",!0).parent().addClass("checked"):n('.form-checkbox[data-check="'+r.attr("data-check-related")+'"]').prop("checked",!1).parent().removeClass("checked"));r.attr("data-check-related")&&!r.is(":checked")&&i(n('[data-checkbox-all="true"]'))}}var e=this,t={inputNames:".form-radio, .form-checkbox",radioGroupName:".radioGroup"};return{init:u,initCategory:f}}()}(jQuery),function(){function t(){}function r(n,t){for(var i=n.length;i--;)if(n[i].listener===t)return i;return-1}function i(n){return function(){return this[n].apply(this,arguments)}}var n=t.prototype,u=this,f=u.EventEmitter;n.getListeners=function(n){var r,t,i=this._getEvents();if("object"==typeof n){r={};for(t in i)i.hasOwnProperty(t)&&n.test(t)&&(r[t]=i[t])}else r=i[n]||(i[n]=[]);return r};n.flattenListeners=function(n){for(var i=[],t=0;n.length>t;t+=1)i.push(n[t].listener);return i};n.getListenersAsObject=function(n){var t,i=this.getListeners(n);return i instanceof Array&&(t={},t[n]=i),t||i};n.addListener=function(n,t){var i,u=this.getListenersAsObject(n),f="object"==typeof t;for(i in u)u.hasOwnProperty(i)&&-1===r(u[i],t)&&u[i].push(f?t:{listener:t,once:!1});return this};n.on=i("addListener");n.addOnceListener=function(n,t){return this.addListener(n,{listener:t,once:!0})};n.once=i("addOnceListener");n.defineEvent=function(n){return this.getListeners(n),this};n.defineEvents=function(n){for(var t=0;n.length>t;t+=1)this.defineEvent(n[t]);return this};n.removeListener=function(n,t){var f,i,u=this.getListenersAsObject(n);for(i in u)u.hasOwnProperty(i)&&(f=r(u[i],t),-1!==f&&u[i].splice(f,1));return this};n.off=i("removeListener");n.addListeners=function(n,t){return this.manipulateListeners(!1,n,t)};n.removeListeners=function(n,t){return this.manipulateListeners(!0,n,t)};n.manipulateListeners=function(n,t,i){var r,u,f=n?this.removeListener:this.addListener,e=n?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=i.length;r--;)f.call(this,t,i[r]);else for(r in t)t.hasOwnProperty(r)&&(u=t[r])&&("function"==typeof u?f.call(this,r,u):e.call(this,r,u));return this};n.removeEvent=function(n){var t,r=typeof n,i=this._getEvents();if("string"===r)delete i[n];else if("object"===r)for(t in i)i.hasOwnProperty(t)&&n.test(t)&&delete i[t];else delete this._events;return this};n.removeAllListeners=i("removeEvent");n.emitEvent=function(n,t){var i,f,r,e,u=this.getListenersAsObject(n);for(r in u)if(u.hasOwnProperty(r))for(f=u[r].length;f--;)i=u[r][f],i.once===!0&&this.removeListener(n,i.listener),e=i.listener.apply(this,t||[]),e===this._getOnceReturnValue()&&this.removeListener(n,i.listener);return this};n.trigger=i("emitEvent");n.emit=function(n){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(n,t)};n.setOnceReturnValue=function(n){return this._onceReturnValue=n,this};n._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0};n._getEvents=function(){return this._events||(this._events={})};t.noConflict=function(){return u.EventEmitter=f,t};"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return t}):"object"==typeof module&&module.exports?module.exports=t:this.EventEmitter=t}.call(this),function(n){function f(t){var i=n.event;return i.target=i.target||i.srcElement||t,i}var t=document.documentElement,r=function(){},i,u;t.addEventListener?r=function(n,t,i){n.addEventListener(t,i,!1)}:t.attachEvent&&(r=function(n,t,i){n[t+i]=i.handleEvent?function(){var t=f(n);i.handleEvent.call(i,t)}:function(){var t=f(n);i.call(n,t)};n.attachEvent("on"+t,n[t+i])});i=function(){};t.removeEventListener?i=function(n,t,i){n.removeEventListener(t,i,!1)}:t.detachEvent&&(i=function(n,t,i){n.detachEvent("on"+t,n[t+i]);try{delete n[t+i]}catch(r){n[t+i]=void 0}});u={bind:r,unbind:i};"function"==typeof define&&define.amd?define("eventie/eventie",u):n.eventie=u}(this),function(n,t){"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],function(i,r){return t(n,i,r)}):"object"==typeof exports?module.exports=t(n,require("eventEmitter"),require("eventie")):n.imagesLoaded=t(n,n.EventEmitter,n.eventie)}(this,function(n,t,i){function s(n,t){for(var i in t)n[i]=t[i];return n}function c(n){return"[object Array]"===v.call(n)}function l(n){var t=[],i,r;if(c(n))t=n;else if("number"==typeof n.length)for(i=0,r=n.length;r>i;i++)t.push(n[i]);else t.push(n);return t}function r(n,t,i){if(!(this instanceof r))return new r(n,t);"string"==typeof n&&(n=document.querySelectorAll(n));this.elements=l(n);this.options=s({},this.options);"function"==typeof t?i=t:s(this.options,t);i&&this.on("always",i);this.getImages();f&&(this.jqDeferred=new f.Deferred);var u=this;setTimeout(function(){u.check()})}function e(n){this.img=n}function u(n){this.src=n;o[n]=this}var f=n.jQuery,h=n.console,a=h!==void 0,v=Object.prototype.toString,o;return r.prototype=new t,r.prototype.options={},r.prototype.getImages=function(){var i,u,n,t,f;for(this.images=[],i=0,u=this.elements.length;u>i;i++)if(n=this.elements[i],"IMG"===n.nodeName&&this.addImage(n),t=n.nodeType,t&&(1===t||9===t||11===t))for(var e=n.querySelectorAll("img"),r=0,o=e.length;o>r;r++)f=e[r],this.addImage(f)},r.prototype.addImage=function(n){var t=new e(n);this.images.push(t)},r.prototype.check=function(){function f(n,r){return t.options.debug&&a&&h.log("confirm",n,r),t.progress(n),u++,u===i&&t.complete(),!0}var t=this,u=0,i=this.images.length,n,r;if(this.hasAnyBroken=!1,!i)return this.complete(),void 0;for(n=0;i>n;n++)r=this.images[n],r.on("confirm",f),r.check()},r.prototype.progress=function(n){this.hasAnyBroken=this.hasAnyBroken||!n.isLoaded;var t=this;setTimeout(function(){t.emit("progress",t,n);t.jqDeferred&&t.jqDeferred.notify&&t.jqDeferred.notify(t,n)})},r.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done",n;this.isComplete=!0;n=this;setTimeout(function(){if(n.emit(t,n),n.emit("always",n),n.jqDeferred){var i=n.hasAnyBroken?"reject":"resolve";n.jqDeferred[i](n)}})},f&&(f.fn.imagesLoaded=function(n,t){var i=new r(this,n,t);return i.jqDeferred.promise(f(this))}),e.prototype=new t,e.prototype.check=function(){var n=o[this.img.src]||new u(this.img.src),t;if(n.isConfirmed)return this.confirm(n.isLoaded,"cached was confirmed"),void 0;if(this.img.complete&&void 0!==this.img.naturalWidth)return this.confirm(0!==this.img.naturalWidth,"naturalWidth"),void 0;t=this;n.on("confirm",function(n,i){return t.confirm(n.isLoaded,i),!0});n.check()},e.prototype.confirm=function(n,t){this.isLoaded=n;this.emit("confirm",this,t)},o={},u.prototype=new t,u.prototype.check=function(){if(!this.isChecked){var n=new Image;i.bind(n,"load",this);i.bind(n,"error",this);n.src=this.src;this.isChecked=!0}},u.prototype.handleEvent=function(n){var t="on"+n.type;this[t]&&this[t](n)},u.prototype.onload=function(n){this.confirm(!0,"onload");this.unbindProxyEvents(n)},u.prototype.onerror=function(n){this.confirm(!1,"onerror");this.unbindProxyEvents(n)},u.prototype.confirm=function(n,t){this.isConfirmed=!0;this.isLoaded=n;this.emit("confirm",this,t)},u.prototype.unbindProxyEvents=function(n){i.unbind(n.target,"load",this);i.unbind(n.target,"error",this)},r}),function(n){function i(){}function t(n){function u(t){t.prototype.option||(t.prototype.option=function(t){n.isPlainObject(t)&&(this.options=n.extend(!0,this.options,t))})}function f(i,u){n.fn[i]=function(f){var h,o,c,l,e,s;if(typeof f=="string"){for(h=r.call(arguments,1),o=0,c=this.length;o<c;o++){if(l=this[o],e=n.data(l,i),!e){t("cannot call methods on "+i+" prior to initialization; attempted to call '"+f+"'");continue}if(!n.isFunction(e[f])||f.charAt(0)==="_"){t("no such method '"+f+"' for "+i+" instance");continue}if(s=e[f].apply(e,h),s!==undefined)return s}return this}return this.each(function(){var t=n.data(this,i);t?(t.option(f),t._init()):(t=new u(this,f),n.data(this,i,t))})}}if(n){var t=typeof console=="undefined"?i:function(n){console.error(n)};return n.bridget=function(n,t){u(t);f(n,t)},n.bridget}}var r=Array.prototype.slice;typeof define=="function"&&define.amd?define("jquery-bridget/jquery.bridget",["jquery"],t):t(n.jQuery)}(window),function(n){function f(t){var i=n.event;return i.target=i.target||i.srcElement||t,i}var t=document.documentElement,u=function(){},i,r;t.addEventListener?u=function(n,t,i){n.addEventListener(t,i,!1)}:t.attachEvent&&(u=function(n,t,i){n[t+i]=i.handleEvent?function(){var t=f(n);i.handleEvent.call(i,t)}:function(){var t=f(n);i.call(n,t)};n.attachEvent("on"+t,n[t+i])});i=function(){};t.removeEventListener?i=function(n,t,i){n.removeEventListener(t,i,!1)}:t.detachEvent&&(i=function(n,t,i){n.detachEvent("on"+t,n[t+i]);try{delete n[t+i]}catch(r){n[t+i]=undefined}});r={bind:u,unbind:i};typeof define=="function"&&define.amd?define("eventie/eventie",r):typeof exports=="object"?module.exports=r:n.eventie=r}(this),function(n){function t(n){typeof n=="function"&&(t.isReady?n():u.push(n))}function i(n){var o=n.type==="readystatechange"&&r.readyState!=="complete",i,f,e;if(!t.isReady&&!o)for(t.isReady=!0,i=0,f=u.length;i<f;i++)e=u[i],e()}function f(u){return u.bind(r,"DOMContentLoaded",i),u.bind(r,"readystatechange",i),u.bind(n,"load",i),t}var r=n.document,u=[];t.isReady=!1;typeof define=="function"&&define.amd?(t.isReady=typeof requirejs=="function",define("doc-ready/doc-ready",["eventie/eventie"],f)):n.docReady=f(n.eventie)}(this),function(){function t(){}function r(n,t){for(var i=n.length;i--;)if(n[i].listener===t)return i;return-1}function i(n){return function(){return this[n].apply(this,arguments)}}var n=t.prototype,u=this,f=u.EventEmitter;n.getListeners=function(n){var t=this._getEvents(),r,i;if(n instanceof RegExp){r={};for(i in t)t.hasOwnProperty(i)&&n.test(i)&&(r[i]=t[i])}else r=t[n]||(t[n]=[]);return r};n.flattenListeners=function(n){for(var i=[],t=0;t<n.length;t+=1)i.push(n[t].listener);return i};n.getListenersAsObject=function(n){var t=this.getListeners(n),i;return t instanceof Array&&(i={},i[n]=t),i||t};n.addListener=function(n,t){var i=this.getListenersAsObject(n),f=typeof t=="object",u;for(u in i)i.hasOwnProperty(u)&&r(i[u],t)===-1&&i[u].push(f?t:{listener:t,once:!1});return this};n.on=i("addListener");n.addOnceListener=function(n,t){return this.addListener(n,{listener:t,once:!0})};n.once=i("addOnceListener");n.defineEvent=function(n){return this.getListeners(n),this};n.defineEvents=function(n){for(var t=0;t<n.length;t+=1)this.defineEvent(n[t]);return this};n.removeListener=function(n,t){var i=this.getListenersAsObject(n),f,u;for(u in i)i.hasOwnProperty(u)&&(f=r(i[u],t),f!==-1&&i[u].splice(f,1));return this};n.off=i("removeListener");n.addListeners=function(n,t){return this.manipulateListeners(!1,n,t)};n.removeListeners=function(n,t){return this.manipulateListeners(!0,n,t)};n.manipulateListeners=function(n,t,i){var r,u,f=n?this.removeListener:this.addListener,e=n?this.removeListeners:this.addListeners;if(typeof t!="object"||t instanceof RegExp)for(r=i.length;r--;)f.call(this,t,i[r]);else for(r in t)t.hasOwnProperty(r)&&(u=t[r])&&(typeof u=="function"?f.call(this,r,u):e.call(this,r,u));return this};n.removeEvent=function(n){var r=typeof n,t=this._getEvents(),i;if(r==="string")delete t[n];else if(n instanceof RegExp)for(i in t)t.hasOwnProperty(i)&&n.test(i)&&delete t[i];else delete this._events;return this};n.removeAllListeners=i("removeEvent");n.emitEvent=function(n,t){var r=this.getListenersAsObject(n),i,f,u,e;for(u in r)if(r.hasOwnProperty(u))for(f=r[u].length;f--;)i=r[u][f],i.once===!0&&this.removeListener(n,i.listener),e=i.listener.apply(this,t||[]),e===this._getOnceReturnValue()&&this.removeListener(n,i.listener);return this};n.trigger=i("emitEvent");n.emit=function(n){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(n,t)};n.setOnceReturnValue=function(n){return this._onceReturnValue=n,this};n._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0};n._getEvents=function(){return this._events||(this._events={})};t.noConflict=function(){return u.EventEmitter=f,t};typeof define=="function"&&define.amd?define("eventEmitter/EventEmitter",[],function(){return t}):typeof module=="object"&&module.exports?module.exports=t:this.EventEmitter=t}.call(this),function(n){function t(n){var u,t,f;if(n){if(typeof r[n]=="string")return n;for(n=n.charAt(0).toUpperCase()+n.slice(1),t=0,f=i.length;t<f;t++)if(u=i[t]+n,typeof r[u]=="string")return u}}var i="Webkit Moz ms Ms O".split(" "),r=document.documentElement.style;typeof define=="function"&&define.amd?define("get-style-property/get-style-property",[],function(){return t}):typeof exports=="object"?module.exports=t:n.getStyleProperty=t}(window),function(n){function i(n){var t=parseFloat(n),i=n.indexOf("%")===-1&&!isNaN(t);return i&&t}function e(){for(var i,r={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},n=0,u=t.length;n<u;n++)i=t[n],r[i]=0;return r}function r(n){function s(n){var s,u,p,c,w,a,l,v,y;if(typeof n=="string"&&(n=document.querySelector(n)),n&&typeof n=="object"&&n.nodeType){if(s=f(n),s.display==="none")return e();for(u={},u.width=n.offsetWidth,u.height=n.offsetHeight,p=u.isBorderBox=!!(r&&s[r]&&s[r]==="border-box"),c=0,w=t.length;c<w;c++)a=t[c],l=s[a],l=h(n,l),v=parseFloat(l),u[a]=isNaN(v)?0:v;var b=u.paddingLeft+u.paddingRight,k=u.paddingTop+u.paddingBottom,it=u.marginLeft+u.marginRight,rt=u.marginTop+u.marginBottom,d=u.borderLeftWidth+u.borderRightWidth,g=u.borderTopWidth+u.borderBottomWidth,nt=p&&o,tt=i(s.width);return tt!==!1&&(u.width=tt+(nt?0:b+d)),y=i(s.height),y!==!1&&(u.height=y+(nt?0:k+g)),u.innerWidth=u.width-(b+d),u.innerHeight=u.height-(k+g),u.outerWidth=u.width+it,u.outerHeight=u.height+rt,u}}function h(n,t){if(u||t.indexOf("%")===-1)return t;var i=n.style,e=i.left,r=n.runtimeStyle,f=r&&r.left;return f&&(r.left=n.currentStyle.left),i.left=t,t=i.pixelLeft,i.left=e,f&&(r.left=f),t}var r=n("boxSizing"),o;return function(){var n,t,u;r&&(n=document.createElement("div"),n.style.width="200px",n.style.padding="1px 2px 3px 4px",n.style.borderStyle="solid",n.style.borderWidth="1px 2px 3px 4px",n.style[r]="border-box",t=document.body||document.documentElement,t.appendChild(n),u=f(n),o=i(u.width)===200,t.removeChild(n))}(),s}var u=n.getComputedStyle,f=u?function(n){return u(n,null)}:function(n){return n.currentStyle},t=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];typeof define=="function"&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],r):typeof exports=="object"?module.exports=r(require("get-style-property")):n.getSize=r(n.getStyleProperty)}(window),function(n,t){function r(n,t){return n[f](t)}function u(n){if(!n.parentNode){var t=document.createDocumentFragment();t.appendChild(n)}}function s(n,t){var r,i,f;for(u(n),r=n.parentNode.querySelectorAll(t),i=0,f=r.length;i<f;i++)if(r[i]===n)return!0;return!1}function h(n,t){return u(n),r(n,t)}var f=function(){var i,n,u,f,r;if(t.matchesSelector)return"matchesSelector";for(i=["webkit","moz","ms","o"],n=0,u=i.length;n<u;n++)if(f=i[n],r=f+"MatchesSelector",t[r])return r}(),i,e,o;f?(e=document.createElement("div"),o=r(e,"div"),i=o?r:h):i=s;typeof define=="function"&&define.amd?define("matches-selector/matches-selector",[],function(){return i}):window.matchesSelector=i}(this,Element.prototype),function(n){function r(n,t){for(var i in t)n[i]=t[i];return n}function u(n){for(var t in n)return!1;return t=null,!0}function f(n){return n.replace(/([A-Z])/g,function(n){return"-"+n.toLowerCase()})}function i(n,t,i){function o(n,t){n&&(this.element=n,this.layout=t,this.position={x:0,y:0},this._create())}var s=i("transition"),h=i("transform"),w=s&&h,b=!!i("perspective"),c={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[s],l=["transform","transition","transitionDuration","transitionProperty"],k=function(){for(var n,t,u={},r=0,f=l.length;r<f;r++)n=l[r],t=i(n),t&&t!==n&&(u[n]=t);return u}(),a,v,y,p;return r(o.prototype,n.prototype),o.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}};this.css({position:"absolute"})},o.prototype.handleEvent=function(n){var t="on"+n.type;this[t]&&this[t](n)},o.prototype.getSize=function(){this.size=t(this.element)},o.prototype.css=function(n){var r=this.element.style,t,i;for(t in n)i=k[t]||t,r[i]=n[t]},o.prototype.getPosition=function(){var r=e(this.element),u=this.layout.options,f=u.isOriginLeft,o=u.isOriginTop,n=parseInt(r[f?"left":"right"],10),t=parseInt(r[o?"top":"bottom"],10),i;n=isNaN(n)?0:n;t=isNaN(t)?0:t;i=this.layout.size;n-=f?i.paddingLeft:i.paddingRight;t-=o?i.paddingTop:i.paddingBottom;this.position.x=n;this.position.y=t},o.prototype.layoutPosition=function(){var t=this.layout.size,i=this.layout.options,n={};i.isOriginLeft?(n.left=this.position.x+t.paddingLeft+"px",n.right=""):(n.right=this.position.x+t.paddingRight+"px",n.left="");i.isOriginTop?(n.top=this.position.y+t.paddingTop+"px",n.bottom=""):(n.bottom=this.position.y+t.paddingBottom+"px",n.top="");this.css(n);this.emitEvent("layout",[this])},a=b?function(n,t){return"translate3d("+n+"px, "+t+"px, 0)"}:function(n,t){return"translate("+n+"px, "+t+"px)"},o.prototype._transitionTo=function(n,t){this.getPosition();var e=this.position.x,o=this.position.y,s=parseInt(n,10),h=parseInt(t,10),c=s===this.position.x&&h===this.position.y;if(this.setPosition(n,t),c&&!this.isTransitioning){this.layoutPosition();return}var i=n-e,r=t-o,u={},f=this.layout.options;i=f.isOriginLeft?i:-i;r=f.isOriginTop?r:-r;u.transform=a(i,r);this.transition({to:u,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},o.prototype.goTo=function(n,t){this.setPosition(n,t);this.layoutPosition()},o.prototype.moveTo=w?o.prototype._transitionTo:o.prototype.goTo,o.prototype.setPosition=function(n,t){this.position.x=parseInt(n,10);this.position.y=parseInt(t,10)},o.prototype._nonTransition=function(n){this.css(n.to);n.isCleaning&&this._removeStyles(n.to);for(var t in n.onTransitionEnd)n.onTransitionEnd[t].call(this)},o.prototype._transition=function(n){var i,t,r;if(!parseFloat(this.layout.options.transitionDuration)){this._nonTransition(n);return}i=this._transn;for(t in n.onTransitionEnd)i.onEnd[t]=n.onTransitionEnd[t];for(t in n.to)i.ingProperties[t]=!0,n.isCleaning&&(i.clean[t]=!0);n.from&&(this.css(n.from),r=this.element.offsetHeight,r=null);this.enableTransition(n.to);this.css(n.to);this.isTransitioning=!0},v=h&&f(h)+",opacity",o.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:v,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(c,this,!1))},o.prototype.transition=o.prototype[s?"_transition":"_nonTransition"],o.prototype.onwebkitTransitionEnd=function(n){this.ontransitionend(n)},o.prototype.onotransitionend=function(n){this.ontransitionend(n)},y={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"},o.prototype.ontransitionend=function(n){var t,i,r;n.target===this.element&&(t=this._transn,i=y[n.propertyName]||n.propertyName,delete t.ingProperties[i],u(t.ingProperties)&&this.disableTransition(),i in t.clean&&(this.element.style[n.propertyName]="",delete t.clean[i]),i in t.onEnd&&(r=t.onEnd[i],r.call(this),delete t.onEnd[i]),this.emitEvent("transitionEnd",[this]))},o.prototype.disableTransition=function(){this.removeTransitionStyles();this.element.removeEventListener(c,this,!1);this.isTransitioning=!1},o.prototype._removeStyles=function(n){var t={},i;for(i in n)t[i]="";this.css(t)},p={transitionProperty:"",transitionDuration:""},o.prototype.removeTransitionStyles=function(){this.css(p)},o.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element);this.emitEvent("remove",[this])},o.prototype.remove=function(){if(!s||!parseFloat(this.layout.options.transitionDuration)){this.removeElem();return}var n=this;this.on("transitionEnd",function(){return n.removeElem(),!0});this.hide()},o.prototype.reveal=function(){delete this.isHidden;this.css({display:""});var n=this.layout.options;this.transition({from:n.hiddenStyle,to:n.visibleStyle,isCleaning:!0})},o.prototype.hide=function(){this.isHidden=!0;this.css({display:""});var n=this.layout.options;this.transition({from:n.visibleStyle,to:n.hiddenStyle,isCleaning:!0,onTransitionEnd:{opacity:function(){this.isHidden&&this.css({display:"none"})}}})},o.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},o}var t=document.defaultView,e=t&&t.getComputedStyle?function(n){return t.getComputedStyle(n,null)}:function(n){return n.currentStyle};typeof define=="function"&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],i):(n.Outlayer={},n.Outlayer.Item=i(n.EventEmitter,n.getSize,n.getStyleProperty))}(window),function(n){function t(n,t){for(var i in t)n[i]=t[i];return n}function c(n){return a.call(n)==="[object Array]"}function u(n){var t=[],i,r;if(c(n))t=n;else if(n&&typeof n.length=="number")for(i=0,r=n.length;i<r;i++)t.push(n[i]);else t.push(n);return t}function e(n,t){var i=v(t,n);i!==-1&&t.splice(i,1)}function l(n){return n.replace(/(.)([A-Z])/g,function(n,t,i){return t+"-"+i}).toLowerCase()}function o(o,c,a,v,y,p){function w(n,i){if(typeof n=="string"&&(n=s.querySelector(n)),!n||!f(n)){r&&r.error("Bad "+this.constructor.namespace+" element: "+n);return}this.element=n;this.options=t({},this.options);this.option(i);var u=++d;this.element.outlayerGUID=u;b[u]=this;this._create();this.options.isInitLayout&&this.layout()}function k(n,i){n.prototype[i]=t({},w.prototype[i])}var d=0,b={};return w.namespace="outlayer",w.Item=p,w.prototype.options={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},t(w.prototype,a.prototype),w.prototype.option=function(n){t(this.options,n)},w.prototype._create=function(){this.reloadItems();this.stamps=[];this.stamp(this.options.stamp);t(this.element.style,this.options.containerStyle);this.options.isResizeBound&&this.bindResize()},w.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},w.prototype._itemize=function(n){for(var i,r,u=this._filterFindItemElements(n),e=this.constructor.Item,f=[],t=0,o=u.length;t<o;t++)i=u[t],r=new e(i,this),f.push(r);return f},w.prototype._filterFindItemElements=function(n){var r,i,e,h,t,s,o,c;for(n=u(n),r=this.options.itemSelector,i=[],e=0,h=n.length;e<h;e++)if(t=n[e],f(t))if(r)for(y(t,r)&&i.push(t),s=t.querySelectorAll(r),o=0,c=s.length;o<c;o++)i.push(s[o]);else i.push(t);return i},w.prototype.getItemElements=function(){for(var t=[],n=0,i=this.items.length;n<i;n++)t.push(this.items[n].element);return t},w.prototype.layout=function(){this._resetLayout();this._manageStamps();var n=this.options.isLayoutInstant!==undefined?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,n);this._isLayoutInited=!0},w.prototype._init=w.prototype.layout,w.prototype._resetLayout=function(){this.getSize()},w.prototype.getSize=function(){this.size=v(this.element)},w.prototype._getMeasurement=function(n,t){var i=this.options[n],r;i?(typeof i=="string"?r=this.element.querySelector(i):f(i)&&(r=i),this[n]=r?v(r)[t]:i):this[n]=0},w.prototype.layoutItems=function(n,t){n=this._getItemsForLayout(n);this._layoutItems(n,t);this._postLayout()},w.prototype._getItemsForLayout=function(n){for(var t,r=[],i=0,u=n.length;i<u;i++)t=n[i],t.isIgnored||r.push(t);return r},w.prototype._layoutItems=function(n,t){function e(){o.emitEvent("layoutComplete",[o,n])}var o=this,f,i,s,r,u;if(!n||!n.length){e();return}for(this._itemsOn(n,"layout",e),f=[],i=0,s=n.length;i<s;i++)r=n[i],u=this._getItemLayoutPosition(r),u.item=r,u.isInstant=t||r.isLayoutInstant,f.push(u);this._processLayoutQueue(f)},w.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},w.prototype._processLayoutQueue=function(n){for(var t,i=0,r=n.length;i<r;i++)t=n[i],this._positionItem(t.item,t.x,t.y,t.isInstant)},w.prototype._positionItem=function(n,t,i,r){r?n.goTo(t,i):n.moveTo(t,i)},w.prototype._postLayout=function(){var n=this._getContainerSize();n&&(this._setContainerMeasure(n.width,!0),this._setContainerMeasure(n.height,!1))},w.prototype._getContainerSize=h,w.prototype._setContainerMeasure=function(n,t){if(n!==undefined){var i=this.size;i.isBorderBox&&(n+=t?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth);n=Math.max(n,0);this.element.style[t?"width":"height"]=n+"px"}},w.prototype._itemsOn=function(n,t,i){function e(){return f++,f===o&&i.call(s),!0}for(var u,f=0,o=n.length,s=this,r=0,h=n.length;r<h;r++){u=n[r];u.on(t,e)}},w.prototype.ignore=function(n){var t=this.getItem(n);t&&(t.isIgnored=!0)},w.prototype.unignore=function(n){var t=this.getItem(n);t&&delete t.isIgnored},w.prototype.stamp=function(n){var t,i,r;if(n=this._find(n),n)for(this.stamps=this.stamps.concat(n),t=0,i=n.length;t<i;t++)r=n[t],this.ignore(r)},w.prototype.unstamp=function(n){var t,r,i;if(n=this._find(n),n)for(t=0,r=n.length;t<r;t++)i=n[t],e(i,this.stamps),this.unignore(i)},w.prototype._find=function(n){if(n)return typeof n=="string"&&(n=this.element.querySelectorAll(n)),u(n)},w.prototype._manageStamps=function(){var n,t,i;if(this.stamps&&this.stamps.length)for(this._getBoundingRect(),n=0,t=this.stamps.length;n<t;n++)i=this.stamps[n],this._manageStamp(i)},w.prototype._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),n=this.size;this._boundingRect={left:t.left+n.paddingLeft+n.borderLeftWidth,top:t.top+n.paddingTop+n.borderTopWidth,right:t.right-(n.paddingRight+n.borderRightWidth),bottom:t.bottom-(n.paddingBottom+n.borderBottomWidth)}},w.prototype._manageStamp=h,w.prototype._getElementOffset=function(n){var t=n.getBoundingClientRect(),i=this._boundingRect,r=v(n);return{left:t.left-i.left-r.marginLeft,top:t.top-i.top-r.marginTop,right:i.right-t.right-r.marginRight,bottom:i.bottom-t.bottom-r.marginBottom}},w.prototype.handleEvent=function(n){var t="on"+n.type;this[t]&&this[t](n)},w.prototype.bindResize=function(){this.isResizeBound||(o.bind(n,"resize",this),this.isResizeBound=!0)},w.prototype.unbindResize=function(){o.unbind(n,"resize",this);this.isResizeBound=!1},w.prototype.onresize=function(){function t(){n.resize();delete n.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var n=this;this.resizeTimeout=setTimeout(t,100)},w.prototype.resize=function(){var n=v(this.element),t=this.size&&n;t&&n.innerWidth===this.size.innerWidth||this.layout()},w.prototype.addItems=function(n){var t=this._itemize(n);return t.length&&(this.items=this.items.concat(t)),t},w.prototype.appended=function(n){var t=this.addItems(n);t.length&&(this.layoutItems(t,!0),this.reveal(t))},w.prototype.prepended=function(n){var t=this._itemize(n),i;t.length&&(i=this.items.slice(0),this.items=t.concat(i),this._resetLayout(),this._manageStamps(),this.layoutItems(t,!0),this.reveal(t),this.layoutItems(i))},w.prototype.reveal=function(n){var i=n&&n.length,t,r;if(i)for(t=0;t<i;t++)r=n[t],r.reveal()},w.prototype.hide=function(n){var i=n&&n.length,t,r;if(i)for(t=0;t<i;t++)r=n[t],r.hide()},w.prototype.getItem=function(n){for(var t,i=0,r=this.items.length;i<r;i++)if(t=this.items[i],t.element===n)return t},w.prototype.getItems=function(n){var i,t,u,f,r;if(n&&n.length){for(i=[],t=0,u=n.length;t<u;t++)f=n[t],r=this.getItem(f),r&&i.push(r);return i}},w.prototype.remove=function(n){var t,i,f,r;if(n=u(n),t=this.getItems(n),t&&t.length)for(this._itemsOn(t,"remove",function(){this.emitEvent("removeComplete",[this,t])}),i=0,f=t.length;i<f;i++)r=t[i],r.remove(),e(r,this.items)},w.prototype.destroy=function(){var t=this.element.style,n,r,u;for(t.height="",t.position="",t.width="",n=0,r=this.items.length;n<r;n++)u=this.items[n],u.destroy();this.unbindResize();delete this.element.outlayerGUID;i&&i.removeData(this.element,this.constructor.namespace)},w.data=function(n){var t=n&&n.outlayerGUID;return t&&b[t]},w.create=function(n,u){function f(){w.apply(this,arguments)}return Object.create?f.prototype=Object.create(w.prototype):t(f.prototype,w.prototype),f.prototype.constructor=f,k(f,"options"),t(f.prototype.options,u),f.namespace=n,f.data=w.data,f.Item=function(){p.apply(this,arguments)},f.Item.prototype=new p,c(function(){for(var t,u,o,h,c=l(n),a=s.querySelectorAll(".js-"+c),v="data-"+c+"-options",e=0,y=a.length;e<y;e++){t=a[e];u=t.getAttribute(v);try{o=u&&JSON.parse(u)}catch(p){r&&r.error("Error parsing "+v+" on "+t.nodeName.toLowerCase()+(t.id?"#"+t.id:"")+": "+p);continue}h=new f(t,o);i&&i.data(t,n,h)}}),i&&i.bridget&&i.bridget(n,f),f},w.Item=p,w}var s=n.document,r=n.console,i=n.jQuery,h=function(){},a=Object.prototype.toString,f=typeof HTMLElement=="object"?function(n){return n instanceof HTMLElement}:function(n){return n&&typeof n=="object"&&n.nodeType===1&&typeof n.nodeName=="string"},v=Array.prototype.indexOf?function(n,t){return n.indexOf(t)}:function(n,t){for(var i=0,r=n.length;i<r;i++)if(n[i]===t)return i;return-1};typeof define=="function"&&define.amd?define("outlayer/outlayer",["eventie/eventie","doc-ready/doc-ready","eventEmitter/EventEmitter","get-size/get-size","matches-selector/matches-selector","./item"],o):n.Outlayer=o(n.eventie,n.docReady,n.EventEmitter,n.getSize,n.matchesSelector,n.Outlayer.Item)}(window),function(n){function t(n,t){var r=n.create("masonry");return r.prototype._resetLayout=function(){this.getSize();this._getMeasurement("columnWidth","outerWidth");this._getMeasurement("gutter","outerWidth");this.measureColumns();var n=this.cols;for(this.colYs=[];n--;)this.colYs.push(0);this.maxY=0},r.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var n=this.items[0],i=n&&n.element;this.columnWidth=i&&t(i).outerWidth||this.containerWidth}this.columnWidth+=this.gutter;this.cols=Math.floor((this.containerWidth+this.gutter)/this.columnWidth);this.cols=Math.max(this.cols,1)},r.prototype.getContainerWidth=function(){var i=this.options.isFitWidth?this.element.parentNode:this.element,n=t(i);this.containerWidth=n&&n.innerWidth},r.prototype._getItemLayoutPosition=function(n){var t;n.getSize();var e=n.size.outerWidth%this.columnWidth,s=e&&e<1?"round":"ceil",r=Math[s](n.size.outerWidth/this.columnWidth);r=Math.min(r,this.cols);var u=this._getColGroup(r),f=Math.min.apply(Math,u),o=i(u,f),h={x:this.columnWidth*o,y:f},c=f+n.size.outerHeight,l=this.cols+1-u.length;for(t=0;t<l;t++)this.colYs[o+t]=c;return h},r.prototype._getColGroup=function(n){var i,r,t,u;if(n<2)return this.colYs;for(i=[],r=this.cols+1-n,t=0;t<r;t++)u=this.colYs.slice(t,t+n),i[t]=Math.max.apply(Math,u);return i},r.prototype._manageStamp=function(n){var e=t(n),u=this._getElementOffset(n),o=this.options.isOriginLeft?u.left:u.right,s=o+e.outerWidth,f=Math.floor(o/this.columnWidth),i,h,r;for(f=Math.max(0,f),i=Math.floor(s/this.columnWidth),i-=s%this.columnWidth?0:1,i=Math.min(this.cols-1,i),h=(this.options.isOriginTop?u.top:u.bottom)+e.outerHeight,r=f;r<=i;r++)this.colYs[r]=Math.max(h,this.colYs[r])},r.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var n={height:this.maxY};return this.options.isFitWidth&&(n.width=this._getContainerFitWidth()),n},r.prototype._getContainerFitWidth=function(){for(var n=0,t=this.cols;--t;){if(this.colYs[t]!==0)break;n++}return(this.cols-n)*this.columnWidth-this.gutter},r.prototype.resize=function(){var n=this.containerWidth;(this.getContainerWidth(),n!==this.containerWidth)&&this.layout()},r}var i=Array.prototype.indexOf?function(n,t){return n.indexOf(t)}:function(n,t){for(var r,i=0,u=n.length;i<u;i++)if(r=n[i],r===t)return i;return-1};typeof define=="function"&&define.amd?define(["outlayer/outlayer","get-size/get-size"],t):n.Masonry=t(n.Outlayer,n.getSize)}(window),function(n){function i(){}function t(n){function u(t){t.prototype.option||(t.prototype.option=function(t){n.isPlainObject(t)&&(this.options=n.extend(!0,this.options,t))})}function f(i,u){n.fn[i]=function(f){var h,e,o;if("string"==typeof f){for(var c=r.call(arguments,1),s=0,l=this.length;l>s;s++)if(h=this[s],e=n.data(h,i),e)if(n.isFunction(e[f])&&"_"!==f.charAt(0)){if(o=e[f].apply(e,c),void 0!==o)return o}else t("no such method '"+f+"' for "+i+" instance");else t("cannot call methods on "+i+" prior to initialization; attempted to call '"+f+"'");return this}return this.each(function(){var t=n.data(this,i);t?(t.option(f),t._init()):(t=new u(this,f),n.data(this,i,t))})}}if(n){var t="undefined"==typeof console?i:function(n){console.error(n)};return n.bridget=function(n,t){u(t);f(n,t)},n.bridget}}var r=Array.prototype.slice;"function"==typeof define&&define.amd?define("jquery-bridget/jquery.bridget",["jquery"],t):t(n.jQuery)}(window),function(n){function f(t){var i=n.event;return i.target=i.target||i.srcElement||t,i}var t=document.documentElement,u=function(){},i,r;t.addEventListener?u=function(n,t,i){n.addEventListener(t,i,!1)}:t.attachEvent&&(u=function(n,t,i){n[t+i]=i.handleEvent?function(){var t=f(n);i.handleEvent.call(i,t)}:function(){var t=f(n);i.call(n,t)};n.attachEvent("on"+t,n[t+i])});i=function(){};t.removeEventListener?i=function(n,t,i){n.removeEventListener(t,i,!1)}:t.detachEvent&&(i=function(n,t,i){n.detachEvent("on"+t,n[t+i]);try{delete n[t+i]}catch(r){n[t+i]=void 0}});r={bind:u,unbind:i};"function"==typeof define&&define.amd?define("eventie/eventie",r):"object"==typeof exports?module.exports=r:n.eventie=r}(this),function(n){function t(n){"function"==typeof n&&(t.isReady?n():u.push(n))}function i(n){var o="readystatechange"===n.type&&"complete"!==r.readyState,i,f,e;if(!t.isReady&&!o)for(t.isReady=!0,i=0,f=u.length;f>i;i++)e=u[i],e()}function f(u){return u.bind(r,"DOMContentLoaded",i),u.bind(r,"readystatechange",i),u.bind(n,"load",i),t}var r=n.document,u=[];t.isReady=!1;"function"==typeof define&&define.amd?(t.isReady="function"==typeof requirejs,define("doc-ready/doc-ready",["eventie/eventie"],f)):n.docReady=f(n.eventie)}(this),function(){function t(){}function r(n,t){for(var i=n.length;i--;)if(n[i].listener===t)return i;return-1}function i(n){return function(){return this[n].apply(this,arguments)}}var n=t.prototype,u=this,f=u.EventEmitter;n.getListeners=function(n){var r,t,i=this._getEvents();if(n instanceof RegExp){r={};for(t in i)i.hasOwnProperty(t)&&n.test(t)&&(r[t]=i[t])}else r=i[n]||(i[n]=[]);return r};n.flattenListeners=function(n){for(var i=[],t=0;n.length>t;t+=1)i.push(n[t].listener);return i};n.getListenersAsObject=function(n){var t,i=this.getListeners(n);return i instanceof Array&&(t={},t[n]=i),t||i};n.addListener=function(n,t){var i,u=this.getListenersAsObject(n),f="object"==typeof t;for(i in u)u.hasOwnProperty(i)&&-1===r(u[i],t)&&u[i].push(f?t:{listener:t,once:!1});return this};n.on=i("addListener");n.addOnceListener=function(n,t){return this.addListener(n,{listener:t,once:!0})};n.once=i("addOnceListener");n.defineEvent=function(n){return this.getListeners(n),this};n.defineEvents=function(n){for(var t=0;n.length>t;t+=1)this.defineEvent(n[t]);return this};n.removeListener=function(n,t){var f,i,u=this.getListenersAsObject(n);for(i in u)u.hasOwnProperty(i)&&(f=r(u[i],t),-1!==f&&u[i].splice(f,1));return this};n.off=i("removeListener");n.addListeners=function(n,t){return this.manipulateListeners(!1,n,t)};n.removeListeners=function(n,t){return this.manipulateListeners(!0,n,t)};n.manipulateListeners=function(n,t,i){var r,u,f=n?this.removeListener:this.addListener,e=n?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=i.length;r--;)f.call(this,t,i[r]);else for(r in t)t.hasOwnProperty(r)&&(u=t[r])&&("function"==typeof u?f.call(this,r,u):e.call(this,r,u));return this};n.removeEvent=function(n){var t,r=typeof n,i=this._getEvents();if("string"===r)delete i[n];else if(n instanceof RegExp)for(t in i)i.hasOwnProperty(t)&&n.test(t)&&delete i[t];else delete this._events;return this};n.removeAllListeners=i("removeEvent");n.emitEvent=function(n,t){var i,f,r,e,u=this.getListenersAsObject(n);for(r in u)if(u.hasOwnProperty(r))for(f=u[r].length;f--;)i=u[r][f],i.once===!0&&this.removeListener(n,i.listener),e=i.listener.apply(this,t||[]),e===this._getOnceReturnValue()&&this.removeListener(n,i.listener);return this};n.trigger=i("emitEvent");n.emit=function(n){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(n,t)};n.setOnceReturnValue=function(n){return this._onceReturnValue=n,this};n._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0};n._getEvents=function(){return this._events||(this._events={})};t.noConflict=function(){return u.EventEmitter=f,t};"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return t}):"object"==typeof module&&module.exports?module.exports=t:this.EventEmitter=t}.call(this),function(n){function t(n){if(n){if("string"==typeof r[n])return n;n=n.charAt(0).toUpperCase()+n.slice(1);for(var t,u=0,f=i.length;f>u;u++)if(t=i[u]+n,"string"==typeof r[t])return t}}var i="Webkit Moz ms Ms O".split(" "),r=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return t}):"object"==typeof exports?module.exports=t:n.getStyleProperty=t}(window),function(n){function i(n){var t=parseFloat(n),i=-1===n.indexOf("%")&&!isNaN(t);return i&&t}function e(){for(var i,r={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},n=0,u=t.length;u>n;n++)i=t[n],r[i]=0;return r}function r(n){function s(n){var s,u,l,c,a,v;if("string"==typeof n&&(n=document.querySelector(n)),n&&"object"==typeof n&&n.nodeType){if(s=f(n),"none"===s.display)return e();u={};u.width=n.offsetWidth;u.height=n.offsetHeight;for(var nt=u.isBorderBox=!(!r||!s[r]||"border-box"!==s[r]),y=0,tt=t.length;tt>y;y++)l=t[y],c=s[l],c=h(n,c),a=parseFloat(c),u[l]=isNaN(a)?0:a;var p=u.paddingLeft+u.paddingRight,w=u.paddingTop+u.paddingBottom,it=u.marginLeft+u.marginRight,rt=u.marginTop+u.marginBottom,b=u.borderLeftWidth+u.borderRightWidth,k=u.borderTopWidth+u.borderBottomWidth,d=nt&&o,g=i(s.width);return g!==!1&&(u.width=g+(d?0:p+b)),v=i(s.height),v!==!1&&(u.height=v+(d?0:w+k)),u.innerWidth=u.width-(p+b),u.innerHeight=u.height-(w+k),u.outerWidth=u.width+it,u.outerHeight=u.height+rt,u}}function h(n,t){if(u||-1===t.indexOf("%"))return t;var i=n.style,e=i.left,r=n.runtimeStyle,f=r&&r.left;return f&&(r.left=n.currentStyle.left),i.left=t,t=i.pixelLeft,i.left=e,f&&(r.left=f),t}var o,r=n("boxSizing");return function(){var n,t,u;r&&(n=document.createElement("div"),n.style.width="200px",n.style.padding="1px 2px 3px 4px",n.style.borderStyle="solid",n.style.borderWidth="1px 2px 3px 4px",n.style[r]="border-box",t=document.body||document.documentElement,t.appendChild(n),u=f(n),o=200===i(u.width),t.removeChild(n))}(),s}var u=n.getComputedStyle,f=u?function(n){return u(n,null)}:function(n){return n.currentStyle},t=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],r):"object"==typeof exports?module.exports=r(require("get-style-property")):n.getSize=r(n.getStyleProperty)}(window),function(n,t){function r(n,t){return n[f](t)}function u(n){if(!n.parentNode){var t=document.createDocumentFragment();t.appendChild(n)}}function s(n,t){u(n);for(var r=n.parentNode.querySelectorAll(t),i=0,f=r.length;f>i;i++)if(r[i]===n)return!0;return!1}function h(n,t){return u(n),r(n,t)}var i,f=function(){var r,n;if(t.matchesSelector)return"matchesSelector";for(var u=["webkit","moz","ms","o"],i=0,f=u.length;f>i;i++)if(r=u[i],n=r+"MatchesSelector",t[n])return n}(),e,o;f?(e=document.createElement("div"),o=r(e,"div"),i=o?r:h):i=s;"function"==typeof define&&define.amd?define("matches-selector/matches-selector",[],function(){return i}):window.matchesSelector=i}(this,Element.prototype),function(n){function r(n,t){for(var i in t)n[i]=t[i];return n}function u(n){for(var t in n)return!1;return t=null,!0}function f(n){return n.replace(/([A-Z])/g,function(n){return"-"+n.toLowerCase()})}function t(n,t,i){function o(n,t){n&&(this.element=n,this.layout=t,this.position={x:0,y:0},this._create())}var s=i("transition"),h=i("transform"),w=s&&h,b=!!i("perspective"),c={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[s],l=["transform","transition","transitionDuration","transitionProperty"],k=function(){for(var n,t,u={},r=0,f=l.length;f>r;r++)n=l[r],t=i(n),t&&t!==n&&(u[n]=t);return u}(),a,v,y,p;return r(o.prototype,n.prototype),o.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}};this.css({position:"absolute"})},o.prototype.handleEvent=function(n){var t="on"+n.type;this[t]&&this[t](n)},o.prototype.getSize=function(){this.size=t(this.element)},o.prototype.css=function(n){var r=this.element.style,t,i;for(t in n)i=k[t]||t,r[i]=n[t]},o.prototype.getPosition=function(){var r=e(this.element),u=this.layout.options,f=u.isOriginLeft,o=u.isOriginTop,n=parseInt(r[f?"left":"right"],10),t=parseInt(r[o?"top":"bottom"],10),i;n=isNaN(n)?0:n;t=isNaN(t)?0:t;i=this.layout.size;n-=f?i.paddingLeft:i.paddingRight;t-=o?i.paddingTop:i.paddingBottom;this.position.x=n;this.position.y=t},o.prototype.layoutPosition=function(){var t=this.layout.size,i=this.layout.options,n={};i.isOriginLeft?(n.left=this.position.x+t.paddingLeft+"px",n.right=""):(n.right=this.position.x+t.paddingRight+"px",n.left="");i.isOriginTop?(n.top=this.position.y+t.paddingTop+"px",n.bottom=""):(n.bottom=this.position.y+t.paddingBottom+"px",n.top="");this.css(n);this.emitEvent("layout",[this])},a=b?function(n,t){return"translate3d("+n+"px, "+t+"px, 0)"}:function(n,t){return"translate("+n+"px, "+t+"px)"},o.prototype._transitionTo=function(n,t){this.getPosition();var e=this.position.x,o=this.position.y,s=parseInt(n,10),h=parseInt(t,10),c=s===this.position.x&&h===this.position.y;if(this.setPosition(n,t),c&&!this.isTransitioning)return this.layoutPosition(),void 0;var i=n-e,r=t-o,u={},f=this.layout.options;i=f.isOriginLeft?i:-i;r=f.isOriginTop?r:-r;u.transform=a(i,r);this.transition({to:u,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},o.prototype.goTo=function(n,t){this.setPosition(n,t);this.layoutPosition()},o.prototype.moveTo=w?o.prototype._transitionTo:o.prototype.goTo,o.prototype.setPosition=function(n,t){this.position.x=parseInt(n,10);this.position.y=parseInt(t,10)},o.prototype._nonTransition=function(n){this.css(n.to);n.isCleaning&&this._removeStyles(n.to);for(var t in n.onTransitionEnd)n.onTransitionEnd[t].call(this)},o.prototype._transition=function(n){var i,t,r;if(!parseFloat(this.layout.options.transitionDuration))return this._nonTransition(n),void 0;i=this._transn;for(t in n.onTransitionEnd)i.onEnd[t]=n.onTransitionEnd[t];for(t in n.to)i.ingProperties[t]=!0,n.isCleaning&&(i.clean[t]=!0);n.from&&(this.css(n.from),r=this.element.offsetHeight,r=null);this.enableTransition(n.to);this.css(n.to);this.isTransitioning=!0},v=h&&f(h)+",opacity",o.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:v,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(c,this,!1))},o.prototype.transition=o.prototype[s?"_transition":"_nonTransition"],o.prototype.onwebkitTransitionEnd=function(n){this.ontransitionend(n)},o.prototype.onotransitionend=function(n){this.ontransitionend(n)},y={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"},o.prototype.ontransitionend=function(n){var t,i,r;n.target===this.element&&(t=this._transn,i=y[n.propertyName]||n.propertyName,(delete t.ingProperties[i],u(t.ingProperties)&&this.disableTransition(),i in t.clean&&(this.element.style[n.propertyName]="",delete t.clean[i]),i in t.onEnd)&&(r=t.onEnd[i],r.call(this),delete t.onEnd[i]),this.emitEvent("transitionEnd",[this]))},o.prototype.disableTransition=function(){this.removeTransitionStyles();this.element.removeEventListener(c,this,!1);this.isTransitioning=!1},o.prototype._removeStyles=function(n){var t={},i;for(i in n)t[i]="";this.css(t)},p={transitionProperty:"",transitionDuration:""},o.prototype.removeTransitionStyles=function(){this.css(p)},o.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element);this.emitEvent("remove",[this])},o.prototype.remove=function(){if(!s||!parseFloat(this.layout.options.transitionDuration))return this.removeElem(),void 0;var n=this;this.on("transitionEnd",function(){return n.removeElem(),!0});this.hide()},o.prototype.reveal=function(){delete this.isHidden;this.css({display:""});var n=this.layout.options;this.transition({from:n.hiddenStyle,to:n.visibleStyle,isCleaning:!0})},o.prototype.hide=function(){this.isHidden=!0;this.css({display:""});var n=this.layout.options;this.transition({from:n.visibleStyle,to:n.hiddenStyle,isCleaning:!0,onTransitionEnd:{opacity:function(){this.isHidden&&this.css({display:"none"})}}})},o.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},o}var i=n.getComputedStyle,e=i?function(n){return i(n,null)}:function(n){return n.currentStyle};"function"==typeof define&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],t):(n.Outlayer={},n.Outlayer.Item=t(n.EventEmitter,n.getSize,n.getStyleProperty))}(window),function(n){function t(n,t){for(var i in t)n[i]=t[i];return n}function c(n){return"[object Array]"===a.call(n)}function u(n){var t=[],i,r;if(c(n))t=n;else if(n&&"number"==typeof n.length)for(i=0,r=n.length;r>i;i++)t.push(n[i]);else t.push(n);return t}function e(n,t){var i=v(t,n);-1!==i&&t.splice(i,1)}function l(n){return n.replace(/(.)([A-Z])/g,function(n,t,i){return t+"-"+i}).toLowerCase()}function o(o,c,a,v,y,p){function w(n,i){if("string"==typeof n&&(n=s.querySelector(n)),!n||!f(n))return r&&r.error("Bad "+this.constructor.namespace+" element: "+n),void 0;this.element=n;this.options=t({},this.constructor.defaults);this.option(i);var u=++k;this.element.outlayerGUID=u;b[u]=this;this._create();this.options.isInitLayout&&this.layout()}var k=0,b={};return w.namespace="outlayer",w.Item=p,w.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},t(w.prototype,a.prototype),w.prototype.option=function(n){t(this.options,n)},w.prototype._create=function(){this.reloadItems();this.stamps=[];this.stamp(this.options.stamp);t(this.element.style,this.options.containerStyle);this.options.isResizeBound&&this.bindResize()},w.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},w.prototype._itemize=function(n){for(var i,r,u=this._filterFindItemElements(n),e=this.constructor.Item,f=[],t=0,o=u.length;o>t;t++)i=u[t],r=new e(i,this),f.push(r);return f},w.prototype._filterFindItemElements=function(n){var t;n=u(n);for(var r=this.options.itemSelector,i=[],e=0,h=n.length;h>e;e++)if(t=n[e],f(t))if(r){y(t,r)&&i.push(t);for(var s=t.querySelectorAll(r),o=0,c=s.length;c>o;o++)i.push(s[o])}else i.push(t);return i},w.prototype.getItemElements=function(){for(var t=[],n=0,i=this.items.length;i>n;n++)t.push(this.items[n].element);return t},w.prototype.layout=function(){this._resetLayout();this._manageStamps();var n=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,n);this._isLayoutInited=!0},w.prototype._init=w.prototype.layout,w.prototype._resetLayout=function(){this.getSize()},w.prototype.getSize=function(){this.size=v(this.element)},w.prototype._getMeasurement=function(n,t){var r,i=this.options[n];i?("string"==typeof i?r=this.element.querySelector(i):f(i)&&(r=i),this[n]=r?v(r)[t]:i):this[n]=0},w.prototype.layoutItems=function(n,t){n=this._getItemsForLayout(n);this._layoutItems(n,t);this._postLayout()},w.prototype._getItemsForLayout=function(n){for(var t,r=[],i=0,u=n.length;u>i;i++)t=n[i],t.isIgnored||r.push(t);return r},w.prototype._layoutItems=function(n,t){function f(){e.emitEvent("layoutComplete",[e,n])}var e=this,i,r;if(!n||!n.length)return f(),void 0;this._itemsOn(n,"layout",f);for(var o=[],u=0,s=n.length;s>u;u++)i=n[u],r=this._getItemLayoutPosition(i),r.item=i,r.isInstant=t||i.isLayoutInstant,o.push(r);this._processLayoutQueue(o)},w.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},w.prototype._processLayoutQueue=function(n){for(var t,i=0,r=n.length;r>i;i++)t=n[i],this._positionItem(t.item,t.x,t.y,t.isInstant)},w.prototype._positionItem=function(n,t,i,r){r?n.goTo(t,i):n.moveTo(t,i)},w.prototype._postLayout=function(){this.resizeContainer()},w.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var n=this._getContainerSize();n&&(this._setContainerMeasure(n.width,!0),this._setContainerMeasure(n.height,!1))}},w.prototype._getContainerSize=h,w.prototype._setContainerMeasure=function(n,t){if(void 0!==n){var i=this.size;i.isBorderBox&&(n+=t?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth);n=Math.max(n,0);this.element.style[t?"width":"height"]=n+"px"}},w.prototype._itemsOn=function(n,t,i){function e(){return f++,f===o&&i.call(s),!0}for(var u,f=0,o=n.length,s=this,r=0,h=n.length;h>r;r++){u=n[r];u.on(t,e)}},w.prototype.ignore=function(n){var t=this.getItem(n);t&&(t.isIgnored=!0)},w.prototype.unignore=function(n){var t=this.getItem(n);t&&delete t.isIgnored},w.prototype.stamp=function(n){var t,i,r;if(n=this._find(n))for(this.stamps=this.stamps.concat(n),t=0,i=n.length;i>t;t++)r=n[t],this.ignore(r)},w.prototype.unstamp=function(n){var t,r,i;if(n=this._find(n))for(t=0,r=n.length;r>t;t++)i=n[t],e(i,this.stamps),this.unignore(i)},w.prototype._find=function(n){if(n)return"string"==typeof n&&(n=this.element.querySelectorAll(n)),n=u(n)},w.prototype._manageStamps=function(){var n,t,i;if(this.stamps&&this.stamps.length)for(this._getBoundingRect(),n=0,t=this.stamps.length;t>n;n++)i=this.stamps[n],this._manageStamp(i)},w.prototype._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),n=this.size;this._boundingRect={left:t.left+n.paddingLeft+n.borderLeftWidth,top:t.top+n.paddingTop+n.borderTopWidth,right:t.right-(n.paddingRight+n.borderRightWidth),bottom:t.bottom-(n.paddingBottom+n.borderBottomWidth)}},w.prototype._manageStamp=h,w.prototype._getElementOffset=function(n){var t=n.getBoundingClientRect(),i=this._boundingRect,r=v(n);return{left:t.left-i.left-r.marginLeft,top:t.top-i.top-r.marginTop,right:i.right-t.right-r.marginRight,bottom:i.bottom-t.bottom-r.marginBottom}},w.prototype.handleEvent=function(n){var t="on"+n.type;this[t]&&this[t](n)},w.prototype.bindResize=function(){this.isResizeBound||(o.bind(n,"resize",this),this.isResizeBound=!0)},w.prototype.unbindResize=function(){this.isResizeBound&&o.unbind(n,"resize",this);this.isResizeBound=!1},w.prototype.onresize=function(){function t(){n.resize();delete n.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var n=this;this.resizeTimeout=setTimeout(t,100)},w.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},w.prototype.needsResizeLayout=function(){var n=v(this.element),t=this.size&&n;return t&&n.innerWidth!==this.size.innerWidth},w.prototype.addItems=function(n){var t=this._itemize(n);return t.length&&(this.items=this.items.concat(t)),t},w.prototype.appended=function(n){var t=this.addItems(n);t.length&&(this.layoutItems(t,!0),this.reveal(t))},w.prototype.prepended=function(n){var t=this._itemize(n),i;t.length&&(i=this.items.slice(0),this.items=t.concat(i),this._resetLayout(),this._manageStamps(),this.layoutItems(t,!0),this.reveal(t),this.layoutItems(i))},w.prototype.reveal=function(n){var i=n&&n.length,t,r;if(i)for(t=0;i>t;t++)r=n[t],r.reveal()},w.prototype.hide=function(n){var i=n&&n.length,t,r;if(i)for(t=0;i>t;t++)r=n[t],r.hide()},w.prototype.getItem=function(n){for(var t,i=0,r=this.items.length;r>i;i++)if(t=this.items[i],t.element===n)return t},w.prototype.getItems=function(n){var r,t;if(n&&n.length){for(var u=[],i=0,f=n.length;f>i;i++)r=n[i],t=this.getItem(r),t&&u.push(t);return u}},w.prototype.remove=function(n){var t,i,f,r;if(n=u(n),t=this.getItems(n),t&&t.length)for(this._itemsOn(t,"remove",function(){this.emitEvent("removeComplete",[this,t])}),i=0,f=t.length;f>i;i++)r=t[i],r.remove(),e(r,this.items)},w.prototype.destroy=function(){var t=this.element.style,n,r,u;for(t.height="",t.position="",t.width="",n=0,r=this.items.length;r>n;n++)u=this.items[n],u.destroy();this.unbindResize();delete this.element.outlayerGUID;i&&i.removeData(this.element,this.constructor.namespace)},w.data=function(n){var t=n&&n.outlayerGUID;return t&&b[t]},w.create=function(n,u){function f(){w.apply(this,arguments)}return Object.create?f.prototype=Object.create(w.prototype):t(f.prototype,w.prototype),f.prototype.constructor=f,f.defaults=t({},w.defaults),t(f.defaults,u),f.prototype.settings={},f.namespace=n,f.data=w.data,f.Item=function(){p.apply(this,arguments)},f.Item.prototype=new p,c(function(){for(var o,t,u,h,c=l(n),a=s.querySelectorAll(".js-"+c),v="data-"+c+"-options",e=0,y=a.length;y>e;e++){t=a[e];u=t.getAttribute(v);try{o=u&&JSON.parse(u)}catch(p){r&&r.error("Error parsing "+v+" on "+t.nodeName.toLowerCase()+(t.id?"#"+t.id:"")+": "+p);continue}h=new f(t,o);i&&i.data(t,n,h)}}),i&&i.bridget&&i.bridget(n,f),f},w.Item=p,w}var s=n.document,r=n.console,i=n.jQuery,h=function(){},a=Object.prototype.toString,f="object"==typeof HTMLElement?function(n){return n instanceof HTMLElement}:function(n){return n&&"object"==typeof n&&1===n.nodeType&&"string"==typeof n.nodeName},v=Array.prototype.indexOf?function(n,t){return n.indexOf(t)}:function(n,t){for(var i=0,r=n.length;r>i;i++)if(n[i]===t)return i;return-1};"function"==typeof define&&define.amd?define("outlayer/outlayer",["eventie/eventie","doc-ready/doc-ready","eventEmitter/EventEmitter","get-size/get-size","matches-selector/matches-selector","./item"],o):n.Outlayer=o(n.eventie,n.docReady,n.EventEmitter,n.getSize,n.matchesSelector,n.Outlayer.Item)}(window),function(n){function t(n){function t(){n.Item.apply(this,arguments)}return t.prototype=new n.Item,t.prototype._create=function(){this.id=this.layout.itemGUID++;n.Item.prototype._create.call(this);this.sortData={}},t.prototype.updateSortData=function(){var t,i,n,r;if(!this.isIgnored){this.sortData.id=this.id;this.sortData["original-order"]=this.id;this.sortData.random=Math.random();t=this.layout.options.getSortData;i=this.layout._sorters;for(n in t)r=i[n],this.sortData[n]=r(this.element,this)}},t}"function"==typeof define&&define.amd?define("isotope/js/item",["outlayer/outlayer"],t):(n.Isotope=n.Isotope||{},n.Isotope.Item=t(n.Outlayer))}(window),function(n){function t(n,t){function i(n){this.isotope=n;n&&(this.options=n.options[this.namespace],this.element=n.element,this.items=n.filteredItems,this.size=n.size)}return function(){function f(n){return function(){return t.prototype[n].apply(this.isotope,arguments)}}for(var n,u=["_resetLayout","_getItemLayoutPosition","_manageStamp","_getContainerSize","_getElementOffset","needsResizeLayout"],r=0,e=u.length;e>r;r++)n=u[r],i.prototype[n]=f(n)}(),i.prototype.needsVerticalResizeLayout=function(){var t=n(this.isotope.element),i=this.isotope.size&&t;return i&&t.innerHeight!==this.isotope.size.innerHeight},i.prototype._getMeasurement=function(){this.isotope._getMeasurement.apply(this,arguments)},i.prototype.getColumnWidth=function(){this.getSegmentSize("column","Width")},i.prototype.getRowHeight=function(){this.getSegmentSize("row","Height")},i.prototype.getSegmentSize=function(n,t){var i=n+t,u="outer"+t,r;(this._getMeasurement(i,u),this[i])||(r=this.getFirstItemSize(),this[i]=r&&r[u]||this.isotope.size["inner"+t])},i.prototype.getFirstItemSize=function(){var t=this.isotope.filteredItems[0];return t&&t.element&&n(t.element)},i.prototype.layout=function(){this.isotope.layout.apply(this.isotope,arguments)},i.prototype.getSize=function(){this.isotope.getSize();this.size=this.isotope.size},i.modes={},i.create=function(n,t){function r(){i.apply(this,arguments)}return r.prototype=new i,t&&(r.options=t),r.prototype.namespace=n,i.modes[n]=r,r},i}"function"==typeof define&&define.amd?define("isotope/js/layout-mode",["get-size/get-size","outlayer/outlayer"],t):(n.Isotope=n.Isotope||{},n.Isotope.LayoutMode=t(n.getSize,n.Outlayer))}(window),function(n){function t(n,t){var r=n.create("masonry");return r.prototype._resetLayout=function(){this.getSize();this._getMeasurement("columnWidth","outerWidth");this._getMeasurement("gutter","outerWidth");this.measureColumns();var n=this.cols;for(this.colYs=[];n--;)this.colYs.push(0);this.maxY=0},r.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var n=this.items[0],i=n&&n.element;this.columnWidth=i&&t(i).outerWidth||this.containerWidth}this.columnWidth+=this.gutter;this.cols=Math.floor((this.containerWidth+this.gutter)/this.columnWidth);this.cols=Math.max(this.cols,1)},r.prototype.getContainerWidth=function(){var i=this.options.isFitWidth?this.element.parentNode:this.element,n=t(i);this.containerWidth=n&&n.innerWidth},r.prototype._getItemLayoutPosition=function(n){n.getSize();var e=n.size.outerWidth%this.columnWidth,s=e&&1>e?"round":"ceil",t=Math[s](n.size.outerWidth/this.columnWidth);t=Math.min(t,this.cols);for(var r=this._getColGroup(t),u=Math.min.apply(Math,r),o=i(r,u),h={x:this.columnWidth*o,y:u},c=u+n.size.outerHeight,l=this.cols+1-r.length,f=0;l>f;f++)this.colYs[o+f]=c;return h},r.prototype._getColGroup=function(n){var i;if(2>n)return this.colYs;for(var r=[],u=this.cols+1-n,t=0;u>t;t++)i=this.colYs.slice(t,t+n),r[t]=Math.max.apply(Math,i);return r},r.prototype._manageStamp=function(n){var e=t(n),u=this._getElementOffset(n),o=this.options.isOriginLeft?u.left:u.right,s=o+e.outerWidth,f=Math.floor(o/this.columnWidth),i,h,r;for(f=Math.max(0,f),i=Math.floor(s/this.columnWidth),i-=s%this.columnWidth?0:1,i=Math.min(this.cols-1,i),h=(this.options.isOriginTop?u.top:u.bottom)+e.outerHeight,r=f;i>=r;r++)this.colYs[r]=Math.max(h,this.colYs[r])},r.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var n={height:this.maxY};return this.options.isFitWidth&&(n.width=this._getContainerFitWidth()),n},r.prototype._getContainerFitWidth=function(){for(var n=0,t=this.cols;--t&&0===this.colYs[t];)n++;return(this.cols-n)*this.columnWidth-this.gutter},r.prototype.needsResizeLayout=function(){var n=this.containerWidth;return this.getContainerWidth(),n!==this.containerWidth},r}var i=Array.prototype.indexOf?function(n,t){return n.indexOf(t)}:function(n,t){for(var r,i=0,u=n.length;u>i;i++)if(r=n[i],r===t)return i;return-1};"function"==typeof define&&define.amd?define("masonry/masonry",["outlayer/outlayer","get-size/get-size"],t):n.Masonry=t(n.Outlayer,n.getSize)}(window),function(n){function i(n,t){for(var i in t)n[i]=t[i];return n}function t(n,t){var r=n.create("masonry"),e=r.prototype._getElementOffset,o=r.prototype.layout,s=r.prototype._getMeasurement,u,f;return i(r.prototype,t.prototype),r.prototype._getElementOffset=e,r.prototype.layout=o,r.prototype._getMeasurement=s,u=r.prototype.measureColumns,r.prototype.measureColumns=function(){this.items=this.isotope.filteredItems;u.call(this)},f=r.prototype._manageStamp,r.prototype._manageStamp=function(){this.options.isOriginLeft=this.isotope.options.isOriginLeft;this.options.isOriginTop=this.isotope.options.isOriginTop;f.apply(this,arguments)},r}"function"==typeof define&&define.amd?define("isotope/js/layout-modes/masonry",["../layout-mode","masonry/masonry"],t):t(n.Isotope.LayoutMode,n.Masonry)}(window),function(n){function t(n){var t=n.create("fitRows");return t.prototype._resetLayout=function(){this.x=0;this.y=0;this.maxY=0},t.prototype._getItemLayoutPosition=function(n){n.getSize();0!==this.x&&n.size.outerWidth+this.x>this.isotope.size.innerWidth&&(this.x=0,this.y=this.maxY);var t={x:this.x,y:this.y};return this.maxY=Math.max(this.maxY,this.y+n.size.outerHeight),this.x+=n.size.outerWidth,t},t.prototype._getContainerSize=function(){return{height:this.maxY}},t}"function"==typeof define&&define.amd?define("isotope/js/layout-modes/fit-rows",["../layout-mode"],t):t(n.Isotope.LayoutMode)}(window),function(n){function t(n){var t=n.create("vertical",{horizontalAlignment:0});return t.prototype._resetLayout=function(){this.y=0},t.prototype._getItemLayoutPosition=function(n){n.getSize();var t=(this.isotope.size.innerWidth-n.size.outerWidth)*this.options.horizontalAlignment,i=this.y;return this.y+=n.size.outerHeight,{x:t,y:i}},t.prototype._getContainerSize=function(){return{height:this.y}},t}"function"==typeof define&&define.amd?define("isotope/js/layout-modes/vertical",["../layout-mode"],t):t(n.Isotope.LayoutMode)}(window),function(n){function u(n,t){for(var i in t)n[i]=t[i];return n}function f(n){return"[object Array]"===c.call(n)}function t(n){var t=[],i,r;if(f(n))t=n;else if(n&&"number"==typeof n.length)for(i=0,r=n.length;r>i;i++)t.push(n[i]);else t.push(n);return t}function e(n,t){var i=l(t,n);-1!==i&&t.splice(i,1)}function i(n,i,f,s,c){function y(n,t){return function(i,r){for(var s,h,u=0,c=n.length;c>u;u++){var f=n[u],e=i.sortData[f],o=r.sortData[f];if(e>o||o>e)return s=void 0!==t[f]?t[f]:t,h=s?1:-1,(e>o?1:-1)*h}return 0}}var l=n.create("isotope",{layoutMode:"masonry",isJQueryFiltering:!0,sortAscending:!0}),a,v;return l.Item=s,l.LayoutMode=c,l.prototype._create=function(){this.itemGUID=0;this._sorters={};this._getSorters();n.prototype._create.call(this);this.modes={};this.filteredItems=this.items;this.sortHistory=["original-order"];for(var t in c.modes)this._initLayoutMode(t)},l.prototype.reloadItems=function(){this.itemGUID=0;n.prototype.reloadItems.call(this)},l.prototype._itemize=function(){for(var r,t=n.prototype._itemize.apply(this,arguments),i=0,u=t.length;u>i;i++)r=t[i],r.id=this.itemGUID++;return this._updateItemsSortData(t),t},l.prototype._initLayoutMode=function(n){var t=c.modes[n],i=this.options[n]||{};this.options[n]=t.options?u(t.options,i):i;this.modes[n]=new t(this)},l.prototype.layout=function(){return!this._isLayoutInited&&this.options.isInitLayout?(this.arrange(),void 0):(this._layout(),void 0)},l.prototype._layout=function(){var n=this._getIsInstant();this._resetLayout();this._manageStamps();this.layoutItems(this.filteredItems,n);this._isLayoutInited=!0},l.prototype.arrange=function(n){this.option(n);this._getIsInstant();this.filteredItems=this._filter(this.items);this._sort();this._layout()},l.prototype._init=l.prototype.arrange,l.prototype._getIsInstant=function(){var n=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;return this._isInstant=n,n},l.prototype._filter=function(n){function e(){u.reveal(s);u.hide(h)}var r=this.options.filter,t,i,u;r=r||"*";for(var o=[],s=[],h=[],c=this._getFilterTest(r),f=0,l=n.length;l>f;f++)t=n[f],t.isIgnored||(i=c(t),i&&o.push(t),i&&t.isHidden?s.push(t):i||t.isHidden||h.push(t));return u=this,this._isInstant?this._noTransition(e):e(),o},l.prototype._getFilterTest=function(n){return r&&this.options.isJQueryFiltering?function(t){return r(t.element).is(n)}:"function"==typeof n?function(t){return n(t.element)}:function(t){return f(t.element,n)}},l.prototype.updateSortData=function(n){this._getSorters();n=t(n);var i=this.getItems(n);i=i.length?i:this.items;this._updateItemsSortData(i)},l.prototype._getSorters=function(){var t=this.options.getSortData,n,i;for(n in t)i=t[n],this._sorters[n]=a(i)},l.prototype._updateItemsSortData=function(n){for(var i,t=0,r=n.length;r>t;t++)i=n[t],i.updateSortData()},a=function(){function n(n){if("string"!=typeof n)return n;var i=o(n).split(" "),r=i[0],u=r.match(/^\[(.+)\]$/),s=u&&u[1],f=t(s,r),e=l.sortDataParsers[i[1]];return e?function(n){return n&&e(f(n))}:function(n){return n&&f(n)}}function t(n,t){return n?function(t){return t.getAttribute(n)}:function(n){var i=n.querySelector(t);return i&&h(i)}}return n}(),l.sortDataParsers={parseInt:function(n){return parseInt(n,10)},parseFloat:function(n){return parseFloat(n)}},l.prototype._sort=function(){var n=this.options.sortBy,t,i;n&&(t=[].concat.apply(n,this.sortHistory),i=y(t,this.options.sortAscending),this.filteredItems.sort(i),n!==this.sortHistory[0]&&this.sortHistory.unshift(n))},l.prototype._mode=function(){var n=this.options.layoutMode,t=this.modes[n];if(!t)throw Error("No layout mode: "+n);return t.options=this.options[n],t},l.prototype._resetLayout=function(){n.prototype._resetLayout.call(this);this._mode()._resetLayout()},l.prototype._getItemLayoutPosition=function(n){return this._mode()._getItemLayoutPosition(n)},l.prototype._manageStamp=function(n){this._mode()._manageStamp(n)},l.prototype._getContainerSize=function(){return this._mode()._getContainerSize()},l.prototype.needsResizeLayout=function(){return this._mode().needsResizeLayout()},l.prototype.appended=function(n){var t=this.addItems(n),i;t.length&&(i=this._filterRevealAdded(t),this.filteredItems=this.filteredItems.concat(i))},l.prototype.prepended=function(n){var t=this._itemize(n),i,r;t.length&&(i=this.items.slice(0),this.items=t.concat(i),this._resetLayout(),this._manageStamps(),r=this._filterRevealAdded(t),this.layoutItems(i),this.filteredItems=r.concat(this.filteredItems))},l.prototype._filterRevealAdded=function(n){var t=this._noTransition(function(){return this._filter(n)});return this.layoutItems(t,!0),this.reveal(t),n},l.prototype.insert=function(n){var i=this.addItems(n),t,f,r,u;if(i.length){for(r=i.length,t=0;r>t;t++)f=i[t],this.element.appendChild(f.element);for(u=this._filter(i),this._noTransition(function(){this.hide(u)}),t=0;r>t;t++)i[t].isLayoutInstant=!0;for(this.arrange(),t=0;r>t;t++)delete i[t].isLayoutInstant;this.reveal(u)}},v=l.prototype.remove,l.prototype.remove=function(n){var i,r,u,f;if(n=t(n),i=this.getItems(n),v.call(this,n),i&&i.length)for(r=0,u=i.length;u>r;r++)f=i[r],e(f,this.filteredItems)},l.prototype._noTransition=function(n){var i=this.options.transitionDuration,t;return this.options.transitionDuration=0,t=n.call(this),this.options.transitionDuration=i,t},l}var r=n.jQuery,o=String.prototype.trim?function(n){return n.trim()}:function(n){return n.replace(/^\s+|\s+$/g,"")},s=document.documentElement,h=s.textContent?function(n){return n.textContent}:function(n){return n.innerText},c=Object.prototype.toString,l=Array.prototype.indexOf?function(n,t){return n.indexOf(t)}:function(n,t){for(var i=0,r=n.length;r>i;i++)if(n[i]===t)return i;return-1};"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size","matches-selector/matches-selector","isotope/js/item","isotope/js/layout-mode","isotope/js/layout-modes/masonry","isotope/js/layout-modes/fit-rows","isotope/js/layout-modes/vertical"],i):n.Isotope=i(n.Outlayer,n.getSize,n.matchesSelector,n.Isotope.Item,n.Isotope.LayoutMode)}(window),function(n){function i(n,t,i,r){var o=n.data("ddslick"),l;n.is("select")&&(n=n.parent().find(".dd-container"));var h=n.find(".dd-selected"),a=h.siblings(".dd-selected-value"),y=n.find(".dd-options"),p=h.siblings(".dd-pointer"),c=n.find(".dd-option").eq(t),v=c.closest("li"),s=o.settings,f=o.settings.data[t];if(n.find(".dd-option").removeClass("dd-option-selected"),c.addClass("dd-option-selected"),o.selectedIndex=t,o.selectedItem=v,o.selectedData=f,s.showSelectedHTML)try{l=f.text.length>18?f.text.slice(0,15)+"...":f.text;h.html((f.imageSrc?'<img class="dd-selected-image'+(s.imagePosition=="right"?" dd-image-right":"")+'" alt="'+f.text+'" src="'+f.imageSrc+'" />':"")+(f.text?'<section class="dd-selected-text">'+f.text+"<\/section>":"")+(f.description?'<small class="dd-selected-description dd-desc'+(s.truncateDescription?" dd-selected-description-truncated":"")+'" >'+f.description+"<\/small>":""))}catch(w){}else h.html(f.text);a.val(f.value);o.original[0].selectedIndex&&(o.original[0].selectedIndex=t);o.original.val(f.value);n.data("ddslick",o);u(n);e(n);typeof s.onSelected=="function"&&s.onSelected.call(this,o,i,r)}function f(t,i){var f=t.find(".dd-select"),r=f.siblings(".dd-options"),e=f.find(".dd-pointer"),s=r.is(":visible"),o,u;n(".dd-click-off-close").not(r).slideUp(50);n(".dd-pointer").removeClass("dd-pointer-up");s?(r.slideUp("fast"),e.removeClass("dd-pointer-up"),setTimeout(function(){f.removeClass("dd-opened")},180)):(e.addClass("dd-pointer-up"),o=n("li",r).not(".noshow").slice(0,i.maxShownOptions),u=0,r.slideDown({duration:"fast",step:function(){u=0;o.each(function(){u+=n(this).outerHeight()});r.css({maxHeight:u})}}))}function u(n){n.find(".dd-options").slideUp("fast");n.find(".dd-pointer").removeClass("dd-pointer-up");setTimeout(function(){n.find(".dd-select").removeClass("dd-opened")},180)}function e(n){var r=n.find(".dd-select").css("height"),t=n.find(".dd-selected-description"),i=n.find(".dd-selected-image");t.length<=0&&i.length>0}n.fn.ddslick=function(i){if(t[i])return t[i].apply(this,Array.prototype.slice.call(arguments,1));if(typeof i!="object"&&i)n.error("Method "+i+" does not exists.");else return t.init.apply(this,arguments)};var t={},r=navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i);defaults={data:[],keepJSONItemsOnTop:!1,height:null,maxShownOptions:4,background:"transparent",selectText:"",defaultSelectedIndex:null,truncateDescription:!0,imagePosition:"left",showSelectedHTML:!0,clickOffToClose:!0,onSelected:function(){},onOpen:function(){}};ddSelectHtml='<div class="dd-select"><input class="dd-selected-value" type="hidden" /><a class="dd-selected"><\/a><span class="dd-pointer dd-pointer-down"><\/span><\/div>';ddOptionsHtml='<ul class="dd-options"><\/ul>';ddslickCSS='<style id="css-ddslick" type="text/css">.dd-select{ border-radius:2px; border:solid 1px #ccc; position:relative; cursor:pointer;}.dd-desc { color:#aaa; display:block; overflow: hidden; font-weight:normal; line-height: 1.4em; }.dd-selected{ overflow:hidden; display:block; padding:10px; font-weight:bold;}.dd-pointer{ width:18px; height:10px; position:absolute; right:10px; top:50%; margin-top:-4px;}.dd-pointer-down{ background: url("/Assets/images/sprites.png") -57px -119px no-repeat; }.dd-pointer-up{ background: url("/Assets/images/sprites.png") -18px -119px no-repeat; }.dd-options{ border:solid 1px #ccc; border-top:none; list-style:none; box-shadow:0px 1px 5px #ddd; display:none; position:absolute; z-index:2000; margin:0; padding:0;background:#fff; overflow:auto;}.dd-option{ padding:10px; display:block; border-bottom:solid 1px #ddd; overflow:hidden; text-decoration:none; color:#333; cursor:pointer;-webkit-transition: all 0.25s ease-in-out; -moz-transition: all 0.25s ease-in-out;-o-transition: all 0.25s ease-in-out;-ms-transition: all 0.25s ease-in-out; }.dd-options > li:last-child > .dd-option{ border-bottom:none;}.dd-option:hover{ background:#f3f3f3; color:#000;}.dd-selected-description-truncated { text-overflow: ellipsis; white-space:nowrap; }.dd-option-selected { background:#f6f6f6; }.dd-option-image, .dd-selected-image { vertical-align:middle; float:left; margin-right:5px; max-width:auto;position:relative;top:-3px;}.dd-image-right { float:right; margin-right:15px; margin-left:5px;}.dd-container{ position:relative;} .dd-selected-text { font-weight:bold}<\/style>';ddSlickMobileCSS='<style id="css-ddslick-mobile" type="text/css">.dd-slick-wrapper select {opacity: 0; position: absolute; height: 100%; max-width: 100%; width: 100%; z-index: 50; display: block!important;}.dd-slick-wrapper {position: relative}<\/style>';n("#css-ddslick").length<=0&&(n(ddslickCSS).appendTo("head"),r&&n(ddSlickMobileCSS).appendTo("head"));t.init=function(t){var t=n.extend({},defaults,t);return this.each(function(){var e=n(this),y=e.data("ddslick"),p,h,c,o,s,l,a,v;if(e.find("option").length<=0){e.hide();return}if(!y){if(o=[],p=t.data,e.find("option").each(function(){var t=n(this),i=t.data();o.push({text:n.trim(t.text()),value:t.val(),selected:t.is(":selected"),description:i.description,title:t.attr("title"),imageSrc:i.imagesrc?i.imagesrc:t.attr("imagesrc")})}),t.keepJSONItemsOnTop?n.merge(t.data,o):t.data=n.merge(o,t.data),h=e,c=n("<div><\/div>"),e.hide().wrap('<div class="dd-slick-wrapper" />'),e.parent().append(c),e=c,e.addClass("dd-container").append(ddSelectHtml).append(ddOptionsHtml),o=e.find(".dd-select"),s=e.find(".dd-options"),s.css({width:t.width}),o.css({width:t.width}),e.css({width:t.width}),t.height!=null&&s.css({height:t.height,overflow:"auto"}),n.each(t.data,function(i,r){r.selected&&(t.defaultSelectedIndex=i);var u="ddslickid-"+Math.floor(Math.random()*Math.floor(1e10));s.append('<li class="'+(n(h).hasClass("hidefirst")?r.value?"":"noshow":"")+'" ><a title="'+(r.title?r.title:"")+'" class="dd-option">'+(r.value?' <input id="'+u+'" class="dd-option-value" type="hidden" value="'+r.value+'" />':"")+(r.imageSrc?' <img class="dd-option-image'+(t.imagePosition=="right"?" dd-image-right":"")+'" alt="'+(r.title?r.title:"")+'" data-src="'+r.imageSrc+'" />':"")+(r.text?' <span for="'+u+'"  class="dd-option-text">'+r.text+"<\/span>":"")+(r.description?' <small class="dd-option-description dd-desc">'+r.description+"<\/small>":"")+"<\/a><\/li>")}),l={settings:t,original:h,selectedIndex:-1,selectedItem:null,selectedData:null},e.data("ddslick",l),n(this).data("ddslick",l),t.selectText.length>0&&t.defaultSelectedIndex==null?e.find(".dd-selected").html(t.selectText):(a=t.defaultSelectedIndex!=null&&t.defaultSelectedIndex>=0&&t.defaultSelectedIndex<t.data.length?t.defaultSelectedIndex:0,i(e,a)),r){v=e.parent().find("select");v.off("change.ddslick").on("change.ddslick",function(){i(e,this.selectedIndex,!0,r)})}else{e.find(".dd-select").on("click.ddslick",function(){e.find(".dd-select").addClass("dd-opened");f(e,t)});e.find(".dd-option").on("click.ddslick",function(){i(e,n(this).closest("li").index());u(e)})}if(t.clickOffToClose&&!r){s.addClass("dd-click-off-close");e.on("click.ddslick",function(n){n.stopPropagation()});n("body").on("click",function(){n(".dd-click-off-close").slideUp(50).siblings(".dd-select").find(".dd-pointer").removeClass("dd-pointer-up");setTimeout(function(){e.find(".dd-select").removeClass("dd-opened")},180)})}}})};t.select=function(t){return this.each(function(){t.index!==undefined&&i(n(this),t.index)})};t.open=function(t){return this.each(function(){var i=n(this),r=i.data("ddslick");r&&f(i,t)})};t.close=function(){return this.each(function(){var t=n(this),i=t.data("ddslick");i&&u(t)})};t.destroy=function(){return this.each(function(){var t=n(this),i=t.data("ddslick")||t.find("select").pluginData,r;i&&(r=i.original,t.removeData("ddslick").unbind(".ddslick").parent().replaceWith(r),t.find("select").removeData("ddslick"))})}}(jQuery),function(n){"use strict";n(["jquery"],function(n){function i(t){return n.isFunction(t)||typeof t=="object"?t:{top:t,left:t}}var t=n.scrollTo=function(t,i,r){return n(window).scrollTo(t,i,r)};return t.defaults={axis:"xy",duration:parseFloat(n.fn.jquery)>=1.3?0:1,limit:!0},t.window=function(){return n(window)._scrollable()},n.fn._scrollable=function(){return this.map(function(){var t=this,r=!t.nodeName||n.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1,i;return r?(i=(t.contentWindow||t).document||t.ownerDocument||t,/webkit/i.test(navigator.userAgent)||i.compatMode=="BackCompat"?i.body:i.documentElement):t})},n.fn.scrollTo=function(r,u,f){return typeof u=="object"&&(f=u,u=0),typeof f=="function"&&(f={onAfter:f}),r=="max"&&(r=9e9),f=n.extend({},t.defaults,f),u=u||f.duration,f.queue=f.queue&&f.axis.length>1,f.queue&&(u/=2),f.offset=i(f.offset),f.over=i(f.over),this._scrollable().each(function(){function v(n){h.animate(o,u,f.easing,n&&function(){n.call(this,e,f)})}var a;if(r!=null){var s=this,h=n(s),e=r,c,o={},l=h.is("html,body");switch(typeof e){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(e)){e=i(e);break}if(e=l?n(e):n(e,this),!e.length)return;case"object":(e.is||e.style)&&(c=(e=n(e)).offset())}a=n.isFunction(f.offset)&&f.offset(s,e)||f.offset;n.each(f.axis.split(""),function(n,i){var p=i=="x"?"Left":"Top",u=p.toLowerCase(),r="scroll"+p,w=s[r],b=t.max(s,i),y;c?(o[r]=c[u]+(l?0:w-h.offset()[u]),f.margin&&(o[r]-=parseInt(e.css("margin"+p))||0,o[r]-=parseInt(e.css("border"+p+"Width"))||0),o[r]+=a[u]||0,f.over[u]&&(o[r]+=e[i=="x"?"width":"height"]()*f.over[u])):(y=e[u],o[r]=y.slice&&y.slice(-1)=="%"?parseFloat(y)/100*b:y);f.limit&&/^\d+$/.test(o[r])&&(o[r]=o[r]<=0?0:Math.min(o[r],b));!n&&f.queue&&(w!=o[r]&&v(f.onAfterFirst),delete o[r])});v(f.onAfter)}}).end()},t.max=function(t,i){var r=i=="x"?"Width":"Height",u="scroll"+r;if(!n(t).is("html,body"))return t[u]-n(t)[r.toLowerCase()]();var f="client"+r,e=t.ownerDocument.documentElement,o=t.ownerDocument.body;return Math.max(e[u],o[u])-Math.min(e[f],o[f])},t})}(typeof define=="function"&&define.amd?define:function(n,t){typeof module!="undefined"&&module.exports?module.exports=t(require("jquery")):t(jQuery)}),($(document).ready(function(){var n=new dubai}),dubai)||(dubai=function(){function u(){n.doc=$(document);n.win=$(window);n.htm=$("html, body");n.megamenu=$("#megamenu");n.tiles_section=$("#tiles");f();e()}function i(){n.header=$(".main_nav_container");n.eyebrow_links=$(".eyebrow .lft_links li");n.menu_mega=$(".hdr_menu .mega");n.menu_links=$(".hdr_menu .links li");n.menu_links_section=$(".hdr_menu .links .section");n.menu_mega_lft_col=n.menu_mega.find(".lft .section");n.menu_mega_mid_col=n.menu_mega.find(".mid .section");n.nav=$(".nav");n.theNav=n.nav.find(".sub_menu");n.nav_menu=n.theNav.find("li a");n.panels=$(".panel");n.tiles_cnt=$(".tiles_win");n.tiles=$(".tiles");n.footer_socials=$(".footer-socials").length?$(".footer-socials"):$(".no-footer");n.itenaryyoumaylike=$(".itenaryyoumaylike").length?$(".itenaryyoumaylike"):$(".no-footer");n.footer=$(".footer");c()}function f(){1||$(".panel_img").each(function(){$(this).one("load",function(){var n=$(this).parent().parent();n.find(".trans").css({display:"block"})}).each(function(){this.complete&&$(this).load()})})}function e(){t.page=$(".dubai").attr("data-page");var n=window.location.href.toString();t.eyebrow=n.indexOf("business-and-investment.html")!=-1?1:n.indexOf("event-planning.html")!=-1?2:n.indexOf("dtcm.html")!=-1?3:0;i()}function r(){o({url:"/api/tiles/gettileitems",data:{categoryID:"{900945F6-A7C5-4225-8909-741E554B91B8}"},target:"tiles"})}function o(n){$.ajax({url:n.url,dataType:"json",processData:"true",contentType:"application/json; charset=utf-8",type:"post",async:!0,data:JSON.stringify(n.data),cache:"false",success:function(t){n.target=="megamenu"?(console.log('success: obj.target == "megamenu"'),s(t)):n.target=="tiles"&&(console.log('success: obj.target == "tiles"'),h(t))},error:function(){n.target=="megamenu"?(console.log('error: obj.target == "megamenu"'),r()):n.target=="tiles"&&(console.log('error: obj.target == "tiles"'),i())}})}function s(t){for(var c,e,o,u,y,l,s,f,a,v,i="",h=0;h<t.length;h++){for(c=t[h].mega,i=h==0?i+'<div class="section show">':i+'<div class="section">',e=0;e<c.length;e++){for(o=c[e].section,i=e==0?i+'<div class="sub_section show">':i+'<div class="sub_section">',u=0;u<o.length;u++){for(y=o.length,l=o[u].header,u==0?(i=y==5?i+'<div class="node open5">':i+'<div class="node open">',i=i+'  <div class="label">'+l+'<div class="arrow upArrow"><\/div><\/div>',i=i+'  <div class="items">'):(i=i+'<div class="node">',i=i+'  <div class="label">'+l+'<div class="arrow"><\/div><\/div>',i=i+'  <div class="items">'),s=o[u].links,f=0;f<s.length;f++)a=s[f].urlName,v=s[f].url,i=f==s.length-1?i+'    <div class="item "><a href="'+v+'" class="selected">'+a+"<\/a><\/div>":i+'    <div class="item"><a href="'+v+'">'+a+"<\/a><\/div>";i=i+"<\/div><\/div>"}i=i+"<\/div>"}i=i+"<\/div>"}n.megamenu.html(i);r()}function h(r){for(var o=0,e=1,s=t.page==null?"layout1":"layout7 single",u="",f=0;f<r.tiles.length;f++)o==0?(e==1&&(u=u+'<div class="tiles '+s+'">'),u=u+'  <div class="row">',u=u+'    <div class="tile r'+e+'c1" id="'+r.tiles[f].id+'">',u=u+'      <div class="cms">',u=u+'        <div class="chip_tag style_4">',u=u+"          <p>EXPERIENCE DEALS<\/p>",u=u+"        <\/div>",u=u+'        <h3 class="tile_head"><a href="'+r.tiles[f].url+'">'+r.tiles[f].tileHeader+"<\/a><\/h3>",u=u+'        <h3 class="tile_subhead"><a href="'+r.tiles[f].url+'">'+r.tiles[f].tileSubHeader+"<\/a><\/h3>",u=u+"      <\/div>",u=u+'      <div class="trans"><\/div>',u=u+'      <div class="bg"><img src="'+r.tiles[f].imageURL+'" width="100%" height="100%"><\/div>',u=u+"    <\/div>",o++):o==1&&(u=u+'    <div class="tile r'+e+'c2" id="'+r.tiles[f].id+'">',u=u+'      <div class="cms">',u=u+'        <div class="chip_tag style_4">',u=u+"          <p>EXPERIENCE DEALS<\/p>",u=u+"        <\/div>",u=u+'        <h3 class="tile_head"><a href="'+r.tiles[f].url+'">'+r.tiles[f].tileHeader+"<\/a><\/h3>",u=u+'        <h3 class="tile_subhead"><a href="'+r.tiles[f].url+'">'+r.tiles[f].tileSubHeader+"<\/a><\/h3>",u=u+"      <\/div>",u=u+'      <div class="trans"><\/div>',u=u+'      <div class="bg"><img src="'+r.tiles[f].imageURL+'" width="100%" height="100%"><\/div>',u=u+"    <\/div>",u=u+"  <\/div>",o=0,e==2?(e++,u=u+'  <div class="row">',u=u+'    <div class="tile r'+e+'c1"><\/div>',u=u+'    <div class="tile r'+e+'c2"><\/div>',u=u+"  <\/div>",u=u+"<\/div>",e=1):e++);n.tiles_section.html(u);i()}function c(){n.eyebrow_links.on("click",function(){t.eyebrow=$(this).index();n.eyebrow_links.find("a").removeClass("clicked");$(this).find("a").addClass("clicked");n.menu_links_section.removeClass("show");n.menu_links_section.eq(t.eyebrow).addClass("show")});n.menu_links.on("mouseenter",function(){n.menu_mega.show();var i=$(this).index();n.menu_mega_lft_col.removeClass("show");n.menu_mega_lft_col.eq(t.eyebrow).addClass("show");n.menu_mega_lft_col.eq(t.eyebrow).find(".sub_section").removeClass("show");n.menu_mega_lft_col.eq(t.eyebrow).find(".sub_section").eq(i).addClass("show");t.node_count=n.menu_mega_lft_col.eq(t.eyebrow).find(".sub_section").eq(i).find(".node").length;n.menu_mega_mid_col.removeClass("show");n.menu_mega_mid_col.eq(t.eyebrow).addClass("show");n.menu_mega_mid_col.eq(t.eyebrow).find(".sub_section").removeClass("show");n.menu_mega_mid_col.eq(t.eyebrow).find(".sub_section").eq(i).addClass("show")});n.menu_links.on("mouseleave",function(){n.menu_mega.hide()});n.menu_mega.on("mouseenter",function(){n.menu_mega.show()});n.menu_mega.on("mouseleave",function(){n.menu_mega.hide()});n.doc.on("mousemove",function(){});n.doc.on("scroll",function(){t.doc_hgt=n.doc.height();t.footer_hgt=n.footer.height();t.win_hgt=n.win.height();t.scroll=$(window).scrollTop();v();a();l();t.debug_mode&&$(".debug").show().text("scroll = "+t.scroll+" doc_hgt = "+t.doc_hgt+" footer_hgt = "+t.footer_hgt+" win_hgt = "+t.win_hgt+"")});n.nav_menu.on("click",function(i){var r,u;i.stopPropagation();r=$(this);n.nav_menu.removeClass("clicked");r.addClass("clicked");u=r.parent().prevAll().length;t.page==null?n.htm.animate({scrollTop:Math.round(n.panels.eq(u).offset().top)-Math.round(n.header.height())},250):n.tiles_cnt.scrollTo(n.tiles.eq(u),350,{offset:0})});$(".mega .lft .sub_section .node").on("click",function(){var n=$(this),i=n.parent().parent(),r=n.index();i.find(".sub_section.show .node .items").each(function(n){var i=$(this),u=i.parent(),f=u.find(".arrow"),e;u.attr("class").indexOf("open5")!=-1?(i.css({height:"185px"}),u.removeClass("open5")):u.attr("class").indexOf("open")!=-1&&(i.css({height:"224px"}),u.removeClass("open"));r!=n?(f.removeClass("upArrow"),e=i.height(),e!=0&&i.animate({height:"0px"},500,function(){u.find(".label").removeClass("border");$(this).css({display:"none"})})):(u.find(".label").addClass("border"),f.addClass("upArrow"),t.node_count==4?i.css({display:"block"}).animate({height:"224px"},500):t.node_count==5?i.css({display:"block"}).animate({height:"185px"},500):i.css({display:"block"}).animate({height:"224px"},500))})});$(".mega .lft .section .sub_section .item").on("click",function(n){n.stopImmediatePropagation()});y()}function l(){if($(".tabs-video-wrap")!=null){n.theTabs=$(".tabs-video-wrap");var t=n.theTabs.length?n.theTabs.outerHeight()+n.theTabs.offset().top:0,i=n.footer_socials.offset().top;t>i?n.theTabs.addClass("faded"):n.theTabs.removeClass("faded")}}function a(){itDetailPage||(t.scroll<=460?(n.nav_menu.removeClass("clicked"),n.nav_menu.eq(0).addClass("clicked")):t.scroll<=1192?(n.nav_menu.removeClass("clicked"),n.nav_menu.eq(1).addClass("clicked")):t.scroll<=1917?(n.nav_menu.removeClass("clicked"),n.nav_menu.eq(2).addClass("clicked")):t.scroll<=2631?(n.nav_menu.removeClass("clicked"),n.nav_menu.eq(3).addClass("clicked")):t.scroll<=3361?(n.nav_menu.removeClass("clicked"),n.nav_menu.eq(4).addClass("clicked")):t.scroll<=4056?(n.nav_menu.removeClass("clicked"),n.nav_menu.eq(5).addClass("clicked")):t.scroll<=4777?(n.nav_menu.removeClass("clicked"),n.nav_menu.eq(6).addClass("clicked")):t.scroll<=5517?(n.nav_menu.removeClass("clicked"),n.nav_menu.eq(7).addClass("clicked")):t.scroll<=6330?(n.nav_menu.removeClass("clicked"),n.nav_menu.eq(8).addClass("clicked")):t.scroll<=6702?(n.nav_menu.removeClass("clicked"),n.nav_menu.eq(9).addClass("clicked")):n.nav_menu.removeClass("clicked"))}function v(){var i=n.theNav.length?n.theNav.outerHeight()+n.theNav.offset().top:0,t=n.footer_socials.offset().top,r=window.location.href,u=r.indexOf("/itineraries/")>-1;u&&(t=n.itenaryyoumaylike.offset().top);i>t?n.nav.addClass("faded"):n.nav.removeClass("faded")}function y(){t.url=window.location.href.toString();var i=t.url.substring(t.url.indexOf("#")+1);n.nav_menu.parents("ul").find('a[href="#'+i+'"]').trigger("click");t.debug_mode&&$(".debug").show().text("hashtag = "+i+"")}var t={},n={};t.debug_mode=!1;u();$(".itinerary-share").click(function(){return $(this).closest(".msg").find(".share-buttons-itinerary").fadeToggle(),!1})}),function(n,t,i,r){function y(n){for(var i=-1,u=n?n.length:0,r=[],t;++i<u;)t=n[i],t&&r.push(t);return r}function c(n){return Object.prototype.toString.call(n)==="[object Function]"}function h(n){return Object.prototype.toString.call(n)==="[object Array]"}function p(n){var t=Object.prototype.toString.call(n);return typeof n=="object"&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(t)&&n.length!==r&&(n.length===0||typeof n[0]=="object"&&n[0].nodeType>0)}function l(n,t,i,r){function f(n,t){return 1-3*t+3*n}function e(n,t){return 3*t-6*n}function o(n){return 3*n}function s(n,t,i){return((f(t,i)*n+e(t,i))*n+o(t))*n}function h(n,t,i){return 3*f(t,i)*n*n+2*e(t,i)*n+o(t)}function c(t){for(var u,f,r=t,e=0;e<8;++e){if(u=h(r,n,i),u===0)return r;f=s(r,n,i)-t;r-=f/u}return r}var u;if(arguments.length!==4)return!1;for(u=0;u<4;++u)if(typeof arguments[u]!="number"||isNaN(arguments[u])||!isFinite(arguments[u]))return!1;return n=Math.min(n,1),i=Math.min(i,1),n=Math.max(n,0),i=Math.max(i,0),function(u){return n===t&&i===r?u:s(c(u),t,r)}}function v(n){var g,s,ut,a,y,ft,p,i,k,h,t,nt,et,l,tt,d;if(n)for(g=(new Date).getTime(),s=0,ut=f.State.calls.length;s<ut;s++)if(f.State.calls[s]){var it=f.State.calls[s],ot=it[0],c=it[2],rt=it[3];for(rt||(rt=f.State.calls[s][3]=g-16),a=Math.min((g-rt)/c.duration,1),y=0,ft=ot.length;y<ft;y++)if(p=ot[y],i=p.element,e.data(i,o)){k=!1;c.display&&c.display!=="none"&&u.setPropertyValue(i,"display",c.display);for(h in p)h!=="element"&&(t=p[h],et=typeof t.easing=="string"?f.Easings[t.easing]:t.easing,nt=a===1?t.endValue:t.startValue+(t.endValue-t.startValue)*et(a),t.currentValue=nt,u.Hooks.registered[h]&&(l=u.Hooks.getRoot(h),tt=e.data(i,o).rootPropertyValueCache[l],tt&&(t.rootPropertyValue=tt)),d=u.setPropertyValue(i,h,t.currentValue+(parseFloat(nt)===0?"":t.unitType),t.rootPropertyValue,t.scrollData),u.Hooks.registered[h]&&(e.data(i,o).rootPropertyValueCache[l]=u.Normalizations.registered[l]?u.Normalizations.registered[l]("extract",null,d[1]):d[1]),d[0]==="transform"&&(k=!0));c.mobileHA&&e.data(i,o).transformCache.translate3d===r&&(e.data(i,o).transformCache.translate3d="(0, 0, 0)",k=!0);k&&u.flushTransformCache(i)}c.display&&c.display!=="none"&&(f.State.calls[s][2].display=!1);a===1&&w(s)}f.State.isTicking&&b(v)}function w(n){for(var t,c,s,a,v=f.State.calls[n][0],l=f.State.calls[n][1],i=f.State.calls[n][2],y=!1,h=0,p=v.length;h<p;h++)t=v[h].element,i.display!=="none"||i.loop||u.setPropertyValue(t,"display",i.display),e.queue(t)[1]!==r&&/\.velocityQueueEntryFlag/i.test(e.queue(t)[1])||e.data(t,o)&&(e.data(t,o).isAnimating=!1,e.data(t,o).rootPropertyValueCache={},i.mobileHA&&!f.State.isGingerbread&&(delete e.data(t,o).transformCache.translate3d,u.flushTransformCache(t))),h===p-1&&!i.loop&&i.complete&&(c=l.jquery?l.get():l,i.complete.call(c,c)),i.queue!==!1&&e.dequeue(t,i.queue);for(f.State.calls[n]=!1,s=0,a=f.State.calls.length;s<a;s++)if(f.State.calls[s]!==!1){y=!0;break}y===!1&&(f.State.isTicking=!1,delete f.State.calls,f.State.calls=[])}var o="velocity",s=function(){var n,t;if(i.documentMode)return i.documentMode;for(n=7;n>4;n--)if(t=i.createElement("div"),t.innerHTML="<!--[if IE "+n+"]><span><\/span><![endif]-->",t.getElementsByTagName("span").length)return t=null,n;return r}(),b=t.requestAnimationFrame||function(){var n=0;return t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||function(t){var r=(new Date).getTime(),i;return i=Math.max(0,16-(r-n)),n=r+i,setTimeout(function(){t(r+i)},i)}}(),e,f,u,a;if(s<=7){if(t.jQuery){t.jQuery.fn.velocity=t.jQuery.fn.animate;return}throw new Error("For IE<=7, Velocity falls back to jQuery, which must first be loaded.");}else if(s!==8||t.jQuery)if(n.Velocity===r||n.Velocity.Utilities)e=t.jQuery||n.Velocity.Utilities;else throw new Error("Velocity's namespace is occupied. Aborting.");else throw new Error("For IE8, Velocity requires jQuery to be loaded.");f=n.Velocity=n.velocity=e.extend(n.Velocity||{},{State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),prefixElement:i.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Sequences:{},Easings:{},defaults:{queue:"",duration:400,easing:"swing",complete:null,display:null,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0},animate:function(){},debug:!1});t.pageYOffset!==r?(f.State.scrollAnchor=t,f.State.scrollPropertyLeft="pageXOffset",f.State.scrollPropertyTop="pageYOffset"):(f.State.scrollAnchor=i.documentElement||i.body.parentNode||i.body,f.State.scrollPropertyLeft="scrollLeft",f.State.scrollPropertyTop="scrollTop"),function(){var n={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,i){n[i]=function(n){return Math.pow(n,t+2)}});e.extend(n,{Sine:function(n){return 1-Math.cos(n*Math.PI/2)},Circ:function(n){return 1-Math.sqrt(1-n*n)},Elastic:function(n){return n===0||n===1?n:-Math.pow(2,8*(n-1))*Math.sin(((n-1)*80-7.5)*Math.PI/15)},Back:function(n){return n*n*(3*n-2)},Bounce:function(n){for(var t,i=4;n<((t=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((t*3-2)/22-n,2)}});e.each(n,function(n,t){f.Easings["easeIn"+n]=t;f.Easings["easeOut"+n]=function(n){return 1-t(1-n)};f.Easings["easeInOut"+n]=function(n){return n<.5?t(n*2)/2:1-t(n*-2+2)/2}});f.Easings.linear=function(n){return n};f.Easings.swing=function(n){return.5-Math.cos(n*Math.PI)/2};f.Easings.ease=l(.25,.1,.25,1);f.Easings["ease-in"]=l(.42,0,1,1);f.Easings["ease-out"]=l(0,0,.58,1);f.Easings["ease-in-out"]=l(.42,0,.58,1);f.Easings.spring=function(n){return 1-Math.cos(n*4.5*Math.PI)*Math.exp(-n*6)}}();u=f.CSS={RegEx:{valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/ig},Hooks:{templates:{color:["Red Green Blue Alpha","255 255 255 1"],backgroundColor:["Red Green Blue Alpha","255 255 255 1"],borderColor:["Red Green Blue Alpha","255 255 255 1"],borderTopColor:["Red Green Blue Alpha","255 255 255 1"],borderRightColor:["Red Green Blue Alpha","255 255 255 1"],borderBottomColor:["Red Green Blue Alpha","255 255 255 1"],borderLeftColor:["Red Green Blue Alpha","255 255 255 1"],outlineColor:["Red Green Blue Alpha","255 255 255 1"],textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0%"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){var t,i,n,r,f,e,o;if(s)for(t in u.Hooks.templates)i=u.Hooks.templates[t],n=i[0].split(" "),r=i[1].match(u.RegEx.valueSplit),n[0]==="Color"&&(n.push(n.shift()),r.push(r.shift()),u.Hooks.templates[t]=[n.join(" "),r.join(" ")]);for(t in u.Hooks.templates){i=u.Hooks.templates[t];n=i[0].split(" ");for(f in n)e=t+n[f],o=f,u.Hooks.registered[e]=[t,o]}},getRoot:function(n){var t=u.Hooks.registered[n];return t?t[0]:n},cleanRootPropertyValue:function(n,t){return u.RegEx.valueUnwrap.test(t)&&(t=t.match(u.Hooks.RegEx.valueUnwrap)[1]),u.Values.isCSSNullValue(t)&&(t=u.Hooks.templates[n][1]),t},extractValue:function(n,t){var i=u.Hooks.registered[n],r,f;return i?(r=i[0],f=i[1],t=u.Hooks.cleanRootPropertyValue(r,t),t.toString().match(u.RegEx.valueSplit)[f]):t},injectValue:function(n,t,i){var r=u.Hooks.registered[n],e,o,f;return r?(e=r[0],o=r[1],i=u.Hooks.cleanRootPropertyValue(e,i),f=i.toString().match(u.RegEx.valueSplit),f[o]=t,f.join(" ")):i}},Normalizations:{registered:{clip:function(n,t,i){switch(n){case"name":return"clip";case"extract":var r;return u.RegEx.wrappedValueAlreadyExtracted.test(i)?r=i:(r=i.toString().match(u.RegEx.valueUnwrap),r&&(r=r[1].replace(/,(\s+)?/g," "))),r;case"inject":return"rect("+i+")"}},opacity:function(n,t,i){if(s<=8)switch(n){case"name":return"filter";case"extract":var r=i.toString().match(/alpha\(opacity=(.*)\)/i);return r?r[1]/100:1;case"inject":return t.style.zoom=1,parseFloat(i)>=1?"":"alpha(opacity="+parseInt(parseFloat(i)*100,10)+")"}else switch(n){case"name":return"opacity";case"extract":return i;case"inject":return i}}},register:function(){var t=["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],h,i,n,c;for(s<=9||(t=t.concat(["transformPerspective","translateZ","scaleZ","rotateX","rotateY"])),n=0,h=t.length;n<h;n++)(function(){var i=t[n];u.Normalizations.registered[i]=function(n,t,u){switch(n){case"name":return"transform";case"extract":return e.data(t,o).transformCache[i]===r?/^scale/i.test(i)?1:0:e.data(t,o).transformCache[i].replace(/[()]/g,"");case"inject":var s=!1;switch(i.substr(0,i.length-1)){case"translate":s=!/(%|px|em|rem|\d)$/i.test(u);break;case"scal":case"scale":f.State.isAndroid&&e.data(t,o).transformCache[i]===r&&(u=1);s=!/(\d)$/i.test(u);break;case"skew":s=!/(deg|\d)$/i.test(u);break;case"rotate":s=!/(deg|\d)$/i.test(u)}return s||(e.data(t,o).transformCache[i]="("+u+")"),e.data(t,o).transformCache[i]}}})();for(i=["color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],n=0,c=i.length;n<c;n++){function l(n){var t;return n=n.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(n,t,i,r){return t+t+i+i+r+r}),t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n),t?"rgb("+(parseInt(t[1],16)+" "+parseInt(t[2],16)+" "+parseInt(t[3],16))+")":"rgb(0 0 0)"}(function(){var t=i[n];u.Normalizations.registered[t]=function(n,i,f){var e,h,o;switch(n){case"name":return t;case"extract":return u.RegEx.wrappedValueAlreadyExtracted.test(f)?e=f:(o={aqua:"rgb(0, 255, 255);",black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",fuchsia:"rgb(255, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",lime:"rgb(0, 255, 0)",maroon:"rgb(128, 0, 0)",navy:"rgb(0, 0, 128)",olive:"rgb(128, 128, 0)",purple:"rgb(128, 0, 128)",red:"rgb(255, 0, 0)",silver:"rgb(192, 192, 192)",teal:"rgb(0, 128, 128)",white:"rgb(255, 255, 255)",yellow:"rgb(255, 255, 0)"},/^[A-z]+$/i.test(f)?h=o[f]!==r?o[f]:o.black:/^#([A-f\d]{3}){1,2}$/i.test(f)?h=l(f):/^rgba?\(/i.test(f)||(h=o.black),e=(h||f).toString().match(u.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")),s<=8||e.split(" ").length!==3||(e+=" 1"),e;case"inject":return s<=8?f.split(" ").length===4&&(f=f.split(/\s+/).slice(0,3).join(" ")):f.split(" ").length===3&&(f+=" 1"),(s<=8?"rgb":"rgba")+"("+f.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")"}}})()}}},Names:{camelCase:function(n){return n.replace(/-(\w)/g,function(n,t){return t.toUpperCase()})},prefixCheck:function(n){var r,t,u,i;if(f.State.prefixMatches[n])return[f.State.prefixMatches[n],!0];for(r=["","Webkit","Moz","ms","O"],t=0,u=r.length;t<u;t++)if(i=t===0?n:r[t]+n.replace(/^\w/,function(n){return n.toUpperCase()}),typeof f.State.prefixElement.style[i]=="string")return f.State.prefixMatches[n]=i,[i,!0];return[n,!1]}},Values:{isCSSNullValue:function(n){return n==0||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(n)},getUnitType:function(n){return/^(rotate|skew)/i.test(n)?"deg":/(^(scale|scaleX|scaleY|scaleZ|opacity|alpha|fillOpacity|flexGrow|flexHeight|zIndex|fontWeight)$)|color/i.test(n)?"":"px"},getDisplayType:function(n){var t=n.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(t)?"inline":/^(li)$/i.test(t)?"list-item":"block"}},getPropertyValue:function(n,i,h,c){function y(n,i){var f=0,h,l;if(s<=8)f=e.css(n,i);else{if(!c){if(i==="height"&&u.getPropertyValue(n,"boxSizing").toString().toLowerCase()!=="border-box")return n.offsetHeight-(parseFloat(u.getPropertyValue(n,"borderTopWidth"))||0)-(parseFloat(u.getPropertyValue(n,"borderBottomWidth"))||0)-(parseFloat(u.getPropertyValue(n,"paddingTop"))||0)-(parseFloat(u.getPropertyValue(n,"paddingBottom"))||0);if(i==="width"&&u.getPropertyValue(n,"boxSizing").toString().toLowerCase()!=="border-box")return n.offsetWidth-(parseFloat(u.getPropertyValue(n,"borderLeftWidth"))||0)-(parseFloat(u.getPropertyValue(n,"borderRightWidth"))||0)-(parseFloat(u.getPropertyValue(n,"paddingLeft"))||0)-(parseFloat(u.getPropertyValue(n,"paddingRight"))||0)}h=e.data(n,o)===r?t.getComputedStyle(n,null):e.data(n,o).computedStyle?e.data(n,o).computedStyle:e.data(n,o).computedStyle=t.getComputedStyle(n,null);s&&i==="borderColor"&&(i="borderTopColor");f=s===9&&i==="filter"?h.getPropertyValue(i):h[i];(f===""||f===null)&&(f=n.style[i])}return f==="auto"&&/^(top|right|bottom|left)$/i.test(i)&&(l=y(n,"position"),(l==="fixed"||l==="absolute"&&/top|left/i.test(i))&&(f=e(n).position()[i]+"px")),f}var l,p,a,w,v;return u.Hooks.registered[i]?(p=i,a=u.Hooks.getRoot(p),h===r&&(h=u.getPropertyValue(n,u.Names.prefixCheck(a)[0])),u.Normalizations.registered[a]&&(h=u.Normalizations.registered[a]("extract",n,h)),l=u.Hooks.extractValue(p,h)):u.Normalizations.registered[i]&&(w=u.Normalizations.registered[i]("name",n),w!=="transform"&&(v=y(n,u.Names.prefixCheck(w)[0]),u.Values.isCSSNullValue(v)&&u.Hooks.templates[i]&&(v=u.Hooks.templates[i][1])),l=u.Normalizations.registered[i]("extract",n,v)),/^[\d-]/.test(l)||(l=y(n,u.Names.prefixCheck(i)[0])),u.Values.isCSSNullValue(l)&&(l=0),f.debug>=2&&console.log("Get "+i+": "+l),l},setPropertyValue:function(n,i,r,h,c){var l=i,v,a;if(i==="scroll")c.container?c.container["scroll"+c.direction]=r:c.direction==="Left"?t.scrollTo(r,c.alternateValue):t.scrollTo(c.alternateValue,r);else if(u.Normalizations.registered[i]&&u.Normalizations.registered[i]("name",n)==="transform")u.Normalizations.registered[i]("inject",n,r),l="transform",r=e.data(n,o).transformCache[i];else{if(u.Hooks.registered[i]&&(v=i,a=u.Hooks.getRoot(i),h=h||u.getPropertyValue(n,a),r=u.Hooks.injectValue(v,r,h),i=a),u.Normalizations.registered[i]&&(r=u.Normalizations.registered[i]("inject",n,r),i=u.Normalizations.registered[i]("name",n)),l=u.Names.prefixCheck(i)[0],s<=8)try{n.style[l]=r}catch(y){console.log("Error setting ["+l+"] to ["+r+"]")}else n.style[l]=r;f.debug>=2&&console.log("Set "+i+" ("+l+"): "+r)}return[l,r]},flushTransformCache:function(n){var i="",t,r,f;for(t in e.data(n,o).transformCache){if(r=e.data(n,o).transformCache[t],t==="transformPerspective"){f=r;continue}s===9&&t==="rotateZ"&&(t="rotate");i+=t+r+" "}f&&(i="perspective"+f+" "+i);u.setPropertyValue(n,"transform",i)}};u.Hooks.register();u.Normalizations.register();f.animate=function(){function ht(n){var t=n;return typeof n=="string"?f.Easings[n]||(t=!1):t=h(n)?l.apply(null,n):!1,t===!1&&(t=f.Easings[f.defaults.easing]?f.defaults.easing:"swing"),t}function ft(){function b(){var pt,st,wt,vt,ni,bt,ot,ti,rt,g,ct,lt,at,ut,yt,kt,ft,dt;if(tt===0&&n&&c(n.begin)&&(pt=a.jquery?a.get():a,n.begin.call(pt,pt)),d==="scroll")st=/^x$/i.test(l.axis)?"Left":"Top",wt=parseFloat(l.offset)||0,l.container?l.container.jquery||l.container.nodeType?(l.container=l.container[0]||l.container,vt=l.container["scroll"+st],bt=vt+e(t).position()[st.toLowerCase()]+wt):l.container=null:(vt=f.State.scrollAnchor[f.State["scrollProperty"+st]],ni=f.State.scrollAnchor[f.State["scrollProperty"+(st==="Left"?"Top":"Left")]],bt=e(t).offset()[st.toLowerCase()]+wt),p={scroll:{rootPropertyValue:!1,startValue:vt,currentValue:vt,endValue:bt,unitType:"",easing:l.easing,scrollData:{container:l.container,direction:st,alternateValue:ni}},element:t};else if(d==="reverse")if(e.data(t,o).tweensContainer){e.data(t,o).opts.display==="none"&&(e.data(t,o).opts.display="block");e.data(t,o).opts.loop=!1;e.data(t,o).opts.begin=null;e.data(t,o).opts.complete=null;l=e.extend({},e.data(t,o).opts,n);rt=e.extend(!0,{},e.data(t,o).tweensContainer);for(ot in rt)ot!=="element"&&(ti=rt[ot].startValue,rt[ot].startValue=rt[ot].currentValue=rt[ot].endValue,rt[ot].endValue=ti,n&&(rt[ot].easing=l.easing));p=rt}else{e.dequeue(t,l.queue);return}else if(d==="start"){e.data(t,o).tweensContainer&&e.data(t,o).isAnimating===!0&&(rt=e.data(t,o).tweensContainer);function ri(n){var i=r,f=r,u=r;return h(n)?(i=n[0],!h(n[1])&&/^[\d-]/.test(n[1])||c(n[1])?u=n[1]:(typeof n[1]=="string"||h(n[1]))&&(f=ht(n[1]),n[2]&&(u=n[2]))):i=n,f=f||l.easing,c(i)&&(i=i.call(t,tt,nt)),c(u)&&(u=u.call(t,tt,nt)),[i||0,f,u]}for(g in k){var gt=ri(k[g]),it=gt[0],ui=gt[1],b=gt[2];if(g=u.Names.camelCase(g),ct=u.Hooks.getRoot(g),lt=!1,u.Names.prefixCheck(ct)[1]===!1&&u.Normalizations.registered[ct]===r){f.debug&&console.log("Skipping ["+ct+"] due to a lack of browser support.");continue}l.display&&l.display!=="none"&&/opacity|filter/.test(g)&&!b&&it!==0&&(b=0);l._cacheValues&&rt&&rt[g]?(b===r&&(b=rt[g].endValue+rt[g].unitType),lt=e.data(t,o).rootPropertyValueCache[ct]):u.Hooks.registered[g]?b===r?(lt=u.getPropertyValue(t,ct),b=u.getPropertyValue(t,g,lt)):lt=u.Hooks.templates[ct][1]:b===r&&(b=u.getPropertyValue(t,g));function ii(n,t){var i,r;return r=(t||0).toString().toLowerCase().replace(/[%A-z]+$/,function(n){return i=n,""}),i||(i=u.Values.getUnitType(n)),[r,i]}at=ii(g,b);b=at[0];yt=at[1];at=ii(g,it);it=at[0].replace(/^([+-\/*])=/,function(n,t){return kt=t,""});ut=at[1];b=parseFloat(b)||0;it=parseFloat(it)||0;ut==="%"&&(/^(fontSize|lineHeight)$/.test(g)?(it=it/100,ut="em"):/^scale/.test(g)?(it=it/100,ut=""):/(Red|Green|Blue)$/i.test(g)&&(it=it/100*255,ut=""));function fi(){var o={parent:t.parentNode,position:u.getPropertyValue(t,"position"),fontSize:u.getPropertyValue(t,"fontSize")},c=o.position===w.lastPosition&&o.parent===w.lastParent,l=o.fontSize===w.lastFontSize&&o.parent===w.lastParent,a,v,h;w.lastParent=o.parent;w.lastPosition=o.position;w.lastFontSize=o.fontSize;w.remToPxRatio===null&&(w.remToPxRatio=parseFloat(u.getPropertyValue(i.body,"fontSize"))||16);var n={overflowX:null,overflowY:null,boxSizing:null,width:null,minWidth:null,maxWidth:null,height:null,minHeight:null,maxHeight:null,paddingLeft:null},e={},r=10;e.remToPxRatio=w.remToPxRatio;s&&(a=/^auto$/i.test(t.currentStyle.width),v=/^auto$/i.test(t.currentStyle.height));c&&l||(n.overflowX=u.getPropertyValue(t,"overflowX"),n.overflowY=u.getPropertyValue(t,"overflowY"),n.boxSizing=u.getPropertyValue(t,"boxSizing"),n.width=u.getPropertyValue(t,"width",null,!0),n.minWidth=u.getPropertyValue(t,"minWidth"),n.maxWidth=u.getPropertyValue(t,"maxWidth")||"none",n.height=u.getPropertyValue(t,"height",null,!0),n.minHeight=u.getPropertyValue(t,"minHeight"),n.maxHeight=u.getPropertyValue(t,"maxHeight")||"none",n.paddingLeft=u.getPropertyValue(t,"paddingLeft"));c?(e.percentToPxRatioWidth=w.lastPercentToPxWidth,e.percentToPxRatioHeight=w.lastPercentToPxHeight):(u.setPropertyValue(t,"overflowX","hidden"),u.setPropertyValue(t,"overflowY","hidden"),u.setPropertyValue(t,"boxSizing","content-box"),u.setPropertyValue(t,"width",r+"%"),u.setPropertyValue(t,"minWidth",r+"%"),u.setPropertyValue(t,"maxWidth",r+"%"),u.setPropertyValue(t,"height",r+"%"),u.setPropertyValue(t,"minHeight",r+"%"),u.setPropertyValue(t,"maxHeight",r+"%"));l?e.emToPxRatio=w.lastEmToPx:u.setPropertyValue(t,"paddingLeft",r+"em");c||(e.percentToPxRatioWidth=w.lastPercentToPxWidth=(parseFloat(u.getPropertyValue(t,"width",null,!0))||1)/r,e.percentToPxRatioHeight=w.lastPercentToPxHeight=(parseFloat(u.getPropertyValue(t,"height",null,!0))||1)/r);l||(e.emToPxRatio=w.lastEmToPx=(parseFloat(u.getPropertyValue(t,"paddingLeft"))||1)/r);for(h in n)n[h]!==null&&u.setPropertyValue(t,h,n[h]);return s?(a&&u.setPropertyValue(t,"width","auto"),v&&u.setPropertyValue(t,"height","auto")):(u.setPropertyValue(t,"height","auto"),n.height!==u.getPropertyValue(t,"height",null,!0)&&u.setPropertyValue(t,"height",n.height),u.setPropertyValue(t,"width","auto"),n.width!==u.getPropertyValue(t,"width",null,!0)&&u.setPropertyValue(t,"width",n.width)),f.debug>=1&&console.log("Unit ratios: "+JSON.stringify(e),t),e}if(/[\/*]/.test(kt))ut=yt;else if(yt!==ut&&b!==0)if(it===0)ut=yt;else{ft=ft||fi();dt=/margin|padding|left|right|width|text|word|letter/i.test(g)||/X$/.test(g)?"x":"y";switch(yt){case"%":b*=dt==="x"?ft.percentToPxRatioWidth:ft.percentToPxRatioHeight;break;case"em":b*=ft.emToPxRatio;break;case"rem":b*=ft.remToPxRatio}switch(ut){case"%":b*=1/(dt==="x"?ft.percentToPxRatioWidth:ft.percentToPxRatioHeight);break;case"em":b*=1/ft.emToPxRatio;break;case"rem":b*=1/ft.remToPxRatio}}switch(kt){case"+":it=b+it;break;case"-":it=b-it;break;case"*":it=b*it;break;case"/":it=b/it}p[g]={rootPropertyValue:lt,startValue:b,currentValue:b,endValue:it,unitType:ut,easing:ui};f.debug&&console.log("tweensContainer ("+g+"): "+JSON.stringify(p[g]),t)}p.element=t}p.element&&(et.push(p),e.data(t,o).tweensContainer=p,e.data(t,o).opts=l,e.data(t,o).isAnimating=!0,tt===nt-1?(f.State.calls.length>1e4&&(f.State.calls=y(f.State.calls)),f.State.calls.push([et,a,l]),f.State.isTicking===!1&&(f.State.isTicking=!0,v())):tt++)}var t=this,l=e.extend({},f.defaults,n),p={};if(d==="stop")return e.queue(t,typeof n=="string"?n:"",[]),!0;e.data(t,o)===r&&e.data(t,o,{isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}});switch(l.duration.toString().toLowerCase()){case"fast":l.duration=200;break;case"normal":l.duration=400;break;case"slow":l.duration=600;break;default:l.duration=parseFloat(l.duration)||1}l.easing=ht(l.easing);/^\d/.test(l.delay)&&e.queue(t,l.queue,function(n){f.velocityQueueEntryFlag=!0;setTimeout(n,parseFloat(l.delay))});l.display&&(l.display=l.display.toString().toLowerCase());l.mobileHA=l.mobileHA&&f.State.isMobile;l.queue===!1?b():e.queue(t,l.queue,function(n){f.velocityQueueEntryFlag=!0;b(n)});(l.queue===""||l.queue==="fx")&&e.queue(t)[0]!=="inprogress"&&e.dequeue(t)}var it,a,k,n,nt,tt,ct,b,d,w,et,ot,g,st,rt,ut;if(this.jquery||t.Zepto&&t.Zepto.zepto.isZ(this)?(it=!0,a=this,k=arguments[0],n=arguments[1]):(it=!1,a=arguments[0].jquery?[].slice.call(arguments[0]):arguments[0],k=arguments[1],n=arguments[2]),nt=p(a)||h(a)?a.length:1,tt=0,k!=="stop"&&!e.isPlainObject(n))for(ct=it?1:2,n={},b=ct;b<arguments.length;b++)!h(arguments[b])&&/^\d/.test(arguments[b])?n.duration=parseFloat(arguments[b]):typeof arguments[b]=="string"?n.easing=arguments[b]:h(arguments[b])&&arguments[b].length===4?n.easing=arguments[b]:c(arguments[b])&&(n.complete=arguments[b]);switch(k){case"scroll":d="scroll";break;case"reverse":d="reverse";break;case"stop":d="stop";break;default:if(e.isPlainObject(k)&&!e.isEmptyObject(k))d="start";else return typeof k=="string"&&f.Sequences[k]?(e.each(a,function(t,i){f.Sequences[k].call(i,i,n||{},t,nt)}),a):(f.debug&&console.log("First argument was not a property map, a known action, or a registered sequence. Aborting."),a)}if(w={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPxRatio:null},et=[],n&&n.complete&&!c(n.complete)&&(n.complete=null),it)a.each(ft);else if(nt===1&&a.nodeType)ft.call(a);else for(ot in a)a[ot].nodeType&&ft.call(a[ot]);if(g=e.extend({},f.defaults,n),g.loop=parseInt(g.loop),st=g.loop*2-1,g.loop)for(rt=0;rt<st;rt++)ut={delay:g.delay},g.complete&&rt===st-1&&(ut.complete=g.complete),it?a.velocity("reverse",ut):f.animate(a,"reverse",ut);return a};a=t.jQuery||t.Zepto;a&&(a.fn.velocity=f.animate,a.fn.velocity.defaults=f.defaults);e.each(["Down","Up"],function(n,t){f.Sequences["slide"+t]=function(n,i){var u=e.extend({},i),r={height:null,marginTop:null,marginBottom:null,paddingTop:null,paddingBottom:null,overflow:null,overflowX:null,overflowY:null},o=u.begin,s=u.complete,h=!1;u.display=t==="Down"?u.display||"block":u.display||"none";u.begin=function(){function u(){n.style.display="block";r.height=f.CSS.getPropertyValue(n,"height");n.style.height="auto";f.CSS.getPropertyValue(n,"height")===r.height&&(h=!0);f.CSS.setPropertyValue(n,"height",r.height+"px")}var i;if(t==="Down"){r.overflow=[f.CSS.getPropertyValue(n,"overflow"),0];r.overflowX=[f.CSS.getPropertyValue(n,"overflowX"),0];r.overflowY=[f.CSS.getPropertyValue(n,"overflowY"),0];n.style.overflow="hidden";n.style.overflowX="visible";n.style.overflowY="hidden";u();for(i in r)/^overflow/.test(i)||(r[i]=[f.CSS.getPropertyValue(n,i),0]);n.style.display="none"}else{u();for(i in r)r[i]=[0,f.CSS.getPropertyValue(n,i)];n.style.overflow="hidden";n.style.overflowX="visible";n.style.overflowY="hidden"}o&&o.call(n,n)};u.complete=function(n){var i=t==="Down"?0:1,u;h===!0?r.height[i]="auto":r.height[i]+="px";for(u in r)n.style[u]=r[u][i];s&&s.call(n,n)};f.animate(n,r,u)}});e.each(["In","Out"],function(n,t){f.Sequences["fade"+t]=function(n,i,r,u){var o=e.extend({},i),s={opacity:t==="In"?1:0};r!==u-1&&(o.complete=o.begin=null);o.display||(o.display=t==="In"?f.CSS.Values.getDisplayType(n):"none");f.animate(this,s,o)}})}(window.jQuery||window.Zepto||window,window,document),function(n){typeof define=="function"&&define.amd?define(["jquery"],n):n(jQuery)}(function(n){function i(n){return t.raw?n:encodeURIComponent(n)}function u(n){return t.raw?n:decodeURIComponent(n)}function f(n){return i(t.json?JSON.stringify(n):String(n))}function e(n){n.indexOf('"')===0&&(n=n.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return n=decodeURIComponent(n.replace(o," ")),t.json?JSON.parse(n):n}catch(i){}}function r(i,r){var u=t.raw?i:e(i);return n.isFunction(r)?r(u):u}var o=/\+/g,t=n.cookie=function(e,o,s){var y,a,h,v,c,p;if(o!==undefined&&!n.isFunction(o))return s=n.extend({},t.defaults,s),typeof s.expires=="number"&&(y=s.expires,a=s.expires=new Date,a.setDate(a.getDate()+y)),document.cookie=[i(e),"=",f(o),s.expires?"; expires="+s.expires.toUTCString():"",s.path?"; path="+s.path:"",s.domain?"; domain="+s.domain:"",s.secure?"; secure":""].join("");for(h=e?undefined:{},v=document.cookie?document.cookie.split("; "):[],c=0,p=v.length;c<p;c++){var w=v[c].split("="),b=u(w.shift()),l=w.join("=");if(e&&e===b){h=r(l,o);break}e||(l=r(l))===undefined||(h[b]=l)}return h};t.defaults={};n.removeCookie=function(t,i){return n.cookie(t)===undefined?!1:(n.cookie(t,"",n.extend({},i,{expires:-1})),!n.cookie(t))}}),TripPlannerConfig={serviceUrl:serverURL,serviceUrlDev:"",serviceUrlQA:"",loadConfig:function(){TripPlannerConfig.tripPlannerService=serverURL+"/tripplanner/api/"+currentLanguageTwoLetterISO+"/";TripPlannerConfig.activityService=serverURL+"/api/"+currentLanguageTwoLetterISO+"/"}},TripPlannerConfig.loadConfig(),$tripPlanner=$tripPlanner||{},$tripPlanner.authToken=typeof isUserLoggedIn=="function"?isUserLoggedIn():"",$tripPlanner.addSuccess=function(){$("#tp_explore-feedback").slideDown(500);window.setTimeout(function(){$("#tp_explore-feedback").slideUp(500)},2e3);$(".tp_badge").css({transition:"all 0.2s ease-in-out","-moz-transform":"scale(1.4)","-webkit-transform":"scale(1.4)","-ms-transform":"scale(1.4)","-o-transform":"scale(1.4)",transform:"scale(1.4)"});window.setTimeout(function(){$(".tp_badge").css({"-moz-transform":"scale(1)","-webkit-transform":"scale(1)","-ms-transform":"scale(1)","-o-transform":"scale(1)",transform:"scale(1)"})},200);window.setTimeout(function(){$(".tp_badge").css({transition:"all 0s ease-in-out"})},700)},$tripPlanner.buildCountBadge=function(n,t){var r=$.Deferred(),u,i;return $(n).hide(),$(n).addClass(t),$tripPlanner.authToken?(u=TripPlannerConfig.tripPlannerService+"trip",$.cookie("tp-unsaved-activities")&&(i=$.parseJSON($.cookie("tp-unsaved-activities")),i.length>0&&$.ajax({type:"POST",url:TripPlannerConfig.tripPlannerService+"trip/activities",async:!1,contentType:"application/json",dataType:"json",data:JSON.stringify({activityId:i}),beforeSend:function(n){n.setRequestHeader("Authorization","Bearer "+$tripPlanner.authToken)},success:function(){window.setTimeout(function(){$.removeCookie("tp-unsaved-activities",{path:"/"})},500)},error:function(n,t){console.log("error... while add activities - "+t)}})),$.ajax({type:"GET",url:u,beforeSend:function(n){n.setRequestHeader("Authorization","Bearer "+$tripPlanner.authToken)},success:function(t){var r=t.result.tripDays,i=0;$.each(r,function(n,t){i=i+t.tripActivities.length});$(n).closest("a").attr("href","/trip-planner#/mytrips/trip/"+t.result.id);i>0&&($(n).html(i),$(n).show(),$tripPlanner.addSuccess(n))},error:function(){}})):$.cookie("tp-unsaved-activities")&&(i=JSON.parse($.cookie("tp-unsaved-activities")),i.length>0&&($(n).html(i.length),$(n).show(),$tripPlanner.addSuccess(n))),r.resolve(),r.promise()},Array.prototype.contains=function(n){for(var t=this.length;t--;)if(this[t]===n)return!0;return!1},$tripPlanner.addActivity=function(n,t){var i=[],r,u,f;$tripPlanner.authToken?(i.push(n),r=TripPlannerConfig.tripPlannerService+"trip/activities",u={activityId:i},$.ajax({async:!1,type:"POST",url:r,contentType:"application/json",dataType:"json",data:JSON.stringify(u),beforeSend:function(n){n.setRequestHeader("Authorization","Bearer "+$tripPlanner.authToken)},success:function(){$tripPlanner.buildCountBadge($(".trip_count"),"tp_badge")},error:function(){}})):($.cookie("tp-unsaved-activities")?(i=JSON.parse($.cookie("tp-unsaved-activities")),i.contains(n)||i.push(n)):i.push(n),f=JSON.stringify(i),$.cookie("tp-unsaved-activities",f,{expires:365,path:"/",domain:""}),$tripPlanner.addSuccess(t),$tripPlanner.buildCountBadge($(".trip_count"),"tp_badge"))},$tripPlanner.buildTripView=function(n,t){var i=TripPlannerConfig.tripPlannerService+"trips/"+n;$.ajax({type:"GET",url:i,success:function(n){var f="",r="",i="",h=0,l=n.result.tripDays.length,o,e,c,s,u;if(currentLanguage=="ar")var a="  ",v="",y="";else var a="Add to My Trips",v="ACTIVITIES",y="DAYS";for(i+='<div class="tp_trip-planner-right-block">',i+='<div class="trip-days">',o=1;o<l;o++){for(e=n.result.tripDays[o],c=e.tripActivities.length,h=h+c,i+='<div class="trip-day">',i+='<div class="tp_tripplanner-item-container-grey cf">',i+='<span class="tripplanner-text tp_font_head-day">'+e.title+"<\/span>",i+="<\/div>",i+='<ul day-sortactivity class="triplist-day" id="'+e.id+'">',s=0;s<c;s++)u=e.tripActivities[s],i+='<li id="'+u.id+'" class="tp_tripplaner-item-li">',i+='<div class="tp_tripplanner-item-container cf">',i+='<div class="tp_tripplanner-item-container-img">',i+='<img class="tripplanner-item-image" src="'+u.iconPath+'" width="70" height="70" alt="">',i+="<\/div>",i+='<div class="tp_tripplanner-item-container-desc">',i+='<div class="tp_tripplaner-item-description">',i+='<div class="tp_item-category">',i+='<img class="tp_tripplanner-item-image" src="'+u.categoryIcon+'" width="14" height="14" alt="">'+u.categoryTitle,i+="<\/div>",i+='<div class="tp_font_head">'+u.title+"<\/div>",i+="<\/div>",i+='<div class="tp_btn-add-activity-to-my-trip" onclick="$tripPlanner.addActivity(\''+u.activityId+"', this);\"><\/div>",i+="<\/div>",i+="<\/div>",i+="<\/li>";i+="<\/ul>";i+="<\/div>"}i+="<\/div><\/div>";i+='<div class="cf"><\/div> ';r+='<div class="tp_trip-planner-left-block">';r+='<div class="tp_pub-headline">'+n.result.title+"<\/div>";r+='<div class="trip-days">';r+='<div class="tp_pub-subheadline">'+h+" "+v+" / "+(l-1)+" "+y+"<\/div>";r+='<div class="tp_pub-desc">Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.<br><br>Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu.<\/div>';$tripPlanner.authToken&&(r+='<div class="tp_triplike-btn-add-to-my-trip-pub" onclick="$tripPlanner.copyTripToMyTrips(\''+n.result.id+'\')"><span class="tp_btn-add-activities-plus"><\/span>'+a+"<\/div>");r+="<\/div>";r+="<\/div>";f+='<div class="tp_trip-planner-list-container"><div>';f+=r;f+=i;f+="<\/div><\/div>";$("#"+t).html(f)},error:function(){console.log("An error occurred while getting trip data. Please try later again.")}})},$tripPlanner.renderTrips=function(n){function t(t,i){var r='<div class="user-trip-container '+(i?"row-last-child":"")+'"><div class="relative-user-container"><div class="user-trip-name">'+t.title+'<\/div><div class="user-trip-date">Updated 19 Feb 2014<\/div><div onclick="$tripPlanner.removeTrip(\''+t.id+'\', true);" class="user-trip-close-btn"><\/div><\/div><\/div>';n.append(r)}var i=TripPlannerConfig.tripPlannerService+"trips";$.ajax({type:"GET",url:i,contentType:"application/json",dataType:"json",beforeSend:function(n){n.setRequestHeader("Authorization","Bearer "+$tripPlanner.authToken)},success:function(i){if(i.result.length>0&&i.success===!0){n.html("");for(var r=0,u=i.result.length;r<u;r++)t(i.result[r],(r+1)%3==0)}},error:function(){console.log("An error occurred while getting user trips. Please try later again.")}})},$tripPlanner.removeTrip=function(n,t){var i=TripPlannerConfig.tripPlannerService+"trips/";$.ajax({type:"GET",url:i+n,contentType:"application/json",dataType:"json",beforeSend:function(n){n.setRequestHeader("Authorization","Bearer "+$tripPlanner.authToken)},success:function(){t&&$tripPlanner.renderTrips()},error:function(){console.log("An error occurred while deleting trip: "+n+". Please try later again.")}})},$tripPlanner.copyTripToMyTrips=function(n){var t=TripPlannerConfig.tripPlannerService+"trips/add/"+n;$.ajax({type:"POST",url:t,contentType:"application/json",dataType:"json",beforeSend:function(n){n.setRequestHeader("Authorization","Bearer "+$tripPlanner.authToken)},success:function(){console.log("The Trip was copied your Trip.")},error:function(){console.log("An error occurred while copy the trip. Please try later again.")}})},$tripPlanner.removeActivity=function(n,t){if(confirm("Do you really want remove the activity?")){var i=TripPlannerConfig.tripPlannerService+t+"/activities/"+n;$.ajax({type:"POST",url:i}).done(function(){alert("The activity was removed from your Trip.")}).fail(function(){})}},$tripPlanner.setTripPublic=function(n){var t=TripPlannerConfig.tripPlannerService+n+"/public";$.ajax({type:"GET",url:t}).done(function(){alert("The activity was published.")}).fail(function(){})},$tripPlanner.setAccessToken=function(n){$.cookie("tp-auth-token",n,{expires:14,path:"/",domain:""});console.log("setToken: "+n)},DTCM=DTCM||{},DTCM.Extend=function(n,t,i,r){var u,f;if(!n)throw"No Function name provided.";if(!t)throw"No Function body provided for EKMobile.Extend[ "+n+" ].";if(n.indexOf(":")>-1&&(u=n.split(":")[0],n=n.split(":")[1]),DTCM[n]&&!i||DTCM[u]&&!i)if(u){if(DTCM[u][n])throw"Function "+n+" already exists as a member of Object "+u+". Please change it or specify if you want to overwrite it using EKMobile.Extend(name, fn, overwrite).";if(typeof DTCM[u]=="function")throw"EKMobile[ "+u+" ] is a Function and Methods can not be added to it. If you want to change it use: EKMobile.Extend(name, fn, overwrite).";}else throw"Function "+n+" already exists. Please change it or specify if you want to overwrite it using EKMobile.Extend(name, fn, overwrite).";if(u&&!DTCM[u]?DTCM[u]={}:u&&DTCM[u]&&i&&(r&&(DTCM["_"+u]=DTCM[u]),DTCM[u]={}),typeof t!="function"){u?DTCM[u][n]={}:DTCM[n]={};for(f in t)u?DTCM[u][n][f]=t[f]:DTCM[n][f]=t[f]}else u?DTCM[u][n]=t:DTCM[n]=t;return u?DTCM[u][n]:DTCM[n]},$(document).ready(function(){$(".dsf_menu").click(function(n){var t=$(this);checkWindowWidth(1200)&&(DTCM.Page.goToTop(),$(".homepage_wrap").toggleClass("push-item"),$(".homepage_section").toggleClass("active"));t.find(".dsf_button").toggleClass("active");t.find(".dsf-sub-menu").toggleClass("active");n.stopImmediatePropagation()});$(".dsf-sub-menu").click(function(n){n.stopImmediatePropagation()});$(document).click(function(){$(".dsf_menu .dsf_button").removeClass("active");$(".dsf_menu .dsf-sub-menu").removeClass("active")});checkWindowWidth(1200)&&$(".dsf-sub-menu").height($(window).height()-$(".main_nav_container").offset().top+$(".main_nav_container").height());getQueryStringParams("link")!=undefined&&$(".dubai .nav .sub_menu li a[href='#"+getQueryStringParams("link")+"']").trigger("click")}),function(n,t,i){n.fn.sss=function(r){var u=n.extend({slideShow:!0,startOn:0,speed:3500,transition:400,arrows:!0},r);return this.each(function(){function y(n){return e.eq(n).height()/f.width()*100+"%"}function o(n){if(!l){l=!0;var t=e.eq(n);t.fadeIn(c);e.not(t).fadeOut(c);f.animate({paddingBottom:y(n)},c,function(){l=!1});nt()}}function s(){r=r===h-1?0:r+1;o(r)}function p(){r=r===0?h-1:r-1;o(r)}var w=n(this),e=w.children().wrapAll('<div class="sss"/>').addClass("ssslide"),f=w.find(".sss"),h=e.length,c=u.transition,b=u.startOn,r=b>h-1?0:b,l=!1,a,k,v,d,g,nt=u.slideShow?function(){clearTimeout(k);k=setTimeout(s,u.speed)}:n.noop;u.arrows&&f.append('<div class="sssprev"/>','<div class="sssnext"/>');g=f.find(".sssnext");d=f.find(".sssprev");n(t).load(function(){f.css({paddingBottom:y(r)}).click(function(t){a=n(t.target);a.is(g)?s():a.is(d)&&p()});o(r);n(i).keydown(function(n){v=n.keyCode;v===39?s():v===37&&p()})})})}}(jQuery,window,document),typeof jQuery=="undefined")throw new Error("Bootstrap's JavaScript requires jQuery");+function(n){"use strict";var t=n.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||t[0]==1&&t[1]==9&&t[2]<1||t[0]>2)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 3");}(jQuery);+function(n){"use strict";function t(){var i=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},n;for(n in t)if(i.style[n]!==undefined)return{end:t[n]};return!1}n.fn.emulateTransitionEnd=function(t){var i=!1,u=this,r;n(this).one("bsTransitionEnd",function(){i=!0});return r=function(){i||n(u).trigger(n.support.transition.end)},setTimeout(r,t),this};n(function(){(n.support.transition=t(),n.support.transition)&&(n.event.special.bsTransitionEnd={bindType:n.support.transition.end,delegateType:n.support.transition.end,handle:function(t){if(n(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery);+function(n){"use strict";function u(i){return this.each(function(){var r=n(this),u=r.data("bs.alert");u||r.data("bs.alert",u=new t(this));typeof i=="string"&&u[i].call(r)})}var i='[data-dismiss="alert"]',t=function(t){n(t).on("click",i,this.close)},r;t.VERSION="3.3.6";t.TRANSITION_DURATION=150;t.prototype.close=function(i){function e(){r.detach().trigger("closed.bs.alert").remove()}var f=n(this),u=f.attr("data-target"),r;(u||(u=f.attr("href"),u=u&&u.replace(/.*(?=#[^\s]*$)/,"")),r=n(u),i&&i.preventDefault(),r.length||(r=f.closest(".alert")),r.trigger(i=n.Event("close.bs.alert")),i.isDefaultPrevented())||(r.removeClass("in"),n.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",e).emulateTransitionEnd(t.TRANSITION_DURATION):e())};r=n.fn.alert;n.fn.alert=u;n.fn.alert.Constructor=t;n.fn.alert.noConflict=function(){return n.fn.alert=r,this};n(document).on("click.bs.alert.data-api",i,t.prototype.close)}(jQuery);+function(n){"use strict";function i(i){return this.each(function(){var u=n(this),r=u.data("bs.button"),f=typeof i=="object"&&i;r||u.data("bs.button",r=new t(this,f));i=="toggle"?r.toggle():i&&r.setState(i)})}var t=function(i,r){this.$element=n(i);this.options=n.extend({},t.DEFAULTS,r);this.isLoading=!1},r;t.VERSION="3.3.6";t.DEFAULTS={loadingText:"loading..."};t.prototype.setState=function(t){var r="disabled",i=this.$element,f=i.is("input")?"val":"html",u=i.data();t+="Text";u.resetText==null&&i.data("resetText",i[f]());setTimeout(n.proxy(function(){i[f](u[t]==null?this.options[t]:u[t]);t=="loadingText"?(this.isLoading=!0,i.addClass(r).attr(r,r)):this.isLoading&&(this.isLoading=!1,i.removeClass(r).removeAttr(r))},this),0)};t.prototype.toggle=function(){var t=!0,i=this.$element.closest('[data-toggle="buttons"]'),n;i.length?(n=this.$element.find("input"),n.prop("type")=="radio"?(n.prop("checked")&&(t=!1),i.find(".active").removeClass("active"),this.$element.addClass("active")):n.prop("type")=="checkbox"&&(n.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),t&&n.trigger("change")):(this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active"))};r=n.fn.button;n.fn.button=i;n.fn.button.Constructor=t;n.fn.button.noConflict=function(){return n.fn.button=r,this};n(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(t){var r=n(t.target);r.hasClass("btn")||(r=r.closest(".btn"));i.call(r,"toggle");n(t.target).is('input[type="radio"]')||n(t.target).is('input[type="checkbox"]')||t.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){n(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery);+function(n){"use strict";function i(i){return this.each(function(){var u=n(this),r=u.data("bs.carousel"),f=n.extend({},t.DEFAULTS,u.data(),typeof i=="object"&&i),e=typeof i=="string"?i:f.slide;r||u.data("bs.carousel",r=new t(this,f));typeof i=="number"?r.to(i):e?r[e]():f.interval&&r.pause().cycle()})}var t=function(t,i){this.$element=n(t);this.$indicators=this.$element.find(".carousel-indicators");this.options=i;this.paused=null;this.sliding=null;this.interval=null;this.$active=null;this.$items=null;this.options.keyboard&&this.$element.on("keydown.bs.carousel",n.proxy(this.keydown,this));this.options.pause!="hover"||"ontouchstart"in document.documentElement||this.$element.on("mouseenter.bs.carousel",n.proxy(this.pause,this)).on("mouseleave.bs.carousel",n.proxy(this.cycle,this))},u,r;t.VERSION="3.3.6";t.TRANSITION_DURATION=600;t.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0};t.prototype.keydown=function(n){if(!/input|textarea/i.test(n.target.tagName)){switch(n.which){case 37:this.prev();break;case 39:this.next();break;default:return}n.preventDefault()}};t.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(n.proxy(this.next,this),this.options.interval)),this};t.prototype.getItemIndex=function(n){return this.$items=n.parent().children(".item"),this.$items.index(n||this.$active)};t.prototype.getItemForDirection=function(n,t){var i=this.getItemIndex(t),f=n=="prev"&&i===0||n=="next"&&i==this.$items.length-1,r,u;return f&&!this.options.wrap?t:(r=n=="prev"?-1:1,u=(i+r)%this.$items.length,this.$items.eq(u))};t.prototype.to=function(n){var i=this,t=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(n>this.$items.length-1)&&!(n<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){i.to(n)}):t==n?this.pause().cycle():this.slide(n>t?"next":"prev",this.$items.eq(n))};t.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&n.support.transition&&(this.$element.trigger(n.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this};t.prototype.next=function(){if(!this.sliding)return this.slide("next")};t.prototype.prev=function(){if(!this.sliding)return this.slide("prev")};t.prototype.slide=function(i,r){var e=this.$element.find(".item.active"),u=r||this.getItemForDirection(i,e),l=this.interval,f=i=="next"?"left":"right",a=this,o,s,h,c;return u.hasClass("active")?this.sliding=!1:(o=u[0],s=n.Event("slide.bs.carousel",{relatedTarget:o,direction:f}),this.$element.trigger(s),s.isDefaultPrevented())?void 0:(this.sliding=!0,l&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),h=n(this.$indicators.children()[this.getItemIndex(u)]),h&&h.addClass("active")),c=n.Event("slid.bs.carousel",{relatedTarget:o,direction:f}),n.support.transition&&this.$element.hasClass("slide")?(u.addClass(i),u[0].offsetWidth,e.addClass(f),u.addClass(f),e.one("bsTransitionEnd",function(){u.removeClass([i,f].join(" ")).addClass("active");e.removeClass(["active",f].join(" "));a.sliding=!1;setTimeout(function(){a.$element.trigger(c)},0)}).emulateTransitionEnd(t.TRANSITION_DURATION)):(e.removeClass("active"),u.addClass("active"),this.sliding=!1,this.$element.trigger(c)),l&&this.cycle(),this)};u=n.fn.carousel;n.fn.carousel=i;n.fn.carousel.Constructor=t;n.fn.carousel.noConflict=function(){return n.fn.carousel=u,this};r=function(t){var o,r=n(this),u=n(r.attr("data-target")||(o=r.attr("href"))&&o.replace(/.*(?=#[^\s]+$)/,"")),e,f;u.hasClass("carousel")&&(e=n.extend({},u.data(),r.data()),f=r.attr("data-slide-to"),f&&(e.interval=!1),i.call(u,e),f&&u.data("bs.carousel").to(f),t.preventDefault())};n(document).on("click.bs.carousel.data-api","[data-slide]",r).on("click.bs.carousel.data-api","[data-slide-to]",r);n(window).on("load",function(){n('[data-ride="carousel"]').each(function(){var t=n(this);i.call(t,t.data())})})}(jQuery);+function(n){"use strict";function r(t){var i,r=t.attr("data-target")||(i=t.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return n(r)}function i(i){return this.each(function(){var u=n(this),r=u.data("bs.collapse"),f=n.extend({},t.DEFAULTS,u.data(),typeof i=="object"&&i);!r&&f.toggle&&/show|hide/.test(i)&&(f.toggle=!1);r||u.data("bs.collapse",r=new t(this,f));typeof i=="string"&&r[i]()})}var t=function(i,r){this.$element=n(i);this.options=n.extend({},t.DEFAULTS,r);this.$trigger=n('[data-toggle="collapse"][href="#'+i.id+'"],[data-toggle="collapse"][data-target="#'+i.id+'"]');this.transitioning=null;this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger);this.options.toggle&&this.toggle()},u;t.VERSION="3.3.6";t.TRANSITION_DURATION=350;t.DEFAULTS={toggle:!0};t.prototype.dimension=function(){var n=this.$element.hasClass("width");return n?"width":"height"};t.prototype.show=function(){var f,r,e,u,o,s;if(!this.transitioning&&!this.$element.hasClass("in")&&(r=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing"),!r||!r.length||(f=r.data("bs.collapse"),!f||!f.transitioning))&&(e=n.Event("show.bs.collapse"),this.$element.trigger(e),!e.isDefaultPrevented())){if(r&&r.length&&(i.call(r,"hide"),f||r.data("bs.collapse",null)),u=this.dimension(),this.$element.removeClass("collapse").addClass("collapsing")[u](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1,o=function(){this.$element.removeClass("collapsing").addClass("collapse in")[u]("");this.transitioning=0;this.$element.trigger("shown.bs.collapse")},!n.support.transition)return o.call(this);s=n.camelCase(["scroll",u].join("-"));this.$element.one("bsTransitionEnd",n.proxy(o,this)).emulateTransitionEnd(t.TRANSITION_DURATION)[u](this.$element[0][s])}};t.prototype.hide=function(){var r,i,u;if(!this.transitioning&&this.$element.hasClass("in")&&(r=n.Event("hide.bs.collapse"),this.$element.trigger(r),!r.isDefaultPrevented())){if(i=this.dimension(),this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1,u=function(){this.transitioning=0;this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")},!n.support.transition)return u.call(this);this.$element[i](0).one("bsTransitionEnd",n.proxy(u,this)).emulateTransitionEnd(t.TRANSITION_DURATION)}};t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};t.prototype.getParent=function(){return n(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(n.proxy(function(t,i){var u=n(i);this.addAriaAndCollapsedClass(r(u),u)},this)).end()};t.prototype.addAriaAndCollapsedClass=function(n,t){var i=n.hasClass("in");n.attr("aria-expanded",i);t.toggleClass("collapsed",!i).attr("aria-expanded",i)};u=n.fn.collapse;n.fn.collapse=i;n.fn.collapse.Constructor=t;n.fn.collapse.noConflict=function(){return n.fn.collapse=u,this};n(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){var u=n(this);u.attr("data-target")||t.preventDefault();var f=r(u),e=f.data("bs.collapse"),o=e?"toggle":u.data();i.call(f,o)})}(jQuery);+function(n){"use strict";function r(t){var i=t.attr("data-target"),r;return i||(i=t.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")),r=i&&n(i),r&&r.length?r:t.parent()}function u(t){t&&t.which===3||(n(o).remove(),n(i).each(function(){var u=n(this),i=r(u),f={relatedTarget:this};i.hasClass("open")&&(t&&t.type=="click"&&/input|textarea/i.test(t.target.tagName)&&n.contains(i[0],t.target)||(i.trigger(t=n.Event("hide.bs.dropdown",f)),t.isDefaultPrevented())||(u.attr("aria-expanded","false"),i.removeClass("open").trigger(n.Event("hidden.bs.dropdown",f))))}))}function e(i){return this.each(function(){var r=n(this),u=r.data("bs.dropdown");u||r.data("bs.dropdown",u=new t(this));typeof i=="string"&&u[i].call(r)})}var o=".dropdown-backdrop",i='[data-toggle="dropdown"]',t=function(t){n(t).on("click.bs.dropdown",this.toggle)},f;t.VERSION="3.3.6";t.prototype.toggle=function(t){var f=n(this),i,o,e;if(!f.is(".disabled, :disabled")){if(i=r(f),o=i.hasClass("open"),u(),!o){if("ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length)n(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(n(this)).on("click",u);if(e={relatedTarget:this},i.trigger(t=n.Event("show.bs.dropdown",e)),t.isDefaultPrevented())return;f.trigger("focus").attr("aria-expanded","true");i.toggleClass("open").trigger(n.Event("shown.bs.dropdown",e))}return!1}};t.prototype.keydown=function(t){var e,o,s,h,f,u;if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)&&(e=n(this),t.preventDefault(),t.stopPropagation(),!e.is(".disabled, :disabled"))){if(o=r(e),s=o.hasClass("open"),!s&&t.which!=27||s&&t.which==27)return t.which==27&&o.find(i).trigger("focus"),e.trigger("click");(h=" li:not(.disabled):visible a",f=o.find(".dropdown-menu"+h),f.length)&&(u=f.index(t.target),t.which==38&&u>0&&u--,t.which==40&&u<f.length-1&&u++,~u||(u=0),f.eq(u).trigger("focus"))}};f=n.fn.dropdown;n.fn.dropdown=e;n.fn.dropdown.Constructor=t;n.fn.dropdown.noConflict=function(){return n.fn.dropdown=f,this};n(document).on("click.bs.dropdown.data-api",u).on("click.bs.dropdown.data-api",".dropdown form",function(n){n.stopPropagation()}).on("click.bs.dropdown.data-api",i,t.prototype.toggle).on("keydown.bs.dropdown.data-api",i,t.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",t.prototype.keydown)}(jQuery);+function(n){"use strict";function i(i,r){return this.each(function(){var f=n(this),u=f.data("bs.modal"),e=n.extend({},t.DEFAULTS,f.data(),typeof i=="object"&&i);u||f.data("bs.modal",u=new t(this,e));typeof i=="string"?u[i](r):e.show&&u.show(r)})}var t=function(t,i){this.options=i;this.$body=n(document.body);this.$element=n(t);this.$dialog=this.$element.find(".modal-dialog");this.$backdrop=null;this.isShown=null;this.originalBodyPad=null;this.scrollbarWidth=0;this.ignoreBackdropClick=!1;this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,n.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))},r;t.VERSION="3.3.6";t.TRANSITION_DURATION=300;t.BACKDROP_TRANSITION_DURATION=150;t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0};t.prototype.toggle=function(n){return this.isShown?this.hide():this.show(n)};t.prototype.show=function(i){var r=this,u=n.Event("show.bs.modal",{relatedTarget:i});if(this.$element.trigger(u),!this.isShown&&!u.isDefaultPrevented()){this.isShown=!0;this.checkScrollbar();this.setScrollbar();this.$body.addClass("modal-open");this.escape();this.resize();this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',n.proxy(this.hide,this));this.$dialog.on("mousedown.dismiss.bs.modal",function(){r.$element.one("mouseup.dismiss.bs.modal",function(t){n(t.target).is(r.$element)&&(r.ignoreBackdropClick=!0)})});this.backdrop(function(){var f=n.support.transition&&r.$element.hasClass("fade"),u;r.$element.parent().length||r.$element.appendTo(r.$body);r.$element.show().scrollTop(0);r.adjustDialog();f&&r.$element[0].offsetWidth;r.$element.addClass("in");r.enforceFocus();u=n.Event("shown.bs.modal",{relatedTarget:i});f?r.$dialog.one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(u)}).emulateTransitionEnd(t.TRANSITION_DURATION):r.$element.trigger("focus").trigger(u)})}};t.prototype.hide=function(i){(i&&i.preventDefault(),i=n.Event("hide.bs.modal"),this.$element.trigger(i),this.isShown&&!i.isDefaultPrevented())&&(this.isShown=!1,this.escape(),this.resize(),n(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),n.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",n.proxy(this.hideModal,this)).emulateTransitionEnd(t.TRANSITION_DURATION):this.hideModal())};t.prototype.enforceFocus=function(){n(document).off("focusin.bs.modal").on("focusin.bs.modal",n.proxy(function(n){this.$element[0]===n.target||this.$element.has(n.target).length||this.$element.trigger("focus")},this))};t.prototype.escape=function(){if(this.isShown&&this.options.keyboard)this.$element.on("keydown.dismiss.bs.modal",n.proxy(function(n){n.which==27&&this.hide()},this));else this.isShown||this.$element.off("keydown.dismiss.bs.modal")};t.prototype.resize=function(){if(this.isShown)n(window).on("resize.bs.modal",n.proxy(this.handleUpdate,this));else n(window).off("resize.bs.modal")};t.prototype.hideModal=function(){var n=this;this.$element.hide();this.backdrop(function(){n.$body.removeClass("modal-open");n.resetAdjustments();n.resetScrollbar();n.$element.trigger("hidden.bs.modal")})};t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};t.prototype.backdrop=function(i){var e=this,f=this.$element.hasClass("fade")?"fade":"",r,u;if(this.isShown&&this.options.backdrop){r=n.support.transition&&f;this.$backdrop=n(document.createElement("div")).addClass("modal-backdrop "+f).appendTo(this.$body);this.$element.on("click.dismiss.bs.modal",n.proxy(function(n){if(this.ignoreBackdropClick){this.ignoreBackdropClick=!1;return}n.target===n.currentTarget&&(this.options.backdrop=="static"?this.$element[0].focus():this.hide())},this));if(r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!i)return;r?this.$backdrop.one("bsTransitionEnd",i).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):i()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),u=function(){e.removeBackdrop();i&&i()},n.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",u).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):u()):i&&i()};t.prototype.handleUpdate=function(){this.adjustDialog()};t.prototype.adjustDialog=function(){var n=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&n?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!n?this.scrollbarWidth:""})};t.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})};t.prototype.checkScrollbar=function(){var n=window.innerWidth,t;n||(t=document.documentElement.getBoundingClientRect(),n=t.right-Math.abs(t.left));this.bodyIsOverflowing=document.body.clientWidth<n;this.scrollbarWidth=this.measureScrollbar()};t.prototype.setScrollbar=function(){var n=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";this.bodyIsOverflowing&&this.$body.css("padding-right",n+this.scrollbarWidth)};t.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)};t.prototype.measureScrollbar=function(){var n=document.createElement("div"),t;return n.className="modal-scrollbar-measure",this.$body.append(n),t=n.offsetWidth-n.clientWidth,this.$body[0].removeChild(n),t};r=n.fn.modal;n.fn.modal=i;n.fn.modal.Constructor=t;n.fn.modal.noConflict=function(){return n.fn.modal=r,this};n(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var r=n(this),f=r.attr("href"),u=n(r.attr("data-target")||f&&f.replace(/.*(?=#[^\s]+$)/,"")),e=u.data("bs.modal")?"toggle":n.extend({remote:!/#/.test(f)&&f},u.data(),r.data());r.is("a")&&t.preventDefault();u.one("show.bs.modal",function(n){if(!n.isDefaultPrevented())u.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})});i.call(u,e,this)})}(jQuery);+function(n){"use strict";function r(i){return this.each(function(){var u=n(this),r=u.data("bs.tooltip"),f=typeof i=="object"&&i;(r||!/destroy|hide/.test(i))&&(r||u.data("bs.tooltip",r=new t(this,f)),typeof i=="string"&&r[i]())})}var t=function(n,t){this.type=null;this.options=null;this.enabled=null;this.timeout=null;this.hoverState=null;this.$element=null;this.inState=null;this.init("tooltip",n,t)},i;t.VERSION="3.3.6";t.TRANSITION_DURATION=150;t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"><\/div><div class="tooltip-inner"><\/div><\/div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}};t.prototype.init=function(t,i,r){var f,e,u,o,s;if(this.enabled=!0,this.type=t,this.$element=n(i),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&n(n.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(f=this.options.trigger.split(" "),e=f.length;e--;)if(u=f[e],u=="click")this.$element.on("click."+this.type,this.options.selector,n.proxy(this.toggle,this));else if(u!="manual"){o=u=="hover"?"mouseenter":"focusin";s=u=="hover"?"mouseleave":"focusout";this.$element.on(o+"."+this.type,this.options.selector,n.proxy(this.enter,this));this.$element.on(s+"."+this.type,this.options.selector,n.proxy(this.leave,this))}this.options.selector?this._options=n.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};t.prototype.getDefaults=function(){return t.DEFAULTS};t.prototype.getOptions=function(t){return t=n.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t};t.prototype.getDelegateOptions=function(){var t={},i=this.getDefaults();return this._options&&n.each(this._options,function(n,r){i[n]!=r&&(t[n]=r)}),t};t.prototype.enter=function(t){var i=t instanceof this.constructor?t:n(t.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),n(t.currentTarget).data("bs."+this.type,i)),t instanceof n.Event&&(i.inState[t.type=="focusin"?"focus":"hover"]=!0),i.tip().hasClass("in")||i.hoverState=="in"){i.hoverState="in";return}if(clearTimeout(i.timeout),i.hoverState="in",!i.options.delay||!i.options.delay.show)return i.show();i.timeout=setTimeout(function(){i.hoverState=="in"&&i.show()},i.options.delay.show)};t.prototype.isInStateTrue=function(){for(var n in this.inState)if(this.inState[n])return!0;return!1};t.prototype.leave=function(t){var i=t instanceof this.constructor?t:n(t.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),n(t.currentTarget).data("bs."+this.type,i)),t instanceof n.Event&&(i.inState[t.type=="focusout"?"focus":"hover"]=!1),!i.isInStateTrue()){if(clearTimeout(i.timeout),i.hoverState="out",!i.options.delay||!i.options.delay.hide)return i.hide();i.timeout=setTimeout(function(){i.hoverState=="out"&&i.hide()},i.options.delay.hide)}};t.prototype.show=function(){var c=n.Event("show.bs."+this.type),l,a,f,v,o;if(this.hasContent()&&this.enabled){if(this.$element.trigger(c),l=n.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]),c.isDefaultPrevented()||!l)return;var u=this,r=this.tip(),y=this.getUID(this.type);this.setContent();r.attr("id",y);this.$element.attr("aria-describedby",y);this.options.animation&&r.addClass("fade");var i=typeof this.options.placement=="function"?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,p=/\s?auto?\s?/i,w=p.test(i);w&&(i=i.replace(p,"")||"top");r.detach().css({top:0,left:0,display:"block"}).addClass(i).data("bs."+this.type,this);this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element);this.$element.trigger("inserted.bs."+this.type);var e=this.getPosition(),s=r[0].offsetWidth,h=r[0].offsetHeight;w&&(a=i,f=this.getPosition(this.$viewport),i=i=="bottom"&&e.bottom+h>f.bottom?"top":i=="top"&&e.top-h<f.top?"bottom":i=="right"&&e.right+s>f.width?"left":i=="left"&&e.left-s<f.left?"right":i,r.removeClass(a).addClass(i));v=this.getCalculatedOffset(i,e,s,h);this.applyPlacement(v,i);o=function(){var n=u.hoverState;u.$element.trigger("shown.bs."+u.type);u.hoverState=null;n=="out"&&u.leave(u)};n.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",o).emulateTransitionEnd(t.TRANSITION_DURATION):o()}};t.prototype.applyPlacement=function(t,i){var r=this.tip(),l=r[0].offsetWidth,e=r[0].offsetHeight,o=parseInt(r.css("margin-top"),10),s=parseInt(r.css("margin-left"),10),h,f,u;isNaN(o)&&(o=0);isNaN(s)&&(s=0);t.top+=o;t.left+=s;n.offset.setOffset(r[0],n.extend({using:function(n){r.css({top:Math.round(n.top),left:Math.round(n.left)})}},t),0);r.addClass("in");h=r[0].offsetWidth;f=r[0].offsetHeight;i=="top"&&f!=e&&(t.top=t.top+e-f);u=this.getViewportAdjustedDelta(i,t,h,f);u.left?t.left+=u.left:t.top+=u.top;var c=/top|bottom/.test(i),a=c?u.left*2-l+h:u.top*2-e+f,v=c?"offsetWidth":"offsetHeight";r.offset(t);this.replaceArrow(a,r[0][v],c)};t.prototype.replaceArrow=function(n,t,i){this.arrow().css(i?"left":"top",50*(1-n/t)+"%").css(i?"top":"left","")};t.prototype.setContent=function(){var n=this.tip(),t=this.getTitle();n.find(".tooltip-inner")[this.options.html?"html":"text"](t);n.removeClass("fade in top bottom left right")};t.prototype.hide=function(i){function f(){u.hoverState!="in"&&r.detach();u.$element.removeAttr("aria-describedby").trigger("hidden.bs."+u.type);i&&i()}var u=this,r=n(this.$tip),e=n.Event("hide.bs."+this.type);if(this.$element.trigger(e),!e.isDefaultPrevented())return r.removeClass("in"),n.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",f).emulateTransitionEnd(t.TRANSITION_DURATION):f(),this.hoverState=null,this};t.prototype.fixTitle=function(){var n=this.$element;(n.attr("title")||typeof n.attr("data-original-title")!="string")&&n.attr("data-original-title",n.attr("title")||"").attr("title","")};t.prototype.hasContent=function(){return this.getTitle()};t.prototype.getPosition=function(t){t=t||this.$element;var u=t[0],r=u.tagName=="BODY",i=u.getBoundingClientRect();i.width==null&&(i=n.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var f=r?{top:0,left:0}:t.offset(),e={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},o=r?{width:n(window).width(),height:n(window).height()}:null;return n.extend({},i,e,o,f)};t.prototype.getCalculatedOffset=function(n,t,i,r){return n=="bottom"?{top:t.top+t.height,left:t.left+t.width/2-i/2}:n=="top"?{top:t.top-r,left:t.left+t.width/2-i/2}:n=="left"?{top:t.top+t.height/2-r/2,left:t.left-i}:{top:t.top+t.height/2-r/2,left:t.left+t.width}};t.prototype.getViewportAdjustedDelta=function(n,t,i,r){var f={top:0,left:0},e,u,o,s,h,c;return this.$viewport?(e=this.options.viewport&&this.options.viewport.padding||0,u=this.getPosition(this.$viewport),/right|left/.test(n)?(o=t.top-e-u.scroll,s=t.top+e-u.scroll+r,o<u.top?f.top=u.top-o:s>u.top+u.height&&(f.top=u.top+u.height-s)):(h=t.left-e,c=t.left+e+i,h<u.left?f.left=u.left-h:c>u.right&&(f.left=u.left+u.width-c)),f):f};t.prototype.getTitle=function(){var t=this.$element,n=this.options;return t.attr("data-original-title")||(typeof n.title=="function"?n.title.call(t[0]):n.title)};t.prototype.getUID=function(n){do n+=~~(Math.random()*1e6);while(document.getElementById(n));return n};t.prototype.tip=function(){if(!this.$tip&&(this.$tip=n(this.options.template),this.$tip.length!=1))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip};t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};t.prototype.enable=function(){this.enabled=!0};t.prototype.disable=function(){this.enabled=!1};t.prototype.toggleEnabled=function(){this.enabled=!this.enabled};t.prototype.toggle=function(t){var i=this;t&&(i=n(t.currentTarget).data("bs."+this.type),i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),n(t.currentTarget).data("bs."+this.type,i)));t?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)};t.prototype.destroy=function(){var n=this;clearTimeout(this.timeout);this.hide(function(){n.$element.off("."+n.type).removeData("bs."+n.type);n.$tip&&n.$tip.detach();n.$tip=null;n.$arrow=null;n.$viewport=null})};i=n.fn.tooltip;n.fn.tooltip=r;n.fn.tooltip.Constructor=t;n.fn.tooltip.noConflict=function(){return n.fn.tooltip=i,this}}(jQuery);+function(n){"use strict";function r(i){return this.each(function(){var u=n(this),r=u.data("bs.popover"),f=typeof i=="object"&&i;(r||!/destroy|hide/.test(i))&&(r||u.data("bs.popover",r=new t(this,f)),typeof i=="string"&&r[i]())})}var t=function(n,t){this.init("popover",n,t)},i;if(!n.fn.tooltip)throw new Error("Popover requires tooltip.js");t.VERSION="3.3.6";t.DEFAULTS=n.extend({},n.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"><\/div><h3 class="popover-title"><\/h3><div class="popover-content"><\/div><\/div>'});t.prototype=n.extend({},n.fn.tooltip.Constructor.prototype);t.prototype.constructor=t;t.prototype.getDefaults=function(){return t.DEFAULTS};t.prototype.setContent=function(){var n=this.tip(),i=this.getTitle(),t=this.getContent();n.find(".popover-title")[this.options.html?"html":"text"](i);n.find(".popover-content").children().detach().end()[this.options.html?typeof t=="string"?"html":"append":"text"](t);n.removeClass("fade top bottom left right in");n.find(".popover-title").html()||n.find(".popover-title").hide()};t.prototype.hasContent=function(){return this.getTitle()||this.getContent()};t.prototype.getContent=function(){var t=this.$element,n=this.options;return t.attr("data-content")||(typeof n.content=="function"?n.content.call(t[0]):n.content)};t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};i=n.fn.popover;n.fn.popover=r;n.fn.popover.Constructor=t;n.fn.popover.noConflict=function(){return n.fn.popover=i,this}}(jQuery);+function(n){"use strict";function t(i,r){this.$body=n(document.body);this.$scrollElement=n(i).is(document.body)?n(window):n(i);this.options=n.extend({},t.DEFAULTS,r);this.selector=(this.options.target||"")+" .nav li > a";this.offsets=[];this.targets=[];this.activeTarget=null;this.scrollHeight=0;this.$scrollElement.on("scroll.bs.scrollspy",n.proxy(this.process,this));this.refresh();this.process()}function i(i){return this.each(function(){var u=n(this),r=u.data("bs.scrollspy"),f=typeof i=="object"&&i;r||u.data("bs.scrollspy",r=new t(this,f));typeof i=="string"&&r[i]()})}t.VERSION="3.3.6";t.DEFAULTS={offset:10};t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)};t.prototype.refresh=function(){var t=this,i="offset",r=0;this.offsets=[];this.targets=[];this.scrollHeight=this.getScrollHeight();n.isWindow(this.$scrollElement[0])||(i="position",r=this.$scrollElement.scrollTop());this.$body.find(this.selector).map(function(){var f=n(this),u=f.data("target")||f.attr("href"),t=/^#./.test(u)&&n(u);return t&&t.length&&t.is(":visible")&&[[t[i]().top+r,u]]||null}).sort(function(n,t){return n[0]-t[0]}).each(function(){t.offsets.push(this[0]);t.targets.push(this[1])})};t.prototype.process=function(){var i=this.$scrollElement.scrollTop()+this.options.offset,f=this.getScrollHeight(),e=this.options.offset+f-this.$scrollElement.height(),t=this.offsets,r=this.targets,u=this.activeTarget,n;if(this.scrollHeight!=f&&this.refresh(),i>=e)return u!=(n=r[r.length-1])&&this.activate(n);if(u&&i<t[0])return this.activeTarget=null,this.clear();for(n=t.length;n--;)u!=r[n]&&i>=t[n]&&(t[n+1]===undefined||i<t[n+1])&&this.activate(r[n])};t.prototype.activate=function(t){this.activeTarget=t;this.clear();var r=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=n(r).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active"));i.trigger("activate.bs.scrollspy")};t.prototype.clear=function(){n(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var r=n.fn.scrollspy;n.fn.scrollspy=i;n.fn.scrollspy.Constructor=t;n.fn.scrollspy.noConflict=function(){return n.fn.scrollspy=r,this};n(window).on("load.bs.scrollspy.data-api",function(){n('[data-spy="scroll"]').each(function(){var t=n(this);i.call(t,t.data())})})}(jQuery);+function(n){"use strict";function r(i){return this.each(function(){var u=n(this),r=u.data("bs.tab");r||u.data("bs.tab",r=new t(this));typeof i=="string"&&r[i]()})}var t=function(t){this.element=n(t)},u,i;t.VERSION="3.3.6";t.TRANSITION_DURATION=150;t.prototype.show=function(){var t=this.element,f=t.closest("ul:not(.dropdown-menu)"),i=t.data("target"),u;if(i||(i=t.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var r=f.find(".active:last a"),e=n.Event("hide.bs.tab",{relatedTarget:t[0]}),o=n.Event("show.bs.tab",{relatedTarget:r[0]});(r.trigger(e),t.trigger(o),o.isDefaultPrevented()||e.isDefaultPrevented())||(u=n(i),this.activate(t.closest("li"),f),this.activate(u,u.parent(),function(){r.trigger({type:"hidden.bs.tab",relatedTarget:t[0]});t.trigger({type:"shown.bs.tab",relatedTarget:r[0]})}))}};t.prototype.activate=function(i,r,u){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1);i.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0);o?(i[0].offsetWidth,i.addClass("in")):i.removeClass("fade");i.parent(".dropdown-menu").length&&i.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0);u&&u()}var f=r.find("> .active"),o=u&&n.support.transition&&(f.length&&f.hasClass("fade")||!!r.find("> .fade").length);f.length&&o?f.one("bsTransitionEnd",e).emulateTransitionEnd(t.TRANSITION_DURATION):e();f.removeClass("in")};u=n.fn.tab;n.fn.tab=r;n.fn.tab.Constructor=t;n.fn.tab.noConflict=function(){return n.fn.tab=u,this};i=function(t){t.preventDefault();r.call(n(this),"show")};n(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery);+function(n){"use strict";function i(i){return this.each(function(){var u=n(this),r=u.data("bs.affix"),f=typeof i=="object"&&i;r||u.data("bs.affix",r=new t(this,f));typeof i=="string"&&r[i]()})}var t=function(i,r){this.options=n.extend({},t.DEFAULTS,r);this.$target=n(this.options.target).on("scroll.bs.affix.data-api",n.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",n.proxy(this.checkPositionWithEventLoop,this));this.$element=n(i);this.affixed=null;this.unpin=null;this.pinnedOffset=null;this.checkPosition()},r;t.VERSION="3.3.6";t.RESET="affix affix-top affix-bottom";t.DEFAULTS={offset:0,target:window};t.prototype.getState=function(n,t,i,r){var u=this.$target.scrollTop(),f=this.$element.offset(),e=this.$target.height();if(i!=null&&this.affixed=="top")return u<i?"top":!1;if(this.affixed=="bottom")return i!=null?u+this.unpin<=f.top?!1:"bottom":u+e<=n-r?!1:"bottom";var o=this.affixed==null,s=o?u:f.top,h=o?e:t;return i!=null&&u<=i?"top":r!=null&&s+h>=n-r?"bottom":!1};t.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(t.RESET).addClass("affix");var n=this.$target.scrollTop(),i=this.$element.offset();return this.pinnedOffset=i.top-n};t.prototype.checkPositionWithEventLoop=function(){setTimeout(n.proxy(this.checkPosition,this),1)};t.prototype.checkPosition=function(){var i,f,o;if(this.$element.is(":visible")){var s=this.$element.height(),r=this.options.offset,e=r.top,u=r.bottom,h=Math.max(n(document).height(),n(document.body).height());if(typeof r!="object"&&(u=e=r),typeof e=="function"&&(e=r.top(this.$element)),typeof u=="function"&&(u=r.bottom(this.$element)),i=this.getState(h,s,e,u),this.affixed!=i){if(this.unpin!=null&&this.$element.css("top",""),f="affix"+(i?"-"+i:""),o=n.Event(f+".bs.affix"),this.$element.trigger(o),o.isDefaultPrevented())return;this.affixed=i;this.unpin=i=="bottom"?this.getPinnedOffset():null;this.$element.removeClass(t.RESET).addClass(f).trigger(f.replace("affix","affixed")+".bs.affix")}i=="bottom"&&this.$element.offset({top:h-s-u})}};r=n.fn.affix;n.fn.affix=i;n.fn.affix.Constructor=t;n.fn.affix.noConflict=function(){return n.fn.affix=r,this};n(window).on("load",function(){n('[data-spy="affix"]').each(function(){var r=n(this),t=r.data();t.offset=t.offset||{};t.offsetBottom!=null&&(t.offset.bottom=t.offsetBottom);t.offsetTop!=null&&(t.offset.top=t.offsetTop);i.call(r,t)})})}(jQuery),function(n,t){typeof define=="function"&&define.amd?define(["jquery"],function(n){return t(n)}):typeof exports=="object"?module.exports=t(require("jquery")):t(jQuery)}(this,function(n){function s(n){this.$container;this.constraints=null;this.__$tooltip;this.__init(n)}function e(t,i){var r=!0;return n.each(t,function(n){if(i[n]===undefined||t[n]!==i[n])return r=!1,!1}),r}function f(i){var r=i.attr("id"),u=r?t.window.document.getElementById(r):null;return u?u===i[0]:n.contains(t.window.document.body,i[0])}function c(){var t;if(!i)return!1;var f=i.document.body||i.document.documentElement,r=f.style,n="transition",u=["Moz","Webkit","Khtml","O","ms"];if(typeof r[n]=="string")return!0;for(n=n.charAt(0).toUpperCase()+n.substr(1),t=0;t<u.length;t++)if(typeof r[u[t]+n]=="string")return!0;return!1}var r={animation:"fade",animationDuration:350,content:null,contentAsHTML:!1,contentCloning:!1,debug:!0,delay:300,delayTouch:[300,500],functionInit:null,functionBefore:null,functionReady:null,functionAfter:null,functionFormat:null,IEmin:6,interactive:!1,multiple:!1,parent:"body",plugins:["sideTip"],repositionOnScroll:!1,restoration:"none",selfDestruction:!0,theme:[],timer:0,trackerInterval:500,trackOrigin:!1,trackTooltip:!1,trigger:"hover",triggerClose:{click:!1,mouseleave:!1,originClick:!1,scroll:!1,tap:!1,touchleave:!1},triggerOpen:{click:!1,mouseenter:!1,tap:!1,touchstart:!1},updateAnimation:"rotate",zIndex:9999999},i=typeof window!="undefined"?window:null,t={hasTouchCapability:!!(i&&("ontouchstart"in i||i.DocumentTouch&&i.document instanceof i.DocumentTouch||i.navigator.maxTouchPoints)),hasTransitions:c(),IE:!1,semVer:"4.1.2",window:i},h=function(){this.__$emitterPrivate=n({});this.__$emitterPublic=n({});this.__instancesLatestArr=[];this.__plugins={};this._env=t},u,o;return h.prototype={__bridge:function(t,i,u){var e,f;return i[u]||(e=function(){},e.prototype=t,f=new e,f.__init&&f.__init(i),n.each(t,function(n){n.indexOf("__")!=0&&(i[n]?r.debug:(i[n]=function(){return f[n].apply(f,Array.prototype.slice.apply(arguments))},i[n].bridged=f))}),i[u]=f),this},__setWindow:function(n){return t.window=n,this},_getRuler:function(n){return new s(n)},_off:function(){return this.__$emitterPrivate.off.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_on:function(){return this.__$emitterPrivate.on.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_one:function(){return this.__$emitterPrivate.one.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_plugin:function(t){var i=this,r,u;if(typeof t=="string")return r=t,u=null,r.indexOf(".")>0?u=i.__plugins[r]:n.each(i.__plugins,function(n,t){if(t.name.substring(t.name.length-r.length-1)=="."+r)return u=t,!1}),u;if(t.name.indexOf(".")<0)throw new Error("Plugins must be namespaced");return i.__plugins[t.name]=t,t.core&&i.__bridge(t.core,i,t.name),this},_trigger:function(){var n=Array.prototype.slice.apply(arguments);return typeof n[0]=="string"&&(n[0]={type:n[0]}),this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate,n),this.__$emitterPublic.trigger.apply(this.__$emitterPublic,n),this},instances:function(t){var i=[],r=t||".tooltipstered";return n(r).each(function(){var t=n(this),r=t.data("tooltipster-ns");r&&n.each(r,function(n,r){i.push(t.data(r))})}),i},instancesLatest:function(){return this.__instancesLatestArr},off:function(){return this.__$emitterPublic.off.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},on:function(){return this.__$emitterPublic.on.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},one:function(){return this.__$emitterPublic.one.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},origins:function(t){var i=t?t+" ":"";return n(i+".tooltipstered").toArray()},setDefaults:function(t){return n.extend(r,t),this},triggerHandler:function(){return this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this}},n.tooltipster=new h,n.Tooltipster=function(t,i){this.__callbacks={close:[],open:[]};this.__closingTime;this.__Content;this.__contentBcr;this.__destroyed=!1;this.__destroying=!1;this.__$emitterPrivate=n({});this.__$emitterPublic=n({});this.__enabled=!0;this.__garbageCollector;this.__Geometry;this.__lastPosition;this.__namespace="tooltipster-"+Math.round(Math.random()*1e6);this.__options;this.__$originParents;this.__pointerIsOverOrigin=!1;this.__previousThemes=[];this.__state="closed";this.__timeouts={close:[],open:null};this.__touchEvents=[];this.__tracker=null;this._$origin;this._$tooltip;this.__init(t,i)},n.Tooltipster.prototype={__init:function(i,u){var f=this,e,s,o;if(f._$origin=n(i),f.__options=n.extend(!0,{},r,u),f.__optionsFormat(),!t.IE||t.IE>=f.__options.IEmin){if(e=null,f._$origin.data("tooltipster-initialTitle")===undefined&&(e=f._$origin.attr("title"),e===undefined&&(e=null),f._$origin.data("tooltipster-initialTitle",e)),f.__options.content!==null?f.__contentSet(f.__options.content):(s=f._$origin.attr("data-tooltip-content"),s&&(o=n(s)),o&&o[0]?f.__contentSet(o.first()):f.__contentSet(e)),f._$origin.removeAttr("title").addClass("tooltipstered"),f.__prepareOrigin(),f.__prepareGC(),n.each(f.__options.plugins,function(n,t){f._plug(t)}),t.hasTouchCapability)n("body").on("touchmove."+f.__namespace+"-triggerOpen",function(n){f._touchRecordEvent(n)});f._on("created",function(){f.__prepareTooltip()})._on("repositioned",function(n){f.__lastPosition=n.position})}else f.__options.disabled=!0},__contentInsert:function(){var n=this,i=n._$tooltip.find(".tooltipster-content"),t=n.__Content,r=function(n){t=n};return n._trigger({type:"format",content:n.__Content,format:r}),n.__options.functionFormat&&(t=n.__options.functionFormat.call(n,n,{origin:n._$origin[0]},n.__Content)),typeof t!="string"||n.__options.contentAsHTML?i.empty().append(t):i.text(t),n},__contentSet:function(t){return t instanceof n&&this.__options.contentCloning&&(t=t.clone(!0)),this.__Content=t,this._trigger({type:"updated",content:t}),this},__destroyError:function(){throw new Error("This tooltip has been destroyed and cannot execute your method call.");},__geometry:function(){var e=this,c=e._$origin,y=e._$origin.is("area"),k,p,r,o,u,d;y&&(k=e._$origin.parent().attr("name"),c=n('img[usemap="#'+k+'"]'));var f=c[0].getBoundingClientRect(),g=n(t.window.document),nt=n(t.window),l=c,i={available:{document:null,window:null},document:{size:{height:g.height(),width:g.width()}},window:{scroll:{left:t.window.scrollX||t.window.document.documentElement.scrollLeft,top:t.window.scrollY||t.window.document.documentElement.scrollTop},size:{height:nt.height(),width:nt.width()}},origin:{fixedLineage:!1,offset:{},size:{height:f.bottom-f.top,width:f.right-f.left},usemapImage:y?c[0]:null,windowOffset:{bottom:f.bottom,left:f.left,right:f.right,top:f.top}}};if(y&&(p=e._$origin.attr("shape"),r=e._$origin.attr("coords"),r&&(r=r.split(","),n.map(r,function(n,t){r[t]=parseInt(n)})),p!="default"))switch(p){case"circle":var rt=r[0],ut=r[1],w=r[2],ft=ut-w,et=rt-w;i.origin.size.height=w*2;i.origin.size.width=i.origin.size.height;i.origin.windowOffset.left+=et;i.origin.windowOffset.top+=ft;break;case"rect":var tt=r[0],it=r[1],ot=r[2],st=r[3];i.origin.size.height=st-it;i.origin.size.width=ot-tt;i.origin.windowOffset.left+=tt;i.origin.windowOffset.top+=it;break;case"poly":var s=0,h=0,a=0,v=0,b="even";for(o=0;o<r.length;o++)u=r[o],b=="even"?(u>a&&(a=u,o===0&&(s=a)),u<s&&(s=u),b="odd"):(u>v&&(v=u,o==1&&(h=v)),u<h&&(h=u),b="even");i.origin.size.height=v-h;i.origin.size.width=a-s;i.origin.windowOffset.left+=s;i.origin.windowOffset.top+=h}for(d=function(n){i.origin.size.height=n.height;i.origin.windowOffset.left=n.left;i.origin.windowOffset.top=n.top;i.origin.size.width=n.width},e._trigger({type:"geometry",edit:d,geometry:{height:i.origin.size.height,left:i.origin.windowOffset.left,top:i.origin.windowOffset.top,width:i.origin.size.width}}),i.origin.windowOffset.right=i.origin.windowOffset.left+i.origin.size.width,i.origin.windowOffset.bottom=i.origin.windowOffset.top+i.origin.size.height,i.origin.offset.left=i.origin.windowOffset.left+t.window.scrollX,i.origin.offset.top=i.origin.windowOffset.top+t.window.scrollY,i.origin.offset.bottom=i.origin.offset.top+i.origin.size.height,i.origin.offset.right=i.origin.offset.left+i.origin.size.width,i.available.document={bottom:{height:i.document.size.height-i.origin.offset.bottom,width:i.document.size.width},left:{height:i.document.size.height,width:i.origin.offset.left},right:{height:i.document.size.height,width:i.document.size.width-i.origin.offset.right},top:{height:i.origin.offset.top,width:i.document.size.width}},i.available.window={bottom:{height:Math.max(i.window.size.height-Math.max(i.origin.windowOffset.bottom,0),0),width:i.window.size.width},left:{height:i.window.size.height,width:Math.max(i.origin.windowOffset.left,0)},right:{height:i.window.size.height,width:Math.max(i.window.size.width-Math.max(i.origin.windowOffset.right,0),0)},top:{height:Math.max(i.origin.windowOffset.top,0),width:i.window.size.width}};l[0].tagName.toLowerCase()!="html";){if(l.css("position")=="fixed"){i.origin.fixedLineage=!0;break}l=l.parent()}return i},__optionsFormat:function(){return typeof this.__options.animationDuration=="number"&&(this.__options.animationDuration=[this.__options.animationDuration,this.__options.animationDuration]),typeof this.__options.delay=="number"&&(this.__options.delay=[this.__options.delay,this.__options.delay]),typeof this.__options.delayTouch=="number"&&(this.__options.delayTouch=[this.__options.delayTouch,this.__options.delayTouch]),typeof this.__options.theme=="string"&&(this.__options.theme=[this.__options.theme]),typeof this.__options.parent=="string"&&(this.__options.parent=n(this.__options.parent)),this.__options.trigger=="hover"?(this.__options.triggerOpen={mouseenter:!0,touchstart:!0},this.__options.triggerClose={mouseleave:!0,originClick:!0,touchleave:!0}):this.__options.trigger=="click"&&(this.__options.triggerOpen={click:!0,tap:!0},this.__options.triggerClose={click:!0,tap:!0}),this._trigger("options"),this},__prepareGC:function(){var t=this;return t.__options.selfDestruction?t.__garbageCollector=setInterval(function(){var i=(new Date).getTime();t.__touchEvents=n.grep(t.__touchEvents,function(n){return i-n.time>6e4});f(t._$origin)||t.destroy()},2e4):clearInterval(t.__garbageCollector),t},__prepareOrigin:function(){var n=this,i;if(n._$origin.off("."+n.__namespace+"-triggerOpen"),t.hasTouchCapability)n._$origin.on("touchstart."+n.__namespace+"-triggerOpen touchend."+n.__namespace+"-triggerOpen touchcancel."+n.__namespace+"-triggerOpen",function(t){n._touchRecordEvent(t)});if(n.__options.triggerOpen.click||n.__options.triggerOpen.tap&&t.hasTouchCapability){i="";n.__options.triggerOpen.click&&(i+="click."+n.__namespace+"-triggerOpen ");n.__options.triggerOpen.tap&&t.hasTouchCapability&&(i+="touchend."+n.__namespace+"-triggerOpen");n._$origin.on(i,function(t){n._touchIsMeaningfulEvent(t)&&n._open(t)})}if(n.__options.triggerOpen.mouseenter||n.__options.triggerOpen.touchstart&&t.hasTouchCapability){i="";n.__options.triggerOpen.mouseenter&&(i+="mouseenter."+n.__namespace+"-triggerOpen ");n.__options.triggerOpen.touchstart&&t.hasTouchCapability&&(i+="touchstart."+n.__namespace+"-triggerOpen");n._$origin.on(i,function(t){(n._touchIsTouchEvent(t)||!n._touchIsEmulatedEvent(t))&&(n.__pointerIsOverOrigin=!0,n._openShortly(t))})}if(n.__options.triggerClose.mouseleave||n.__options.triggerClose.touchleave&&t.hasTouchCapability){i="";n.__options.triggerClose.mouseleave&&(i+="mouseleave."+n.__namespace+"-triggerOpen ");n.__options.triggerClose.touchleave&&t.hasTouchCapability&&(i+="touchend."+n.__namespace+"-triggerOpen touchcancel."+n.__namespace+"-triggerOpen");n._$origin.on(i,function(t){n._touchIsMeaningfulEvent(t)&&(n.__pointerIsOverOrigin=!1)})}return n},__prepareTooltip:function(){var t=this,i=t.__options.interactive?"auto":"";return t._$tooltip.attr("id",t.__namespace).css({"pointer-events":i,zIndex:t.__options.zIndex}),n.each(t.__previousThemes,function(n,i){t._$tooltip.removeClass(i)}),n.each(t.__options.theme,function(n,i){t._$tooltip.addClass(i)}),t.__previousThemes=n.merge([],t.__options.theme),t},__scrollHandler:function(i){var r=this,u,f,e,o;return r.__options.triggerClose.scroll?r._close(i):(i.target===t.window.document?r.__Geometry.origin.fixedLineage||r.__options.repositionOnScroll&&r.reposition(i):(u=r.__geometry(),f=!1,r._$origin.css("position")!="fixed"&&r.__$originParents.each(function(t,i){var e=n(i),o=e.css("overflow-x"),s=e.css("overflow-y"),r;return(o!="visible"||s!="visible")&&((r=i.getBoundingClientRect(),o!="visible"&&(u.origin.windowOffset.left<r.left||u.origin.windowOffset.right>r.right))||s!="visible"&&(u.origin.windowOffset.top<r.top||u.origin.windowOffset.bottom>r.bottom))?(f=!0,!1):e.css("position")=="fixed"?!1:void 0}),f?r._$tooltip.css("visibility","hidden"):(r._$tooltip.css("visibility","visible"),r.__options.repositionOnScroll?r.reposition(i):(e=u.origin.offset.left-r.__Geometry.origin.offset.left,o=u.origin.offset.top-r.__Geometry.origin.offset.top,r._$tooltip.css({left:r.__lastPosition.coord.left+e,top:r.__lastPosition.coord.top+o})))),r._trigger({type:"scroll",event:i})),r},__stateSet:function(n){return this.__state=n,this._trigger({type:"state",state:n}),this},__timeoutsClear:function(){return clearTimeout(this.__timeouts.open),this.__timeouts.open=null,n.each(this.__timeouts.close,function(n,t){clearTimeout(t)}),this.__timeouts.close=[],this},__trackerStart:function(){var n=this,t=n._$tooltip.find(".tooltipster-content");return n.__options.trackTooltip&&(n.__contentBcr=t[0].getBoundingClientRect()),n.__tracker=setInterval(function(){var i,r,u;f(n._$origin)&&f(n._$tooltip)?(n.__options.trackOrigin&&(i=n.__geometry(),r=!1,e(i.origin.size,n.__Geometry.origin.size)&&(n.__Geometry.origin.fixedLineage?e(i.origin.windowOffset,n.__Geometry.origin.windowOffset)&&(r=!0):e(i.origin.offset,n.__Geometry.origin.offset)&&(r=!0)),r||(n.__options.triggerClose.mouseleave?n._close():n.reposition())),n.__options.trackTooltip&&(u=t[0].getBoundingClientRect(),(u.height!==n.__contentBcr.height||u.width!==n.__contentBcr.width)&&(n.reposition(),n.__contentBcr=u))):n._close()},n.__options.trackerInterval),n},_close:function(i,r){var u=this,o=!0,f,e;if(u._trigger({type:"close",event:i,stop:function(){o=!1}}),o||u.__destroying)if(r&&u.__callbacks.close.push(r),u.__callbacks.open=[],u.__timeoutsClear(),f=function(){n.each(u.__callbacks.close,function(n,t){t.call(u,u,{event:i,origin:u._$origin[0]})});u.__callbacks.close=[]},u.__state!="closed"){var s=!0,c=new Date,l=c.getTime(),h=l+u.__options.animationDuration[1];u.__state=="disappearing"&&h>u.__closingTime&&(s=!1);s&&(u.__closingTime=h,u.__state!="disappearing"&&u.__stateSet("disappearing"),e=function(){clearInterval(u.__tracker);u._trigger({type:"closing",event:i});u._$tooltip.off("."+u.__namespace+"-triggerClose").removeClass("tooltipster-dying");n(t.window).off("."+u.__namespace+"-triggerClose");u.__$originParents.each(function(t,i){n(i).off("scroll."+u.__namespace+"-triggerClose")});u.__$originParents=null;n("body").off("."+u.__namespace+"-triggerClose");u._$origin.off("."+u.__namespace+"-triggerClose");u._off("dismissable");u.__stateSet("closed");u._trigger({type:"after",event:i});u.__options.functionAfter&&u.__options.functionAfter.call(u,u,{event:i});f()},t.hasTransitions?(u._$tooltip.css({"-moz-animation-duration":u.__options.animationDuration[1]+"ms","-ms-animation-duration":u.__options.animationDuration[1]+"ms","-o-animation-duration":u.__options.animationDuration[1]+"ms","-webkit-animation-duration":u.__options.animationDuration[1]+"ms","animation-duration":u.__options.animationDuration[1]+"ms","transition-duration":u.__options.animationDuration[1]+"ms"}),u._$tooltip.clearQueue().removeClass("tooltipster-show").addClass("tooltipster-dying"),u.__options.animationDuration[1]>0&&u._$tooltip.delay(u.__options.animationDuration[1]),u._$tooltip.queue(e)):u._$tooltip.stop().fadeOut(u.__options.animationDuration[1],e))}else f();return u},_off:function(){return this.__$emitterPrivate.off.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_on:function(){return this.__$emitterPrivate.on.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_one:function(){return this.__$emitterPrivate.one.apply(this.__$emitterPrivate,Array.prototype.slice.apply(arguments)),this},_open:function(i,r){var u=this,s,h,e,o;if(!u.__destroying&&f(u._$origin)&&u.__enabled&&(s=!0,u.__state=="closed"&&(u._trigger({type:"before",event:i,stop:function(){s=!1}}),s&&u.__options.functionBefore&&(s=u.__options.functionBefore.call(u,u,{event:i,origin:u._$origin[0]}))),s!==!1&&u.__Content!==null)){if(r&&u.__callbacks.open.push(r),u.__callbacks.close=[],u.__timeoutsClear(),e=function(){u.__state!="stable"&&u.__stateSet("stable");n.each(u.__callbacks.open,function(n,t){t.call(u,u,{origin:u._$origin[0],tooltip:u._$tooltip[0]})});u.__callbacks.open=[]},u.__state!=="closed")h=0,u.__state==="disappearing"?(u.__stateSet("appearing"),t.hasTransitions?(u._$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-show"),u.__options.animationDuration[0]>0&&u._$tooltip.delay(u.__options.animationDuration[0]),u._$tooltip.queue(e)):u._$tooltip.stop().fadeIn(e)):u.__state=="stable"&&e();else{u.__stateSet("appearing");h=u.__options.animationDuration[0];u.__contentInsert();u.reposition(i,!0);t.hasTransitions?(u._$tooltip.addClass("tooltipster-"+u.__options.animation).addClass("tooltipster-initial").css({"-moz-animation-duration":u.__options.animationDuration[0]+"ms","-ms-animation-duration":u.__options.animationDuration[0]+"ms","-o-animation-duration":u.__options.animationDuration[0]+"ms","-webkit-animation-duration":u.__options.animationDuration[0]+"ms","animation-duration":u.__options.animationDuration[0]+"ms","transition-duration":u.__options.animationDuration[0]+"ms"}),setTimeout(function(){u.__state!="closed"&&(u._$tooltip.addClass("tooltipster-show").removeClass("tooltipster-initial"),u.__options.animationDuration[0]>0&&u._$tooltip.delay(u.__options.animationDuration[0]),u._$tooltip.queue(e))},0)):u._$tooltip.css("display","none").fadeIn(u.__options.animationDuration[0],e);u.__trackerStart();n(t.window).on("resize."+u.__namespace+"-triggerClose",function(n){u.reposition(n)}).on("scroll."+u.__namespace+"-triggerClose",function(n){u.__scrollHandler(n)});if(u.__$originParents=u._$origin.parents(),u.__$originParents.each(function(t,i){n(i).on("scroll."+u.__namespace+"-triggerClose",function(n){u.__scrollHandler(n)})}),u.__options.triggerClose.mouseleave||u.__options.triggerClose.touchleave&&t.hasTouchCapability){u._on("dismissable",function(n){n.dismissable?n.delay?(o=setTimeout(function(){u._close(n.event)},n.delay),u.__timeouts.close.push(o)):u._close(n):clearTimeout(o)});var c=u._$origin,l="",a="",o=null;u.__options.interactive&&(c=c.add(u._$tooltip));u.__options.triggerClose.mouseleave&&(l+="mouseenter."+u.__namespace+"-triggerClose ",a+="mouseleave."+u.__namespace+"-triggerClose ");u.__options.triggerClose.touchleave&&t.hasTouchCapability&&(l+="touchstart."+u.__namespace+"-triggerClose",a+="touchend."+u.__namespace+"-triggerClose touchcancel."+u.__namespace+"-triggerClose");c.on(a,function(n){if(u._touchIsTouchEvent(n)||!u._touchIsEmulatedEvent(n)){var t=n.type=="mouseleave"?u.__options.delay:u.__options.delayTouch;u._trigger({delay:t[1],dismissable:!0,event:n,type:"dismissable"})}}).on(l,function(n){(u._touchIsTouchEvent(n)||!u._touchIsEmulatedEvent(n))&&u._trigger({dismissable:!1,event:n,type:"dismissable"})})}if(u.__options.triggerClose.originClick)u._$origin.on("click."+u.__namespace+"-triggerClose",function(n){u._touchIsTouchEvent(n)||u._touchIsEmulatedEvent(n)||u._close(n)});(u.__options.triggerClose.click||u.__options.triggerClose.tap&&t.hasTouchCapability)&&setTimeout(function(){if(u.__state!="closed"){var i="";u.__options.triggerClose.click&&(i+="click."+u.__namespace+"-triggerClose ");u.__options.triggerClose.tap&&t.hasTouchCapability&&(i+="touchend."+u.__namespace+"-triggerClose");n("body").on(i,function(t){u._touchIsMeaningfulEvent(t)&&(u._touchRecordEvent(t),u.__options.interactive&&n.contains(u._$tooltip[0],t.target)||u._close(t))});if(u.__options.triggerClose.tap&&t.hasTouchCapability)n("body").on("touchstart."+u.__namespace+"-triggerClose",function(n){u._touchRecordEvent(n)})}},0);u._trigger("ready");u.__options.functionReady&&u.__options.functionReady.call(u,u,{origin:u._$origin[0],tooltip:u._$tooltip[0]})}u.__options.timer>0&&(o=setTimeout(function(){u._close()},u.__options.timer+h),u.__timeouts.close.push(o))}return u},_openShortly:function(n){var t=this,r=!0,i;return t.__state!="stable"&&t.__state!="appearing"&&(t.__timeouts.open||(t._trigger({type:"start",event:n,stop:function(){r=!1}}),r&&(i=n.type.indexOf("touch")==0?t.__options.delayTouch:t.__options.delay,i[0]?t.__timeouts.open=setTimeout(function(){t.__timeouts.open=null;t.__pointerIsOverOrigin&&t._touchIsMeaningfulEvent(n)?(t._trigger("startend"),t._open(n)):t._trigger("startcancel")},i[0]):(t._trigger("startend"),t._open(n))))),t},_optionsExtract:function(t,i){var f=this,u=n.extend(!0,{},i),r=f.__options[t];return r||(r={},n.each(i,function(n){var t=f.__options[n];t!==undefined&&(r[n]=t)})),n.each(u,function(t,i){r[t]!==undefined&&(typeof i!="object"||i instanceof Array||i==null||typeof r[t]!="object"||r[t]instanceof Array||r[t]==null?u[t]=r[t]:n.extend(u[t],r[t]))}),u},_plug:function(t){var i=n.tooltipster._plugin(t);if(i)i.instance&&n.tooltipster.__bridge(i.instance,this,i.name);else throw new Error('The "'+t+'" plugin is not defined');return this},_touchIsEmulatedEvent:function(n){for(var t,r=!1,u=(new Date).getTime(),i=this.__touchEvents.length-1;i>=0;i--)if(t=this.__touchEvents[i],u-t.time<500)t.target===n.target&&(r=!0);else break;return r},_touchIsMeaningfulEvent:function(n){return this._touchIsTouchEvent(n)&&!this._touchSwiped(n.target)||!this._touchIsTouchEvent(n)&&!this._touchIsEmulatedEvent(n)},_touchIsTouchEvent:function(n){return n.type.indexOf("touch")==0},_touchRecordEvent:function(n){return this._touchIsTouchEvent(n)&&(n.time=(new Date).getTime(),this.__touchEvents.push(n)),this},_touchSwiped:function(n){for(var t,r=!1,i=this.__touchEvents.length-1;i>=0;i--)if(t=this.__touchEvents[i],t.type=="touchmove"){r=!0;break}else if(t.type=="touchstart"&&n===t.target)break;return r},_trigger:function(){var t=Array.prototype.slice.apply(arguments);return typeof t[0]=="string"&&(t[0]={type:t[0]}),t[0].instance=this,t[0].origin=this._$origin?this._$origin[0]:null,t[0].tooltip=this._$tooltip?this._$tooltip[0]:null,this.__$emitterPrivate.trigger.apply(this.__$emitterPrivate,t),n.tooltipster._trigger.apply(n.tooltipster,t),this.__$emitterPublic.trigger.apply(this.__$emitterPublic,t),this},_unplug:function(t){var i=this,r;return i[t]&&(r=n.tooltipster._plugin(t),r.instance&&n.each(r.instance,function(n){i[n]&&i[n].bridged===i[t]&&delete i[n]}),i[t].__destroy&&i[t].__destroy(),delete i[t]),i},close:function(n){return this.__destroyed?this.__destroyError():this._close(null,n),this},content:function(n){var i=this,r;return n===undefined?i.__Content:(i.__destroyed?i.__destroyError():(i.__contentSet(n),i.__Content!==null?i.__state!=="closed"&&(i.__contentInsert(),i.reposition(),i.__options.updateAnimation&&(t.hasTransitions?(r=i.__options.updateAnimation,i._$tooltip.addClass("tooltipster-update-"+r),setTimeout(function(){i.__state!="closed"&&i._$tooltip.removeClass("tooltipster-update-"+r)},1e3)):i._$tooltip.fadeTo(200,.5,function(){i.__state!="closed"&&i._$tooltip.fadeTo(200,1)}))):i._close()),i)},destroy:function(){var t=this;return t.__destroyed?t.__destroyError():t.__destroying||(t.__destroying=!0,t._close(null,function(){var i,r;t._trigger("destroy");t.__destroying=!1;t.__destroyed=!0;t._$origin.removeData(t.__namespace).off("."+t.__namespace+"-triggerOpen");n("body").off("."+t.__namespace+"-triggerOpen");i=t._$origin.data("tooltipster-ns");i&&(i.length===1?(r=null,t.__options.restoration=="previous"?r=t._$origin.data("tooltipster-initialTitle"):t.__options.restoration=="current"&&(r=typeof t.__Content=="string"?t.__Content:n("<div><\/div>").append(t.__Content).html()),r&&t._$origin.attr("title",r),t._$origin.removeClass("tooltipstered"),t._$origin.removeData("tooltipster-ns").removeData("tooltipster-initialTitle")):(i=n.grep(i,function(n){return n!==t.__namespace}),t._$origin.data("tooltipster-ns",i)));t._trigger("destroyed");t._off();t.off();t.__Content=null;t.__$emitterPrivate=null;t.__$emitterPublic=null;t.__options.parent=null;t._$origin=null;t._$tooltip=null;n.tooltipster.__instancesLatestArr=n.grep(n.tooltipster.__instancesLatestArr,function(n){return t!==n});clearInterval(t.__garbageCollector)})),t},disable:function(){if(this.__destroyed)this.__destroyError();else return this._close(),this.__enabled=!1,this;return this},elementOrigin:function(){if(this.__destroyed)this.__destroyError();else return this._$origin[0]},elementTooltip:function(){return this._$tooltip?this._$tooltip[0]:null},enable:function(){return this.__enabled=!0,this},hide:function(n){return this.close(n)},instance:function(){return this},off:function(){return this.__destroyed||this.__$emitterPublic.off.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},on:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.on.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},one:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.one.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this},open:function(n){return this.__destroyed||this.__destroying?this.__destroyError():this._open(null,n),this},option:function(t,i){return i===undefined?this.__options[t]:(this.__destroyed?this.__destroyError():(this.__options[t]=i,this.__optionsFormat(),n.inArray(t,["trigger","triggerClose","triggerOpen"])>=0&&this.__prepareOrigin(),t==="selfDestruction"&&this.__prepareGC()),this)},reposition:function(n,t){var i=this;return i.__destroyed?i.__destroyError():(f(i._$tooltip)||t)&&(t||i._$tooltip.detach(),i.__Geometry=i.__geometry(),i._trigger({type:"reposition",event:n,helper:{geo:i.__Geometry}})),i},show:function(n){return this.open(n)},status:function(){return{destroyed:this.__destroyed,destroying:this.__destroying,enabled:this.__enabled,open:this.__state!=="closed",state:this.__state}},triggerHandler:function(){return this.__destroyed?this.__destroyError():this.__$emitterPublic.triggerHandler.apply(this.__$emitterPublic,Array.prototype.slice.apply(arguments)),this}},n.fn.tooltipster=function(){var t=Array.prototype.slice.apply(arguments),i;if(this.length===0)return this;if(typeof t[0]=="string")return i="#*$~&",this.each(function(){var f=n(this).data("tooltipster-ns"),r=f?n(this).data(f[0]):null,u;if(r){if(typeof r[t[0]]=="function")this.length>1&&t[0]=="content"&&(t[1]instanceof n||typeof t[1]=="object"&&t[1]!=null&&t[1].tagName)&&!r.__options.contentCloning&&r.__options.debug,u=r[t[0]](t[1],t[2]);else throw new Error('Unknown method "'+t[0]+'"');if(u!==r||t[0]==="instance")return i=u,!1}else throw new Error("You called Tooltipster's \""+t[0]+'" method on an uninitialized element');}),i!=="#*$~&"?i:this;n.tooltipster.__instancesLatestArr=[];var f=t[0]&&t[0].multiple!==undefined,c=f&&t[0].multiple||!f&&r.multiple,e=t[0]&&t[0].content!==undefined,u=e&&t[0].content||!e&&r.content,o=t[0]&&t[0].contentCloning!==undefined,l=o&&t[0].contentCloning||!o&&r.contentCloning,s=t[0]&&t[0].debug!==undefined,h=s&&t[0].debug||!s&&r.debug;return this.length>1&&(u instanceof n||typeof u=="object"&&u!=null&&u.tagName)&&!l&&h,this.each(function(){var u=!1,f=n(this),r=f.data("tooltipster-ns"),i=null;r?c?u=!0:h:u=!0;u&&(i=new n.Tooltipster(this,t[0]),r||(r=[]),r.push(i.__namespace),f.data("tooltipster-ns",r),f.data(i.__namespace,i),i.__options.functionInit&&i.__options.functionInit.call(i,i,{origin:this}),i._trigger("init"));n.tooltipster.__instancesLatestArr.push(i)}),this},s.prototype={__init:function(t){this.__$tooltip=t;this.__$tooltip.css({left:0,overflow:"hidden",position:"absolute",top:0}).find(".tooltipster-content").css("overflow","auto");this.$container=n('<div class="tooltipster-ruler"><\/div>').append(this.__$tooltip).appendTo("body")},__forceRedraw:function(){var n=this.__$tooltip.parent();this.__$tooltip.detach();this.__$tooltip.appendTo(n)},constrain:function(n,t){return this.constraints={width:n,height:t},this.__$tooltip.css({display:"block",height:"",overflow:"auto",width:n}),this},destroy:function(){this.__$tooltip.detach().find(".tooltipster-content").css({display:"",overflow:""});this.$container.remove()},free:function(){return this.constraints=null,this.__$tooltip.css({display:"",height:"",overflow:"visible",width:""}),this},measure:function(){var n,i;if(this.__forceRedraw(),n=this.__$tooltip[0].getBoundingClientRect(),i={size:{height:n.height||n.bottom,width:n.width||n.right}},this.constraints){var r=this.__$tooltip.find(".tooltipster-content"),f=this.__$tooltip.outerHeight(),e=r[0].getBoundingClientRect(),u={height:f<=this.constraints.height,width:n.width<=this.constraints.width&&e.width>=r[0].scrollWidth-1};i.fits=u.height&&u.width}return t.IE&&t.IE<=11&&(i.size.width=Math.ceil(i.size.width)+1),i}},u=navigator.userAgent.toLowerCase(),u.indexOf("msie")!=-1?t.IE=parseInt(u.split("msie")[1]):u.toLowerCase().indexOf("trident")!==-1&&u.indexOf(" rv:11")!==-1?t.IE=11:u.toLowerCase().indexOf("edge/")!=-1&&(t.IE=parseInt(u.toLowerCase().split("edge/")[1])),o="tooltipster.sideTip",n.tooltipster._plugin({name:o,instance:{__defaults:function(){return{arrow:!0,distance:6,functionPosition:null,maxWidth:null,minIntersection:16,minWidth:0,position:null,side:"top",viewportAware:!0}},__init:function(n){var t=this;t.__instance=n;t.__namespace="tooltipster-sideTip-"+Math.round(Math.random()*1e6);t.__previousState="closed";t.__options;t.__optionsFormat();t.__instance._on("state."+t.__namespace,function(n){n.state=="closed"?t.__close():n.state=="appearing"&&t.__previousState=="closed"&&t.__create();t.__previousState=n.state});t.__instance._on("options."+t.__namespace,function(){t.__optionsFormat()});t.__instance._on("reposition."+t.__namespace,function(n){t.__reposition(n.event,n.helper)})},__close:function(){this.__instance.content()instanceof n&&this.__instance.content().detach();this.__instance._$tooltip.remove();this.__instance._$tooltip=null},__create:function(){var t=n('<div class="tooltipster-base tooltipster-sidetip"><div class="tooltipster-box"><div class="tooltipster-content"><\/div><\/div><div class="tooltipster-arrow"><div class="tooltipster-arrow-uncropped"><div class="tooltipster-arrow-border"><\/div><div class="tooltipster-arrow-background"><\/div><\/div><\/div><\/div>');this.__options.arrow||t.find(".tooltipster-box").css("margin",0).end().find(".tooltipster-arrow").hide();this.__options.minWidth&&t.css("min-width",this.__options.minWidth+"px");this.__options.maxWidth&&t.css("max-width",this.__options.maxWidth+"px");this.__instance._$tooltip=t;this.__instance._trigger("created")},__destroy:function(){this.__instance._off("."+self.__namespace)},__optionsFormat:function(){var t=this,i;t.__options=t.__instance._optionsExtract(o,t.__defaults());t.__options.position&&(t.__options.side=t.__options.position);typeof t.__options.distance!="object"&&(t.__options.distance=[t.__options.distance]);t.__options.distance.length<4&&(t.__options.distance[1]===undefined&&(t.__options.distance[1]=t.__options.distance[0]),t.__options.distance[2]===undefined&&(t.__options.distance[2]=t.__options.distance[0]),t.__options.distance[3]===undefined&&(t.__options.distance[3]=t.__options.distance[1]),t.__options.distance={top:t.__options.distance[0],right:t.__options.distance[1],bottom:t.__options.distance[2],left:t.__options.distance[3]});typeof t.__options.side=="string"&&(i={top:"bottom",right:"left",bottom:"top",left:"right"},t.__options.side=[t.__options.side,i[t.__options.side]],t.__options.side[0]=="left"||t.__options.side[0]=="right"?t.__options.side.push("top","bottom"):t.__options.side.push("right","left"));n.tooltipster._env.IE===6&&t.__options.arrow!==!0&&(t.__options.arrow=!1)},__reposition:function(t,i){var u=this,r,y=u.__targetFind(i),e=[],c,l,f,s,a;u.__instance._$tooltip.detach();var h=u.__instance._$tooltip.clone(),v=n.tooltipster._getRuler(h),o=!1;n.each(["window","document"],function(r,f){var l=null,r,c,s;if(u.__instance._trigger({container:f,helper:i,satisfied:o,takeTest:function(n){l=n},results:e,type:"positionTest"}),l==!0||l!=!1&&o==!1&&(f!="window"||u.__options.viewportAware))for(r=0;r<u.__options.side.length;r++)c={horizontal:0,vertical:0},s=u.__options.side[r],s=="top"||s=="bottom"?c.vertical=u.__options.distance[s]:c.horizontal=u.__options.distance[s],u.__sideChange(h,s),n.each(["natural","constrained"],function(n,r){if(l=null,u.__instance._trigger({container:f,event:t,helper:i,mode:r,results:e,satisfied:o,side:s,takeTest:function(n){l=n},type:"positionTest"}),l==!0||l!=!1&&o==!1){var h={container:f,distance:c,fits:null,mode:r,outerSize:null,side:s,size:null,target:y[s],whole:null},p=r=="natural"?v.free():v.constrain(i.geo.available[f][s].width-c.horizontal,i.geo.available[f][s].height-c.vertical),a=p.measure();if(h.size=a.size,h.outerSize={height:a.size.height+c.vertical,width:a.size.width+c.horizontal},h.fits=r=="natural"?i.geo.available[f][s].width>=h.outerSize.width&&i.geo.available[f][s].height>=h.outerSize.height?!0:!1:a.fits,f=="window"&&(h.whole=h.fits?s=="top"||s=="bottom"?i.geo.origin.windowOffset.right>=u.__options.minIntersection&&i.geo.window.size.width-i.geo.origin.windowOffset.left>=u.__options.minIntersection:i.geo.origin.windowOffset.bottom>=u.__options.minIntersection&&i.geo.window.size.height-i.geo.origin.windowOffset.top>=u.__options.minIntersection:!1),e.push(h),h.whole)o=!0;else if(h.mode=="natural"&&(h.fits||h.size.width<=i.geo.available[f][s].width))return!1}})});u.__instance._trigger({edit:function(n){e=n},event:t,helper:i,results:e,type:"positionTested"});e.sort(function(n,t){var i,r;return n.whole&&!t.whole?-1:!n.whole&&t.whole?1:n.whole&&t.whole?(i=u.__options.side.indexOf(n.side),r=u.__options.side.indexOf(t.side),i<r?-1:i>r?1:n.mode=="natural"?-1:1):n.fits&&!t.fits?-1:!n.fits&&t.fits?1:n.fits&&t.fits?(i=u.__options.side.indexOf(n.side),r=u.__options.side.indexOf(t.side),i<r?-1:i>r?1:n.mode=="natural"?-1:1):n.container=="document"&&n.side=="bottom"&&n.mode=="natural"?-1:1});r=e[0];r.coord={};switch(r.side){case"left":case"right":r.coord.top=Math.floor(r.target-r.size.height/2);break;case"bottom":case"top":r.coord.left=Math.floor(r.target-r.size.width/2)}switch(r.side){case"left":r.coord.left=i.geo.origin.windowOffset.left-r.outerSize.width;break;case"right":r.coord.left=i.geo.origin.windowOffset.right+r.distance.horizontal;break;case"top":r.coord.top=i.geo.origin.windowOffset.top-r.outerSize.height;break;case"bottom":r.coord.top=i.geo.origin.windowOffset.bottom+r.distance.vertical}r.container=="window"?r.side=="top"||r.side=="bottom"?r.coord.left<0?r.coord.left=i.geo.origin.windowOffset.right-this.__options.minIntersection>=0?0:i.geo.origin.windowOffset.right-this.__options.minIntersection-1:r.coord.left>i.geo.window.size.width-r.size.width&&(r.coord.left=i.geo.origin.windowOffset.left+this.__options.minIntersection<=i.geo.window.size.width?i.geo.window.size.width-r.size.width:i.geo.origin.windowOffset.left+this.__options.minIntersection+1-r.size.width):r.coord.top<0?r.coord.top=i.geo.origin.windowOffset.bottom-this.__options.minIntersection>=0?0:i.geo.origin.windowOffset.bottom-this.__options.minIntersection-1:r.coord.top>i.geo.window.size.height-r.size.height&&(r.coord.top=i.geo.origin.windowOffset.top+this.__options.minIntersection<=i.geo.window.size.height?i.geo.window.size.height-r.size.height:i.geo.origin.windowOffset.top+this.__options.minIntersection+1-r.size.height):(r.coord.left>i.geo.window.size.width-r.size.width&&(r.coord.left=i.geo.window.size.width-r.size.width),r.coord.left<0&&(r.coord.left=0));u.__sideChange(h,r.side);i.tooltipClone=h[0];i.tooltipParent=u.__instance.option("parent").parent[0];i.mode=r.mode;i.whole=r.whole;i.origin=u.__instance._$origin[0];i.tooltip=u.__instance._$tooltip[0];delete r.container;delete r.fits;delete r.mode;delete r.outerSize;delete r.whole;r.distance=r.distance.horizontal||r.distance.vertical;c=n.extend(!0,{},r);u.__instance._trigger({edit:function(n){r=n},event:t,helper:i,position:c,type:"position"});u.__options.functionPosition&&(l=u.__options.functionPosition.call(u,u.__instance,i,c),l&&(r=l));v.destroy();r.side=="top"||r.side=="bottom"?(f={prop:"left",val:r.target-r.coord.left},s=r.size.width-this.__options.minIntersection):(f={prop:"top",val:r.target-r.coord.top},s=r.size.height-this.__options.minIntersection);f.val<this.__options.minIntersection?f.val=this.__options.minIntersection:f.val>s&&(f.val=s);a=i.geo.origin.fixedLineage?i.geo.origin.windowOffset:{left:i.geo.origin.windowOffset.left+i.geo.window.scroll.left,top:i.geo.origin.windowOffset.top+i.geo.window.scroll.top};r.coord={left:a.left+(r.coord.left-i.geo.origin.windowOffset.left),top:a.top+(r.coord.top-i.geo.origin.windowOffset.top)};u.__sideChange(u.__instance._$tooltip,r.side);i.geo.origin.fixedLineage?u.__instance._$tooltip.css("position","fixed"):u.__instance._$tooltip.css("position","");u.__instance._$tooltip.css({left:r.coord.left,top:r.coord.top,height:r.size.height,width:r.size.width}).find(".tooltipster-arrow").css({left:"",top:""}).css(f.prop,f.val);u.__instance._$tooltip.appendTo(u.__instance.option("parent"));u.__instance._trigger({type:"repositioned",event:t,position:r})},__sideChange:function(n,t){n.removeClass("tooltipster-bottom").removeClass("tooltipster-left").removeClass("tooltipster-right").removeClass("tooltipster-top").addClass("tooltipster-"+t)},__targetFind:function(n){var r={},i=this.__instance._$origin[0].getClientRects(),u,t;return i.length>1&&(u=this.__instance._$origin.css("opacity"),u==1&&(this.__instance._$origin.css("opacity",.99),i=this.__instance._$origin[0].getClientRects(),this.__instance._$origin.css("opacity",1))),i.length<2?(r.top=Math.floor(n.geo.origin.windowOffset.left+n.geo.origin.size.width/2),r.bottom=r.top,r.left=Math.floor(n.geo.origin.windowOffset.top+n.geo.origin.size.height/2),r.right=r.left):(t=i[0],r.top=Math.floor(t.left+(t.right-t.left)/2),t=i.length>2?i[Math.ceil(i.length/2)-1]:i[0],r.right=Math.floor(t.top+(t.bottom-t.top)/2),t=i[i.length-1],r.bottom=Math.floor(t.left+(t.right-t.left)/2),t=i.length>2?i[Math.ceil((i.length+1)/2)-1]:i[i.length-1],r.left=Math.floor(t.top+(t.bottom-t.top)/2)),r}}}),n}),function(n){typeof define=="function"&&define.amd?define(["jquery"],n):typeof exports=="object"?n(require("jquery")):n(jQuery)}(function(n){var t=function(){var t;return n&&n.fn&&n.fn.select2&&n.fn.select2.amd&&(t=n.fn.select2.amd),function(){if(!t||!t.requirejs){t?i=t:t={};var n,i,r;(function(t){function e(n,t){return nt.call(n,t)}function c(n,t){var o,s,r,u,h,y,c,w,i,l,p,e=t&&t.split("/"),a=f.map,v=a&&a["*"]||{};if(n&&n.charAt(0)===".")if(t){for(n=n.split("/"),h=n.length-1,f.nodeIdCompat&&b.test(n[h])&&(n[h]=n[h].replace(b,"")),n=e.slice(0,e.length-1).concat(n),i=0;i<n.length;i+=1)if(p=n[i],p===".")n.splice(i,1),i-=1;else if(p==="..")if(i===1&&(n[2]===".."||n[0]===".."))break;else i>0&&(n.splice(i-1,2),i-=2);n=n.join("/")}else n.indexOf("./")===0&&(n=n.substring(2));if((e||v)&&a){for(o=n.split("/"),i=o.length;i>0;i-=1){if(s=o.slice(0,i).join("/"),e)for(l=e.length;l>0;l-=1)if(r=a[e.slice(0,l).join("/")],r&&(r=r[s],r)){u=r;y=i;break}if(u)break;!c&&v&&v[s]&&(c=v[s],w=i)}!u&&c&&(u=c,y=w);u&&(o.splice(0,y,u),n=o.join("/"))}return n}function p(n,i){return function(){var r=tt.call(arguments,0);return typeof r[0]!="string"&&r.length===1&&r.push(null),o.apply(t,r.concat([n,i]))}}function k(n){return function(t){return c(t,n)}}function d(n){return function(t){u[n]=t}}function l(n){if(e(h,n)){var i=h[n];delete h[n];y[n]=!0;a.apply(t,i)}if(!e(u,n)&&!e(y,n))throw new Error("No "+n);return u[n]}function w(n){var i,t=n?n.indexOf("!"):-1;return t>-1&&(i=n.substring(0,t),n=n.substring(t+1,n.length)),[i,n]}function g(n){return function(){return f&&f.config&&f.config[n]||{}}}var a,o,v,s,u={},h={},f={},y={},nt=Object.prototype.hasOwnProperty,tt=[].slice,b=/\.js$/;v=function(n,t){var r,u=w(n),i=u[0];return n=u[1],i&&(i=c(i,t),r=l(i)),i?n=r&&r.normalize?r.normalize(n,k(t)):c(n,t):(n=c(n,t),u=w(n),i=u[0],n=u[1],i&&(r=l(i))),{f:i?i+"!"+n:n,n:n,pr:i,p:r}};s={require:function(n){return p(n)},exports:function(n){var t=u[n];return typeof t!="undefined"?t:u[n]={}},module:function(n){return{id:n,uri:"",exports:u[n],config:g(n)}}};a=function(n,i,r,f){var w,o,k,b,c,a=[],g=typeof r,nt;if(f=f||n,g==="undefined"||g==="function"){for(i=!i.length&&r.length?["require","exports","module"]:i,c=0;c<i.length;c+=1)if(b=v(i[c],f),o=b.f,o==="require")a[c]=s.require(n);else if(o==="exports")a[c]=s.exports(n),nt=!0;else if(o==="module")w=a[c]=s.module(n);else if(e(u,o)||e(h,o)||e(y,o))a[c]=l(o);else if(b.p)b.p.load(b.n,p(f,!0),d(o),{}),a[c]=u[o];else throw new Error(n+" missing "+o);k=r?r.apply(u[n],a):undefined;n&&(w&&w.exports!==t&&w.exports!==u[n]?u[n]=w.exports:k===t&&nt||(u[n]=k))}else n&&(u[n]=r)};n=i=o=function(n,i,r,u,e){if(typeof n=="string")return s[n]?s[n](i):l(v(n,i).f);if(!n.splice){if(f=n,f.deps&&o(f.deps,f.callback),!i)return;i.splice?(n=i,i=r,r=null):n=t}return i=i||function(){},typeof r=="function"&&(r=u,u=e),u?a(t,n,i,r):setTimeout(function(){a(t,n,i,r)},4),o};o.config=function(n){return o(n)};n._defined=u;r=function(n,t,i){if(typeof n!="string")throw new Error("See almond README: incorrect module build, no module name");t.splice||(i=t,t=[]);e(u,n)||e(h,n)||(h[n]=[n,t,i])};r.amd={jQuery:!0}})();t.requirejs=n;t.require=i;t.define=r}}(),t.define("almond",function(){}),t.define("jquery",[],function(){var t=n||$;return t==null&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),t}),t.define("select2/utils",["jquery"],function(n){function r(n){var i=n.prototype,r=[],t,u;for(t in i)(u=i[t],typeof u=="function")&&t!=="constructor"&&r.push(t);return r}var t={},i;return t.Extend=function(n,t){function r(){this.constructor=n}var u={}.hasOwnProperty,i;for(i in t)u.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n},t.Decorate=function(n,t){function i(){var r=Array.prototype.unshift,u=t.prototype.constructor.length,i=n.prototype.constructor;u>0&&(r.call(arguments,n.prototype.constructor),i=t.prototype.constructor);i.apply(this,arguments)}function l(){this.constructor=i}var s=r(t),h=r(n),u,e,c,f,o;for(t.displayName=n.displayName,i.prototype=new l,u=0;u<h.length;u++)e=h[u],i.prototype[e]=n.prototype[e];for(c=function(n){var r=function(){},u;return n in i.prototype&&(r=i.prototype[n]),u=t.prototype[n],function(){var n=Array.prototype.unshift;return n.call(arguments,r),u.apply(this,arguments)}},f=0;f<s.length;f++)o=s[f],i.prototype[o]=c(o);return i},i=function(){this.listeners={}},i.prototype.on=function(n,t){this.listeners=this.listeners||{};n in this.listeners?this.listeners[n].push(t):this.listeners[n]=[t]},i.prototype.trigger=function(n){var i=Array.prototype.slice,t=i.call(arguments,1);this.listeners=this.listeners||{};t==null&&(t=[]);t.length===0&&t.push({});t[0]._type=n;n in this.listeners&&this.invoke(this.listeners[n],i.call(arguments,1));"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},i.prototype.invoke=function(n,t){for(var i=0,r=n.length;i<r;i++)n[i].apply(this,t)},t.Observable=i,t.generateChars=function(n){for(var t,i="",r=0;r<n;r++)t=Math.floor(Math.random()*36),i+=t.toString(36);return i},t.bind=function(n,t){return function(){n.apply(t,arguments)}},t._convertData=function(n){var f,r,i,u,t;for(f in n)if(r=f.split("-"),i=n,r.length!==1){for(u=0;u<r.length;u++)t=r[u],t=t.substring(0,1).toLowerCase()+t.substring(1),t in i||(i[t]={}),u==r.length-1&&(i[t]=n[f]),i=i[t];delete n[f]}return n},t.hasScroll=function(t,i){var u=n(i),f=i.style.overflowX,r=i.style.overflowY;return f===r&&(r==="hidden"||r==="visible")?!1:f==="scroll"||r==="scroll"?!0:u.innerHeight()<i.scrollHeight||u.innerWidth()<i.scrollWidth},t.escapeMarkup=function(n){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return typeof n!="string"?n:String(n).replace(/[&<>"'\/\\]/g,function(n){return t[n]})},t.appendMany=function(t,i){if(n.fn.jquery.substr(0,3)==="1.7"){var r=n();n.map(i,function(n){r=r.add(n)});i=r}t.append(i)},t}),t.define("select2/results",["jquery","./utils"],function(n,t){function i(n,t,r){this.$element=n;this.data=r;this.options=t;i.__super__.constructor.call(this)}return t.Extend(i,t.Observable),i.prototype.render=function(){var t=n('<ul class="select2-results__options" role="tree"><\/ul>');return this.options.get("multiple")&&t.attr("aria-multiselectable","true"),this.$results=t,t},i.prototype.clear=function(){this.$results.empty()},i.prototype.displayMessage=function(t){var u=this.options.get("escapeMarkup"),i,r;this.clear();this.hideLoading();i=n('<li role="treeitem" aria-live="assertive" class="select2-results__option"><\/li>');r=this.options.get("translations").get(t.message);i.append(u(r(t.args)));i[0].className+=" select2-results__message";this.$results.append(i)},i.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},i.prototype.append=function(n){var i,t,r,u;if(this.hideLoading(),i=[],n.results==null||n.results.length===0){this.$results.children().length===0&&this.trigger("results:message",{message:"noResults"});return}for(n.results=this.sort(n.results),t=0;t<n.results.length;t++)r=n.results[t],u=this.option(r),i.push(u);this.$results.append(i)},i.prototype.position=function(n,t){var i=t.find(".select2-results");i.append(n)},i.prototype.sort=function(n){var t=this.options.get("sorter");return t(n)},i.prototype.highlightFirstItem=function(){var n=this.$results.find(".select2-results__option[aria-selected]"),t=n.filter("[aria-selected=true]");t.length>0?t.first().trigger("mouseenter"):n.first().trigger("mouseenter");this.ensureHighlightVisible()},i.prototype.setClasses=function(){var t=this;this.data.current(function(i){var r=n.map(i,function(n){return n.id.toString()}),u=t.$results.find(".select2-results__option[aria-selected]");u.each(function(){var i=n(this),t=n.data(this,"data"),u=""+t.id;t.element!=null&&t.element.selected||t.element==null&&n.inArray(u,r)>-1?t.element.value=="mydates"?i.attr("aria-selected","false"):i.attr("aria-selected","true"):i.attr("aria-selected","false")})})},i.prototype.showLoading=function(n){this.hideLoading();var i=this.options.get("translations").get("searching"),r={disabled:!0,loading:!0,text:i(n)},t=this.option(r);t.className+=" loading-results";this.$results.prepend(t)},i.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},i.prototype.option=function(t){var r=document.createElement("li"),i,e,c,o,u,v,s,f,l,a,h;r.className="select2-results__option";i={role:"treeitem","aria-selected":"false"};t.disabled&&(delete i["aria-selected"],i["aria-disabled"]="true");t.id==null&&delete i["aria-selected"];t._resultId!=null&&(r.id=t._resultId);t.title&&(r.title=t.title);t.children&&(i.role="group",i["aria-label"]=t.text,delete i["aria-selected"]);for(e in i)c=i[e],r.setAttribute(e,c);if(t.children){for(o=n(r),u=document.createElement("strong"),u.className="select2-results__group",v=n(u),this.template(t,u),s=[],f=0;f<t.children.length;f++)l=t.children[f],a=this.option(l),s.push(a);h=n("<ul><\/ul>",{"class":"select2-results__options select2-results__options--nested"});h.append(s);o.append(u);o.append(h)}else this.template(t,r);return n.data(r,"data",t),r},i.prototype.bind=function(t){var i=this,r=t.id+"-results";this.$results.attr("id",r);t.on("results:all",function(n){i.clear();i.append(n.data);t.isOpen()&&(i.setClasses(),i.highlightFirstItem())});t.on("results:append",function(n){i.append(n.data);t.isOpen()&&i.setClasses()});t.on("query",function(n){i.hideMessages();i.showLoading(n)});t.on("select",function(){t.isOpen()&&(i.setClasses(),i.highlightFirstItem())});t.on("unselect",function(){t.isOpen()&&(i.setClasses(),i.highlightFirstItem())});t.on("open",function(){i.$results.attr("aria-expanded","true");i.$results.attr("aria-hidden","false");i.setClasses();i.ensureHighlightVisible()});t.on("close",function(){i.$results.attr("aria-expanded","false");i.$results.attr("aria-hidden","true");i.$results.removeAttr("aria-activedescendant")});t.on("results:toggle",function(){var n=i.getHighlightedResults();n.length!==0&&n.trigger("mouseup")});t.on("results:select",function(){var n=i.getHighlightedResults(),t;n.length!==0&&(t=n.data("data"),n.attr("aria-selected")=="true"?i.trigger("close",{}):i.trigger("select",{data:t}))});t.on("results:previous",function(){var r=i.getHighlightedResults(),u=i.$results.find("[aria-selected]"),f=u.index(r),n,t;if(f!==0){n=f-1;r.length===0&&(n=0);t=u.eq(n);t.trigger("mouseenter");var e=i.$results.offset().top,o=t.offset().top,s=i.$results.scrollTop()+(o-e);n===0?i.$results.scrollTop(0):o-e<0&&i.$results.scrollTop(s)}});t.on("results:next",function(){var e=i.getHighlightedResults(),t=i.$results.find("[aria-selected]"),o=t.index(e),r=o+1,n;if(!(r>=t.length)){n=t.eq(r);n.trigger("mouseenter");var u=i.$results.offset().top+i.$results.outerHeight(!1),f=n.offset().top+n.outerHeight(!1),s=i.$results.scrollTop()+f-u;r===0?i.$results.scrollTop(0):f>u&&i.$results.scrollTop(s)}});t.on("results:focus",function(n){n.element.addClass("select2-results__option--highlighted")});t.on("results:message",function(n){i.displayMessage(n)});if(n.fn.mousewheel)this.$results.on("mousewheel",function(n){var t=i.$results.scrollTop(),r=i.$results.get(0).scrollHeight-t+n.deltaY,u=n.deltaY>0&&t-n.deltaY<=0,f=n.deltaY<0&&r<=i.$results.height();u?(i.$results.scrollTop(0),n.preventDefault(),n.stopPropagation()):f&&(i.$results.scrollTop(i.$results.get(0).scrollHeight-i.$results.height()),n.preventDefault(),n.stopPropagation())});this.$results.on("mouseup",".select2-results__option[aria-selected]",function(t){var r=n(this),u=r.data("data");if(r.attr("aria-selected")==="true"){i.options.get("multiple")?i.trigger("unselect",{originalEvent:t,data:u}):i.trigger("close",{});return}i.trigger("select",{originalEvent:t,data:u})});this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(){var t=n(this).data("data");i.getHighlightedResults().removeClass("select2-results__option--highlighted");i.trigger("results:focus",{data:t,element:n(this)})})},i.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},i.prototype.destroy=function(){this.$results.remove()},i.prototype.ensureHighlightVisible=function(){var n=this.getHighlightedResults();if(n.length!==0){var f=this.$results.find("[aria-selected]"),e=f.index(n),t=this.$results.offset().top,i=n.offset().top,r=this.$results.scrollTop()+(i-t),u=i-t;r-=n.outerHeight(!1)*2;e<=2?this.$results.scrollTop(0):(u>this.$results.outerHeight()||u<0)&&this.$results.scrollTop(r)}},i.prototype.template=function(t,i){var u=this.options.get("templateResult"),f=this.options.get("escapeMarkup"),r=u(t,i);r==null?i.style.display="none":typeof r=="string"?i.innerHTML=f(r):n(i).append(r)},i}),t.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),t.define("select2/selection/base",["jquery","../utils","../keys"],function(n,t,i){function r(n,t){this.$element=n;this.options=t;r.__super__.constructor.call(this)}return t.Extend(r,t.Observable),r.prototype.render=function(){var t=n('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"><\/span>');return this._tabindex=0,this.$element.data("old-tabindex")!=null?this._tabindex=this.$element.data("old-tabindex"):this.$element.attr("tabindex")!=null&&(this._tabindex=this.$element.attr("tabindex")),t.attr("title",this.$element.attr("title")),t.attr("tabindex",this._tabindex),this.$selection=t,t},r.prototype.bind=function(n){var t=this,u=n.id+"-container",r=n.id+"-results";this.container=n;this.$selection.on("focus",function(n){t.trigger("focus",n)});this.$selection.on("blur",function(n){t._handleBlur(n)});this.$selection.on("keydown",function(n){t.trigger("keypress",n);n.which===i.SPACE&&n.preventDefault()});n.on("results:focus",function(n){t.$selection.attr("aria-activedescendant",n.data._resultId)});n.on("selection:update",function(n){t.update(n.data)});n.on("open",function(){t.$selection.attr("aria-expanded","true");t.$selection.attr("aria-owns",r);t._attachCloseHandler(n)});n.on("close",function(){t.$selection.attr("aria-expanded","false");t.$selection.removeAttr("aria-activedescendant");t.$selection.removeAttr("aria-owns");t.$selection.focus();t._detachCloseHandler(n)});n.on("enable",function(){t.$selection.attr("tabindex",t._tabindex)});n.on("disable",function(){t.$selection.attr("tabindex","-1")})},r.prototype._handleBlur=function(t){var i=this;window.setTimeout(function(){document.activeElement==i.$selection[0]||n.contains(i.$selection[0],document.activeElement)||i.trigger("blur",t)},1)},r.prototype._attachCloseHandler=function(t){var i=this;n(document.body).on("mousedown.select2."+t.id,function(t){var i=n(t.target),r=i.closest(".select2"),u=n(".select2.select2-container--open");u.each(function(){var i=n(this),t;this!=r[0]&&(t=i.data("element"),t.select2("close"))})})},r.prototype._detachCloseHandler=function(t){n(document.body).off("mousedown.select2."+t.id)},r.prototype.position=function(n,t){var i=t.find(".selection");i.append(n)},r.prototype.destroy=function(){this._detachCloseHandler(this.container)},r.prototype.update=function(){throw new Error("The `update` method must be defined in child classes.");},r}),t.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(n,t,i){function r(){r.__super__.constructor.apply(this,arguments)}return i.Extend(r,t),r.prototype.render=function(){var n=r.__super__.render.call(this);return n.addClass("select2-selection--single"),n.html('<span class="select2-selection__rendered"><\/span><span class="select2-selection__arrow" role="presentation"><b role="presentation"><\/b><\/span>'),n},r.prototype.bind=function(n){var t=this,i;r.__super__.bind.apply(this,arguments);i=n.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",i);this.$selection.attr("aria-labelledby",i);this.$selection.on("mousedown",function(n){n.which===1&&t.trigger("toggle",{originalEvent:n})});this.$selection.on("focus",function(){});this.$selection.on("blur",function(){});n.on("focus",function(){n.isOpen()||t.$selection.focus()});n.on("selection:update",function(n){t.update(n.data)})},r.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},r.prototype.display=function(n,t){var i=this.options.get("templateSelection"),r=this.options.get("escapeMarkup");return r(i(n,t))},r.prototype.selectionContainer=function(){return n("<span><\/span>")},r.prototype.update=function(n){if(n.length===0){this.clear();return}var t=n[0],i=this.$selection.find(".select2-selection__rendered"),r=this.display(t,i);i.empty().append(r);i.prop("title",t.title||t.text)},r}),t.define("select2/selection/multiple",["jquery","./base","../utils"],function(n,t,i){function r(){r.__super__.constructor.apply(this,arguments)}return i.Extend(r,t),r.prototype.render=function(){var n=r.__super__.render.call(this);return n.addClass("select2-selection--multiple"),n.html('<ul class="select2-selection__rendered"><\/ul>'),n},r.prototype.bind=function(){var t=this;r.__super__.bind.apply(this,arguments);this.$selection.on("click",function(n){t.trigger("toggle",{originalEvent:n})});this.$selection.on("click",".select2-selection__choice__remove",function(i){if(!t.options.get("disabled")){var r=n(this),u=r.parent(),f=u.data("data");t.trigger("unselect",{originalEvent:i,data:f})}})},r.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},r.prototype.display=function(n,t){var i=this.options.get("templateSelection"),r=this.options.get("escapeMarkup");return r(i(n,t))},r.prototype.selectionContainer=function(){return n('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;<\/span><\/li>')},r.prototype.update=function(n){var f,r,e;if(this.clear(),n.length!==0){for(f=[],r=0;r<n.length;r++){var u=n[r],t=this.selectionContainer(),o=this.display(u,t);t.append(o);t.prop("title",u.title||u.text);t.data("data",u);f.push(t)}e=this.$selection.find(".select2-selection__rendered");i.appendMany(e,f)}},r}),t.define("select2/selection/placeholder",["../utils"],function(){function n(n,t,i){this.placeholder=this.normalizePlaceholder(i.get("placeholder"));n.call(this,t,i)}return n.prototype.normalizePlaceholder=function(n,t){return typeof t=="string"&&(t={id:"",text:t}),t},n.prototype.createPlaceholder=function(n,t){var i=this.selectionContainer();return i.html(this.display(t)),i.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),i},n.prototype.update=function(n,t){var r=t.length==1&&t[0].id!=this.placeholder.id,u=t.length>1,i;if(u||r)return n.call(this,t);this.clear();i=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(i)},n}),t.define("select2/selection/allowClear",["jquery","../keys"],function(n,t){function i(){}return i.prototype.bind=function(n,t,i){var r=this;n.call(this,t,i);this.placeholder==null&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option.");this.$selection.on("mousedown",".select2-selection__clear",function(n){r._handleClear(n)});t.on("keypress",function(n){r._handleKeyboardClear(n,t)})},i.prototype._handleClear=function(n,t){var r,u,i,f;if(!this.options.get("disabled")&&(r=this.$selection.find(".select2-selection__clear"),r.length!==0)){for(t.stopPropagation(),u=r.data("data"),i=0;i<u.length;i++)if(f={data:u[i]},this.trigger("unselect",f),f.prevented)return;this.$element.val(this.placeholder.id).trigger("change");this.trigger("toggle",{})}},i.prototype._handleKeyboardClear=function(n,i,r){r.isOpen()||(i.which==t.DELETE||i.which==t.BACKSPACE)&&this._handleClear(i)},i.prototype.update=function(t,i){if(t.call(this,i),!(this.$selection.find(".select2-selection__placeholder").length>0)&&i.length!==0){var r=n('<span class="select2-selection__clear">&times;<\/span>');r.data("data",i);this.$selection.find(".select2-selection__rendered").prepend(r)}},i}),t.define("select2/selection/search",["jquery","../utils","../keys"],function(n,t,i){function r(n,t,i){n.call(this,t,i)}return r.prototype.render=function(t){var i=n('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" aria-autocomplete="list" /><\/li>'),r;return this.$searchContainer=i,this.$search=i.find("input"),r=t.call(this),this._transferTabIndex(),r},r.prototype.bind=function(n,t,r){var u=this,f,e;n.call(this,t,r);t.on("open",function(){u.$search.trigger("focus")});t.on("close",function(){u.$search.val("");u.$search.removeAttr("aria-activedescendant");u.$search.trigger("focus")});t.on("enable",function(){u.$search.prop("disabled",!1);u._transferTabIndex()});t.on("disable",function(){u.$search.prop("disabled",!0)});t.on("focus",function(){u.$search.trigger("focus")});t.on("results:focus",function(n){u.$search.attr("aria-activedescendant",n.id)});this.$selection.on("focusin",".select2-search--inline",function(n){u.trigger("focus",n)});this.$selection.on("focusout",".select2-search--inline",function(n){u._handleBlur(n)});this.$selection.on("keydown",".select2-search--inline",function(n){var r,t,f;n.stopPropagation();u.trigger("keypress",n);u._keyUpPrevented=n.isDefaultPrevented();r=n.which;r===i.BACKSPACE&&u.$search.val()===""&&(t=u.$searchContainer.prev(".select2-selection__choice"),t.length>0&&(f=t.data("data"),u.searchRemoveChoice(f),n.preventDefault()))});f=document.documentMode;e=f&&f<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(){if(e){u.$selection.off("input.search input.searchcheck");return}u.$selection.off("keyup.search")});this.$selection.on("keyup.search input.search",".select2-search--inline",function(n){if(e&&n.type==="input"){u.$selection.off("input.search input.searchcheck");return}var t=n.which;t!=i.SHIFT&&t!=i.CTRL&&t!=i.ALT&&t!=i.TAB&&u.handleSearch(n)})},r.prototype._transferTabIndex=function(){this.$search.attr("tabindex",this.$selection.attr("tabindex"));this.$selection.attr("tabindex","-1")},r.prototype.createPlaceholder=function(n,t){this.$search.attr("placeholder",t.text)},r.prototype.update=function(n,t){var i=this.$search[0]==document.activeElement;this.$search.attr("placeholder","");n.call(this,t);this.$selection.find(".select2-selection__rendered").append(this.$searchContainer);this.resizeSearch();i&&this.$search.focus()},r.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var n=this.$search.val();this.trigger("query",{term:n})}this._keyUpPrevented=!1},r.prototype.searchRemoveChoice=function(n,t){this.trigger("unselect",{data:t});this.$search.val(t.text);this.handleSearch()},r.prototype.resizeSearch=function(){var n,t;this.$search.css("width","25px");n="";this.$search.attr("placeholder")!==""?n=this.$selection.find(".select2-selection__rendered").innerWidth():(t=this.$search.val().length+1,n=t*.75+"em");this.$search.css("width",n)},r}),t.define("select2/selection/eventRelay",["jquery"],function(n){function t(){}return t.prototype.bind=function(t,i,r){var u=this,f=["open","opening","close","closing","select","selecting","unselect","unselecting"],e=["opening","closing","selecting","unselecting"];t.call(this,i,r);i.on("*",function(t,i){if(n.inArray(t,f)!==-1){i=i||{};var r=n.Event("select2:"+t,{params:i});(u.$element.trigger(r),n.inArray(t,e)!==-1)&&(i.prevented=r.isDefaultPrevented())}})},t}),t.define("select2/translation",["jquery","require"],function(n,t){function i(n){this.dict=n||{}}return i.prototype.all=function(){return this.dict},i.prototype.get=function(n){return this.dict[n]},i.prototype.extend=function(t){this.dict=n.extend({},t.all(),this.dict)},i._cache={},i.loadPath=function(n){if(!(n in i._cache)){var r=t(n);i._cache[n]=r}return new i(i._cache[n])},i}),t.define("select2/diacritics",[],function(){return{"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""}}),t.define("select2/data/base",["../utils"],function(n){function t(){t.__super__.constructor.call(this)}return n.Extend(t,n.Observable),t.prototype.current=function(){throw new Error("The `current` method must be defined in child classes.");},t.prototype.query=function(){throw new Error("The `query` method must be defined in child classes.");},t.prototype.bind=function(){},t.prototype.destroy=function(){},t.prototype.generateResultId=function(t,i){var r=t.id+"-result-";return r+=n.generateChars(4),r+(i.id!=null?"-"+i.id.toString():"-"+n.generateChars(4))},t}),t.define("select2/data/select",["./base","../utils","jquery"],function(n,t,i){function r(n,t){this.$element=n;this.options=t;r.__super__.constructor.call(this)}return t.Extend(r,n),r.prototype.current=function(n){var t=[],r=this;this.$element.find(":selected").each(function(){var n=i(this),u=r.item(n);t.push(u)});n(t)},r.prototype.select=function(n){var t=this,r;if(n.selected=!0,i(n.element).is("option")){n.element.selected=!0;this.$element.trigger("change");return}this.$element.prop("multiple")?this.current(function(r){var f=[],u,e;for(n=[n],n.push.apply(n,r),u=0;u<n.length;u++)e=n[u].id,i.inArray(e,f)===-1&&f.push(e);t.$element.val(f);t.$element.trigger("change")}):(r=n.id,this.$element.val(r),this.$element.trigger("change"))},r.prototype.unselect=function(n){var t=this;if(this.$element.prop("multiple")){if(n.selected=!1,i(n.element).is("option")){n.element.selected=!1;this.$element.trigger("change");return}this.current(function(r){for(var u,f=[],e=0;e<r.length;e++)u=r[e].id,u!==n.id&&i.inArray(u,f)===-1&&f.push(u);t.$element.val(f);t.$element.trigger("change")})}},r.prototype.bind=function(n){var t=this;this.container=n;n.on("select",function(n){t.select(n.data)});n.on("unselect",function(n){t.unselect(n.data)})},r.prototype.destroy=function(){this.$element.find("*").each(function(){i.removeData(this,"data")})},r.prototype.query=function(n,t){var r=[],u=this,f=this.$element.children();f.each(function(){var t=i(this),e,f;(t.is("option")||t.is("optgroup"))&&(e=u.item(t),f=u.matches(n,e),f!==null&&r.push(f))});t({results:r})},r.prototype.addOptions=function(n){t.appendMany(this.$element,n)},r.prototype.option=function(n){var t,u,r;return n.children?(t=document.createElement("optgroup"),t.label=n.text):(t=document.createElement("option"),t.textContent!==undefined?t.textContent=n.text:t.innerText=n.text),n.id&&(t.value=n.id),n.disabled&&(t.disabled=!0),n.selected&&(t.selected=!0),n.title&&(t.title=n.title),u=i(t),r=this._normalizeItem(n),r.element=t,i.data(t,"data",r),u},r.prototype.item=function(n){var t={},u,f,r,e,o;if(t=i.data(n[0],"data"),t!=null)return t;if(n.is("option"))t={id:n.val(),text:n.text(),disabled:n.prop("disabled"),selected:n.prop("selected"),title:n.prop("title")};else if(n.is("optgroup")){for(t={text:n.prop("label"),children:[],title:n.prop("title")},u=n.children("option"),f=[],r=0;r<u.length;r++)e=i(u[r]),o=this.item(e),f.push(o);t.children=f}return t=this._normalizeItem(t),t.element=n[0],i.data(n[0],"data",t),t},r.prototype._normalizeItem=function(n){return i.isPlainObject(n)||(n={id:n,text:n}),n=i.extend({},{text:""},n),n.id!=null&&(n.id=n.id.toString()),n.text!=null&&(n.text=n.text.toString()),n._resultId==null&&n.id&&this.container!=null&&(n._resultId=this.generateResultId(this.container,n)),i.extend({},{selected:!1,disabled:!1},n)},r.prototype.matches=function(n,t){var i=this.options.get("matcher");return i(n,t)},r}),t.define("select2/data/array",["./select","../utils","jquery"],function(n,t,i){function r(n,t){var i=t.get("data")||[];r.__super__.constructor.call(this,n,t);this.addOptions(this.convertToOptions(i))}return t.Extend(r,n),r.prototype.select=function(n){var t=this.$element.find("option").filter(function(t,i){return i.value==n.id.toString()});t.length===0&&(t=this.option(n),this.addOptions(t));r.__super__.select.call(this,n)},r.prototype.convertToOptions=function(n){function c(n){return function(){return i(this).val()==n.id}}for(var r,u,e,l=this,o=this.$element.find("option"),a=o.map(function(){return l.item(i(this)).id}).get(),s=[],f=0;f<n.length;f++){if(r=this._normalizeItem(n[f]),i.inArray(r.id,a)>=0){var h=o.filter(c(r)),v=this.item(h),y=i.extend(!0,{},r,v),p=this.option(y);h.replaceWith(p);continue}u=this.option(r);r.children&&(e=this.convertToOptions(r.children),t.appendMany(u,e));s.push(u)}return s},r}),t.define("select2/data/ajax",["./array","../utils","jquery"],function(n,t,i){function r(n,t){this.ajaxOptions=this._applyDefaults(t.get("ajax"));this.ajaxOptions.processResults!=null&&(this.processResults=this.ajaxOptions.processResults);r.__super__.constructor.call(this,n,t)}return t.Extend(r,n),r.prototype._applyDefaults=function(n){var t={data:function(n){return i.extend({},n,{q:n.term})},transport:function(n,t,r){var u=i.ajax(n);return u.then(t),u.fail(r),u}};return i.extend({},t,n,!0)},r.prototype.processResults=function(n){return n},r.prototype.query=function(n,t){function f(){var f=r.transport(r,function(r){var f=u.processResults(r,n);u.options.get("debug")&&window.console&&console.error&&(f&&f.results&&i.isArray(f.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response."));t(f)},function(){f.status&&f.status==="0"||u.trigger("results:message",{message:"errorLoading"})});u._request=f}var u=this,r;this._request!=null&&(i.isFunction(this._request.abort)&&this._request.abort(),this._request=null);r=i.extend({type:"GET"},this.ajaxOptions);typeof r.url=="function"&&(r.url=r.url.call(this.$element,n));typeof r.data=="function"&&(r.data=r.data.call(this.$element,n));this.ajaxOptions.delay&&n.term!=null?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(f,this.ajaxOptions.delay)):f()},r}),t.define("select2/data/tags",["jquery"],function(n){function t(t,i,r){var f=r.get("tags"),o=r.get("createTag"),e,u;if(o!==undefined&&(this.createTag=o),e=r.get("insertTag"),e!==undefined&&(this.insertTag=e),t.call(this,i,r),n.isArray(f))for(u=0;u<f.length;u++){var s=f[u],h=this._normalizeItem(s),c=this.option(h);this.$element.append(c)}}return t.prototype.query=function(n,t,i){function u(n,f){for(var o,h,e=n.results,s=0;s<e.length;s++){var c=e[s],l=c.children!=null&&!u({results:c.children},!0),a=c.text===t.term;if(a||l){if(f)return!1;n.data=e;i(n);return}}if(f)return!0;o=r.createTag(t);o!=null&&(h=r.option(o),h.attr("data-select2-tag",!0),r.addOptions([h]),r.insertTag(e,o));n.results=e;i(n)}var r=this;if(this._removeOldTags(),t.term==null||t.page!=null){n.call(this,t,i);return}n.call(this,t,u)},t.prototype.createTag=function(t,i){var r=n.trim(i.term);return r===""?null:{id:r,text:r}},t.prototype.insertTag=function(n,t,i){t.unshift(i)},t.prototype._removeOldTags=function(){var i=this._lastTag,t=this.$element.find("option[data-select2-tag]");t.each(function(){this.selected||n(this).remove()})},t}),t.define("select2/data/tokenizer",["jquery"],function(n){function t(n,t,i){var r=i.get("tokenizer");r!==undefined&&(this.tokenizer=r);n.call(this,t,i)}return t.prototype.bind=function(n,t,i){n.call(this,t,i);this.$search=t.dropdown.$search||t.selection.$search||i.find(".select2-search__field")},t.prototype.query=function(t,i,r){function e(t){var i=u._normalizeItem(t),f=u.$element.find("option").filter(function(){return n(this).val()===i.id}),r;f.length||(r=u.option(i),r.attr("data-select2-tag",!0),u._removeOldTags(),u.addOptions([r]));o(i)}function o(n){u.trigger("select",{data:n})}var u=this,f;i.term=i.term||"";f=this.tokenizer(i,this.options,e);f.term!==i.term&&(this.$search.length&&(this.$search.val(f.term),this.$search.focus()),i.term=f.term);t.call(this,i,r)},t.prototype.tokenizer=function(t,i,r,u){for(var h=r.get("tokenSeparators")||[],e=i.term,f=0,c=this.createTag||function(n){return{id:n.term,text:n.term}},o;f<e.length;){if(o=e[f],n.inArray(o,h)===-1){f++;continue}var l=e.substr(0,f),a=n.extend({},i,{term:l}),s=c(a);if(s==null){f++;continue}u(s);e=e.substr(f+1)||"";f=0}return{term:e}},t}),t.define("select2/data/minimumInputLength",[],function(){function n(n,t,i){this.minimumInputLength=i.get("minimumInputLength");n.call(this,t,i)}return n.prototype.query=function(n,t,i){if(t.term=t.term||"",t.term.length<this.minimumInputLength){this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}});return}n.call(this,t,i)},n}),t.define("select2/data/maximumInputLength",[],function(){function n(n,t,i){this.maximumInputLength=i.get("maximumInputLength");n.call(this,t,i)}return n.prototype.query=function(n,t,i){if(t.term=t.term||"",this.maximumInputLength>0&&t.term.length>this.maximumInputLength){this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}});return}n.call(this,t,i)},n}),t.define("select2/data/maximumSelectionLength",[],function(){function n(n,t,i){this.maximumSelectionLength=i.get("maximumSelectionLength");n.call(this,t,i)}return n.prototype.query=function(n,t,i){var r=this;this.current(function(u){var f=u!=null?u.length:0;if(r.maximumSelectionLength>0&&f>=r.maximumSelectionLength){r.trigger("results:message",{message:"maximumSelected",args:{maximum:r.maximumSelectionLength}});return}n.call(r,t,i)})},n}),t.define("select2/dropdown",["jquery","./utils"],function(n,t){function i(n,t){this.$element=n;this.options=t;i.__super__.constructor.call(this)}return t.Extend(i,t.Observable),i.prototype.render=function(){var t=n('<span class="select2-dropdown"><span class="select2-results"><\/span><\/span>');return t.attr("dir",this.options.get("dir")),this.$dropdown=t,t},i.prototype.bind=function(){},i.prototype.position=function(){},i.prototype.destroy=function(){this.$dropdown.remove()},i}),t.define("select2/dropdown/search",["jquery","../utils"],function(n){function t(){}return t.prototype.render=function(t){var r=t.call(this),i=n('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /><\/span>');return this.$searchContainer=i,this.$search=i.find("input"),r.prepend(i),r},t.prototype.bind=function(t,i,r){var u=this;t.call(this,i,r);this.$search.on("keydown",function(n){u.trigger("keypress",n);u._keyUpPrevented=n.isDefaultPrevented()});this.$search.on("input",function(){n(this).off("keyup")});this.$search.on("keyup input",function(n){u.handleSearch(n)});i.on("open",function(){u.$search.attr("tabindex",0);u.$search.focus();window.setTimeout(function(){u.$search.focus()},0)});i.on("close",function(){u.$search.attr("tabindex",-1);u.$search.val("")});i.on("focus",function(){i.isOpen()&&u.$search.focus()});i.on("results:all",function(n){if(n.query.term==null||n.query.term===""){var t=u.showSearch(n);t?u.$searchContainer.removeClass("select2-search--hide"):u.$searchContainer.addClass("select2-search--hide")}})},t.prototype.handleSearch=function(){if(!this._keyUpPrevented){var n=this.$search.val();this.trigger("query",{term:n})}this._keyUpPrevented=!1},t.prototype.showSearch=function(){return!0},t}),t.define("select2/dropdown/hidePlaceholder",[],function(){function n(n,t,i,r){this.placeholder=this.normalizePlaceholder(i.get("placeholder"));n.call(this,t,i,r)}return n.prototype.append=function(n,t){t.results=this.removePlaceholder(t.results);n.call(this,t)},n.prototype.normalizePlaceholder=function(n,t){return typeof t=="string"&&(t={id:"",text:t}),t},n.prototype.removePlaceholder=function(n,t){for(var r,u=t.slice(0),i=t.length-1;i>=0;i--)r=t[i],this.placeholder.id===r.id&&u.splice(i,1);return u},n}),t.define("select2/dropdown/infiniteScroll",["jquery"],function(n){function t(n,t,i,r){this.lastParams={};n.call(this,t,i,r);this.$loadingMore=this.createLoadingMore();this.loading=!1}return t.prototype.append=function(n,t){this.$loadingMore.remove();this.loading=!1;n.call(this,t);this.showLoadingMore(t)&&this.$results.append(this.$loadingMore)},t.prototype.bind=function(t,i,r){var u=this;t.call(this,i,r);i.on("query",function(n){u.lastParams=n;u.loading=!0});i.on("query:append",function(n){u.lastParams=n;u.loading=!0});this.$results.on("scroll",function(){var r=n.contains(document.documentElement,u.$loadingMore[0]),t,i;!u.loading&&r&&(t=u.$results.offset().top+u.$results.outerHeight(!1),i=u.$loadingMore.offset().top+u.$loadingMore.outerHeight(!1),t+50>=i&&u.loadMore())})},t.prototype.loadMore=function(){this.loading=!0;var t=n.extend({},{page:1},this.lastParams);t.page++;this.trigger("query:append",t)},t.prototype.showLoadingMore=function(n,t){return t.pagination&&t.pagination.more},t.prototype.createLoadingMore=function(){var t=n('<li class="select2-results__option select2-results__option--load-more"role="treeitem" aria-disabled="true"><\/li>'),i=this.options.get("translations").get("loadingMore");return t.html(i(this.lastParams)),t},t}),t.define("select2/dropdown/attachBody",["jquery","../utils"],function(n,t){function i(t,i,r){this.$dropdownParent=r.get("dropdownParent")||n(document.body);t.call(this,i,r)}return i.prototype.bind=function(n,t,i){var r=this,u=!1;n.call(this,t,i);t.on("open",function(){if(r._showDropdown(),r._attachPositioningHandler(t),!u){u=!0;t.on("results:all",function(){r._positionDropdown();r._resizeDropdown()});t.on("results:append",function(){r._positionDropdown();r._resizeDropdown()})}});t.on("close",function(){r._hideDropdown();r._detachPositioningHandler(t)});this.$dropdownContainer.on("mousedown",function(n){n.stopPropagation()})},i.prototype.destroy=function(n){n.call(this);this.$dropdownContainer.remove()},i.prototype.position=function(n,t,i){t.attr("class",i.attr("class"));t.removeClass("select2");t.addClass("select2-container--open");t.css({position:"absolute",top:-999999});this.$container=i},i.prototype.render=function(t){var i=n("<span><\/span>"),r=t.call(this);return i.append(r),this.$dropdownContainer=i,i},i.prototype._hideDropdown=function(){this.$dropdownContainer.detach()},i.prototype._attachPositioningHandler=function(i,r){var u=this,f="scroll.select2."+r.id,o="resize.select2."+r.id,s="orientationchange.select2."+r.id,e=this.$container.parents().filter(t.hasScroll);e.each(function(){n(this).data("select2-scroll-position",{x:n(this).scrollLeft(),y:n(this).scrollTop()})});e.on(f,function(){var t=n(this).data("select2-scroll-position");n(this).scrollTop(t.y)});n(window).on(f+" "+o+" "+s,function(){u._positionDropdown();u._resizeDropdown()})},i.prototype._detachPositioningHandler=function(i,r){var u="scroll.select2."+r.id,f="resize.select2."+r.id,e="orientationchange.select2."+r.id,o=this.$container.parents().filter(t.hasScroll);o.off(u);n(window).off(u+" "+f+" "+e)},i.prototype._positionDropdown=function(){var s=n(window),u=this.$dropdown.hasClass("select2-dropdown--above"),v=this.$dropdown.hasClass("select2-dropdown--below"),t=null,i=this.$container.offset(),r,f;i.bottom=i.top+this.$container.outerHeight(!1);r={height:this.$container.outerHeight(!1)};r.top=i.top;r.bottom=i.top+r.height;var h={height:this.$dropdown.outerHeight(!1)},c={top:s.scrollTop(),bottom:s.scrollTop()+s.height()},l=c.top<i.top-h.height,a=c.bottom>i.bottom+h.height,e={left:i.left,top:r.bottom},o=this.$dropdownParent;o.css("position")==="static"&&(o=o.offsetParent());f=o.offset();e.top-=f.top;e.left-=f.left;u||v||(t="below");a||!l||u?!l&&a&&u&&(t="below"):t="above";(t=="above"||u&&t!=="below")&&(e.top=r.top-f.top-h.height);t!=null&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+t),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+t));this.$dropdownContainer.css(e)},i.prototype._resizeDropdown=function(){var n={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(n.minWidth=n.width,n.position="relative",n.width="auto");this.$dropdown.css(n)},i.prototype._showDropdown=function(){this.$dropdownContainer.appendTo(this.$dropdownParent);this._positionDropdown();this._resizeDropdown()},i}),t.define("select2/dropdown/minimumResultsForSearch",[],function(){function n(t){for(var i,r=0,u=0;u<t.length;u++)i=t[u],i.children?r+=n(i.children):r++;return r}function t(n,t,i,r){this.minimumResultsForSearch=i.get("minimumResultsForSearch");this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=Infinity);n.call(this,t,i,r)}return t.prototype.showSearch=function(t,i){return n(i.data.results)<this.minimumResultsForSearch?!1:t.call(this,i)},t}),t.define("select2/dropdown/selectOnClose",[],function(){function n(){}return n.prototype.bind=function(n,t,i){var r=this;n.call(this,t,i);t.on("close",function(n){r._handleSelectOnClose(n)})},n.prototype._handleSelectOnClose=function(n,t){var r,u,i;t&&t.originalSelect2Event!=null&&(r=t.originalSelect2Event,r._type==="select"||r._type==="unselect")||(u=this.getHighlightedResults(),u.length<1)||(i=u.data("data"),i.element!=null&&i.element.selected||i.element==null&&i.selected)||this.trigger("select",{data:i})},n}),t.define("select2/dropdown/closeOnSelect",[],function(){function n(){}return n.prototype.bind=function(n,t,i){var r=this;n.call(this,t,i);t.on("select",function(n){r._selectTriggered(n)});t.on("unselect",function(n){r._selectTriggered(n)})},n.prototype._selectTriggered=function(n,t){var i=t.originalEvent;i&&i.ctrlKey||this.trigger("close",{originalEvent:i,originalSelect2Event:t})},n}),t.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(n){var t=n.input.length-n.maximum,i="Please delete "+t+" character";return t!=1&&(i+="s"),i},inputTooShort:function(n){var t=n.minimum-n.input.length;return"Please enter "+t+" or more characters"},loadingMore:function(){return"Loading more results"},maximumSelected:function(n){var t="You can only select "+n.maximum+" item";return n.maximum!=1&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searching"}}}),t.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot){function st(){this.reset()}return st.prototype.apply=function(l){var vt,yt,pt,wt,bt,kt,dt,ct,lt,st,ot,ht,gt,at;if(l=n.extend(!0,{},this.defaults,l),l.dataAdapter==null&&(l.dataAdapter=l.ajax!=null?y:l.data!=null?v:a,l.minimumInputLength>0&&(l.dataAdapter=h.Decorate(l.dataAdapter,b)),l.maximumInputLength>0&&(l.dataAdapter=h.Decorate(l.dataAdapter,k)),l.maximumSelectionLength>0&&(l.dataAdapter=h.Decorate(l.dataAdapter,d)),l.tags&&(l.dataAdapter=h.Decorate(l.dataAdapter,p)),(l.tokenSeparators!=null||l.tokenizer!=null)&&(l.dataAdapter=h.Decorate(l.dataAdapter,w)),l.query!=null&&(vt=t(l.amdBase+"compat/query"),l.dataAdapter=h.Decorate(l.dataAdapter,vt)),l.initSelection!=null&&(yt=t(l.amdBase+"compat/initSelection"),l.dataAdapter=h.Decorate(l.dataAdapter,yt))),l.resultsAdapter==null&&(l.resultsAdapter=i,l.ajax!=null&&(l.resultsAdapter=h.Decorate(l.resultsAdapter,it)),l.placeholder!=null&&(l.resultsAdapter=h.Decorate(l.resultsAdapter,tt)),l.selectOnClose&&(l.resultsAdapter=h.Decorate(l.resultsAdapter,ft))),l.dropdownAdapter==null&&(l.multiple?l.dropdownAdapter=g:(pt=h.Decorate(g,nt),l.dropdownAdapter=pt),l.minimumResultsForSearch!==0&&(l.dropdownAdapter=h.Decorate(l.dropdownAdapter,ut)),l.closeOnSelect&&(l.dropdownAdapter=h.Decorate(l.dropdownAdapter,et)),(l.dropdownCssClass!=null||l.dropdownCss!=null||l.adaptDropdownCssClass!=null)&&(wt=t(l.amdBase+"compat/dropdownCss"),l.dropdownAdapter=h.Decorate(l.dropdownAdapter,wt)),l.dropdownAdapter=h.Decorate(l.dropdownAdapter,rt)),l.selectionAdapter==null&&(l.selectionAdapter=l.multiple?u:r,l.placeholder!=null&&(l.selectionAdapter=h.Decorate(l.selectionAdapter,f)),l.allowClear&&(l.selectionAdapter=h.Decorate(l.selectionAdapter,e)),l.multiple&&(l.selectionAdapter=h.Decorate(l.selectionAdapter,o)),(l.containerCssClass!=null||l.containerCss!=null||l.adaptContainerCssClass!=null)&&(bt=t(l.amdBase+"compat/containerCss"),l.selectionAdapter=h.Decorate(l.selectionAdapter,bt)),l.selectionAdapter=h.Decorate(l.selectionAdapter,s)),typeof l.language=="string"&&(l.language.indexOf("-")>0?(kt=l.language.split("-"),dt=kt[0],l.language=[l.language,dt]):l.language=[l.language]),n.isArray(l.language)){for(ct=new c,l.language.push("en"),lt=l.language,st=0;st<lt.length;st++){ot=lt[st];ht={};try{ht=c.loadPath(ot)}catch(ni){try{ot=this.defaults.amdLanguageBase+ot;ht=c.loadPath(ot)}catch(ti){l.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+ot+'" could not be automatically loaded. A fallback will be used instead.');continue}}ct.extend(ht)}l.translations=ct}else gt=c.loadPath(this.defaults.amdLanguageBase+"en"),at=new c(l.language),at.extend(gt),l.translations=at;return l},st.prototype.reset=function(){function i(n){function t(n){return l[n]||n}return n.replace(/[^\u0000-\u007E]/g,t)}function t(r,u){var f,e,o,s,h,c;if(n.trim(r.term)==="")return u;if(u.children&&u.children.length>0){for(f=n.extend(!0,{},u),e=u.children.length-1;e>=0;e--)o=u.children[e],s=t(r,o),s==null&&f.children.splice(e,1);return f.children.length>0?f:t(r,f)}return(h=i(u.text).toUpperCase(),c=i(r.term).toUpperCase(),h.indexOf(c)>-1)?u:null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:h.escapeMarkup,language:ot,matcher:t,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(n){return n},templateResult:function(n){return n.text},templateSelection:function(n){return n.text},theme:"default",width:"resolve"}},st.prototype.set=function(t,i){var f=n.camelCase(t),r={},u;r[f]=i;u=h._convertData(r);n.extend(this.defaults,u)},new st}),t.define("select2/options",["require","jquery","./defaults","./utils"],function(n,t,i,r){function u(t,u){if(this.options=t,u!=null&&this.fromElement(u),this.options=i.apply(this.options),u&&u.is("input")){var f=n(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=r.Decorate(this.options.dataAdapter,f)}}return u.prototype.fromElement=function(n){var e=["select2"],f,u,i;this.options.multiple==null&&(this.options.multiple=n.prop("multiple"));this.options.disabled==null&&(this.options.disabled=n.prop("disabled"));this.options.language==null&&(n.prop("lang")?this.options.language=n.prop("lang").toLowerCase():n.closest("[lang]").prop("lang")&&(this.options.language=n.closest("[lang]").prop("lang")));this.options.dir==null&&(this.options.dir=n.prop("dir")?n.prop("dir"):n.closest("[dir]").prop("dir")?n.closest("[dir]").prop("dir"):"ltr");n.prop("disabled",this.options.disabled);n.prop("multiple",this.options.multiple);n.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),n.data("data",n.data("select2Tags")),n.data("tags",!0));n.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),n.attr("ajax--url",n.data("ajaxUrl")),n.data("ajax--url",n.data("ajaxUrl")));f={};f=t.fn.jquery&&t.fn.jquery.substr(0,2)=="1."&&n[0].dataset?t.extend(!0,{},n[0].dataset,n.data()):n.data();u=t.extend(!0,{},f);u=r._convertData(u);for(i in u)t.inArray(i,e)>-1||(t.isPlainObject(this.options[i])?t.extend(this.options[i],u[i]):this.options[i]=u[i]);return this},u.prototype.get=function(n){return this.options[n]},u.prototype.set=function(n,t){this.options[n]=t},u}),t.define("select2/core",["jquery","./options","./utils","./keys"],function(n,t,i,r){var u=function(n,i){var f,e,r,o,s,h,c;n.data("select2")!=null&&n.data("select2").destroy();this.$element=n;this.id=this._generateId(n);i=i||{};this.options=new t(i,n);u.__super__.constructor.call(this);f=n.attr("tabindex")||0;n.data("old-tabindex",f);n.attr("tabindex","-1");e=this.options.get("dataAdapter");this.dataAdapter=new e(n,this.options);r=this.render();this._placeContainer(r);o=this.options.get("selectionAdapter");this.selection=new o(n,this.options);this.$selection=this.selection.render();this.selection.position(this.$selection,r);s=this.options.get("dropdownAdapter");this.dropdown=new s(n,this.options);this.$dropdown=this.dropdown.render();this.dropdown.position(this.$dropdown,r);h=this.options.get("resultsAdapter");this.results=new h(n,this.options,this.dataAdapter);this.$results=this.results.render();this.results.position(this.$results,this.$dropdown);c=this;this._bindAdapters();this._registerDomEvents();this._registerDataEvents();this._registerSelectionEvents();this._registerDropdownEvents();this._registerResultsEvents();this._registerEvents();this.dataAdapter.current(function(n){c.trigger("selection:update",{data:n})});n.addClass("select2-hidden-accessible");n.attr("aria-hidden","true");this._syncAttributes();n.data("select2",this)};return i.Extend(u,i.Observable),u.prototype._generateId=function(n){var t="";return t=n.attr("id")!=null?n.attr("id"):n.attr("name")!=null?n.attr("name")+"-"+i.generateChars(2):i.generateChars(4),t=t.replace(/(:|\.|\[|\]|,)/g,""),"select2-"+t},u.prototype._placeContainer=function(n){n.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));t!=null&&n.css("width",t)},u.prototype._resolveWidth=function(n,t){var u,f,e,o,i,s,h,r;if(t=="resolve")return(u=this._resolveWidth(n,"style"),u!=null)?u:this._resolveWidth(n,"element");if(t=="element")return(f=n.outerWidth(!1),f<=0)?"auto":f+"px";if(t=="style"){if(e=n.attr("style"),typeof e!="string")return null;for(o=e.split(";"),i=0,s=o.length;i<s;i=i+1)if(h=o[i].replace(/\s/g,""),r=h.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),r!==null&&r.length>=1)return r[1];return null}return t},u.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container);this.selection.bind(this,this.$container);this.dropdown.bind(this,this.$container);this.results.bind(this,this.$container)},u.prototype._registerDomEvents=function(){var t=this,r;this.$element.on("change.select2",function(){t.dataAdapter.current(function(n){t.trigger("selection:update",{data:n})})});this.$element.on("focus.select2",function(n){t.trigger("focus",n)});this._syncA=i.bind(this._syncAttributes,this);this._syncS=i.bind(this._syncSubtree,this);this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);r=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;r!=null?(this._observer=new r(function(i){n.each(i,t._syncA);n.each(i,t._syncS)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",t._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",t._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",t._syncS,!1))},u.prototype._registerDataEvents=function(){var n=this;this.dataAdapter.on("*",function(t,i){n.trigger(t,i)})},u.prototype._registerSelectionEvents=function(){var t=this,i=["toggle","focus"];this.selection.on("toggle",function(){t.toggleDropdown()});this.selection.on("focus",function(n){t.focus(n)});this.selection.on("*",function(r,u){n.inArray(r,i)===-1&&t.trigger(r,u)})},u.prototype._registerDropdownEvents=function(){var n=this;this.dropdown.on("*",function(t,i){n.trigger(t,i)})},u.prototype._registerResultsEvents=function(){var n=this;this.results.on("*",function(t,i){n.trigger(t,i)})},u.prototype._registerEvents=function(){var n=this;this.on("open",function(){n.$container.addClass("select2-container--open")});this.on("close",function(){n.$container.removeClass("select2-container--open")});this.on("enable",function(){n.$container.removeClass("select2-container--disabled")});this.on("disable",function(){n.$container.addClass("select2-container--disabled")});this.on("blur",function(){n.$container.removeClass("select2-container--focus")});this.on("query",function(t){n.isOpen()||n.trigger("open",{});this.dataAdapter.query(t,function(i){n.trigger("results:all",{data:i,query:t})})});this.on("query:append",function(t){this.dataAdapter.query(t,function(i){n.trigger("results:append",{data:i,query:t})})});this.on("keypress",function(t){var i=t.which;n.isOpen()?i===r.ESC||i===r.TAB||i===r.UP&&t.altKey?(n.close(),t.preventDefault()):i===r.ENTER?(n.trigger("results:select",{}),t.preventDefault()):i===r.SPACE&&t.ctrlKey?(n.trigger("results:toggle",{}),t.preventDefault()):i===r.UP?(n.trigger("results:previous",{}),t.preventDefault()):i===r.DOWN&&(n.trigger("results:next",{}),t.preventDefault()):(i===r.ENTER||i===r.SPACE||i===r.DOWN&&t.altKey)&&(n.open(),t.preventDefault())})},u.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled"));this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},u.prototype._syncSubtree=function(n,t){var i=!1,f=this,r,u;if(!n||!n.target||n.target.nodeName==="OPTION"||n.target.nodeName==="OPTGROUP"){if(t)if(t.addedNodes&&t.addedNodes.length>0)for(r=0;r<t.addedNodes.length;r++)u=t.addedNodes[r],u.selected&&(i=!0);else t.removedNodes&&t.removedNodes.length>0&&(i=!0);else i=!0;i&&this.dataAdapter.current(function(n){f.trigger("selection:update",{data:n})})}},u.prototype.trigger=function(n,t){var r=u.__super__.trigger,f={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"},e,i;if(t===undefined&&(t={}),n in f&&(e=f[n],i={prevented:!1,name:n,args:t},r.call(this,e,i),i.prevented)){t.prevented=!0;return}r.call(this,n,t)},u.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},u.prototype.open=function(){this.isOpen()||this.trigger("query",{})},u.prototype.close=function(){this.isOpen()&&this.trigger("close",{})},u.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},u.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},u.prototype.focus=function(){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},u.prototype.enable=function(n){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.');(n==null||n.length===0)&&(n=[!0]);var t=!n[0];this.$element.prop("disabled",t)},u.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var n=[];return this.dataAdapter.current(function(t){n=t}),n},u.prototype.val=function(t){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),t==null||t.length===0)return this.$element.val();var i=t[0];n.isArray(i)&&(i=n.map(i,function(n){return n.toString()}));this.$element.val(i).trigger("change")},u.prototype.destroy=function(){this.$container.remove();this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA);this._observer!=null?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1));this._syncA=null;this._syncS=null;this.$element.off(".select2");this.$element.attr("tabindex",this.$element.data("old-tabindex"));this.$element.removeClass("select2-hidden-accessible");this.$element.attr("aria-hidden","false");this.$element.removeData("select2");this.dataAdapter.destroy();this.selection.destroy();this.dropdown.destroy();this.results.destroy();this.dataAdapter=null;this.selection=null;this.dropdown=null;this.results=null},u.prototype.render=function(){var t=n('<span class="select2 select2-container"><span class="selection"><\/span><span class="dropdown-wrapper" aria-hidden="true"><\/span><\/span>');return t.attr("dir",this.options.get("dir")),this.$container=t,this.$container.addClass("select2-container--"+this.options.get("theme")),t.data("element",this.$element),t},u}),t.define("select2/compat/utils",["jquery"],function(n){function t(t,i,r){var u,f=[],e;u=n.trim(t.attr("class"));u&&(u=""+u,n(u.split(/\s+/)).each(function(){this.indexOf("select2-")===0&&f.push(this)}));u=n.trim(i.attr("class"));u&&(u=""+u,n(u.split(/\s+/)).each(function(){this.indexOf("select2-")!==0&&(e=r(this),e!=null&&f.push(e))}));t.attr("class",f.join(" "))}return{syncCssClasses:t}}),t.define("select2/compat/containerCss",["jquery","./utils"],function(n,t){function r(){return null}function i(){}return i.prototype.render=function(i){var o=i.call(this),u=this.options.get("containerCssClass")||"",f,s,e;return n.isFunction(u)&&(u=u(this.$element)),f=this.options.get("adaptContainerCssClass"),f=f||r,u.indexOf(":all:")!==-1&&(u=u.replace(":all:",""),s=f,f=function(n){var t=s(n);return t!=null?t+" "+n:n}),e=this.options.get("containerCss")||{},n.isFunction(e)&&(e=e(this.$element)),t.syncCssClasses(o,this.$element,f),o.css(e),o.addClass(u),o},i}),t.define("select2/compat/dropdownCss",["jquery","./utils"],function(n,t){function r(){return null}function i(){}return i.prototype.render=function(i){var o=i.call(this),u=this.options.get("dropdownCssClass")||"",f,s,e;return n.isFunction(u)&&(u=u(this.$element)),f=this.options.get("adaptDropdownCssClass"),f=f||r,u.indexOf(":all:")!==-1&&(u=u.replace(":all:",""),s=f,f=function(n){var t=s(n);return t!=null?t+" "+n:n}),e=this.options.get("dropdownCss")||{},n.isFunction(e)&&(e=e(this.$element)),t.syncCssClasses(o,this.$element,f),o.css(e),o.addClass(u),o},i}),t.define("select2/compat/initSelection",["jquery"],function(n){function t(n,t,i){i.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `initSelection` option has been deprecated in favor of a custom data adapter that overrides the `current` method. This method is now called multiple times instead of a single time when the instance is initialized. Support will be removed for the `initSelection` option in future versions of Select2");this.initSelection=i.get("initSelection");this._isInitialized=!1;n.call(this,t,i)}return t.prototype.current=function(t,i){var r=this;if(this._isInitialized){t.call(this,i);return}this.initSelection.call(null,this.$element,function(t){r._isInitialized=!0;n.isArray(t)||(t=[t]);i(t)})},t}),t.define("select2/compat/inputData",["jquery"],function(n){function t(n,t,i){this._currentData=[];this._valueSeparator=i.get("valueSeparator")||",";t.prop("type")==="hidden"&&i.get("debug")&&console&&console.warn&&console.warn("Select2: Using a hidden input with Select2 is no longer supported and may stop working in the future. It is recommended to use a `<select>` element instead.");n.call(this,t,i)}return t.prototype.current=function(t,i){function f(t,i){var r=[];return t.selected||n.inArray(t.id,i)!==-1?(t.selected=!0,r.push(t)):t.selected=!1,t.children&&r.push.apply(r,f(t.children,i)),r}for(var e,r=[],u=0;u<this._currentData.length;u++)e=this._currentData[u],r.push.apply(r,f(e,this.$element.val().split(this._valueSeparator)));i(r)},t.prototype.select=function(t,i){if(this.options.get("multiple")){var r=this.$element.val();r+=this._valueSeparator+i.id;this.$element.val(r);this.$element.trigger("change")}else this.current(function(t){n.map(t,function(n){n.selected=!1})}),this.$element.val(i.id),this.$element.trigger("change")},t.prototype.unselect=function(n,t){var i=this;t.selected=!1;this.current(function(n){for(var r,f=[],u=0;u<n.length;u++)(r=n[u],t.id!=r.id)&&f.push(r.id);i.$element.val(f.join(i._valueSeparator));i.$element.trigger("change")})},t.prototype.query=function(n,t,i){for(var f,r,e=[],u=0;u<this._currentData.length;u++)f=this._currentData[u],r=this.matches(t,f),r!==null&&e.push(r);i({results:e})},t.prototype.addOptions=function(t,i){var r=n.map(i,function(t){return n.data(t[0],"data")});this._currentData.push.apply(this._currentData,r)},t}),t.define("select2/compat/matcher",["jquery"],function(n){function t(t){function i(i,r){var u=n.extend(!0,{},r),f,e,o;if(i.term==null||n.trim(i.term)==="")return u;if(r.children){for(f=r.children.length-1;f>=0;f--)e=r.children[f],o=t(i.term,e.text,e),o||u.children.splice(f,1);if(u.children.length>0)return u}return t(i.term,r.text,r)?u:null}return i}return t}),t.define("select2/compat/query",[],function(){function n(n,t,i){i.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `query` option has been deprecated in favor of a custom data adapter that overrides the `query` method. Support will be removed for the `query` option in future versions of Select2.");n.call(this,t,i)}return n.prototype.query=function(n,t,i){t.callback=i;var r=this.options.get("query");r.call(null,t)},n}),t.define("select2/dropdown/attachContainer",[],function(){function n(n,t,i){n.call(this,t,i)}return n.prototype.position=function(n,t,i){var r=i.find(".dropdown-wrapper");r.append(t);t.addClass("select2-dropdown--below");i.addClass("select2-container--below")},n}),t.define("select2/dropdown/stopPropagation",[],function(){function n(){}return n.prototype.bind=function(n,t,i){n.call(this,t,i);this.$dropdown.on("blur change click dblclick focus focusin focusout input keydown keyup keypress mousedown mouseenter mouseleave mousemove mouseover mouseup search touchend touchstart",function(n){n.stopPropagation()})},n}),t.define("select2/selection/stopPropagation",[],function(){function n(){}return n.prototype.bind=function(n,t,i){n.call(this,t,i);this.$selection.on("blur change click dblclick focus focusin focusout input keydown keyup keypress mousedown mouseenter mouseleave mousemove mouseover mouseup search touchend touchstart",function(n){n.stopPropagation()})},n}),function(i){typeof t.define=="function"&&t.define.amd?t.define("jquery-mousewheel",["jquery"],i):typeof exports=="object"?module.exports=i:i(n)}(function(n){function u(r){var u=r||window.event,w=c.call(arguments,1),l=0,s=0,e=0,a=0,b=0,k=0,v,y,p;if(r=n.event.fix(u),r.type="mousewheel","detail"in u&&(e=u.detail*-1),"wheelDelta"in u&&(e=u.wheelDelta),"wheelDeltaY"in u&&(e=u.wheelDeltaY),"wheelDeltaX"in u&&(s=u.wheelDeltaX*-1),"axis"in u&&u.axis===u.HORIZONTAL_AXIS&&(s=e*-1,e=0),l=e===0?s:e,"deltaY"in u&&(e=u.deltaY*-1,l=e),"deltaX"in u&&(s=u.deltaX,e===0&&(l=s*-1)),e!==0||s!==0)return u.deltaMode===1?(v=n.data(this,"mousewheel-line-height"),l*=v,e*=v,s*=v):u.deltaMode===2&&(y=n.data(this,"mousewheel-page-height"),l*=y,e*=y,s*=y),a=Math.max(Math.abs(e),Math.abs(s)),(!t||a<t)&&(t=a,o(u,a)&&(t/=40)),o(u,a)&&(l/=40,s/=40,e/=40),l=Math[l>=1?"floor":"ceil"](l/t),s=Math[s>=1?"floor":"ceil"](s/t),e=Math[e>=1?"floor":"ceil"](e/t),i.settings.normalizeOffset&&this.getBoundingClientRect&&(p=this.getBoundingClientRect(),b=r.clientX-p.left,k=r.clientY-p.top),r.deltaX=s,r.deltaY=e,r.deltaFactor=t,r.offsetX=b,r.offsetY=k,r.deltaMode=0,w.unshift(r,l,s,e),f&&clearTimeout(f),f=setTimeout(h,200),(n.event.dispatch||n.event.handle).apply(this,w)}function h(){t=null}function o(n,t){return i.settings.adjustOldDeltas&&n.type==="mousewheel"&&t%120==0}var s=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],r="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],c=Array.prototype.slice,f,t,e,i;if(n.event.fixHooks)for(e=s.length;e;)n.event.fixHooks[s[--e]]=n.event.mouseHooks;i=n.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var t=r.length;t;)this.addEventListener(r[--t],u,!1);else this.onmousewheel=u;n.data(this,"mousewheel-line-height",i.getLineHeight(this));n.data(this,"mousewheel-page-height",i.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var t=r.length;t;)this.removeEventListener(r[--t],u,!1);else this.onmousewheel=null;n.removeData(this,"mousewheel-line-height");n.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var r=n(t),i=r["offsetParent"in n.fn?"offsetParent":"parent"]();return i.length||(i=n("body")),parseInt(i.css("fontSize"),10)||parseInt(r.css("fontSize"),10)||16},getPageHeight:function(t){return n(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};n.fn.extend({mousewheel:function(n){return n?this.bind("mousewheel",n):this.trigger("mousewheel")},unmousewheel:function(n){return this.unbind("mousewheel",n)}})}),t.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults"],function(n,t,i,r){if(n.fn.select2==null){var u=["open","close","destroy"];n.fn.select2=function(t){if(t=t||{},typeof t=="object")return this.each(function(){var r=n.extend(!0,{},t),u=new i(n(this),r)}),this;if(typeof t=="string"){var r,f=Array.prototype.slice.call(arguments,1);return(this.each(function(){var i=n(this).data("select2");i==null&&window.console&&console.error&&console.error("The select2('"+t+"') method was called on an element that is not using Select2.");r=i[t].apply(i,f)}),n.inArray(t,u)>-1)?this:r}throw new Error("Invalid arguments for Select2: "+t);}}return n.fn.select2.defaults==null&&(n.fn.select2.defaults=r),i}),{define:t.define,require:t.require}}(),i=t.require("jquery.select2");return n.fn.select2.amd=t,i});$jscomp={scope:{},findInternal:function(n,t,i){var f,r,u;for(n instanceof String&&(n=String(n)),f=n.length,r=0;r<f;r++)if(u=n[r],t.call(i,u,r,n))return{i:r,v:u};return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(n,t,i){if(i.get||i.set)throw new TypeError("ES3 does not support getters and setters.");n!=Array.prototype&&n!=Object.prototype&&(n[t]=i.value)};$jscomp.getGlobal=function(n){return"undefined"!=typeof window&&window===n?n:"undefined"!=typeof global&&null!=global?global:n};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(n,t,i,r){if(t){for(i=$jscomp.global,n=n.split("."),r=0;r<n.length-1;r++){var u=n[r];u in i||(i[u]={});i=i[u]}n=n[n.length-1];r=i[n];t=t(r);t!=r&&null!=t&&$jscomp.defineProperty(i,n,{configurable:!0,writable:!0,value:t})}};$jscomp.polyfill("Array.prototype.find",function(n){return n?n:function(n,t){return $jscomp.findInternal(this,n,t).v}},"es6-impl","es3"),function(n,t,i){"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof exports?module.exports=n(require("jquery")):n(t||i)}(function(n){var r=function(t,i,r){var u={invalid:[],getCaret:function(){try{var n,i=0,e=t.get(0),f=document.selection,r=e.selectionStart;return f&&-1===navigator.appVersion.indexOf("MSIE 10")?(n=f.createRange(),n.moveStart("character",-u.val().length),i=n.text.length):(r||"0"===r)&&(i=r),i}catch(o){}},setCaret:function(n){try{if(t.is(":focus")){var i,r=t.get(0);n+=1;r.setSelectionRange?r.setSelectionRange(n,n):(i=r.createTextRange(),i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",n),i.select())}}catch(u){}},events:function(){t.on("keydown.mask",function(n){t.data("mask-keycode",n.keyCode||n.which)}).on(n.jMaskGlobals.useInput?"input.mask":"keyup.mask",u.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){t.keydown().keyup()},100)}).on("change.mask",function(){t.data("changed",!0)}).on("blur.mask",function(){e===u.val()||t.data("changed")||t.trigger("change");t.data("changed",!1)}).on("blur.mask",function(){e=u.val()}).on("focus.mask",function(t){!0===r.selectOnFocus&&n(t.target).select()}).on("focusout.mask",function(){r.clearIfNotMatch&&!o.test(u.val())&&u.val("")})},getRegexMask:function(){for(var n=[],t,e,o,r,u=0;u<i.length;u++)(t=f.translation[i.charAt(u)])?(e=t.pattern.toString().replace(/.{1}$|^.{1}/g,""),o=t.optional,(t=t.recursive)?(n.push(i.charAt(u)),r={digit:i.charAt(u),pattern:e}):n.push(o||t?e+"?":e)):n.push(i.charAt(u).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));return n=n.join(""),r&&(n=n.replace(new RegExp("("+r.digit+"(.*"+r.digit+")?)"),"($1)?").replace(new RegExp(r.digit,"g"),r.pattern)),new RegExp(n)},destroyEvents:function(){t.off("input keydown keyup paste drop blur focusout ".split(" ").join(".mask "))},val:function(n){var i=t.is("input")?"val":"text";return 0<arguments.length?(t[i]()!==n&&t[i](n),i=t):i=t[i](),i},getMCharsBeforeCount:function(n,t){for(var u=0,r=0,e=i.length;r<e&&r<n;r++)f.translation[i.charAt(r)]||(n=t?n+1:n,u++);return u},caretPos:function(n,t,r,e){return f.translation[i.charAt(Math.min(n-1,i.length-1))]?Math.min(n+r-t-e,r):u.caretPos(n+1,t,r,e)},behaviour:function(i){var e;if(i=i||window.event,u.invalid=[],e=t.data("mask-keycode"),-1===n.inArray(e,f.byPassKeys)){var r=u.getCaret(),o=u.val(),s=o.length,h=u.getMasked(),c=h.length,l=u.getMCharsBeforeCount(c-1)-u.getMCharsBeforeCount(s-1),o=r<s&&h!==o;return u.val(h),o&&(8!==e&&46!==e?r=u.caretPos(r,s,c,l):--r,u.setCaret(r)),u.callbacks(i)}},getMasked:function(n,t){var c=[],l=void 0===t?u.val():t+"",e=0,y=i.length,s=0,k=l.length,o=1,p="push",w=-1,a,d,g;for(r.reverse?(p="unshift",o=-1,a=0,e=y-1,s=k-1,d=function(){return-1<e&&-1<s}):(a=y-1,d=function(){return e<y&&s<k});d();){var b=i.charAt(e),v=l.charAt(s),h=f.translation[b];h?(v.match(h.pattern)?(c[p](v),h.recursive&&(-1===w?w=e:e===a&&(e=w-o),a===w&&(e-=o)),e+=o):v===g?g=void 0:h.optional?(e+=o,s-=o):h.fallback?(c[p](h.fallback),e+=o,s-=o):u.invalid.push({p:s,v:v,e:h.pattern}),s+=o):(n||c[p](b),v===b?s+=o:g=b,e+=o)}return l=i.charAt(a),y!==k+1||f.translation[l]||c.push(l),c.join("")},callbacks:function(n){var f=u.val(),h=f!==e,s=[f,n,t,r],o=function(n,t,i){"function"==typeof r[n]&&t&&r[n].apply(this,i)};o("onChange",!0===h,s);o("onKeyPress",!0===h,s);o("onComplete",f.length===i.length,s);o("onInvalid",0<u.invalid.length,[f,n,t,u.invalid,r])}},f,e,o;t=n(t);f=this;e=u.val();i="function"==typeof i?i(u.val(),void 0,t,r):i;f.mask=i;f.options=r;f.remove=function(){var n=u.getCaret();return u.destroyEvents(),u.val(f.getCleanVal()),u.setCaret(n-u.getMCharsBeforeCount(n)),t};f.getCleanVal=function(){return u.getMasked(!0)};f.getMaskedVal=function(n){return u.getMasked(!1,n)};f.init=function(e){var s,h;if(e=e||!1,r=r||{},f.clearIfNotMatch=n.jMaskGlobals.clearIfNotMatch,f.byPassKeys=n.jMaskGlobals.byPassKeys,f.translation=n.extend({},n.jMaskGlobals.translation,r.translation),f=n.extend(!0,{},f,r),o=u.getRegexMask(),e)u.events(),u.val(u.getMasked());else{for(r.placeholder&&t.attr("placeholder",r.placeholder),t.data("mask")&&t.attr("autocomplete","off"),e=0,s=!0;e<i.length;e++)if(h=f.translation[i.charAt(e)],h&&h.recursive){s=!1;break}s&&t.attr("maxlength",i.length);u.destroyEvents();u.events();e=u.getCaret();u.val(u.getMasked());u.setCaret(e+u.getMCharsBeforeCount(e,!0))}};f.init(!t.is("input"))},u,i,t;n.maskWatchers={};u=function(){var t=n(this),u={},f=t.attr("data-mask");return t.attr("data-mask-reverse")&&(u.reverse=!0),t.attr("data-mask-clearifnotmatch")&&(u.clearIfNotMatch=!0),"true"===t.attr("data-mask-selectonfocus")&&(u.selectOnFocus=!0),i(t,f,u)?t.data("mask",new r(this,f,u)):void 0};i=function(t,i,r){r=r||{};var u=n(t).data("mask"),f=JSON.stringify;t=n(t).val()||n(t).text();try{return"function"==typeof i&&(i=i(t)),"object"!=typeof u||f(u.options)!==f(r)||u.mask!==i}catch(e){}};n.fn.mask=function(t,u){u=u||{};var f=this.selector,e=n.jMaskGlobals,s=e.watchInterval,e=u.watchInputs||e.watchInputs,o=function(){if(i(this,t,u))return n(this).data("mask",new r(this,t,u))};return n(this).each(o),f&&""!==f&&e&&(clearInterval(n.maskWatchers[f]),n.maskWatchers[f]=setInterval(function(){n(document).find(f).each(o)},s)),this};n.fn.masked=function(n){return this.data("mask").getMaskedVal(n)};n.fn.unmask=function(){return clearInterval(n.maskWatchers[this.selector]),delete n.maskWatchers[this.selector],this.each(function(){var t=n(this).data("mask");t&&t.remove().removeData("mask")})};n.fn.cleanVal=function(){return this.data("mask").getCleanVal()};n.applyDataMask=function(t){t=t||n.jMaskGlobals.maskElements;(t instanceof n?t:n(t)).filter(n.jMaskGlobals.dataMaskAttr).each(u)};t={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,useInput:function(n){var i=document.createElement("div"),t;return n="on"+n,t=n in i,t||(i.setAttribute(n,"return;"),t="function"==typeof i[n]),t}("input"),watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}};n.jMaskGlobals=n.jMaskGlobals||{};t=n.jMaskGlobals=n.extend(!0,{},t,n.jMaskGlobals);t.dataMask&&n.applyDataMask();setInterval(function(){n.jMaskGlobals.watchDataMask&&n.applyDataMask()},t.watchInterval)},window.jQuery,window.Zepto),function(){"use strict";function n(n){function o(o,s){var rt,ut,p=o==window,c=s&&s.message!==undefined?s.message:undefined,g,k,d,tt,nt,w,b,it,ft,et,ot;if(s=n.extend({},n.blockUI.defaults,s||{}),!s.ignoreIfBlocked||!n(o).data("blockUI.isBlocked")){if(s.overlayCSS=n.extend({},n.blockUI.defaults.overlayCSS,s.overlayCSS||{}),rt=n.extend({},n.blockUI.defaults.css,s.css||{}),s.onOverlayClick&&(s.overlayCSS.cursor="pointer"),ut=n.extend({},n.blockUI.defaults.themedCSS,s.themedCSS||{}),c=c===undefined?s.message:c,p&&t&&u(window,{fadeOut:0}),c&&typeof c!="string"&&(c.parentNode||c.jquery)&&(g=c.jquery?c[0]:c,k={},n(o).data("blockUI.history",k),k.el=g,k.parent=g.parentNode,k.display=g.style.display,k.position=g.style.position,k.parent&&k.parent.removeChild(g)),n(o).data("blockUI.onUnblock",s.onUnblock),d=s.baseZ,tt=e||s.forceIframe?n('<iframe class="blockUI" style="z-index:'+d+++';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+s.iframeSrc+'"><\/iframe>'):n('<div class="blockUI" style="display:none"><\/div>'),nt=s.theme?n('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+d+++';display:none"><\/div>'):n('<div class="blockUI blockOverlay" style="z-index:'+d+++';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"><\/div>'),s.theme&&p?(b='<div class="blockUI '+s.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(d+10)+';display:none;position:fixed">',s.title&&(b+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(s.title||"&nbsp;")+"<\/div>"),b+='<div class="ui-widget-content ui-dialog-content"><\/div>',b+="<\/div>"):s.theme?(b='<div class="blockUI '+s.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(d+10)+';display:none;position:absolute">',s.title&&(b+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(s.title||"&nbsp;")+"<\/div>"),b+='<div class="ui-widget-content ui-dialog-content"><\/div>',b+="<\/div>"):b=p?'<div class="blockUI '+s.blockMsgClass+' blockPage" style="z-index:'+(d+10)+';display:none;position:fixed"><\/div>':'<div class="blockUI '+s.blockMsgClass+' blockElement" style="z-index:'+(d+10)+';display:none;position:absolute"><\/div>',w=n(b),c&&(s.theme?(w.css(ut),w.addClass("ui-widget-content")):w.css(rt)),s.theme||nt.css(s.overlayCSS),nt.css("position",p?"fixed":"absolute"),(e||s.forceIframe)&&tt.css("opacity",0),it=[tt,nt,w],ft=p?n("body"):n(o),n.each(it,function(){this.appendTo(ft)}),s.theme&&s.draggable&&n.fn.draggable&&w.draggable({handle:".ui-dialog-titlebar",cancel:"li"}),et=y&&(!n.support.boxModel||n("object,embed",p?null:o).length>0),a||et){if(p&&s.allowBodyStretch&&n.support.boxModel&&n("html,body").css("height","100%"),(a||!n.support.boxModel)&&!p)var st=r(o,"borderTopWidth"),ht=r(o,"borderLeftWidth"),ct=st?"(0 - "+st+")":0,lt=ht?"(0 - "+ht+")":0;n.each(it,function(n,t){var i=t[0].style,r,u;i.position="absolute";n<2?(p?i.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+s.quirksmodeOffsetHack+') + "px"'):i.setExpression("height",'this.parentNode.offsetHeight + "px"'),p?i.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):i.setExpression("width",'this.parentNode.offsetWidth + "px"'),lt&&i.setExpression("left",lt),ct&&i.setExpression("top",ct)):s.centerY?(p&&i.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),i.marginTop=0):!s.centerY&&p&&(r=s.css&&s.css.top?parseInt(s.css.top,10):0,u="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+r+') + "px"',i.setExpression("top",u))})}if(c&&(s.theme?w.find(".ui-widget-content").append(c):w.append(c),(c.jquery||c.nodeType)&&n(c).show()),(e||s.forceIframe)&&s.showOverlay&&tt.show(),s.fadeIn){var at=s.onBlock?s.onBlock:f,vt=s.showOverlay&&!c?at:f,yt=c?at:f;s.showOverlay&&nt._fadeIn(s.fadeIn,vt);c&&w._fadeIn(s.fadeIn,yt)}else s.showOverlay&&nt.show(),c&&w.show(),s.onBlock&&s.onBlock.bind(w)();h(1,o,s);p?(t=w[0],i=n(s.focusableElements,t),s.focusInput&&setTimeout(l,20)):v(w[0],s.centerX,s.centerY);s.timeout&&(ot=setTimeout(function(){p?n.unblockUI(s):n(o).unblock(s)},s.timeout),n(o).data("blockUI.timeout",ot))}}function u(r,u){var o,c=r==window,e=n(r),l=e.data("blockUI.history"),a=e.data("blockUI.timeout"),f;a&&(clearTimeout(a),e.removeData("blockUI.timeout"));u=n.extend({},n.blockUI.defaults,u||{});h(0,r,u);u.onUnblock===null&&(u.onUnblock=e.data("blockUI.onUnblock"),e.removeData("blockUI.onUnblock"));f=c?n("body").children().filter(".blockUI").add("body > .blockUI"):e.find(">.blockUI");u.cursorReset&&(f.length>1&&(f[1].style.cursor=u.cursorReset),f.length>2&&(f[2].style.cursor=u.cursorReset));c&&(t=i=null);u.fadeOut?(o=f.length,f.stop().fadeOut(u.fadeOut,function(){--o==0&&s(f,l,u,r)})):s(f,l,u,r)}function s(t,i,r,u){var f=n(u);if(!f.data("blockUI.isBlocked")){if(t.each(function(){this.parentNode&&this.parentNode.removeChild(this)}),i&&i.el&&(i.el.style.display=i.display,i.el.style.position=i.position,i.el.style.cursor="default",i.parent&&i.parent.appendChild(i.el),f.removeData("blockUI.history")),f.data("blockUI.static")&&f.css("position","static"),typeof r.onUnblock=="function")r.onUnblock(u,r);var e=n(document.body),o=e.width(),s=e[0].style.width;e.width(o-1).width(o);e[0].style.width=s}}function h(i,r,u){var f=r==window,o=n(r),e;(i||(!f||t)&&(f||o.data("blockUI.isBlocked")))&&(o.data("blockUI.isBlocked",i),f&&u.bindEvents&&(!i||u.showOverlay))&&(e="mousedown mouseup keydown keypress keyup touchstart touchend touchmove",i?n(document).bind(e,u,c):n(document).unbind(e,c))}function c(r){var u,f;if(r.type==="keydown"&&r.keyCode&&r.keyCode==9&&t&&r.data.constrainTabKey){var e=i,s=!r.shiftKey&&r.target===e[e.length-1],o=r.shiftKey&&r.target===e[0];if(s||o)return setTimeout(function(){l(o)},10),!1}if(u=r.data,f=n(r.target),f.hasClass("blockOverlay")&&u.onOverlayClick)u.onOverlayClick(r);return f.parents("div."+u.blockMsgClass).length>0?!0:f.parents().children().filter("div.blockUI").length===0}function l(n){if(i){var t=i[n===!0?i.length-1:0];t&&t.focus()}}function v(n,t,i){var u=n.parentNode,f=n.style,e=(u.offsetWidth-n.offsetWidth)/2-r(u,"borderLeftWidth"),o=(u.offsetHeight-n.offsetHeight)/2-r(u,"borderTopWidth");t&&(f.left=e>0?e+"px":"0");i&&(f.top=o>0?o+"px":"0")}function r(t,i){return parseInt(n.css(t,i),10)||0}var t,i;n.fn._fadeIn=n.fn.fadeIn;var f=n.noop||function(){},e=/MSIE/.test(navigator.userAgent),a=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent),p=document.documentMode||0,y=n.isFunction(document.createElement("div").style.setExpression);n.blockUI=function(n){o(window,n)};n.unblockUI=function(n){u(window,n)};n.growlUI=function(t,i,r,u){var f=n('<div class="growlUI"><\/div>'),e,o;t&&f.append("<h1>"+t+"<\/h1>");i&&f.append("<h2>"+i+"<\/h2>");r===undefined&&(r=3e3);e=function(t){t=t||{};n.blockUI({message:f,fadeIn:typeof t.fadeIn!="undefined"?t.fadeIn:700,fadeOut:typeof t.fadeOut!="undefined"?t.fadeOut:1e3,timeout:typeof t.timeout!="undefined"?t.timeout:r,centerY:!1,showOverlay:!1,onUnblock:u,css:n.blockUI.defaults.growlCSS})};e();o=f.css("opacity");f.mouseover(function(){e({fadeIn:0,timeout:3e4});var t=n(".blockMsg");t.stop();t.fadeTo(300,1)}).mouseout(function(){n(".blockMsg").fadeOut(1e3)})};n.fn.block=function(t){if(this[0]===window)return n.blockUI(t),this;var i=n.extend({},n.blockUI.defaults,t||{});return this.each(function(){var t=n(this);i.ignoreIfBlocked&&t.data("blockUI.isBlocked")||t.unblock({fadeOut:0})}),this.each(function(){n.css(this,"position")=="static"&&(this.style.position="relative",n(this).data("blockUI.static",!0));this.style.zoom=1;o(this,t)})};n.fn.unblock=function(t){return this[0]===window?(n.unblockUI(t),this):this.each(function(){u(this,t)})};n.blockUI.version=2.7;n.blockUI.defaults={message:"<h1>Please wait...<\/h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"wait"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:1e3,centerX:!0,centerY:!0,allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,focusableElements:":input:enabled:visible",onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:!1};t=null;i=[]}typeof define=="function"&&define.amd&&define.amd.jQuery?define(["jquery"],n):n(jQuery)}(),function(n){typeof module!="undefined"&&module.exports?module.exports=n:n(jQuery,window,document)}(function(n){(function(t){var i=typeof define=="function"&&define.amd,r=typeof module!="undefined"&&module.exports,u="https:"==document.location.protocol?"https:":"http:";i||(r?require("jquery-mousewheel")(n):n.event.special.mousewheel||n("head").append(decodeURI("%3Cscript src="+u+"//cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.13/jquery.mousewheel.min.js%3E%3C/script%3E")));t()})(function(){var h="mCustomScrollbar",t="mCS",it=".mCustomScrollbar",et={setTop:0,setLeft:0,axis:"y",scrollbarPosition:"inside",scrollInertia:950,autoDraggerLength:!0,alwaysShowScrollbar:0,snapOffset:0,mouseWheel:{enable:!0,scrollAmount:"auto",axis:"y",deltaFactor:"auto",disableOver:["select","option","keygen","datalist","textarea"]},scrollButtons:{scrollType:"stepless",scrollAmount:"auto"},keyboard:{enable:!0,scrollType:"stepless",scrollAmount:"auto"},contentTouchScroll:25,documentTouchScroll:!0,advanced:{autoScrollOnFocus:"input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",updateOnContentResize:!0,updateOnImageLoad:"auto",autoUpdateTimeout:60},theme:"light",callbacks:{onTotalScrollOffset:0,onTotalScrollBackOffset:0,alwaysTriggerOffsets:!0}},vt=0,b={},p=window.attachEvent&&!window.addEventListener?1:0,f=!1,c,i=["mCSB_dragger_onDrag","mCSB_scrollTools_onDrag","mCS_img_loaded","mCS_disabled","mCS_destroyed","mCS_no_scrollbar","mCS-autoHide","mCS-dir-rtl","mCS_no_scrollbar_y","mCS_no_scrollbar_x","mCS_y_hidden","mCS_x_hidden","mCSB_draggerContainer","mCSB_buttonUp","mCSB_buttonDown","mCSB_buttonLeft","mCSB_buttonRight"],s={init:function(r){var r=n.extend(!0,{},et,r),e=v.call(this),u,f;if(r.live){if(u=r.liveSelector||this.selector||it,f=n(u),r.live==="off"){k(u);return}b[u]=setTimeout(function(){f.mCustomScrollbar(r);r.live==="once"&&f.length&&k(u)},500)}else k(u);return r.setWidth=r.set_width?r.set_width:r.setWidth,r.setHeight=r.set_height?r.set_height:r.setHeight,r.axis=r.horizontalScroll?"x":yt(r.axis),r.scrollInertia=r.scrollInertia>0&&r.scrollInertia<17?17:r.scrollInertia,typeof r.mouseWheel!="object"&&r.mouseWheel==!0&&(r.mouseWheel={enable:!0,scrollAmount:"auto",axis:"y",preventDefault:!1,deltaFactor:"auto",normalizeDelta:!1,invert:!1}),r.mouseWheel.scrollAmount=r.mouseWheelPixels?r.mouseWheelPixels:r.mouseWheel.scrollAmount,r.mouseWheel.normalizeDelta=r.advanced.normalizeMouseWheelDelta?r.advanced.normalizeMouseWheelDelta:r.mouseWheel.normalizeDelta,r.scrollButtons.scrollType=pt(r.scrollButtons.scrollType),ot(r),n(e).each(function(){var u=n(this);if(!u.data(t)){u.data(t,{idx:++vt,opt:r,scrollRatio:{y:null,x:null},overflowed:null,contentReset:{y:null,x:null},bindEvents:!1,tweenRunning:!1,sequential:{},langDir:u.css("direction"),cbOffsets:null,trigger:null,poll:{size:{o:0,n:0},img:{o:0,n:0},change:{o:0,n:0}}});var e=u.data(t),f=e.opt,o=u.data("mcs-axis"),h=u.data("mcs-scrollbar-position"),c=u.data("mcs-theme");o&&(f.axis=o);h&&(f.scrollbarPosition=h);c&&(f.theme=c,ot(f));wt.call(this);e&&f.callbacks.onCreate&&typeof f.callbacks.onCreate=="function"&&f.callbacks.onCreate.call(this);n("#mCSB_"+e.idx+"_container img:not(."+i[2]+")").addClass(i[2]);s.update.call(null,u)}})},update:function(r,f){var e=r||v.call(this);return n(e).each(function(){var s=n(this),h;if(s.data(t)){var e=s.data(t),r=e.opt,c=n("#mCSB_"+e.idx+"_container"),a=n("#mCSB_"+e.idx),l=[n("#mCSB_"+e.idx+"_dragger_vertical"),n("#mCSB_"+e.idx+"_dragger_horizontal")];if(!c.length)return;e.tweenRunning&&o(s);f&&e&&r.callbacks.onBeforeUpdate&&typeof r.callbacks.onBeforeUpdate=="function"&&r.callbacks.onBeforeUpdate.call(this);s.hasClass(i[3])&&s.removeClass(i[3]);s.hasClass(i[4])&&s.removeClass(i[4]);a.css("max-height","none");a.height()!==s.height()&&a.css("max-height",s.height());bt.call(this);r.axis==="y"||r.advanced.autoExpandHorizontalScroll||c.css("width",st(c));e.overflowed=ni.call(this);ht.call(this);r.autoDraggerLength&&dt.call(this);gt.call(this);ti.call(this);h=[Math.abs(c[0].offsetTop),Math.abs(c[0].offsetLeft)];r.axis!=="x"&&(e.overflowed[0]?l[0].height()>l[0].parent().height()?y.call(this):(u(s,h[0].toString(),{dir:"y",dur:0,overwrite:"none"}),e.contentReset.y=null):(y.call(this),r.axis==="y"?g.call(this):r.axis==="yx"&&e.overflowed[1]&&u(s,h[1].toString(),{dir:"x",dur:0,overwrite:"none"})));r.axis!=="y"&&(e.overflowed[1]?l[1].width()>l[1].parent().width()?y.call(this):(u(s,h[1].toString(),{dir:"x",dur:0,overwrite:"none"}),e.contentReset.x=null):(y.call(this),r.axis==="x"?g.call(this):r.axis==="yx"&&e.overflowed[0]&&u(s,h[0].toString(),{dir:"y",dur:0,overwrite:"none"})));f&&e&&(f===2&&r.callbacks.onImageLoad&&typeof r.callbacks.onImageLoad=="function"?r.callbacks.onImageLoad.call(this):f===3&&r.callbacks.onSelectorChange&&typeof r.callbacks.onSelectorChange=="function"?r.callbacks.onSelectorChange.call(this):r.callbacks.onUpdate&&typeof r.callbacks.onUpdate=="function"&&r.callbacks.onUpdate.call(this));ft.call(this)}})},scrollTo:function(i,r){if(typeof i!="undefined"&&i!=null){var f=v.call(this);return n(f).each(function(){var s=n(this);if(s.data(t)){var o=s.data(t),h=o.opt,c={trigger:"external",scrollInertia:h.scrollInertia,scrollEasing:"mcsEaseInOut",moveDragger:!1,timeout:60,callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},f=n.extend(!0,{},c,r),e=ut.call(this,i),l=f.scrollInertia>0&&f.scrollInertia<17?17:f.scrollInertia;e[0]=ct.call(this,e[0],"y");e[1]=ct.call(this,e[1],"x");f.moveDragger&&(e[0]*=o.scrollRatio.y,e[1]*=o.scrollRatio.x);f.dur=yi()?0:l;setTimeout(function(){e[0]!==null&&typeof e[0]!="undefined"&&h.axis!=="x"&&o.overflowed[0]&&(f.dir="y",f.overwrite="all",u(s,e[0].toString(),f));e[1]!==null&&typeof e[1]!="undefined"&&h.axis!=="y"&&o.overflowed[1]&&(f.dir="x",f.overwrite="none",u(s,e[1].toString(),f))},f.timeout)}})}},stop:function(){var i=v.call(this);return n(i).each(function(){var i=n(this);i.data(t)&&o(i)})},disable:function(r){var u=v.call(this);return n(u).each(function(){var u=n(this),f;u.data(t)&&(f=u.data(t),ft.call(this,"remove"),g.call(this),r&&y.call(this),ht.call(this,!0),u.addClass(i[3]))})},destroy:function(){var r=v.call(this);return n(r).each(function(){var f=n(this);if(f.data(t)){var u=f.data(t),e=u.opt,s=n("#mCSB_"+u.idx),o=n("#mCSB_"+u.idx+"_container"),c=n(".mCSB_"+u.idx+"_scrollbar");e.live&&k(e.liveSelector||n(r).selector);ft.call(this,"remove");g.call(this);y.call(this);f.removeData(t);a(this,"mcs");c.remove();o.find("img."+i[2]).removeClass(i[2]);s.replaceWith(o.contents());f.removeClass(h+" _"+t+"_"+u.idx+" "+i[6]+" "+i[7]+" "+i[5]+" "+i[3]).addClass(i[4])}})}},v=function(){return typeof n(this)!="object"||n(this).length<1?it:this},ot=function(t){t.autoDraggerLength=n.inArray(t.theme,["rounded","rounded-dark","rounded-dots","rounded-dots-dark"])>-1?!1:t.autoDraggerLength;t.autoExpandScrollbar=n.inArray(t.theme,["rounded-dots","rounded-dots-dark","3d","3d-dark","3d-thick","3d-thick-dark","inset","inset-dark","inset-2","inset-2-dark","inset-3","inset-3-dark"])>-1?!1:t.autoExpandScrollbar;t.scrollButtons.enable=n.inArray(t.theme,["minimal","minimal-dark"])>-1?!1:t.scrollButtons.enable;t.autoHideScrollbar=n.inArray(t.theme,["minimal","minimal-dark"])>-1?!0:t.autoHideScrollbar;t.scrollbarPosition=n.inArray(t.theme,["minimal","minimal-dark"])>-1?"outside":t.scrollbarPosition},k=function(n){b[n]&&(clearTimeout(b[n]),a(b,n))},yt=function(n){return n==="yx"||n==="xy"||n==="auto"?"yx":n==="x"||n==="horizontal"?"x":"y"},pt=function(n){return n==="stepped"||n==="pixels"||n==="step"||n==="click"?"stepped":"stepless"},wt=function(){var f=n(this),u=f.data(t),r=u.opt,l=r.autoExpandScrollbar?" "+i[1]+"_expand":"",o=["<div id='mCSB_"+u.idx+"_scrollbar_vertical' class='mCSB_scrollTools mCSB_"+u.idx+"_scrollbar mCS-"+r.theme+" mCSB_scrollTools_vertical"+l+"'><div class='"+i[12]+"'><div id='mCSB_"+u.idx+"_dragger_vertical' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /><\/div><div class='mCSB_draggerRail' /><\/div><\/div>","<div id='mCSB_"+u.idx+"_scrollbar_horizontal' class='mCSB_scrollTools mCSB_"+u.idx+"_scrollbar mCS-"+r.theme+" mCSB_scrollTools_horizontal"+l+"'><div class='"+i[12]+"'><div id='mCSB_"+u.idx+"_dragger_horizontal' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /><\/div><div class='mCSB_draggerRail' /><\/div><\/div>"],v=r.axis==="yx"?"mCSB_vertical_horizontal":r.axis==="x"?"mCSB_horizontal":"mCSB_vertical",a=r.axis==="yx"?o[0]+o[1]:r.axis==="x"?o[1]:o[0],y=r.axis==="yx"?"<div id='mCSB_"+u.idx+"_container_wrapper' class='mCSB_container_wrapper' />":"",p=r.autoHideScrollbar?" "+i[6]:"",w=r.axis!=="x"&&u.langDir==="rtl"?" "+i[7]:"",c,s,e;r.setWidth&&f.css("width",r.setWidth);r.setHeight&&f.css("height",r.setHeight);r.setLeft=r.axis!=="y"&&u.langDir==="rtl"?"989999px":r.setLeft;f.addClass(h+" _"+t+"_"+u.idx+p+w).wrapInner("<div id='mCSB_"+u.idx+"' class='mCustomScrollBox mCS-"+r.theme+" "+v+"'><div id='mCSB_"+u.idx+"_container' class='mCSB_container' style='position:relative; top:"+r.setTop+"; left:"+r.setLeft+";' dir="+u.langDir+" /><\/div>");c=n("#mCSB_"+u.idx);s=n("#mCSB_"+u.idx+"_container");r.axis==="y"||r.advanced.autoExpandHorizontalScroll||s.css("width",st(s));r.scrollbarPosition==="outside"?(f.css("position")==="static"&&f.css("position","relative"),f.css("overflow","visible"),c.addClass("mCSB_outside").after(a)):(c.addClass("mCSB_inside").append(a),s.wrap(y));kt.call(this);e=[n("#mCSB_"+u.idx+"_dragger_vertical"),n("#mCSB_"+u.idx+"_dragger_horizontal")];e[0].css("min-height",e[0].height());e[1].css("min-width",e[1].width())},st=function(t){var i=[t[0].scrollWidth,Math.max.apply(Math,t.children().map(function(){return n(this).outerWidth(!0)}).get())],r=t.parent().width();return i[0]>r?i[0]:i[1]>r?i[1]:"100%"},bt=function(){var e=n(this),f=e.data(t),r=f.opt,i=n("#mCSB_"+f.idx+"_container"),u;r.advanced.autoExpandHorizontalScroll&&r.axis!=="y"&&(i.css({width:"auto","min-width":0,"overflow-x":"scroll"}),u=Math.ceil(i[0].scrollWidth),r.advanced.autoExpandHorizontalScroll===3||r.advanced.autoExpandHorizontalScroll!==2&&u>i.parent().width()?i.css({width:u,"min-width":"100%","overflow-x":"inherit"}):i.css({"overflow-x":"inherit",position:"absolute"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:Math.ceil(i[0].getBoundingClientRect().right+.4)-Math.floor(i[0].getBoundingClientRect().left),"min-width":"100%",position:"relative"}).unwrap())},kt=function(){var s=n(this),o=s.data(t),u=o.opt,h=n(".mCSB_"+o.idx+"_scrollbar:first"),f=tt(u.scrollButtons.tabindex)?"tabindex='"+u.scrollButtons.tabindex+"'":"",r=["<a href='#' class='"+i[13]+"' oncontextmenu='return false;' "+f+" />","<a href='#' class='"+i[14]+"' oncontextmenu='return false;' "+f+" />","<a href='#' class='"+i[15]+"' oncontextmenu='return false;' "+f+" />","<a href='#' class='"+i[16]+"' oncontextmenu='return false;' "+f+" />"],e=[u.axis==="x"?r[2]:r[0],u.axis==="x"?r[3]:r[1],r[2],r[3]];u.scrollButtons.enable&&h.prepend(e[0]).append(e[1]).next(".mCSB_scrollTools").prepend(e[2]).append(e[3])},dt=function(){var s=n(this),u=s.data(t),f=n("#mCSB_"+u.idx),e=n("#mCSB_"+u.idx+"_container"),r=[n("#mCSB_"+u.idx+"_dragger_vertical"),n("#mCSB_"+u.idx+"_dragger_horizontal")],o=[f.height()/e.outerHeight(!1),f.width()/e.outerWidth(!1)],i=[parseInt(r[0].css("min-height")),Math.round(o[0]*r[0].parent().height()),parseInt(r[1].css("min-width")),Math.round(o[1]*r[1].parent().width())],h=p&&i[1]<i[0]?i[0]:i[1],c=p&&i[3]<i[2]?i[2]:i[3];r[0].css({height:h,"max-height":r[0].parent().height()-10}).find(".mCSB_dragger_bar").css({"line-height":i[0]+"px"});r[1].css({width:c,"max-width":r[1].parent().width()-10})},gt=function(){var s=n(this),i=s.data(t),u=n("#mCSB_"+i.idx),f=n("#mCSB_"+i.idx+"_container"),r=[n("#mCSB_"+i.idx+"_dragger_vertical"),n("#mCSB_"+i.idx+"_dragger_horizontal")],e=[f.outerHeight(!1)-u.height(),f.outerWidth(!1)-u.width()],o=[e[0]/(r[0].parent().height()-r[0].height()),e[1]/(r[1].parent().width()-r[1].width())];i.scrollRatio={y:o[0],x:o[1]}},d=function(n,t,r){var f=r?i[0]+"_expanded":"",u=n.closest(".mCSB_scrollTools");t==="active"?(n.toggleClass(i[0]+" "+f),u.toggleClass(i[1]),n[0]._draggable=n[0]._draggable?0:1):n[0]._draggable||(t==="hide"?(n.removeClass(i[0]),u.removeClass(i[1])):(n.addClass(i[0]),u.addClass(i[1])))},ni=function(){var h=n(this),r=h.data(t),e=n("#mCSB_"+r.idx),i=n("#mCSB_"+r.idx+"_container"),u=r.overflowed==null?i.height():i.outerHeight(!1),f=r.overflowed==null?i.width():i.outerWidth(!1),o=i[0].scrollHeight,s=i[0].scrollWidth;return o>u&&(u=o),s>f&&(f=s),[u>e.height(),f>e.width()]},y=function(){var r=n(this),i=r.data(t),f=i.opt,c=n("#mCSB_"+i.idx),s=n("#mCSB_"+i.idx+"_container"),h=[n("#mCSB_"+i.idx+"_dragger_vertical"),n("#mCSB_"+i.idx+"_dragger_horizontal")],e;o(r);(f.axis!=="x"&&!i.overflowed[0]||f.axis==="y"&&i.overflowed[0])&&(h[0].add(s).css("top",0),u(r,"_resetY"));(f.axis!=="y"&&!i.overflowed[1]||f.axis==="x"&&i.overflowed[1])&&(e=dx=0,i.langDir==="rtl"&&(e=c.width()-s.outerWidth(!1),dx=Math.abs(e/i.scrollRatio.x)),s.css("left",e),h[1].css("left",dx),u(r,"_resetX"))},ti=function(){var u=n(this),r=u.data(t),i=r.opt,f;if(!r.bindEvents){if(ii.call(this),i.contentTouchScroll&&ri.call(this),ui.call(this),i.mouseWheel.enable){function e(){f=setTimeout(function(){n.event.special.mousewheel?(clearTimeout(f),fi.call(u[0])):e()},100)}e()}oi.call(this);hi.call(this);i.advanced.autoScrollOnFocus&&si.call(this);i.scrollButtons.enable&&ci.call(this);i.keyboard.enable&&li.call(this);r.bindEvents=!0}},g=function(){var f=n(this),r=f.data(t),u=r.opt,o=t+"_"+r.idx,s=".mCSB_"+r.idx+"_scrollbar",e=n("#mCSB_"+r.idx+",#mCSB_"+r.idx+"_container,#mCSB_"+r.idx+"_container_wrapper,"+s+" ."+i[12]+",#mCSB_"+r.idx+"_dragger_vertical,#mCSB_"+r.idx+"_dragger_horizontal,"+s+">a"),h=n("#mCSB_"+r.idx+"_container");u.advanced.releaseDraggableSelectors&&e.add(n(u.advanced.releaseDraggableSelectors));u.advanced.extraDraggableSelectors&&e.add(n(u.advanced.extraDraggableSelectors));r.bindEvents&&(n(document).add(n(!l()||top.document)).unbind("."+o),e.each(function(){n(this).unbind("."+o)}),clearTimeout(f[0]._focusTimeout),a(f[0],"_focusTimeout"),clearTimeout(r.sequential.step),a(r.sequential,"step"),clearTimeout(h[0].onCompleteTimeout),a(h[0],"onCompleteTimeout"),r.bindEvents=!1)},ht=function(r){var h=n(this),u=h.data(t),o=u.opt,c=n("#mCSB_"+u.idx+"_container_wrapper"),f=c.length?c:n("#mCSB_"+u.idx+"_container"),e=[n("#mCSB_"+u.idx+"_scrollbar_vertical"),n("#mCSB_"+u.idx+"_scrollbar_horizontal")],s=[e[0].find(".mCSB_dragger"),e[1].find(".mCSB_dragger")];o.axis!=="x"&&(u.overflowed[0]&&!r?(e[0].add(s[0]).add(e[0].children("a")).css("display","block"),f.removeClass(i[8]+" "+i[10])):(o.alwaysShowScrollbar?(o.alwaysShowScrollbar!==2&&s[0].css("display","none"),f.removeClass(i[10])):(e[0].css("display","none"),f.addClass(i[10])),f.addClass(i[8])));o.axis!=="y"&&(u.overflowed[1]&&!r?(e[1].add(s[1]).add(e[1].children("a")).css("display","block"),f.removeClass(i[9]+" "+i[11])):(o.alwaysShowScrollbar?(o.alwaysShowScrollbar!==2&&s[1].css("display","none"),f.removeClass(i[11])):(e[1].css("display","none"),f.addClass(i[11])),f.addClass(i[9])));u.overflowed[0]||u.overflowed[1]?h.removeClass(i[5]):h.addClass(i[5])},r=function(t){var e=t.type,i=t.target.ownerDocument!==document?[n(frameElement).offset().top,n(frameElement).offset().left]:null,u=l()&&t.target.ownerDocument!==top.document?[n(t.view.frameElement).offset().top,n(t.view.frameElement).offset().left]:[0,0],r,f;switch(e){case"pointerdown":case"MSPointerDown":case"pointermove":case"MSPointerMove":case"pointerup":case"MSPointerUp":return i?[t.originalEvent.pageY-i[0]+u[0],t.originalEvent.pageX-i[1]+u[1],!1]:[t.originalEvent.pageY,t.originalEvent.pageX,!1];case"touchstart":case"touchmove":case"touchend":return r=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],f=t.originalEvent.touches.length||t.originalEvent.changedTouches.length,t.target.ownerDocument!==document?[r.screenY,r.screenX,f>1]:[r.pageY,r.pageX,f>1];default:return i?[t.pageY-i[0]+u[0],t.pageX-i[1]+u[1],!1]:[t.pageY,t.pageX,!1]}},ii=function(){function b(n){var t=g.find("iframe"),i;t.length&&(i=n?"auto":"none",t.css("pointer-events",i))}function k(n,t,r,f){var e,o;g[0].idleTimer=h.scrollInertia<233?250:0;i.attr("id")===y[1]?(e="x",o=(i[0].offsetLeft-t+f)*s.scrollRatio.x):(e="y",o=(i[0].offsetTop-n+r)*s.scrollRatio.y);u(v,o.toString(),{dir:e,drag:!0})}var v=n(this),s=v.data(t),h=s.opt,e=t+"_"+s.idx,y=["mCSB_"+s.idx+"_dragger_vertical","mCSB_"+s.idx+"_dragger_horizontal"],g=n("#mCSB_"+s.idx+"_container"),w=n("#"+y[0]+",#"+y[1]),i,c,a,nt=h.advanced.releaseDraggableSelectors?w.add(n(h.advanced.releaseDraggableSelectors)):w,tt=h.advanced.extraDraggableSelectors?n(!l()||top.document).add(n(h.advanced.extraDraggableSelectors)):n(!l()||top.document);w.bind("mousedown."+e+" touchstart."+e+" pointerdown."+e+" MSPointerDown."+e,function(t){if(t.stopImmediatePropagation(),t.preventDefault(),at(t)){f=!0;p&&(document.onselectstart=function(){return!1});b(!1);o(v);i=n(this);var u=i.offset(),e=r(t)[0]-u.top,s=r(t)[1]-u.left,l=i.height()+u.top,y=i.width()+u.left;e<l&&e>0&&s<y&&s>0&&(c=e,a=s);d(i,"active",h.autoExpandScrollbar)}}).bind("touchmove."+e,function(n){n.stopImmediatePropagation();n.preventDefault();var t=i.offset(),u=r(n)[0]-t.top,f=r(n)[1]-t.left;k(c,a,u,f)});n(document).add(tt).bind("mousemove."+e+" pointermove."+e+" MSPointerMove."+e,function(n){if(i){var t=i.offset(),u=r(n)[0]-t.top,f=r(n)[1]-t.left;if(c===u&&a===f)return;k(c,a,u,f)}}).add(nt).bind("mouseup."+e+" touchend."+e+" pointerup."+e+" MSPointerUp."+e,function(){i&&(d(i,"active",h.autoExpandScrollbar),i=null);f=!1;p&&(document.onselectstart=null);b(!0)})},ri=function(){function at(n){if(!nt(n)||f||r(n)[2]){c=0;return}c=1;et=0;ot=0;st=1;k.removeClass("mCS_touch_action");var t=b.offset();d=r(n)[0]-t.top;g=r(n)[1]-t.left;v=[r(n)[0],r(n)[1]]}function vt(n){var o,h,c,l;if(nt(n)&&!f&&!r(n)[2]&&(e.documentTouchScroll||n.preventDefault(),n.stopImmediatePropagation(),!ot||et)&&st){gt=w();var a=it.offset(),t=r(n)[0]-a.top,u=r(n)[1]-a.left,y="mcsLinearOut";ut.push(t);ft.push(u);v[2]=Math.abs(r(n)[0]-v[0]);v[3]=Math.abs(r(n)[1]-v[1]);i.overflowed[0]&&(o=rt[0].parent().height()-rt[0].height(),h=d-t>0&&t-d>-(o*i.scrollRatio.y)&&(v[3]*2<v[2]||e.axis==="yx"));i.overflowed[1]&&(c=rt[1].parent().width()-rt[1].width(),l=g-u>0&&u-g>-(c*i.scrollRatio.x)&&(v[2]*2<v[3]||e.axis==="yx"));h||l?(ii||n.preventDefault(),et=1):(ot=1,k.addClass("mCS_touch_action"));ii&&n.preventDefault();s=e.axis==="yx"?[d-t,g-u]:e.axis==="x"?[null,g-u]:[d-t,null];b[0].idleTimer=250;i.overflowed[0]&&tt(s[0],ni,y,"y","all",!0);i.overflowed[1]&&tt(s[1],ni,y,"x",lt,!0)}}function yt(n){if(!nt(n)||f||r(n)[2]){c=0;return}c=1;n.stopImmediatePropagation();o(k);dt=w();var t=it.offset();bt=r(n)[0]-t.top;kt=r(n)[1]-t.left;ut=[];ft=[]}function pt(n){var t,u,o;if(nt(n)&&!f&&!r(n)[2]){st=0;n.stopImmediatePropagation();et=0;ot=0;ht=w();var c=it.offset(),l=r(n)[0]-c.top,v=r(n)[1]-c.left;if(!(ht-gt>30)){a=1e3/(ht-dt);var p="mcsEaseOut",h=a<2.5,k=h?[ut[ut.length-2],ft[ft.length-2]]:[0,0];y=h?[l-k[0],v-k[1]]:[l-bt,v-kt];t=[Math.abs(y[0]),Math.abs(y[1])];a=h?[Math.abs(y[0]/4),Math.abs(y[1]/4)]:[a,a];u=[Math.abs(b[0].offsetTop)-y[0]*wt(t[0]/a[0],a[0]),Math.abs(b[0].offsetLeft)-y[1]*wt(t[1]/a[1],a[1])];s=e.axis==="yx"?[u[0],u[1]]:e.axis==="x"?[null,u[1]]:[u[0],null];ct=[t[0]*4+e.scrollInertia,t[1]*4+e.scrollInertia];o=parseInt(e.contentTouchScroll)||0;s[0]=t[0]>o?s[0]:0;s[1]=t[1]>o?s[1]:0;i.overflowed[0]&&tt(s[0],ct[0],p,"y",lt,!1);i.overflowed[1]&&tt(s[1],ct[1],p,"x",lt,!1)}}}function wt(n,t){var i=[t*1.5,t*2,t/1.5,t/2];return n>90?t>4?i[0]:i[3]:n>60?t>3?i[3]:i[2]:n>30?t>8?i[1]:t>6?i[0]:t>4?t:i[2]:t>8?t:i[3]}function tt(n,t,i,r,f,e){n&&u(k,n.toString(),{dur:t,scrollEasing:i,dir:r,overwrite:f,drag:e})}var k=n(this),i=k.data(t),e=i.opt,h=t+"_"+i.idx,it=n("#mCSB_"+i.idx),b=n("#mCSB_"+i.idx+"_container"),rt=[n("#mCSB_"+i.idx+"_dragger_vertical"),n("#mCSB_"+i.idx+"_dragger_horizontal")],st,d,g,bt,kt,ut=[],ft=[],dt,gt,ht,y,a,s,ni=0,ct,lt=e.axis==="yx"?"none":"all",v=[],et,ot,ti=b.find("iframe"),p=["touchstart."+h+" pointerdown."+h+" MSPointerDown."+h,"touchmove."+h+" pointermove."+h+" MSPointerMove."+h,"touchend."+h+" pointerup."+h+" MSPointerUp."+h],ii=document.body.style.touchAction!==undefined;b.bind(p[0],function(n){at(n)}).bind(p[1],function(n){vt(n)});it.bind(p[0],function(n){yt(n)}).bind(p[2],function(n){pt(n)});ti.length&&ti.each(function(){n(this).load(function(){l(this)&&n(this.contentDocument||this.contentWindow.document).bind(p[0],function(n){at(n);yt(n)}).bind(p[1],function(n){vt(n)}).bind(p[2],function(n){pt(n)})})})},ui=function(){function y(){return window.getSelection?window.getSelection().toString():document.selection&&document.selection.type!="Control"?document.selection.createRange().text:0}function i(n,t,i){l.type=i&&e?"stepped":"stepless";l.scrollAmount=10;rt(a,n,t,"mcsLinearOut",i?60:null)}var a=n(this),u=a.data(t),v=u.opt,l=u.sequential,s=t+"_"+u.idx,o=n("#mCSB_"+u.idx+"_container"),h=o.parent(),e;o.bind("mousedown."+s,function(){c||e||(e=1,f=!0)}).add(document).bind("mousemove."+s,function(n){if(!c&&e&&y()){var s=o.offset(),t=r(n)[0]-s.top+o[0].offsetTop,f=r(n)[1]-s.left+o[0].offsetLeft;t>0&&t<h.height()&&f>0&&f<h.width()?l.step&&i("off",null,"stepped"):(v.axis!=="x"&&u.overflowed[0]&&(t<0?i("on",38):t>h.height()&&i("on",40)),v.axis!=="y"&&u.overflowed[1]&&(f<0?i("on",37):f>h.width()&&i("on",39)))}}).bind("mouseup."+s+" dragend."+s,function(){c||(e&&(e=0,i("off",null)),f=!1)})},fi=function(){function h(t,h){var v,y;if(o(s),!ei(s,t.target)){if(v=i.mouseWheel.deltaFactor!=="auto"?parseInt(i.mouseWheel.deltaFactor):p&&t.deltaFactor<100?100:t.deltaFactor||100,y=i.scrollInertia,i.axis==="x"||i.mouseWheel.axis==="x")var a="x",l=[Math.round(v*r.scrollRatio.x),parseInt(i.mouseWheel.scrollAmount)],w=i.mouseWheel.scrollAmount!=="auto"?l[1]:l[0]>=e.width()?e.width()*.9:l[0],k=Math.abs(n("#mCSB_"+r.idx+"_container")[0].offsetLeft),b=f[1][0].offsetLeft,d=f[1].parent().width()-f[1].width(),c=t.deltaX||t.deltaY||h;else var a="y",l=[Math.round(v*r.scrollRatio.y),parseInt(i.mouseWheel.scrollAmount)],w=i.mouseWheel.scrollAmount!=="auto"?l[1]:l[0]>=e.height()?e.height()*.9:l[0],k=Math.abs(n("#mCSB_"+r.idx+"_container")[0].offsetTop),b=f[0][0].offsetTop,d=f[0].parent().height()-f[0].height(),c=t.deltaY||h;(a!=="y"||r.overflowed[0])&&(a!=="x"||r.overflowed[1])&&((i.mouseWheel.invert||t.webkitDirectionInvertedFromDevice)&&(c=-c),i.mouseWheel.normalizeDelta&&(c=c<0?-1:1),(c>0&&b!==0||c<0&&b!==d||i.mouseWheel.preventDefault)&&(t.stopImmediatePropagation(),t.preventDefault()),t.deltaFactor<2&&!i.mouseWheel.normalizeDelta&&(w=t.deltaFactor,y=17),u(s,(k-c*w).toString(),{dir:a,dur:y}))}}if(n(this).data(t)){var s=n(this),r=s.data(t),i=r.opt,c=t+"_"+r.idx,e=n("#mCSB_"+r.idx),f=[n("#mCSB_"+r.idx+"_dragger_vertical"),n("#mCSB_"+r.idx+"_dragger_horizontal")],a=n("#mCSB_"+r.idx+"_container").find("iframe");a.length&&a.each(function(){n(this).load(function(){l(this)&&n(this.contentDocument||this.contentWindow.document).bind("mousewheel."+c,function(n,t){h(n,t)})})});e.bind("mousewheel."+c,function(n,t){h(n,t)})}},l=function(n){var t=null,i;if(n){try{i=n.contentDocument||n.contentWindow.document;t=i.body.innerHTML}catch(r){}return t!==null}try{i=top.document;t=i.body.innerHTML}catch(r){}return t!==null},ei=function(i,r){var u=r.nodeName.toLowerCase(),f=i.data(t).opt.mouseWheel.disableOver;return n.inArray(u,f)>-1&&!(n.inArray(u,["select","textarea"])>-1&&!n(r).is(":focus"))},oi=function(){var s=n(this),e=s.data(t),r=t+"_"+e.idx,h=n("#mCSB_"+e.idx+"_container"),l=h.parent(),a=n(".mCSB_"+e.idx+"_scrollbar ."+i[12]),c;a.bind("mousedown."+r+" touchstart."+r+" pointerdown."+r+" MSPointerDown."+r,function(t){f=!0;n(t.target).hasClass("mCSB_dragger")||(c=1)}).bind("touchend."+r+" pointerup."+r+" MSPointerUp."+r,function(){f=!1}).bind("click."+r,function(t){var r,f;if(c&&(c=0,n(t.target).hasClass(i[12])||n(t.target).hasClass("mCSB_draggerRail"))){if(o(s),r=n(this),f=r.find(".mCSB_dragger"),r.parent(".mCSB_scrollTools_horizontal").length>0){if(!e.overflowed[1])return;var v="x",a=t.pageX>f.offset().left?-1:1,y=Math.abs(h[0].offsetLeft)-a*l.width()*.9}else{if(!e.overflowed[0])return;var v="y",a=t.pageY>f.offset().top?-1:1,y=Math.abs(h[0].offsetTop)-a*l.height()*.9}u(s,y.toString(),{dir:v,scrollEasing:"mcsEaseInOut"})}})},si=function(){var i=n(this),s=i.data(t),f=s.opt,c=t+"_"+s.idx,r=n("#mCSB_"+s.idx+"_container"),h=r.parent();r.bind("focusin."+c,function(){var t=n(document.activeElement),c=r.find(".mCustomScrollBox").length,s=0;t.is(f.advanced.autoScrollOnFocus)&&(o(i),clearTimeout(i[0]._focusTimeout),i[0]._focusTimer=c?(s+17)*c:0,i[0]._focusTimeout=setTimeout(function(){var n=[e(t)[0],e(t)[1]],o=[r[0].offsetTop,r[0].offsetLeft],c=[o[0]+n[0]>=0&&o[0]+n[0]<h.height()-t.outerHeight(!1),o[1]+n[1]>=0&&o[0]+n[1]<h.width()-t.outerWidth(!1)],l=f.axis==="yx"&&!c[0]&&!c[1]?"none":"all";f.axis==="x"||c[0]||u(i,n[0].toString(),{dir:"y",scrollEasing:"mcsEaseInOut",overwrite:l,dur:s});f.axis==="y"||c[1]||u(i,n[1].toString(),{dir:"x",scrollEasing:"mcsEaseInOut",overwrite:l,dur:s})},i[0]._focusTimer))})},hi=function(){var u=n(this),i=u.data(t),f=t+"_"+i.idx,r=n("#mCSB_"+i.idx+"_container").parent();r.bind("scroll."+f,function(){(r.scrollTop()!==0||r.scrollLeft()!==0)&&n(".mCSB_"+i.idx+"_scrollbar").css("visibility","hidden")})},ci=function(){var e=n(this),r=e.data(t),o=r.opt,u=r.sequential,i=t+"_"+r.idx,s=".mCSB_"+r.idx+"_scrollbar",h=n(s+">a");h.bind("mousedown."+i+" touchstart."+i+" pointerdown."+i+" MSPointerDown."+i+" mouseup."+i+" touchend."+i+" pointerup."+i+" MSPointerUp."+i+" mouseout."+i+" pointerout."+i+" MSPointerOut."+i+" click."+i,function(t){function i(n,t){u.scrollAmount=o.scrollButtons.scrollAmount;rt(e,n,t)}if(t.preventDefault(),at(t)){var s=n(this).attr("class");u.type=o.scrollButtons.scrollType;switch(t.type){case"mousedown":case"touchstart":case"pointerdown":case"MSPointerDown":if(u.type==="stepped")return;f=!0;r.tweenRunning=!1;i("on",s);break;case"mouseup":case"touchend":case"pointerup":case"MSPointerUp":case"mouseout":case"pointerout":case"MSPointerOut":if(u.type==="stepped")return;f=!1;u.dir&&i("off",s);break;case"click":if(u.type!=="stepped"||r.tweenRunning)return;i("on",s)}}})},li=function(){function a(t){function w(n,t){(s.type=r.keyboard.scrollType,s.scrollAmount=r.keyboard.scrollAmount,s.type==="stepped"&&i.tweenRunning)||rt(e,n,t)}var c,y,p,l,a;switch(t.type){case"blur":i.tweenRunning&&s.dir&&w("off",null);break;case"keydown":case"keyup":if(c=t.keyCode?t.keyCode:t.which,y="on",r.axis!=="x"&&(c===38||c===40)||r.axis!=="y"&&(c===37||c===39)){if((c===38||c===40)&&!i.overflowed[0]||(c===37||c===39)&&!i.overflowed[1])return;t.type==="keyup"&&(y="off");n(document.activeElement).is(v)||(t.preventDefault(),t.stopImmediatePropagation(),w(y,c))}else c===33||c===34?((i.overflowed[0]||i.overflowed[1])&&(t.preventDefault(),t.stopImmediatePropagation()),t.type==="keyup"&&(o(e),p=c===34?-1:1,r.axis==="x"||r.axis==="yx"&&i.overflowed[1]&&!i.overflowed[0]?(l="x",a=Math.abs(f[0].offsetLeft)-p*h.width()*.9):(l="y",a=Math.abs(f[0].offsetTop)-p*h.height()*.9),u(e,a.toString(),{dir:l,scrollEasing:"mcsEaseInOut"}))):(c===35||c===36)&&(n(document.activeElement).is(v)||((i.overflowed[0]||i.overflowed[1])&&(t.preventDefault(),t.stopImmediatePropagation()),t.type==="keyup"&&(r.axis==="x"||r.axis==="yx"&&i.overflowed[1]&&!i.overflowed[0]?(l="x",a=c===35?Math.abs(h.width()-f.outerWidth(!1)):0):(l="y",a=c===35?Math.abs(h.height()-f.outerHeight(!1)):0),u(e,a.toString(),{dir:l,scrollEasing:"mcsEaseInOut"}))))}}var e=n(this),i=e.data(t),r=i.opt,s=i.sequential,c=t+"_"+i.idx,w=n("#mCSB_"+i.idx),f=n("#mCSB_"+i.idx+"_container"),h=f.parent(),v="input,textarea,select,datalist,keygen,[contenteditable='true']",y=f.find("iframe"),p=["blur."+c+" keydown."+c+" keyup."+c];y.length&&y.each(function(){n(this).load(function(){l(this)&&n(this.contentDocument||this.contentWindow.document).bind(p[0],function(n){a(n)})})});w.attr("tabindex","0").bind(p[0],function(n){a(n)})},rt=function(r,f,e,s,h){function y(n){l.snapAmount&&(c.scrollAmount=l.snapAmount instanceof Array?c.dir[0]==="x"?l.snapAmount[1]:l.snapAmount[0]:l.snapAmount);var i=c.type!=="stepped",f=h?h:n?i?k/1.5:d:1e3/60,e=n?i?7.5:40:2.5,t=[Math.abs(p[0].offsetTop),Math.abs(p[0].offsetLeft)],o=[v.scrollRatio.y>10?10:v.scrollRatio.y,v.scrollRatio.x>10?10:v.scrollRatio.x],w=c.dir[0]==="x"?t[1]+c.dir[1]*o[1]*e:t[0]+c.dir[1]*o[0]*e,b=c.dir[0]==="x"?t[1]+c.dir[1]*parseInt(c.scrollAmount):t[0]+c.dir[1]*parseInt(c.scrollAmount),a=c.scrollAmount!=="auto"?b:w,g=s?s:n?i?"mcsLinearOut":"mcsEaseInOut":"mcsLinear",nt=n?!0:!1;if(n&&f<17&&(a=c.dir[0]==="x"?t[1]:t[0]),u(r,a.toString(),{dir:c.dir[0],scrollEasing:g,dur:f,onComplete:nt}),n){c.dir=!1;return}clearTimeout(c.step);c.step=setTimeout(function(){y()},f)}function b(){clearTimeout(c.step);a(c,"step");o(r)}var v=r.data(t),l=v.opt,c=v.sequential,p=n("#mCSB_"+v.idx+"_container"),w=c.type==="stepped"?!0:!1,k=l.scrollInertia<26?26:l.scrollInertia,d=l.scrollInertia<1?17:l.scrollInertia;switch(f){case"on":if(c.dir=[e===i[16]||e===i[15]||e===39||e===37?"x":"y",e===i[13]||e===i[15]||e===38||e===37?-1:1],o(r),tt(e)&&c.type==="stepped")return;y(w);break;case"off":b();(w||v.tweenRunning&&c.dir)&&y(!0)}},ut=function(i){var u=n(this).data(t).opt,r=[];return typeof i=="function"&&(i=i()),i instanceof Array?r=i.length>1?[i[0],i[1]]:u.axis==="x"?[null,i[0]]:[i[0],null]:(r[0]=i.y?i.y:i.x||u.axis==="x"?null:i,r[1]=i.x?i.x:i.y||u.axis==="y"?null:i),typeof r[0]=="function"&&(r[0]=r[0]()),typeof r[1]=="function"&&(r[1]=r[1]()),r},ct=function(i,r){var o,f;if(i!=null&&typeof i!="undefined"){var h=n(this),c=h.data(t),v=c.opt,u=n("#mCSB_"+c.idx+"_container"),l=u.parent(),y=typeof i;r||(r=v.axis==="x"?"x":"y");var p=r==="x"?u.outerWidth(!1):u.outerHeight(!1),a=r==="x"?u[0].offsetLeft:u[0].offsetTop,w=r==="x"?"left":"top";switch(y){case"function":return i();case"object":return(f=i.jquery?i:n(i),!f.length)?void 0:r==="x"?e(f)[1]:e(f)[0];case"string":case"number":if(tt(i))return Math.abs(i);if(i.indexOf("%")!==-1)return Math.abs(p*parseInt(i)/100);if(i.indexOf("-=")!==-1)return Math.abs(a-parseInt(i.split("-=")[1]));if(i.indexOf("+=")!==-1)return o=a+parseInt(i.split("+=")[1]),o>=0?0:Math.abs(o);if(i.indexOf("px")!==-1&&tt(i.split("px")[0]))return Math.abs(i.split("px")[0]);if(i==="top"||i==="left")return 0;if(i==="bottom")return Math.abs(l.height()-u.outerHeight(!1));if(i==="right")return Math.abs(l.width()-u.outerWidth(!1));if(i==="first"||i==="last")return f=u.find(":"+i),r==="x"?e(f)[1]:e(f)[0];if(n(i).length)return r==="x"?e(n(i))[1]:e(n(i))[0];u.css(w,i);s.update.call(null,h[0]);return}}},ft=function(r){function c(){if(clearTimeout(e[0].autoUpdate),o.parents("html").length===0){o=null;return}e[0].autoUpdate=setTimeout(function(){if(f.advanced.updateOnSelectorChange&&(u.poll.change.n=v(),u.poll.change.n!==u.poll.change.o)){u.poll.change.o=u.poll.change.n;h(3);return}if(f.advanced.updateOnContentResize&&(u.poll.size.n=o[0].scrollHeight+o[0].scrollWidth+e[0].offsetHeight+o[0].offsetHeight+o[0].offsetWidth,u.poll.size.n!==u.poll.size.o)){u.poll.size.o=u.poll.size.n;h(1);return}if(f.advanced.updateOnImageLoad&&!(f.advanced.updateOnImageLoad==="auto"&&f.axis==="y")&&(u.poll.img.n=e.find("img").length,u.poll.img.n!==u.poll.img.o)){u.poll.img.o=u.poll.img.n;e.find("img").each(function(){l(this)});return}(f.advanced.updateOnSelectorChange||f.advanced.updateOnContentResize||f.advanced.updateOnImageLoad)&&c()},f.advanced.autoUpdateTimeout)}function l(t){function u(n,t){return function(){return t.apply(n,arguments)}}function f(){this.onload=null;n(t).addClass(i[2]);h(2)}if(n(t).hasClass(i[2])){h();return}var r=new Image;r.onload=u(r,f);r.src=t.src}function v(){f.advanced.updateOnSelectorChange===!0&&(f.advanced.updateOnSelectorChange="*");var n=0,t=e.find(f.advanced.updateOnSelectorChange);return f.advanced.updateOnSelectorChange&&t.length>0&&t.each(function(){n+=this.offsetHeight+this.offsetWidth}),n}function h(n){clearTimeout(e[0].autoUpdate);s.update.call(null,o[0],n)}var o=n(this),u=o.data(t),f=u.opt,e=n("#mCSB_"+u.idx+"_container");if(r){clearTimeout(e[0].autoUpdate);a(e[0],"autoUpdate");return}c()},ai=function(n,t,i){return Math.round(n/t)*t-i},o=function(i){var r=i.data(t),u=n("#mCSB_"+r.idx+"_container,#mCSB_"+r.idx+"_container_wrapper,#mCSB_"+r.idx+"_dragger_vertical,#mCSB_"+r.idx+"_dragger_horizontal");u.each(function(){vi.call(this)})},u=function(i,r,u){function h(n){return f&&e.callbacks[n]&&typeof e.callbacks[n]=="function"}function et(){return[e.callbacks.alwaysTriggerOffsets||p>=l[0]+v,e.callbacks.alwaysTriggerOffsets||p<=-y]}function a(){var n=[o[0].offsetTop,o[0].offsetLeft],t=[c[0].offsetTop,c[0].offsetLeft],r=[o.outerHeight(!1),o.outerWidth(!1)],f=[w.height(),w.width()];i[0].mcs={content:o,top:n[0],left:n[1],draggerTop:t[0],draggerLeft:t[1],topPct:Math.round(100*Math.abs(n[0])/(Math.abs(r[0])-f[0])),leftPct:Math.round(100*Math.abs(n[1])/(Math.abs(r[1])-f[1])),direction:u.dir}}var f=i.data(t),e=f.opt,ot={trigger:"internal",dir:"y",scrollEasing:"mcsEaseOut",drag:!1,dur:e.scrollInertia,overwrite:"all",callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},u=n.extend(ot,u),g=[u.dur,u.drag?0:u.dur],w=n("#mCSB_"+f.idx),o=n("#mCSB_"+f.idx+"_container"),b=o.parent(),nt=e.callbacks.onTotalScrollOffset?ut.call(i,e.callbacks.onTotalScrollOffset):[0,0],tt=e.callbacks.onTotalScrollBackOffset?ut.call(i,e.callbacks.onTotalScrollBackOffset):[0,0],it;if(f.trigger=u.trigger,(b.scrollTop()!==0||b.scrollLeft()!==0)&&(n(".mCSB_"+f.idx+"_scrollbar").css("visibility","visible"),b.scrollTop(0).scrollLeft(0)),r!=="_resetY"||f.contentReset.y||(h("onOverflowYNone")&&e.callbacks.onOverflowYNone.call(i[0]),f.contentReset.y=1),r!=="_resetX"||f.contentReset.x||(h("onOverflowXNone")&&e.callbacks.onOverflowXNone.call(i[0]),f.contentReset.x=1),r!=="_resetY"&&r!=="_resetX"){(f.contentReset.y||!i[0].mcs)&&f.overflowed[0]&&(h("onOverflowY")&&e.callbacks.onOverflowY.call(i[0]),f.contentReset.x=null);(f.contentReset.x||!i[0].mcs)&&f.overflowed[1]&&(h("onOverflowX")&&e.callbacks.onOverflowX.call(i[0]),f.contentReset.x=null);e.snapAmount&&(it=e.snapAmount instanceof Array?u.dir==="x"?e.snapAmount[1]:e.snapAmount[0]:e.snapAmount,r=ai(r,it,e.snapOffset));switch(u.dir){case"x":var c=n("#mCSB_"+f.idx+"_dragger_horizontal"),k="left",p=o[0].offsetLeft,l=[w.width()-o.outerWidth(!1),c.parent().width()-c.width()],s=[r,r===0?0:r/f.scrollRatio.x],v=nt[1],y=tt[1],rt=v>0?v/f.scrollRatio.x:0,ft=y>0?y/f.scrollRatio.x:0;break;case"y":var c=n("#mCSB_"+f.idx+"_dragger_vertical"),k="top",p=o[0].offsetTop,l=[w.height()-o.outerHeight(!1),c.parent().height()-c.height()],s=[r,r===0?0:r/f.scrollRatio.y],v=nt[0],y=tt[0],rt=v>0?v/f.scrollRatio.y:0,ft=y>0?y/f.scrollRatio.y:0}(s[1]<0||s[0]===0&&s[1]===0?s=[0,0]:s[1]>=l[1]?s=[l[0],l[1]]:s[0]=-s[0],i[0].mcs||(a(),h("onInit")&&e.callbacks.onInit.call(i[0])),clearTimeout(o[0].onCompleteTimeout),lt(c[0],k,Math.round(s[1]),g[1],u.scrollEasing),!f.tweenRunning&&(p===0&&s[0]>=0||p===l[0]&&s[0]<=l[0]))||lt(o[0],k,Math.round(s[0]),g[0],u.scrollEasing,u.overwrite,{onStart:function(){u.callbacks&&u.onStart&&!f.tweenRunning&&(h("onScrollStart")&&(a(),e.callbacks.onScrollStart.call(i[0])),f.tweenRunning=!0,d(c),f.cbOffsets=et())},onUpdate:function(){u.callbacks&&u.onUpdate&&h("whileScrolling")&&(a(),e.callbacks.whileScrolling.call(i[0]))},onComplete:function(){if(u.callbacks&&u.onComplete){e.axis==="yx"&&clearTimeout(o[0].onCompleteTimeout);var n=o[0].idleTimer||0;o[0].onCompleteTimeout=setTimeout(function(){h("onScroll")&&(a(),e.callbacks.onScroll.call(i[0]));h("onTotalScroll")&&s[1]>=l[1]-rt&&f.cbOffsets[0]&&(a(),e.callbacks.onTotalScroll.call(i[0]));h("onTotalScrollBack")&&s[1]<=ft&&f.cbOffsets[1]&&(a(),e.callbacks.onTotalScrollBack.call(i[0]));f.tweenRunning=!1;o[0].idleTimer=0;d(c,"hide")},n)}}})}},lt=function(n,t,i,r,u,f,e){function a(){o.stop||(s||g.call(),s=w()-it,v(),s>=o.time&&(o.time=s>o.time?s+h-(s-o.time):s+h-1,o.time<s+1&&(o.time=s+1)),o.time<r?o.id=l(a):tt.call())}function v(){r>0?(o.currVal=d(o.time,c,y,r,u),p[t]=Math.round(o.currVal)+"px"):p[t]=i+"px";nt.call()}function b(){h=1e3/60;o.time=s+h;l=window.requestAnimationFrame?window.requestAnimationFrame:function(n){return v(),setTimeout(n,.01)};o.id=l(a)}function k(){o.id!=null&&(window.requestAnimationFrame?window.cancelAnimationFrame(o.id):clearTimeout(o.id),o.id=null)}function d(n,t,i,r,u){switch(u){case"linear":case"mcsLinear":return i*n/r+t;case"mcsLinearOut":return n/=r,n--,i*Math.sqrt(1-n*n)+t;case"easeInOutSmooth":return(n/=r/2,n<1)?i/2*n*n+t:(n--,-i/2*(n*(n-2)-1)+t);case"easeInOutStrong":return(n/=r/2,n<1)?i/2*Math.pow(2,10*(n-1))+t:(n--,i/2*(-Math.pow(2,-10*n)+2)+t);case"easeInOut":case"mcsEaseInOut":return(n/=r/2,n<1)?i/2*n*n*n+t:(n-=2,i/2*(n*n*n+2)+t);case"easeOutSmooth":return n/=r,n--,-i*(n*n*n*n-1)+t;case"easeOutStrong":return i*(-Math.pow(2,-10*n/r)+1)+t;case"easeOut":case"mcsEaseOut":default:var f=(n/=r)*n,e=f*n;return t+i*(.499999999999997*e*f+-2.5*f*f+5.5*e+-6.5*f+4*n)}}var y;n._mTween||(n._mTween={top:{},left:{}});var e=e||{},g=e.onStart||function(){},nt=e.onUpdate||function(){},tt=e.onComplete||function(){},it=w(),h,s=0,c=n.offsetTop,p=n.style,l,o=n._mTween[t];t==="left"&&(c=n.offsetLeft);y=i-c;o.stop=0;f!=="none"&&k();b()},w=function(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():(new Date).getTime()},vi=function(){var n=this,r,i,t;for(n._mTween||(n._mTween={top:{},left:{}}),r=["top","left"],i=0;i<r.length;i++)t=r[i],n._mTween[t].id&&(window.requestAnimationFrame?window.cancelAnimationFrame(n._mTween[t].id):clearTimeout(n._mTween[t].id),n._mTween[t].id=null,n._mTween[t].stop=1)},a=function(n,t){try{delete n[t]}catch(i){n[t]=null}},at=function(n){return!(n.which&&n.which!==1)},nt=function(n){var t=n.originalEvent.pointerType;return!(t&&t!=="touch"&&t!==2)},tt=function(n){return!isNaN(parseFloat(n))&&isFinite(n)},e=function(n){var t=n.parents(".mCSB_container");return[n.offset().top-t.offset().top,n.offset().left-t.offset().left]},yi=function(){function t(){var t=["webkit","moz","ms","o"],n;if("hidden"in document)return"hidden";for(n=0;n<t.length;n++)if(t[n]+"Hidden"in document)return t[n]+"Hidden";return null}var n=t();return n?document[n]:!1};n.fn[h]=function(t){if(s[t])return s[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t!="object"&&t)n.error("Method "+t+" does not exist");else return s.init.apply(this,arguments)};n[h]=function(t){if(s[t])return s[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t!="object"&&t)n.error("Method "+t+" does not exist");else return s.init.apply(this,arguments)};n[h].defaults=et;window[h]=!0;n(window).load(function(){n(it)[h]();n.extend(n.expr[":"],{mcsInView:n.expr[":"].mcsInView||function(t){var i=n(t),u=i.parents(".mCSB_container"),f,r;if(u.length)return f=u.parent(),r=[u[0].offsetTop,u[0].offsetLeft],r[0]+e(i)[0]>=0&&r[0]+e(i)[0]<f.height()-i.outerHeight(!1)&&r[1]+e(i)[1]>=0&&r[1]+e(i)[1]<f.width()-i.outerWidth(!1)},mcsOverflow:n.expr[":"].mcsOverflow||function(i){var r=n(i).data(t);if(r)return r.overflowed[0]||r.overflowed[1]}})})})}),function(n){n.fn.bPopup=function(t,i){function lt(){r.contentContainer=n(r.contentContainer||u);switch(r.content){case"iframe":var t=n('<iframe class="b-iframe" '+r.iframeAttr+"><\/iframe>");t.appendTo(r.contentContainer);nt=u.outerHeight(!0);tt=u.outerWidth(!0);it();t.attr("src",r.loadUrl);v(r.loadCallback);break;case"image":it();n("<img />").load(function(){v(r.loadCallback);et(n(this))}).attr("src",r.loadUrl).hide().appendTo(r.contentContainer);break;default:it();n('<div class="b-ajax-wrapper"><\/div>').load(r.loadUrl,r.loadData,function(t,i){v(r.loadCallback,i);et(n(this))}).hide().appendTo(r.contentContainer)}}function it(){r.modal&&n('<div class="b-modal '+f+'"><\/div>').css({backgroundColor:r.modalColor,position:"fixed",top:0,right:0,bottom:0,left:0,opacity:0,zIndex:r.zIndex+k}).appendTo(r.appendTo).fadeTo(r.speed,r.opacity);rt();u.data("bPopup",r).data("id",f).css({left:"slideIn"==r.transition||"slideBack"==r.transition?"slideBack"==r.transition?s.scrollLeft()+b:-1*(g+tt):l(!(!r.follow[0]&&p||e)),position:r.positionStyle||"absolute",top:"slideDown"==r.transition||"slideUp"==r.transition?"slideUp"==r.transition?s.scrollTop()+w:d+-1*nt:a(!(!r.follow[1]&&y||e)),"z-index":r.zIndex+k+1}).each(function(){r.appending&&n(this).appendTo(r.appendTo)});ot(!0)}function c(){return r.modal&&n(".b-modal."+u.data("id")).fadeTo(r.speed,0,function(){n(this).remove()}),r.scrollBar||n("html").css("overflow","auto"),n(".b-modal."+f).unbind("click"),s.unbind("keydown."+f),h.unbind("."+f).data("bPopup",0<h.data("bPopup")-1?h.data("bPopup")-1:null),u.undelegate(".bClose, ."+r.closeClass,"click."+f,c).data("bPopup",null),clearTimeout(ct),ot(),!1}function ft(t){w=h.height();b=h.width();o=ut();(o.x||o.y)&&(clearTimeout(ht),ht=setTimeout(function(){rt();t=t||r.followSpeed;var i={};o.x&&(i.left=r.follow[0]?l(!0):"auto");o.y&&(i.top=r.follow[1]?a(!0):"auto");u.dequeue().each(function(){e?n(this).css({left:g,top:d}):n(this).animate(i,t,r.followEasing)})},50))}function et(n){var i=n.width(),f=n.height(),t={};r.contentContainer.css({height:f,width:i});f>=u.height()&&(t.height=u.height());i>=u.width()&&(t.width=u.width());nt=u.outerHeight(!0);tt=u.outerWidth(!0);rt();r.contentContainer.css({height:"auto",width:"auto"});t.left=l(!(!r.follow[0]&&p||e));t.top=a(!(!r.follow[1]&&y||e));u.animate(t,250,function(){n.show();o=ut()})}function at(){h.data("bPopup",k);u.delegate(".bClose, ."+r.closeClass,"click."+f,c);r.modalClose&&n(".b-modal."+f).css("cursor","pointer").bind("click",c);!vt&&(r.follow[0]||r.follow[1])&&h.bind("scroll."+f,function(){if(o.x||o.y){var n={};o.x&&(n.left=r.follow[0]?l(!e):"auto");o.y&&(n.top=r.follow[1]?a(!e):"auto");u.dequeue().animate(n,r.followSpeed,r.followEasing)}}).bind("resize."+f,function(){ft()});r.escClose&&s.bind("keydown."+f,function(n){27==n.which&&c()})}function ot(n){function t(t){u.css({display:"block",opacity:1}).animate(t,r.speed,r.easing,function(){st(n)})}switch(n?r.transition:r.transitionClose||r.transition){case"slideIn":t({left:n?l(!(!r.follow[0]&&p||e)):s.scrollLeft()-(tt||u.outerWidth(!0))-200});break;case"slideBack":t({left:n?l(!(!r.follow[0]&&p||e)):s.scrollLeft()+b+200});break;case"slideDown":t({top:n?a(!(!r.follow[1]&&y||e)):s.scrollTop()-(nt||u.outerHeight(!0))-200});break;case"slideUp":t({top:n?a(!(!r.follow[1]&&y||e)):s.scrollTop()+w+200});break;default:u.stop().fadeTo(r.speed,n?1:0,function(){st(n)})}}function st(n){n?(at(),v(i),r.autoClose&&(ct=setTimeout(c,r.autoClose))):(u.hide(),v(r.onClose),r.loadUrl&&(r.contentContainer.empty(),u.css({height:"auto",width:"auto"})))}function l(n){return n?g+s.scrollLeft():g}function a(n){return n?d+s.scrollTop():d}function v(t,i){n.isFunction(t)&&t.call(u,i)}function rt(){d=y?r.position[1]:Math.max(0,(w-u.outerHeight(!0))/2-r.amsl);g=p?r.position[0]:(b-u.outerWidth(!0))/2;o=ut()}function ut(){return{x:b>u.outerWidth(!0),y:w>u.outerHeight(!0)}}var r;n.isFunction(t)&&(i=t,t=null);r=n.extend({},n.fn.bPopup.defaults,t);r.scrollBar||n("html").css("overflow","hidden");var u=this,s=n(document),h=n(window),w=h.height(),b=h.width(),vt=/OS 6(_\d)+/i.test(navigator.userAgent),k=0,f,o,y,p,e,d,g,nt,tt,ht,ct;return u.close=function(){c()},u.reposition=function(n){ft(n)},u.each(function(){n(this).data("bPopup")||(v(r.onOpen),k=(h.data("bPopup")||0)+1,f="__b-popup"+k+"__",y="auto"!==r.position[1],p="auto"!==r.position[0],e="fixed"===r.positionStyle,nt=u.outerHeight(!0),tt=u.outerWidth(!0),r.loadUrl?lt():it())})};n.fn.bPopup.defaults={amsl:50,appending:!0,appendTo:"body",autoClose:!1,closeClass:"b-close",content:"ajax",contentContainer:!1,easing:"swing",escClose:!0,follow:[!0,!0],followEasing:"swing",followSpeed:500,iframeAttr:'scrolling="no" frameborder="0"',loadCallback:!1,loadData:!1,loadUrl:!1,modal:!0,modalClose:!0,modalColor:"#000",onClose:!1,onOpen:!1,opacity:.7,position:["auto","auto"],positionStyle:"absolute",scrollBar:!0,speed:250,transition:"fadeIn",transitionClose:!1,zIndex:9997}}(jQuery);$(document).ready(function(){$('div[data-tag="dynamiccomponent"]').each(function(){var t=$(this).data("host")?$(this).data("host"):location.origin,i=$(this).data("targetdiv")?$("#"+$(this).data("targetdiv")):$(this),n;$(this).data("datasourceid")&&(n=t+"/api/Sublayout/Render?datasourceid="+$(this).data("datasourceid"),$(this).data("language")&&(n+="&language="+$(this).data("language")),$.ajax({url:n,async:!1,success:function(n){n.success&&i.html(n.html)},error:function(){console.log("error while sending sublayout render request")}}))})});!function(n,t){"use strict";function f(r,f,e,o,s){function it(){ut=n.devicePixelRatio>1;rt(e);f.delay>=0&&setTimeout(function(){p(!0)},f.delay);(f.delay<0||f.combined)&&(o.e=lt(f.throttle,function(n){"resize"===n.type&&(w=b=-1);p(n.all)}),o.a=function(n){rt(n);e.push.apply(e,n)},o.g=function(){return e=i(e).filter(function(){return!i(this).data(f.loadedName)})},o.f=function(n){for(var i,t=0;t<n.length;t++)i=e.filter(n[t]),i.length&&p(!1,i)},p(),i(f.appendScroll).on("scroll."+s+" resize."+s,o.e))}function rt(n){var v=f.defaultImage,p=f.placeholder,k=f.imageBase,s=f.srcsetAttribute,c=f.loaderAttribute,a=f._f||{},e,w;for(n=i(n).filter(function(){var n=i(this),r=g(this);return!n.data(f.handledName)&&(n.attr(f.attribute)||n.attr(s)||n.attr(c)||a[r]!==t)}).data("plugin_"+f.name,r),e=0,w=n.length;e<w;e++){var u=i(n[e]),o=g(n[e]),b=u.attr(f.imageBaseAttribute)||k;o==l&&b&&u.attr(s)&&u.attr(s,ct(u.attr(s),b));a[o]===t||u.attr(c)||u.attr(c,a[o]);o==l&&v&&!u.attr(h)?u.attr(h,v):o==l||!p||u.css(y)&&"none"!=u.css(y)||u.css(y,"url('"+p+"')")}}function p(n,t){if(!e.length)return void(f.autoDestroy&&r.destroy());for(var s=t||e,w=!1,nt=f.imageBase||"",b=f.srcsetAttribute,c=f.handledName,o=0;o<s.length;o++)if(n||t||ot(s[o])){var u=i(s[o]),a=g(s[o]),v=u.attr(f.attribute),p=u.attr(f.imageBaseAttribute)||nt,d=u.attr(f.loaderAttribute);!u.data(c)&&(!f.visibleOnly||u.is(":visible"))&&((v||u.attr(b))&&(a==l&&(p+v!=u.attr(h)||u.attr(b)!=u.attr(k))||a!=l&&p+v!=u.css(y))||d)&&(w=!0,u.data(c,!0),et(u,a,p,d))}w&&(e=i(e).filter(function(){return!i(this).data(c)}))}function et(n,t,r,u){var o,s,e,w;++tt;o=function(){c("onError",n);nt();o=i.noop};c("beforeLoad",n);var b=f.attribute,g=f.srcsetAttribute,p=f.sizesAttribute,it=f.retinaAttribute,rt=f.removeAttribute,et=f.loadedName,ot=n.attr(it);if(u)s=function(){rt&&n.removeAttr(f.loaderAttribute);n.data(et,!0);c(ft,n);setTimeout(nt,1);s=i.noop},n.off(v).one(v,o).one(a,s),c(u,n,function(t){t?(n.off(a),s()):(n.off(v),o())})||n.trigger(v);else{e=i(new Image);e.one(v,o).one(a,function(){n.hide();t==l?n.attr(d,e.attr(d)).attr(k,e.attr(k)).attr(h,e.attr(h)):n.css(y,"url('"+e.attr(h)+"')");n[f.effect](f.effectTime);rt&&(n.removeAttr(b+" "+g+" "+it+" "+f.imageBaseAttribute),p!==d&&n.removeAttr(p));n.data(et,!0);c(ft,n);e.remove();nt()});w=(ut&&ot?ot:n.attr(b))||"";e.attr(d,n.attr(p)).attr(k,n.attr(g)).attr(h,w?r+w:null);e.complete&&e.trigger(a)}}function ot(n){var t=n.getBoundingClientRect(),r=f.scrollDirection,i=f.threshold,u=ht()+i>t.top&&-i<t.bottom,e=st()+i>t.left&&-i<t.right;return"vertical"==r?u:"horizontal"==r?e:u&&e}function st(){return w>=0?w:w=i(n).width()}function ht(){return b>=0?b:b=i(n).height()}function g(n){return n.tagName.toLowerCase()}function ct(n,t){var r,i,u;if(t)for(r=n.split(","),n="",i=0,u=r.length;i<u;i++)n+=t+r[i].trim()+(i!==u-1?",":"");return n}function lt(n,t){var i,u=0;return function(e,o){function s(){u=+new Date;t.call(r,e)}var h=+new Date-u;i&&clearTimeout(i);h>n||!f.enableThrottle||o?s():i=setTimeout(s,n-h)}}function nt(){--tt;e.length||tt||c("onFinishedAll")}function c(n){return!!(n=f[n])&&(n.apply(r,[].slice.call(arguments,1)),!0)}var tt=0,w=-1,b=-1,ut=!1,ft="afterLoad",a="load",v="error",l="img",h="src",k="srcset",d="sizes",y="background-image";"event"==f.bind||u?it():i(n).on(a+"."+s,it)}function r(r,u){var o=this,h=i.extend({},o.config,u),s={},c=h.name+"-"+ ++e;return o.config=function(n,i){return i===t?h[n]:(h[n]=i,o)},o.addItems=function(n){return s.a&&s.a("string"===i.type(n)?i(n):n),o},o.getItems=function(){return s.g?s.g():{}},o.update=function(n){return s.e&&s.e({},!n),o},o.force=function(n){return s.f&&s.f("string"===i.type(n)?i(n):n),o},o.loadAll=function(){return s.e&&s.e({all:!0},!0),o},o.destroy=function(){return i(h.appendScroll).off("."+c,s.e),i(n).off("."+c),s={},t},f(o,h,r,s,c),h.chainable?r:o}var i=n.jQuery||n.Zepto,e=0,u=!1;i.fn.Lazy=i.fn.lazy=function(n){return new r(this,n)};i.Lazy=i.lazy=function(n,u,f){var s,h;if(i.isFunction(u)&&(f=u,u=[]),i.isFunction(f)){n=i.isArray(n)?n:[n];u=i.isArray(u)?u:[u];for(var e=r.prototype.config,c=e._f||(e._f={}),o=0,l=n.length;o<l;o++)(e[n[o]]===t||i.isFunction(e[n[o]]))&&(e[n[o]]=f);for(s=0,h=u.length;s<h;s++)c[u[s]]=n[0]}};r.prototype.config={name:"lazy",chainable:!0,autoDestroy:!0,bind:"load",threshold:500,visibleOnly:!1,appendScroll:n,scrollDirection:"both",imageBase:null,defaultImage:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",placeholder:null,delay:-1,combined:!1,attribute:"data-src",srcsetAttribute:"data-srcset",sizesAttribute:"data-sizes",retinaAttribute:"data-retina",loaderAttribute:"data-loader",imageBaseAttribute:"data-imagebase",removeAttribute:!0,handledName:"handled",loadedName:"loaded",effect:"show",effectTime:0,enableThrottle:!0,throttle:250,beforeLoad:t,afterLoad:t,onError:t,onFinishedAll:t};i(n).on("load",function(){u=!0})}(window);!function(n){function t(t,i,r,u){n.ajax({url:i.attr("data-src"),type:u||"get",dataType:i.attr("data-type")||"html",success:function(n){i.html(n);r(!0);t.config("removeAttribute")&&i.removeAttr("data-src data-method data-type")},error:function(){r(!1)}})}n.lazy("ajax",function(n,i){t(this,n,i,n.attr("data-method"))});n.lazy("get",function(n,i){t(this,n,i,"get")});n.lazy("post",function(n,i){t(this,n,i,"post")})}(window.jQuery||window.Zepto),function(n){n.lazy(["av","audio","video"],["audio","video"],function(t,i){var f=t[0].tagName.toLowerCase();if("audio"==f||"video"==f){var r="data-src",u=t.find(r),e=t.find("data-track"),h=0,o=function(){++h==u.length&&i(!1)},s=function(){var t=n(this),u=t[0].tagName.toLowerCase(),f=t.prop("attributes"),i=n(u==r?"<source>":"<track>");u==r&&i.one("error",o);n.each(f,function(n,t){i.attr(t.name,t.value)});t.replaceWith(i)};t.one("loadedmetadata",function(){i(!0)}).off("load error").attr("poster",t.attr("data-poster"));u.length?u.each(s):t.attr(r)?(n.each(t.attr(r).split(","),function(i,r){var u=r.split("|");t.append(n("<source>").one("error",o).attr({src:u[0].trim(),type:u[1].trim()}))}),this.config("removeAttribute")&&t.removeAttr(r)):i(!1);e.length&&e.each(s)}else i(!1)})}(window.jQuery||window.Zepto),function(n){n.lazy(["frame","iframe"],"iframe",function(t,i){var f=this;if("iframe"==t[0].tagName.toLowerCase()){var r="data-src",u="data-error-detect",e=t.attr(u);"true"!=e&&"1"!=e?(t.attr("src",t.attr(r)),f.config("removeAttribute")&&t.removeAttr(r+" "+u)):n.ajax({url:t.attr(r),dataType:"html",crossDomain:!0,xhrFields:{withCredentials:!0},success:function(n){t.html(n).attr("src",t.attr(r));f.config("removeAttribute")&&t.removeAttr(r+" "+u)},error:function(){i(!1)}})}else i(!1)})}(window.jQuery||window.Zepto),function(n){n.lazy("noop",function(){});n.lazy("noop-success",function(n,t){t(!0)});n.lazy("noop-error",function(n,t){t(!1)})}(window.jQuery||window.Zepto),function(n){function t(t,i){var u=t.prop("attributes"),r=n("<"+i+">");return n.each(u,function(n,t){r.attr(t.name,t.value)}),t.replaceWith(r),r}function i(t,i,r){var u=n("<img>").one("load",function(){r(!0)}).one("error",function(){r(!1)}).appendTo(t).attr("src",i);u.complete&&u.load()}n.lazy(["pic","picture"],["picture"],function(r,u){var a=r[0].tagName.toLowerCase();if("picture"==a){var f="data-src",o="data-srcset",s="data-media",h="data-sizes",c="data-type",l=r.find(f),e=r.find("data-img");l.length?(l.each(function(){t(n(this),"source")}),1==e.length?(e=t(e,"img"),e.on("load",function(){u(!0)}).on("error",function(){u(!1)}),e.attr("src",e.attr(f)),this.config("removeAttribute")&&e.removeAttr(f)):r.attr(f)?(i(r,r.attr(f),u),this.config("removeAttribute")&&r.removeAttr(f)):u(!1)):r.attr(o)?(n("<source>").attr({media:r.attr(s),sizes:r.attr(h),type:r.attr(c),srcset:r.attr(o)}).appendTo(r),i(r,r.attr(f),u),this.config("removeAttribute")&&r.removeAttr(f+" "+o+" "+s+" "+h+" "+c)):u(!1)}else u(!1)})}(window.jQuery||window.Zepto),function(n){n.lazy(["js","javascript","script"],"script",function(n,t){"script"==n[0].tagName.toLowerCase()?(n.attr("src",n.attr("data-src")),this.config("removeAttribute")&&n.removeAttr("data-src")):t(!1)})}(window.jQuery||window.Zepto),function(n){n.lazy("vimeo",function(n,t){"iframe"==n[0].tagName.toLowerCase()?(n.attr("src","https://player.vimeo.com/video/"+n.attr("data-src")),this.config("removeAttribute")&&n.removeAttr("data-src")):t(!1)})}(window.jQuery||window.Zepto),function(n){n.lazy(["yt","youtube"],function(n,t){"iframe"==n[0].tagName.toLowerCase()?(n.attr("src","https://www.youtube.com/embed/"+n.attr("data-src")+"?rel=0&amp;showinfo=0"),this.config("removeAttribute")&&n.removeAttr("data-src")):t(!1)})}(window.jQuery||window.Zepto),function(n){"use strict";var t={item:3,autoWidth:!1,slideMove:1,slideMargin:10,addClass:"",mode:"slide",useCSS:!0,cssEasing:"ease",easing:"linear",speed:400,auto:!1,pauseOnHover:!1,loop:!1,slideEndAnimation:!0,pause:2e3,keyPress:!1,controls:!0,prevHtml:"",nextHtml:"",rtl:!1,adaptiveHeight:!1,vertical:!1,verticalHeight:500,vThumbWidth:100,thumbItem:10,pager:!0,gallery:!1,galleryMargin:5,thumbMargin:5,currentPagerPosition:"middle",enableTouch:!0,enableDrag:!0,freeMove:!0,swipeThreshold:40,responsive:[],onBeforeStart:function(){},onSliderLoad:function(){},onBeforeSlide:function(){},onAfterSlide:function(){},onBeforeNextSlide:function(){},onBeforePrevSlide:function(){}};n.fn.lightSlider=function(i){if(this.length===0)return this;if(this.length>1)return this.each(function(){n(this).lightSlider(i)}),this;var a={},r=n.extend(!0,{},t,i),p={},u=this;a.$el=this;r.mode==="fade"&&(r.vertical=!1);var o=u.children(),g=n(window).width(),ut=null,b=null,w=0,c=0,nt=!1,s=0,f="",e=0,tt=r.vertical===!0?"height":"width",it=r.vertical===!0?"margin-bottom":"margin-right",l=0,d=0,y=0,k=0,v=null,rt="ontouchstart"in document.documentElement,h={};h.chbreakpoint=function(){var f,i,t,u;if(g=n(window).width(),r.responsive.length){if(r.autoWidth===!1&&(f=r.item),g<r.responsive[0].breakpoint)for(i=0;i<r.responsive.length;i++)g<r.responsive[i].breakpoint&&(ut=r.responsive[i].breakpoint,b=r.responsive[i]);if(typeof b!="undefined"&&b!==null)for(t in b.settings)b.settings.hasOwnProperty(t)&&((typeof p[t]=="undefined"||p[t]===null)&&(p[t]=r[t]),r[t]=b.settings[t]);if(!n.isEmptyObject(p)&&g>r.responsive[0].breakpoint)for(u in p)p.hasOwnProperty(u)&&(r[u]=p[u]);r.autoWidth===!1&&l>0&&y>0&&f!==r.item&&(e=Math.round(l/((y+r.slideMargin)*r.slideMove)))}};h.calSW=function(){r.autoWidth===!1&&(y=(s-(r.item*r.slideMargin-r.slideMargin))/r.item)};h.calWidth=function(n){var i=n===!0?f.find(".lslide").length:o.length,t;if(r.autoWidth===!1)c=i*(y+r.slideMargin);else for(c=0,t=0;t<i;t++)c+=parseInt(o.eq(t).width())+r.slideMargin;return c};a={doCss:function(){var n=function(){for(var t=["transition","MozTransition","WebkitTransition","OTransition","msTransition","KhtmlTransition"],i=document.documentElement,n=0;n<t.length;n++)if(t[n]in i.style)return!0};return r.useCSS&&n()?!0:!1},keyPress:function(){if(r.keyPress)n(document).on("keyup.lightslider",function(t){n(":focus").is("input, textarea")||(t.preventDefault?t.preventDefault():t.returnValue=!1,t.keyCode===37?u.goToPrevSlide():t.keyCode===39&&u.goToNextSlide())})},controls:function(){if(r.controls){u.after('<div class="lSAction"><a class="lSPrev">'+r.prevHtml+'<\/a><a class="lSNext">'+r.nextHtml+"<\/a><\/div>");r.autoWidth?h.calWidth(!1)<s&&f.find(".lSAction").hide():w<=r.item&&f.find(".lSAction").hide();f.find(".lSAction a").on("click",function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,n(this).attr("class")==="lSPrev"?u.goToPrevSlide():u.goToNextSlide(),!1})}},initialStyle:function(){var n=this;r.mode==="fade"&&(r.autoWidth=!1,r.slideEndAnimation=!1);r.auto&&(r.slideEndAnimation=!1);r.autoWidth&&(r.slideMove=1,r.item=1);r.loop&&(r.slideMove=1,r.freeMove=!1);r.onBeforeStart.call(this,u);h.chbreakpoint();u.addClass("lightSlider").wrap('<div class="lSSlideOuter '+r.addClass+'"><div class="lSSlideWrapper"><\/div><\/div>');f=u.parent(".lSSlideWrapper");r.rtl===!0&&f.parent().addClass("lSrtl");r.vertical?(f.parent().addClass("vertical"),s=r.verticalHeight,f.css("height",s+"px")):s=u.outerWidth();o.addClass("lslide");r.loop===!0&&r.mode==="slide"&&(h.calSW(),h.clone=function(){var v,y,i,t,f,c,l,a;if(h.calWidth(!0)>s){for(v=0,y=0,i=0;i<o.length;i++)if(v+=parseInt(u.find(".lslide").eq(i).width())+r.slideMargin,y++,v>=s+r.slideMargin)break;if(t=r.autoWidth===!0?y:r.item,t<u.find(".clone.left").length)for(f=0;f<u.find(".clone.left").length-t;f++)o.eq(f).remove();if(t<u.find(".clone.right").length)for(c=o.length-1;c>o.length-1-u.find(".clone.right").length;c--)e--,o.eq(c).remove();for(l=u.find(".clone.right").length;l<t;l++)u.find(".lslide").eq(l).clone().removeClass("lslide").addClass("clone right").appendTo(u),e++;for(a=u.find(".lslide").length-u.find(".clone.left").length;a>u.find(".lslide").length-t;a--)u.find(".lslide").eq(a-1).clone().removeClass("lslide").addClass("clone left").prependTo(u);o=u.children()}else o.hasClass("clone")&&(u.find(".clone").remove(),n.move(u,0))},h.clone());h.sSW=function(){w=o.length;r.rtl===!0&&r.vertical===!1&&(it="margin-left");r.autoWidth===!1&&o.css(tt,y+"px");o.css(it,r.slideMargin+"px");c=h.calWidth(!1);u.css(tt,c+"px");r.loop===!0&&r.mode==="slide"&&nt===!1&&(e=u.find(".clone.left").length)};h.calL=function(){o=u.children();w=o.length};this.doCss()&&f.addClass("usingCss");h.calL();r.mode==="slide"?(h.calSW(),h.sSW(),r.loop===!0&&(l=n.slideValue(),this.move(u,l)),r.vertical===!1&&this.setHeight(u,!1)):(this.setHeight(u,!0),u.addClass("lSFade"),this.doCss()||(o.fadeOut(0),o.eq(e).fadeIn(0)));r.loop===!0&&r.mode==="slide"?o.eq(e).addClass("active"):o.first().addClass("active")},pager:function(){var i=this,n,t;h.createPager=function(){var v,l,t,o;k=(s-(r.thumbItem*r.thumbMargin-r.thumbMargin))/r.thumbItem;for(var p=f.find(".lslide"),w=f.find(".lslide").length,n=0,h="",a=0,n=0;n<w;n++)if(r.mode==="slide"&&(r.autoWidth?a+=(parseInt(p.eq(n).width())+r.slideMargin)*r.slideMove:a=n*(y+r.slideMargin)*r.slideMove),v=p.eq(n*r.slideMove).attr("data-thumb"),h+=r.gallery===!0?'<li style="width:100%;'+tt+":"+k+"px;"+it+":"+r.thumbMargin+'px"><img src="'+v+'" /><\/li>':'<li><a href="#">'+(n+1)+"<\/a><\/li>",r.mode==="slide"&&a>=c-s-r.slideMargin){n=n+1;l=2;r.autoWidth&&(h+='<li><a href="#">'+(n+1)+"<\/a><\/li>",l=1);n<l?(h=null,f.parent().addClass("noPager")):f.parent().removeClass("noPager");break}t=f.parent();t.find(".lSPager").html(h);r.gallery===!0&&(r.vertical===!0&&t.find(".lSPager").css("width",r.vThumbWidth+"px"),d=n*(r.thumbMargin+k)+.5,t.find(".lSPager").css({property:d+"px","transition-duration":r.speed+"ms"}),r.vertical===!0&&f.parent().css("padding-right",r.vThumbWidth+r.galleryMargin+"px"),t.find(".lSPager").css(tt,d+"px"));o=t.find(".lSPager").find("li");o.first().addClass("active");o.on("click",function(){return e=r.loop===!0&&r.mode==="slide"?e+(o.index(this)-t.find(".lSPager").find("li.active").index()):o.index(this),u.mode(!1),r.gallery===!0&&i.slideThumb(),!1})};r.pager&&(n="lSpg",r.gallery&&(n="lSGallery"),f.after('<ul class="lSPager '+n+'"><\/ul>'),t=r.vertical?"margin-left":"margin-top",f.parent().find(".lSPager").css(t,r.galleryMargin+"px"),h.createPager());setTimeout(function(){h.init()},0)},setHeight:function(n,t){var i=null,f=this,u;i=r.loop?n.children(".lslide ").first():n.children().first();u=function(){var r=i.outerHeight(),u=0,f=r;t&&(r=0,u=f*100/s);n.css({height:r+"px","padding-bottom":u+"%"})};u();i.find("img").length?i.find("img")[0].complete?(u(),v||f.auto()):i.find("img").load(function(){setTimeout(function(){u();v||f.auto()},100)}):v||f.auto()},active:function(n,t){var i,o,s;this.doCss()&&r.mode==="fade"&&f.addClass("on");i=0;e*r.slideMove<w?(n.removeClass("active"),this.doCss()||r.mode!=="fade"||t!==!1||n.fadeOut(r.speed),i=t===!0?e:e*r.slideMove,t===!0&&(o=n.length,s=o-1,i+1>=o&&(i=s)),r.loop===!0&&r.mode==="slide"&&(i=t===!0?e-u.find(".clone.left").length:e*r.slideMove,t===!0&&(o=n.length,s=o-1,i+1===o?i=s:i+1>o&&(i=0))),this.doCss()||r.mode!=="fade"||t!==!1||n.eq(i).fadeIn(r.speed),n.eq(i).addClass("active")):(n.removeClass("active"),n.eq(n.length-1).addClass("active"),this.doCss()||r.mode!=="fade"||t!==!1||(n.fadeOut(r.speed),n.eq(i).fadeIn(r.speed)))},move:function(n,t){r.rtl===!0&&(t=-t);this.doCss()?r.vertical===!0?n.css({transform:"translate3d(0px, "+-t+"px, 0px)","-webkit-transform":"translate3d(0px, "+-t+"px, 0px)"}):n.css({transform:"translate3d("+-t+"px, 0px, 0px)","-webkit-transform":"translate3d("+-t+"px, 0px, 0px)"}):r.vertical===!0?n.css("position","relative").animate({top:-t+"px"},r.speed,r.easing):n.css("position","relative").animate({left:-t+"px"},r.speed,r.easing);var i=f.parent().find(".lSPager").find("li");this.active(i,!0)},fade:function(){this.active(o,!1);var n=f.parent().find(".lSPager").find("li");this.active(n,!0)},slide:function(){var n=this;h.calSlide=function(){c>s&&(l=n.slideValue(),n.active(o,!1),l>c-s-r.slideMargin?l=c-s-r.slideMargin:l<0&&(l=0),n.move(u,l),r.loop===!0&&r.mode==="slide"&&(e>=w-u.find(".clone.left").length/r.slideMove&&n.resetSlide(u.find(".clone.left").length),e===0&&n.resetSlide(f.find(".lslide").length)))};h.calSlide()},resetSlide:function(n){var t=this;f.find(".lSAction a").addClass("disabled");setTimeout(function(){e=n;f.css("transition-duration","0ms");l=t.slideValue();t.active(o,!1);a.move(u,l);setTimeout(function(){f.css("transition-duration",r.speed+"ms");f.find(".lSAction a").removeClass("disabled")},50)},r.speed+100)},slideValue:function(){var n=0,t;if(r.autoWidth===!1)n=e*(y+r.slideMargin)*r.slideMove;else for(n=0,t=0;t<e;t++)n+=parseInt(o.eq(t).width())+r.slideMargin;return n},slideThumb:function(){var i,n,o,t;switch(r.currentPagerPosition){case"left":i=0;break;case"middle":i=s/2-k/2;break;case"right":i=s-k}n=e-u.find(".clone.left").length;o=f.parent().find(".lSPager");r.mode==="slide"&&r.loop===!0&&(n>=o.children().length?n=0:n<0&&(n=o.children().length));t=n*(k+r.thumbMargin)-i;t+s>d&&(t=d-s-r.thumbMargin);t<0&&(t=0);this.move(o,t)},auto:function(){r.auto&&(clearInterval(v),v=setInterval(function(){u.goToNextSlide()},r.pause))},pauseOnHover:function(){var t=this;if(r.auto&&r.pauseOnHover){f.on("mouseenter",function(){n(this).addClass("ls-hover");u.pause();r.auto=!0});f.on("mouseleave",function(){n(this).removeClass("ls-hover");f.find(".lightSlider").hasClass("lsGrabbing")||t.auto()})}},touchMove:function(n,t){var o,i,e;f.css("transition-duration","0ms");r.mode==="slide"&&(o=n-t,i=l-o,i>=c-s-r.slideMargin?r.freeMove===!1?i=c-s-r.slideMargin:(e=c-s-r.slideMargin,i=e+(i-e)/5):i<0&&(i=r.freeMove===!1?0:i/5),this.move(u,i))},touchEnd:function(n){var i,t,h;f.css("transition-duration",r.speed+"ms");r.mode==="slide"?(i=!1,t=!0,l=l-n,l>c-s-r.slideMargin?(l=c-s-r.slideMargin,r.autoWidth===!1&&(i=!0)):l<0&&(l=0),h=function(n){var u=0,f,h,t;if(i||n&&(u=1),r.autoWidth){for(h=0,t=0;t<o.length;t++)if(h+=parseInt(o.eq(t).width())+r.slideMargin,e=t+u,h>=l)break}else f=l/((y+r.slideMargin)*r.slideMove),e=parseInt(f)+u,l>=c-s-r.slideMargin&&f%1!=0&&e++},n>=r.swipeThreshold?(h(!1),t=!1):n<=-r.swipeThreshold&&(h(!0),t=!1),u.mode(t),this.slideThumb()):n>=r.swipeThreshold?u.goToPrevSlide():n<=-r.swipeThreshold&&u.goToNextSlide()},enableDrag:function(){var e=this;if(!rt){var u=0,t=0,i=!1;f.find(".lightSlider").addClass("lsGrab");f.on("mousedown",function(t){if(c<s&&c!==0)return!1;n(t.target).attr("class")!=="lSPrev"&&n(t.target).attr("class")!=="lSNext"&&(u=r.vertical===!0?t.pageY:t.pageX,i=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,f.scrollLeft+=1,f.scrollLeft-=1,f.find(".lightSlider").removeClass("lsGrab").addClass("lsGrabbing"),clearInterval(v))});n(window).on("mousemove",function(n){i&&(t=r.vertical===!0?n.pageY:n.pageX,e.touchMove(t,u))});n(window).on("mouseup",function(o){if(i){f.find(".lightSlider").removeClass("lsGrabbing").addClass("lsGrab");i=!1;t=r.vertical===!0?o.pageY:o.pageX;var s=t-u;if(Math.abs(s)>=r.swipeThreshold)n(window).on("click.ls",function(t){t.preventDefault?t.preventDefault():t.returnValue=!1;t.stopImmediatePropagation();t.stopPropagation();n(window).off("click.ls")});e.touchEnd(s)}})}},enableTouch:function(){var i=this,n,t;if(rt){n={};t={};f.on("touchstart",function(i){t=i.originalEvent.targetTouches[0];n.pageX=i.originalEvent.targetTouches[0].pageX;n.pageY=i.originalEvent.targetTouches[0].pageY;clearInterval(v)});f.on("touchmove",function(u){var o,f,e;if(c<s&&c!==0)return!1;o=u.originalEvent;t=o.targetTouches[0];f=Math.abs(t.pageX-n.pageX);e=Math.abs(t.pageY-n.pageY);r.vertical===!0?(e*3>f&&u.preventDefault(),i.touchMove(t.pageY,n.pageY)):(f*3>e&&u.preventDefault(),i.touchMove(t.pageX,n.pageX))});f.on("touchend",function(){if(c<s&&c!==0)return!1;var u;u=r.vertical===!0?t.pageY-n.pageY:t.pageX-n.pageX;i.touchEnd(u)})}},build:function(){var t=this;t.initialStyle();this.doCss()&&(r.enableTouch===!0&&t.enableTouch(),r.enableDrag===!0&&t.enableDrag());n(window).on("focus",function(){t.auto()});n(window).on("blur",function(){clearInterval(v)});t.pager();t.pauseOnHover();t.controls();t.keyPress()}};a.build();h.init=function(){h.chbreakpoint();r.vertical===!0?(s=r.item>1?r.verticalHeight:o.outerHeight(),f.css("height",s+"px")):s=f.outerWidth();r.loop===!0&&r.mode==="slide"&&h.clone();h.calL();r.mode==="slide"&&u.removeClass("lSSlide");r.mode==="slide"&&(h.calSW(),h.sSW());setTimeout(function(){r.mode==="slide"&&u.addClass("lSSlide")},1e3);r.pager&&h.createPager();r.adaptiveHeight===!0&&r.vertical===!1&&u.css("height",o.eq(e).outerHeight(!0));r.adaptiveHeight===!1&&(r.mode==="slide"?r.vertical===!1?a.setHeight(u,!1):a.auto():a.setHeight(u,!0));r.gallery===!0&&a.slideThumb();r.mode==="slide"&&a.slide();r.autoWidth===!1?o.length<=r.item?f.find(".lSAction").hide():f.find(".lSAction").show():h.calWidth(!1)<s&&c!==0?f.find(".lSAction").hide():f.find(".lSAction").show()};u.goToPrevSlide=function(){if(e>0)r.onBeforePrevSlide.call(this,u,e),e--,u.mode(!1),r.gallery===!0&&a.slideThumb();else if(r.loop===!0){if(r.onBeforePrevSlide.call(this,u,e),r.mode==="fade"){var n=w-1;e=parseInt(n/r.slideMove)}u.mode(!1);r.gallery===!0&&a.slideThumb()}else r.slideEndAnimation===!0&&(u.addClass("leftEnd"),setTimeout(function(){u.removeClass("leftEnd")},400))};u.goToNextSlide=function(){var n=!0,t;r.mode==="slide"&&(t=a.slideValue(),n=t<c-s-r.slideMargin);e*r.slideMove<w-r.slideMove&&n?(r.onBeforeNextSlide.call(this,u,e),e++,u.mode(!1),r.gallery===!0&&a.slideThumb()):r.loop===!0?(r.onBeforeNextSlide.call(this,u,e),e=0,u.mode(!1),r.gallery===!0&&a.slideThumb()):r.slideEndAnimation===!0&&(u.addClass("rightEnd"),setTimeout(function(){u.removeClass("rightEnd")},400))};u.mode=function(n){r.adaptiveHeight===!0&&r.vertical===!1&&u.css("height",o.eq(e).outerHeight(!0));nt===!1&&(r.mode==="slide"?a.doCss()&&(u.addClass("lSSlide"),r.speed!==""&&f.css("transition-duration",r.speed+"ms"),r.cssEasing!==""&&f.css("transition-timing-function",r.cssEasing)):a.doCss()&&(r.speed!==""&&u.css("transition-duration",r.speed+"ms"),r.cssEasing!==""&&u.css("transition-timing-function",r.cssEasing)));n||r.onBeforeSlide.call(this,u,e);r.mode==="slide"?a.slide():a.fade();f.hasClass("ls-hover")||a.auto();setTimeout(function(){n||r.onAfterSlide.call(this,u,e)},r.speed);nt=!0};u.play=function(){u.goToNextSlide();r.auto=!0;a.auto()};u.pause=function(){r.auto=!1;clearInterval(v)};u.refresh=function(){h.init()};u.getCurrentSlideCount=function(){var i=e,t,n;return r.loop&&(t=f.find(".lslide").length,n=u.find(".clone.left").length,i=e<=n-1?t+(e-n):e>=t+n?e-t-n:e-n),i+1};u.getTotalSlideCount=function(){return f.find(".lslide").length};u.goToSlide=function(n){e=r.loop?n+u.find(".clone.left").length-1:n;u.mode(!1);r.gallery===!0&&a.slideThumb()};u.destroy=function(){u.lightSlider&&(u.goToPrevSlide=function(){},u.goToNextSlide=function(){},u.mode=function(){},u.play=function(){},u.pause=function(){},u.refresh=function(){},u.getCurrentSlideCount=function(){},u.getTotalSlideCount=function(){},u.goToSlide=function(){},u.lightSlider=null,h={init:function(){}},u.parent().parent().find(".lSAction, .lSPager").remove(),u.removeClass("lightSlider lSFade lSSlide lsGrab lsGrabbing leftEnd right").removeAttr("style").unwrap().unwrap(),u.children().removeAttr("style"),o.removeClass("lslide active"),u.find(".clone").remove(),o=null,v=null,nt=!1,e=0)};setTimeout(function(){r.onSliderLoad.call(this,u)},10);n(window).on("resize orientationchange",function(n){setTimeout(function(){n.preventDefault?n.preventDefault():n.returnValue=!1;h.init()},200)});return this}}(jQuery);checkChina=$("body").attr("data-chineseinstance");isDSFMap=$(".dubai-dsf-map").length>0;DTCM.Extend("is",{mobile:function(){return $(window).width()<=580},mobileBrowser:function(){return navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)},mobileResize:function(){return window.PrevWindowWidth?window.PrevWindowWidth!=$(window).width()?(window.PrevWindowWidth=$(window).width(),!0):void 0:(window.PrevWindowWidth=$(window).width(),!1)},number:function(n){return(typeof n).toLowerCase()==="number"},charKeyStroke:function(n){return n.keyCode?n=n.keyCode:n.which&&(n=n.which),DTCM.is.number(n)&&n>=48&&n<=90},enterChar:function(n){return n.keyCode?n=n.keyCode:n.which&&(n=n.which),n==13},nullOrEmpty:function(n){return n===null||n===""},BrowserDetect:{init:function(){this.browser=this.searchString(this.dataBrowser)||"Other";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"Unknown"},searchString:function(n){for(var i,t=0;t<n.length;t++)if(i=n[t].string,this.versionSearchString=n[t].subString,i.indexOf(n[t].subString)!=-1)return n[t].identity},searchVersion:function(n){var t=n.indexOf(this.versionSearchString);if(t!=-1)return parseFloat(n.substring(t+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.userAgent,subString:"Safari",identity:"Safari"},{string:navigator.userAgent,subString:"Opera",identity:"Opera"}]}});DTCM.is.BrowserDetect.init();DTCM.Extend("Proxy",{_methods:[],find:function(n){for(var t in this._methods)if(this._methods[t].name&&this._methods[t].name==n)return this._methods[t];return!1},add:function(n,t){n&&t&&t!=""&&this._methods.push({name:t,method:n})},exec:function(n,t){if(!n||n.length<=0)return!1;var i=this.find(n),r=1;i&&(t?r=2:t=window,i.method.call(t,[].slice.call(r,arguments)))}});DTCM.Extend("Array",{Find:function(n,t){if(typeof[].indexOf=="function")return n.indexOf(t);var i=-1;return this.forEach(n,function(n,r){n==t&&(i=r)}),i},forEach:function(n,t){if(typeof[].forEach=="function")n.forEach(t);else for(var i=0,r=n.length;i<r;i++)t(n[i],i)}});DTCM.Extend("ScrollToFilters",{init:function(){$(document).on("click",".filter-anchor",function(n){n.preventDefault();$("body, html").animate({scrollTop:$($(this).attr("href")).offset().top-$(".main_nav").height()})})}}),function(){DTCM.ScrollToFilters.init()}(jQuery);DTCM.Extend("Translate",{Dictionary:[],isLoaded:!1,init:function(){$.getJSON(serverURL+"/handlers/jstranslations.ashx",function(n){for(var t=0;t<n.length;t++)DTCM.Translate.Dictionary.push(n[t])}).fail(function(){console.log("error")}).always(function(){DTCM.Translate.isLoaded=!0})},GetValue:function(n,t){var u,i,r;for(t.split("-").length>1&&(t=t.split("-")[0]),u=n,i=0;i<DTCM.Translate.Dictionary.length;i++)if(DTCM.Translate.Dictionary[i].DictKey.toLowerCase()==n.toLowerCase())for(r=0;r<DTCM.Translate.Dictionary[i].DictValues.length;r++)DTCM.Translate.Dictionary[i].DictValues[r].Lang.toLowerCase()==t.toLowerCase()&&(u=DTCM.Translate.Dictionary[i].DictValues[r].DictValue);return u}});DTCM.Extend("exec",function(n,t,i,r){if(n)return!i&&!r?setTimeout(n,t?t:0):i&&r?(window[i]&&clearTimeout(window[i]),window[i]=setTimeout(n,t),window[i]):void 0});DTCM.Extend("Tooltip",function(n){var t=this;this.html='<div id="tooltip-html" class="tooltip-body"><div class="tooltip-box"><div class="tooltip-content"><span id="tt-content"><\/span><\/div><div class="tooltip-arrow"><\/div><\/div><\/div>';$("#tooltip-html").length<=0&&$("body").append(this.html);this.delay=null;this.visible=!1;this.tooltip=$("#tooltip-html");$(document).on("mousemove",n,function(){var n=$(this);clearTimeout(t.delay);t.delay=setTimeout(function(){t.visible=!0;var i=n.data("tooltip-content"),r=n.offset().top,u=n.offset().left,f=n.width();t.position(r,u,f);t.fill(i)},1)});$(document).on("mouseleave",n,function(){clearTimeout(t.delay);t.delay=setTimeout(function(){t.fade()},50)});$(window).on("scroll",function(){t.visible&&t.fade()});return this.setText=function(n){this.tooltipText=n},this.position=function(n,t,i){var r=t+i-Math.min(i/3,10),u=n-30;this.tooltip.css({top:u,left:r}).fadeIn(150)},this.fill=function(n){this.tooltipText&&(n=this.tooltipText);this.tooltip.find("#tt-content").text(n)},this.fade=function(){this.tooltip.fadeOut(150);this.visible=!1},this.tooltip.fadeOut(1),this});DTCM.Extend("NextInDOM",function(n,t){function u(n,t){for(var u=i(t),f;u.length!=0;){if(f=r(n,u),f!=null)return f;u=i(u)}return null}function i(n){return n[0].tagName.toLowerCase()=="body"?[]:n.next().length>0?n.next():i(n.parent())}function r(n,t){if(t.is(n))return t;var i=null;return t.children().each(function(){return i=r(n,$(this)),i!=null?!1:void 0}),i}return n&&t?u(n,t):!1});DTCM.Extend("PhotoGallery",{fixPhotoGallery:function(){var n=this;try{$(".photo-gallery-container").masonry("destroy").masonry({itemSelector:".gallery-item"})}catch(t){setTimeout(n.fixPhotoGallery,1e3)}}});DTCM.Extend("MQ",{init:function(){enquire.register("screen and (max-width: 469px)",{match:function(){clearRows();$('.tout:not(".hidden"):nth-child(1n+1)').addClass("last");$(".tout:visible:last-child").hasClass("last")||$(".tout:visible:last-child").addClass("last")},unmatch:function(){unmatchResets()}}).register("screen and (max-width: 704px)",{match:function(){clearRows()},unmatch:function(){unmatchResets()}}).register("screen and (min-width: 469px) and (max-width: 704px)",{match:function(){clearRows();$('.tout:not(".hidden"):nth-child(2n+2)').addClass("last");$(".tout:visible:last-child").hasClass("last")||$(".tout:visible:last-child").addClass("last")},unmatch:function(){unmatchResets()}}).register("screen and (min-width: 704px) and (max-width: 939px)",{match:function(){clearRows();hideTiles();$('.tout:not(".hidden"):nth-child(3n+3)').addClass("last");$(".tout:visible:last-child").hasClass("last")||$(".tout:visible:last-child").addClass("last");$(".mobile_menu").show()},unmatch:function(){unmatchResets();$(".mobile_menu").hide()}}).register("screen and (min-width: 939px)",{match:function(){clearRows();$('.tout:not(".hidden"):nth-child(4n+4)').addClass("last");$(".tout:visible:last-child").hasClass("last")||$(".tout:visible:last-child").addClass("last")},unmatch:function(){unmatchResets()}})},check:function(){var n=$(window).width();clearRows();n>=939?(clearRows(),$('.tout:visible:not(".hidden")').length>4&&every($('.tout:visible:not(".hidden")'),4,function(n){n.addClass("last")}),$(".tout:visible:eq(-1)").hasClass("last")||$(".tout:visible:eq(-1)").addClass("last")):n>704&&n<939?(clearRows(),hideTiles(),$('.tout:visible:not(".hidden")').length>3&&$('.tout:visible:not(".hidden"):nth-child(3n+3)').addClass("last"),$(".tout:visible:eq(-1)").hasClass("last")||$(".tout:visible:eq(-1)").addClass("last")):n>469&&n<=704?(clearRows(),$('.tout:visible:not(".hidden")').length>2&&$('.tout:visible:not(".hidden"):nth-child(2n+2)').addClass("last"),$(".tout:visible:eq(-1)").hasClass("last")||$(".tout:visible:eq(-1)").addClass("last")):n<=469&&(clearRows(),$('.tout:visible:not(".hidden")').length>1&&$('.tout:visible:not(".hidden"):nth-child(1n+1)').addClass("last"),$(".tout:visible:eq(-1)").hasClass("last")||$(".tout:visible:eq(-1)").addClass("last"))}});DTCM.Extend("Page",{goToTop:function(){$("body, html").animate({scrollTop:0},300)}});DTCM.Extend("SlideDownItem",function(n,t,i){if(n&&t){var r=this;this.trigger=$(n);this.content=this.trigger.find(t);this.label=this.trigger.find(".filter-selected");this.content.length<=0&&(this.content=i?this.trigger.parents(i).eq(0).find(t):DTCM.NextInDOM(t,this.trigger));this.showItem=function(n){var n=n||300;return this.content.slideDown(n,function(){r.trigger.data("menu-state","open")}),this};this.hideItem=function(){var n=n||300;return this.content.slideUp(n,function(){r.trigger.data("menu-state","close")}),this};this.selectItem=function(n){this.label.text(n.text())};this.trigger.on("click",function(){$(this).data("menu-state")=="open"?r.hideItem():r.showItem()});this.content.find("li").on("click",function(){r.selectItem($(this))});return this.hideItem(),this}});DTCM.Extend("SlideDown",{selector:"[data-slidedown]",items:[],init:function(n){return this.selector=n||this.selector,this.items=$(this.selector),this.items.each(function(){$(this).data("SlideDown")||$(this).data("SlideDown",new DTCM.SlideDownItem($(this),$(this).data("slidedown")))}),this}});DTCM.Extend("Modal",{selector:"[data-modal]",overlay:"dtcm-modal-overlay",modal:"dtcm-modal",current:null,closeButton:"[data-modal-close]",init:function(){var n=this;$("#"+this.overlay).length<=0&&$("form").children().eq(0).before('<div id="'+this.overlay+'" />');this.overlay=$("#"+this.overlay);$("#"+this.modal).length<=0&&this.overlay.after('<div id="'+this.modal+'" />');this.modal=$("#"+this.modal);this.overlay.on("click",function(){n.hide()});$(document).on("click",this.closeButton,function(){n.hide()});$(document).on("click",this.selector,function(t){if($(this).data("modal").length>0){t.preventDefault();t.stopPropagation();var i=$(this).data("modal"),r=$(this).attr("data-modal-onclose"),u=$(this).attr("data-modal-onopen");n.onClose=r&&window[r]&&typeof window[r]=="function"?window[r]:function(){};n.onOpen=u&&window[u]&&typeof window[u]=="function"?window[u]:function(){};i.charAt(0)=="#"||i.charAt(0)=="."?i.indexOf("modal-reset-password")>-1&&DTCM.is.mobile()?n.accountPage.show():(n.show($(i)),i.indexOf("modal-reset-password")>-1&&DTCM.Page.goToTop()):n.modal.data("modal-url")&&n.modal.data("modal-url")==i?n.show(n.modal):n.loadContent(i)}})},accountPage:{show:function(){var n=this;$(".mobile-find-account").addClass("active");$(".mobile-find-account").find("[data-modal-close]").off("click").on("click",function(){n.hide()});DTCM.Page.goToTop();DTCM.is.mobileBrowser()&&($(".main_nav_container").css("top",$(".signup_nav").height()-1),$(".main_nav_container, .mobile_nav").data("top",$(".signup_nav").height()))},hide:function(){$(".mobile-find-account").removeClass("active");DTCM.is.mobileBrowser()&&($(".main_nav_container").css("top",$(".signup_nav").height())-1,$(".main_nav_container, .mobile_nav").data("top",$(".signup_nav").height()))}},loadContent:function(n){var t=this;$.ajax({url:n,method:"GET",success:function(i){t.modal.data("modal-url",n).html(i);t.show()},error:function(){}})},show:function(n){try{this.current=n;this.overlay.before(this.current);this.onOpen.apply(this.current);this.current.show();this.overlay.show()}catch(t){}},hide:function(){try{this.current.hide();this.overlay.hide();this.onClose.apply(this.current)}catch(n){}}});DTCM.Extend("Counter",{selector:"[data-counter-for]",limit:1e3,init:function(){var n=this;return this.items=$(this.selector),this.items.each(function(){var i=$(this),t=$(i.data("counter-for")),r=i.data("counter-limit")||i.attr("maxlength")||n.limit;if(Modernizr.touch)t.on("keyup",function(){t.val(t.val().substr(0,r));i.text(r-t.val().length)});else t.on("keydown keyup",function(){t.val(t.val().substr(0,r));i.text(r-t.val().length)}).trigger("keydown").trigger("blur")}),this}});DTCM.Extend("VideoTile",{selector:"[data-video-item]",container:".video-tile",init:function(){var n=this;this.tiles=$(this.selector)}});DTCM.Extend("ViewSwitcher",{selectors:{views:"[data-view-item]",container:"[data-switch-container]",defaultSwitch:"[data-switch-default]",callback:"[data-switch-callback]",triggers:{switchTriggers:"[data-switch-view]",showTriggers:"[data-show-view]",hideTriggers:"[data-hide-view]"}},map:{},strip:function(n){return n.replace(/\[/g,"").replace(/\]/g,"")},init:function(){var n=this;$(document).on("click",this.selectors.triggers.switchTriggers,function(t){var u;t.preventDefault();t.stopPropagation();var f=$(this).attr(n.strip(n.selectors.triggers.switchTriggers)).split("|"),i=f[0],e=f[1],u=!1,r="n";(i=="map"||i=="list")&&(DTCM.CalendarControl.view=i);i=="map"&&(r="y");i=="list"&&(r="n");$("#IsMapVisible").val(r);$(".search-result-page a").length>0&&$(".search-result-page a").each(function(){var n=$(this).attr("href"),t;n&&(t=n.split("showmap="),t.length>1&&t[1].charAt(0)!=r?n=n.replace("showmap="+t[1].charAt(0),"showmap="+r):$(this).attr("id")!="calendarPrev"&&$(this).attr("id")!="calendarNext"&&$(this).data("id")!="categoryNext"&&$(this).data("id")!="categoryPrev"&&(n=n+"&showmap="+r),$(".cat-dir-page-content").length&&(n=$(this).data("id")=="categoryPrev"?"javascript:goToCategoryPrev();":$(this).data("id")=="categoryNext"?"javascript:goToCategoryNext();":"javascript: goToCategoryPage("+$(this).data("page")+")"),$(".deals-offers-init").length&&(n=$(this).data("id")=="dealPrev"?"javascript:goToDealsPrev();":$(this).data("id")=="dealNext"?"javascript:goToDealsNext();":"javascript: goToDealsPage("+$(this).data("page")+")"),$(".dubai-map-init").length&&(n=$(this).data("id")=="mapNext"?"javascript:goToMapNext();":$(this).data("id")=="mapPrev"?"javascript:goToMapPrev();":"javascript: goToMapPage("+$(this).data("page")+")"));$(this).attr("href",n)});$(this).parents(n.selectors.container).find(n.selectors.triggers.switchTriggers).removeClass("active");$(this).addClass("active");$(this).attr(n.strip(n.selectors.callback))&&(u=window[$(this).attr(n.strip(n.selectors.callback))]);n.switchView(i,e,u)});this.createMap();this.showDefault()},showDefault:function(){$(this.selectors.defaultSwitch).trigger("click")},showView:function(n){this.map[n]&&(this.map[n].data("viewItem")==="map"?this.map[n].addClass("show-map"):this.map[n].show())},hideView:function(n){this.map[n]&&(this.map[n].data("viewItem")==="map"?this.map[n].removeClass("show-map").addClass("the-map"):this.map[n].hide())},switchView:function(n,t,i){this.showView(n);this.hideView(t);i&&typeof i=="function"&&i()},update:function(){this.map={};this.createMap()},createMap:function(){var n=this,t=$(this.selectors.views);t.each(function(){n.map[$(this).attr(n.strip(n.selectors.views))]=$(this)})}});DTCM.Extend("MapMarker",function(n,t,i,r,u,f,e){var o,s,h;return o=typeof f!="undefined"&&typeof f[0]!="undefined"&&(f[0]=="{16AE702B-556E-4590-8A71-86F0D027B3A5}"||f[0].id=="{16AE702B-556E-4590-8A71-86F0D027B3A5}")?"map_marker map_marker_orange":typeof f!="undefined"&&typeof f[0]!="undefined"&&(f[0]=="{D085F5F5-2479-490F-AC30-0A30B85A381E}"||f[0].id=="{D085F5F5-2479-490F-AC30-0A30B85A381E}")?"map_marker map_marker_red":typeof f!="undefined"&&typeof f[0]!="undefined"&&(f[0]=="{30C21BE6-355C-4EC0-AC25-26E06EB0050C}"||f[0].id=="{30C21BE6-355C-4EC0-AC25-26E06EB0050C}")?"map_marker map_marker_cyan":i<999?"map_marker":i>9999?"map_marker five-digit":"map_marker four-digit",s=new MarkerWithLabel({position:t,guid:u,map:n,draggable:!1,raiseOnDrag:!0,labelContent:i,labelAnchor:new google.maps.Point(21,44),labelClass:o,labelInBackground:!1}),r&&e!=!0&&(h=new google.maps.InfoWindow({content:r}),DTCM.InfoWindows.collection&&DTCM.InfoWindows.add(h),google.maps.event.addListener(s,"click",function(){DTCM.InfoWindows.collection&&DTCM.InfoWindows.closeAll();isDSFMap||(DTCM.InfoWindows.deactivateMarkers(DTCM.MarkersArray.markers,o),DTCM.InfoWindows.activateMarker(this,o+" black_marker"));h.open(n,this);u!=undefined&&u.length&&DTCM.LoadTripAdvisorSingleRatingsAsync(u,"tripAdvisorHtmlTemplateMap")}),google.maps.event.addListener(h,"closeclick",function(){DTCM.InfoWindows.deactivateMarkers(s,o);$(".map_item").removeClass("active")}),google.maps.event.addDomListener(window,"resize",function(){var t=n.getCenter();google.maps.event.trigger(n,"resize");n.setCenter(t)})),s});DTCM.Extend("LabelMarker",function(n,t){var i=DTCM.Markup.pin,r,u;return isDubaiCalendar!=undefined&&isDubaiCalendar==!0?i=DTCM.Markup.pinCalendar:t.locationpoi!=undefined&&t.locationpoi==!0&&(i=DTCM.Markup.pinPOI),t.phone==undefined&&(t.phone=""),(t.rating==undefined||t.rating==0)&&(t.rating="undef"),t.geo&&(t.lat=t.geo.split(",")[0],t.lng=t.geo.split(",")[1]),r='<a href="/Visiting_new/Deals-and-Offers/Directory?name='+t.name+'">'+$("#viewDeals").val()+"<\/a>",t.location==null&&(t.location="",r=""),u=new DTCM.MapMarker(n,new google.maps.LatLng(t.lat,t.lng),t.index,i.replace(/{name}/gi,t.name).replace(/{location}/gi,t.location).replace(/{url}/gi,t.url).replace(/{address}/gi,t.address).replace(/{phone}/gi,t.phone).replace(/{rating}/gi,t.rating).replace(/{view_deals}/gi,r).replace(/{tripadvisorguid}/gi,t.guid).replace(/{imageurl}/gi,t.imageurl),t.guid,t.category,t.hideinfowindow),DTCM.MarkersArray.markers.push(u),u});DTCM.Extend("LabelMarkerLatLongCombined",function(n,t){var u=DTCM.Markup.pin,i,r;return t.phone==undefined&&(t.phone=""),(t.rating==undefined||t.rating==0)&&(t.rating="undef"),i='<a href="/Visiting_new/Deals-and-Offers/Directory?name='+t.name+'">'+$("#viewDeals").val()+"<\/a>",t.location==null&&(t.location="",i=""),r=new DTCM.MapMarker(n,new google.maps.LatLng(t.geo.split(",")[0],t.geo.split(",")[1]),t.index,u.replace(/{name}/gi,t.name).replace(/{location}/gi,t.location).replace(/{url}/gi,"javascript:;").replace(/_blank/gi,"").replace(/{address}/gi,t.address).replace(/{phone}/gi,t.phone).replace(/{rating}/gi,t.rating).replace(/{view_deals}/gi,i)),DTCM.MarkersArray.markers.push(r),r});DTCM.Extend("MarkersArray",{markers:[],find:function(n){for(var t=0;t<this.markers.length;t++)if(parseInt(this.markers[t].labelContent)==n)return this.markers[t]},remove:function(n){if(this.markers.length>0)if(n)this.markers[n].setMap(null),this.markers.splice(n,1),DTCM.InfoWindows.remove(n);else{for(var t=0;t<this.markers.length;t++)this.markers[t].setMap(null);this.markers=[];DTCM.InfoWindows.removeAll()}}});DTCM.Extend("InfoWindows",{collection:[],removeAll:function(){this.collection=[]},deactivateMarkers:function(n,t){if(n&&t)if(typeof n.push=="function")for(var i=0;i<n.length;i++)n[i].labelClass=t,n[i].label.setStyles();else n.labelClass=t,n.label.setStyles()},activateMarker:function(n,t){n&&t&&(n.labelClass=t,n.label.setStyles())},hoverMarker:function(n){n&&(n.labelClass.indexOf("black_marker")>-1||(n.labelClass=n.labelClass.indexOf("hover_marker")>-1?"map_marker":"map_marker hover_marker",n.label.setStyles()))},add:function(n){for(var t=0;t<this.collection.length;t++)n.content==this.collection[t].content&&this.remove(n);this.collection.push(n)},remove:function(n){for(var t=0;t<this.collection.length;t++)n.content==this.collection[t].content&&this.collection.splice(t,1)},closeAll:function(){for(var n=0;n<this.collection.length;n++)this.collection[n].close()}});filterItemIndex=0;DTCM.Extend("CalendarControl",{__LOADING__:!1,SearchObject:{Language:currentLanguage,SearchBy:"type",SearchValue:"featured",TabValue:"",Skip:0,CategoryID:"",ReloadFilters:!0,SelectedCategoryID:"",BusinessOnly:!1},currentPage:0,itemsPerPage:10,language:currentLanguage,showFeaturedOnly:!1,showAllDates:!1,ready:0,total:0,period:null,loaded:!1,map:null,startDate:"",toDate:"",templates:"[data-template-piece]",currentSearchCase:"",containers:{pagination:null,festivals:null,events:null,mapview:null},wrappers:{events:null,festivals:null,others:null},headers:{set:!1,events:{container:"events-header",dates:null,count:null},festivals:{container:"festivals-header",dates:null,count:null},others:{container:"others-header",dates:null,count:null},mapview:{container:"mapview-header",dates:null,count:null}},init:function(){if(this.ready!=1){if(this.wrappers.events=$(".calendar-events-wrapper"),this.wrappers.festivals=$(".calendar-festivals-wrapper"),this.wrappers.others=$(".calendar-others-wrapper"),this.containers.festivals=$('[data-template-piece="festivals"]'),this.containers.others=$('[data-template-piece="others"]'),this.containers.events=$('[data-template-piece="events"]'),this.containers.mapview=$('[data-template-piece="mapview"]'),this.containers.pagination=$('[data-pagination="container"]'),this.eventsTab=$(".events-festivals-count"),this.experiencesTab=$(".experiences-activities-count"),this.featuredTab=$(".featured-count"),this.travelTab=$(".travel-count"),this.dealExperiencesTab=$(".experiences-count"),this.shoppingTab=$(".shopping-count"),this.templates=$(this.templates),this.showAllEvents=$("#divEvents"),this.showAllFestivals=$("#divFestivals"),this.showAllOthers=$("#divOthers"),this.pagination={prev:this.containers.pagination.find('[data-pagination="prev"]'),next:this.containers.pagination.find('[data-pagination="next"]'),current:this.containers.pagination.find('[data-pagination="current"]'),total:this.containers.pagination.find('[data-pagination="total"]')},this.setHeaders(),this.containers.festivals.length<=0&&this.containers.events.length<=0&&this.containers.mapview.length<=0&&this.containers.others.length<=0){this.ready=0;return}this.ready=1;var n=this;this.initPaging();this.showAllEvents.off("click").on("click",function(t){t.preventDefault();n.showAllContent("events");$(this).hide()});this.showAllFestivals.off("click").on("click",function(t){t.preventDefault();n.showAllContent("festivals");$(this).hide()});this.showAllOthers.off("click").on("click",function(t){t.preventDefault();n.showAllContent("others");$(this).hide()});this.filters=new DTCM.FilterControl("[data-multi-filter]","/api/events/filters",-1);this.filters.setOnChange(function(){n.forceCall=!0;n.ajaxLoadContent(n.startDate,n.toDate,n.view=="map")});this.textField=$('.search-field input[type="text"]');this.searchButton=$('.search-field input[type="submit"]');this.searchButton.on("click",function(t){t.preventDefault();n.currentSearchCase=="deals"||n.currentSearchCase=="featured"||n.currentSearchCase=="travel"||n.currentSearchCase=="deal_experiences"||n.currentSearchCase=="shopping"||(n.currentSearchCase="textsearch");this.id=="btnSearchCalendar"?(DTCM.CalendarControl.SearchObject.ReloadFilters=!0,DTCM.CalendarControl.SearchObject.TabValue="",DTCM.CalendarControl.SearchObject.SearchBy="keyword",DTCM.CalendarControl.SearchObject.SearchValue=n.textField.val(),DTCM.CalendarControl.ajaxLoadEvents()):this.id=="btnSearchDeals"?(DTCM.CalendarControl.SearchObject.ReloadFilters=!0,DTCM.CalendarControl.SearchObject.TabValue="",DTCM.CalendarControl.SearchObject.SearchBy="keyword",DTCM.CalendarControl.SearchObject.SearchValue=n.textField.val(),DTCM.CalendarControl.ajaxLoadDeals()):this.id=="btnSearchCategories"?(DTCM.CalendarControl.SearchObject.SelectedCategoryID="",DTCM.CalendarControl.SearchObject.Skip=0,DTCM.CalendarControl.SearchObject.ReloadFilters=!0,DTCM.CalendarControl.SearchObject.SearchBy="keyword",DTCM.CalendarControl.SearchObject.SearchValue=n.textField.val(),DTCM.CalendarControl.ajaxLoadCategories()):n.ajaxLoadSearchResults($("#from").val(),$("#to").val(),!0,0,!1,n.currentSearchCase,n.textField.val())})}},setHeaders:function(){this.headers.set||(this.headers.events.container=findPiece(this.templates,this.headers.events.container),this.headers.festivals.container=findPiece(this.templates,this.headers.festivals.container),this.headers.others.container=findPiece(this.templates,this.headers.others.container),this.headers.mapview.container=findPiece(this.templates,this.headers.mapview.container),this.headers.events.count=this.headers.events.container.find('[data-template-piece="count"]'),this.headers.festivals.count=this.headers.festivals.container.find('[data-template-piece="count"]'),this.headers.others.count=this.headers.others.container.find('[data-template-piece="count"]'),this.headers.mapview.count=this.headers.mapview.container.find('[data-template-piece="count"]'),this.headers.events.dates=this.headers.events.container.find('[data-template-piece="dates"]'),this.headers.festivals.dates=this.headers.festivals.container.find('[data-template-piece="dates"]'),this.headers.others.dates=this.headers.others.container.find('[data-template-piece="dates"]'),this.headers.mapview.dates=this.headers.mapview.container.find('[data-template-piece="dates"]'),this.headers.set=!0)},showAllContent:function(n){this.containers[n].find(".hidden-"+n).removeClass("hidden-"+n).show()},showInitial:function(n){this.containers[n].find("."+n+"-wrapper").each(function(t){t>3&&$(this).addClass("hidden-"+n).hide()})},clearView:function(n){n||(n=this.view);switch(n){case"map":this.containers.mapview.html("");break;case"list":this.containers.events.html("");this.containers.festivals.html("");this.containers.others.html("")}},switchMap:function(){var n=this.textField&&this.textField.val?this.textField.val():"";this.ajaxLoadSearchResults(this.startDate,this.toDate,!0,this.currentSkip,!0,this.currentSearchCase,n)},switchCalendarMap:function(){this.ajaxLoadEvents()},switchDealsMap:function(){this.ajaxLoadDeals()},switchCategoriesMap:function(){this.ajaxLoadCategories()},resetPaging:function(){this.currentPage=0},initPaging:function(){var n=this;this.pagination.prev.off("click").on("click",function(t){t.preventDefault();t.stopPropagation();n.currentPage>0&&(n.currentPage--,n.ajaxLoadContent(n.startDate,n.toDate,!0))});this.pagination.next.off("click").on("click",function(t){t.preventDefault();t.stopPropagation();n.currentPage+1<Math.ceil(n.totalEvents/n.itemsPerPage)&&(n.currentPage++,n.ajaxLoadContent(n.startDate,n.toDate,!0))})},checkPaging:function(){this.currentPage>0?this.pagination.prev.show():this.pagination.prev.hide();this.currentPage+1<Math.ceil(this.totalEvents/this.itemsPerPage)&&this.totalEvents>this.itemsPerPage?this.pagination.next.show():this.pagination.next.hide()},checkShowAll:function(){this.totalEvents<=4?this.showAllEvents.hide():this.showAllEvents.show();this.totalFestivals<=4?this.showAllFestivals.hide():this.showAllFestivals.show();this.totalOthers<=4?this.showAllOthers.hide():this.showAllOthers.show()},createMap:function(n,t){var s,u,i,r,f;if(n){var e=n.split(",")[0],o=n.split(",")[1],h=$("body").attr("data-chineseinstance");if(h=="False"){if(this.mapOptions={zoom:10,scrollwheel:!1,center:new google.maps.LatLng(e,o),styles:[{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"transit.station.airport",stylers:[{visibility:"off"}]}]},this.markers=[],this.map||(this.map=new google.maps.Map(document.getElementById("map-canvas"),this.mapOptions)),google.maps.event.trigger(this.map,"resize"),t){for(s=DTCM.Markup.pin,u=new google.maps.LatLngBounds,DTCM.MarkersArray.remove(),i=0;i<t.length;i++)r={guid:t[i].guid,index:t[i].index,name:t[i].item.name,location:t[i].item.location,url:t[i].item.url,rating:t[i].item.rating,address:t[i].item.address},t[i].geolocation?r.geo=t[i].geolocation:t[i].geo?r.geo=t[i].geo:t[i].lat&&t[i].lng&&(r.lat=t[i].lat,r.lng=t[i].lng),f=new DTCM.LabelMarker(this.map,r),this.markers.push(f),u.extend(f.getPosition());f&&(this.map.fitBounds(u),this.map.setCenter(u.getCenter()),this.map.getZoom()>15&&this.map.setZoom(15))}}else $("#map-canvas").empty(),initopenstreet(e,o,t)}},moveToTop:function(){$("body, html").animate({scrollTop:0},300)},ajaxLoadContent:function(n,t,i){this.ajaxLoadSearchResults(n,t,i,this.currentSkip,!0,this.currentSearchCase);return},ajaxLoadSearchResults:function(n,t,i,r,u,f,e,o){var s,l,a;if((console.log("start"),startAnimation(),r=r?r:0,i=!0,this.__LOADING__!==!0||this.forceCall===!0)&&(!DTCM.is.nullOrEmpty(n)||this.showFeaturedOnly)){s=this;s.currentSearchCase=="textsearch"&&(e=$('.search-field input[type="text"]').val());var h="/api/events/CalendarSearch",v=getQueryStrings(),c=v.name;switch(f){case"festivals":h="/api/events/GetEventsAndFestivals";break;case"experiences":h="/api/events/GetExperiencesAndActivities";break;case"deals":h="/api/deals/GetDealsPaged";break;case"featured":c?(e=c,h="/api/deals/FeaturedDealsFiltered"):h="/api/deals/FeaturedDealsPaged";break;case"travel":c?(e=c,h="/api/deals/TravelDealsFiltered"):h="/api/deals/TravelDealsPaged";break;case"deal_experiences":c?(e=c,h="/api/deals/ExperiencesDealsFiltered"):h="/api/deals/ExperiencesDealsPaged";break;case"shopping":c?(e=c,h="/api/deals/ShoppingDealsFiltered"):h="/api/deals/ShoppingDealsPaged";break;case"categories":h="/api/categories/GetCategoriesPaged"}if(n&&!t?(n=new Date(n),t=new Date,t.setDate(n.getDate()+7)):(n=new Date(n),t=new Date(t)),this.ready==0&&this.init("test init"),this.view=="list"?this.resetPaging():this.clearView("list"),!this.forceCall&&!this.showFeaturedOnly&&this.startDate&&this.toDate)if(n.getTime()!=this.startDate.getTime()||t.getTime()!=this.toDate.getTime()||i)n.getTime()!=this.startDate.getTime()&&t.getTime()!=this.toDate.getTime()&&i&&this.resetPaging();else return;this.startDate=n;this.toDate=t;this.pins=[];(u==!0||h!="/api/events/GetExperiencesAndActivities"&&h!="/api/events/CalendarSearch")&&this.showFeaturedOnly||$(".current_cat").val("");l={Language:this.language,StartDate:DTCM.DateToUTC(n),EndDate:DTCM.DateToUTC(t),CategoryID:$(".current_cat").val(),CategoryIDs:u===!0?this.filters.getCheckedFilters():"",FeaturedOnly:this.showFeaturedOnly,SearchText:e||""};a=DTCM.is.mobileBrowser()?5:10;l.Take=Number($(".select-items-per-page .dd-selected-value").val())?Number($(".select-items-per-page .dd-selected-value").val()):a;l.Skip=r*l.Take;this.currentSkip=r;this.itemsPerPage=l.Take;this.__LOADING__=!0;$.ajax({url:h.toLowerCase(),type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(l),dataType:"json"}).done(function(n){var v,f,p;if(filterItemIndex=0,s.clearView(),s.showAllEvents.show(),s.showAllFestivals.show(),s.forceCall=!1,s.period=n.period,s.totalEvents=n.eventsCount>0?n.eventsCount:n.dealsCount>0?n.dealsCount:n.categoriesCount,s.totalFestivals=n.festivalsCount,s.totalOthers=n.otherEventsCount,s.showFeaturedOnly?s.headers.events.dates.text($("#featuredEvents").val()):s.headers.events.dates.text(n.period),$(".current_cat")&&$(".current_cat").val()!=""&&s.headers.events.dates.text($("#businessEvents").val()),n.deals!=null&&n.dealsCount>0&&s.headers.events.dates.text($("#latestOffersAndDeals").val()),n.categories!=null&&n.categoriesCount>0&&s.headers.events.dates.text(""),s.headers.events.count.text(n.eventsCount),s.headers.mapview.dates.text(n.period),s.headers.mapview.count.text(n.eventsCount),s.headers.festivals.count.text(n.festivalsCount),s.headers.others.count.text(n.otherEventsCount),s.currentSearchCase!="textsearch"&&(n.eventsAndFestivalsCount||n.eventsAndFestivalsCount==0)&&s.eventsTab.html("("+n.eventsAndFestivalsCount+")"),s.currentSearchCase!="textsearch"&&(n.experiencesAndActivitiesCount||n.experiencesAndActivitiesCount==0)&&s.experiencesTab.html("("+n.experiencesAndActivitiesCount+")"),(n.featuredDealsCount||n.featuredDealsCount==0)&&s.featuredTab.html("("+n.featuredDealsCount+")"),(n.travelDealsCount||n.travelDealsCount==0)&&s.travelTab.html("("+n.travelDealsCount+")"),(n.experiencesDealsCount||n.experiencesDealsCount==0)&&s.dealExperiencesTab.html("("+n.experiencesDealsCount+")"),(n.shoppingDealsCount||n.shoppingDealsCount==0)&&s.shoppingTab.html("("+n.shoppingDealsCount+")"),n.eventsCount>0?(s.wrappers.events.show(),DTCM.MarkersArray.remove(),$.each(n.events,function(n,t){var r=div("",'class="events-wrapper"'),i;s.containers.events.append(r);i=div("",'class="events-wrapper"');s.containers.mapview.append(i);t.geolocation&&t.geolocation.indexOf(",")>-1&&s.pins.push({lat:t.geolocation.split(",")[0],lng:t.geolocation.split(",")[1],geo:t.geolocation,index:s.currentPage*s.itemsPerPage+n+1,item:t});createItem(t,r,$("#templateEvent"));createItem(t,i,$("#templateEvent"),s.currentPage*s.itemsPerPage+n+1)}),u||($(".mobile-accordion").html(""),$.each(n.eventFilters,function(t,i){createFilterItem(i,$(".mobile-accordion"),$("#templateMainFilter"),t==0?"":"chbFilter_0");n.eventFilters.length==t+1&&setTimeout(function(){CustomFormButtons.init(".hotels-criteria");$(".has-sub-cat .dropdown-icon").on("click",function(){var n=$(this);$(".sub-cat, .dropdown-icon",n.parent()).toggleClass("open")})},100)}))):n.dealsCount>0?(s.wrappers.events.show(),DTCM.MarkersArray.remove(),$.each(n.deals,function(n,t){var r=div("",'class="events-wrapper"'),i;s.containers.events.append(r);i=div("",'class="events-wrapper"');s.containers.mapview.append(i);t.geolocation&&t.geolocation.indexOf(",")>-1&&s.pins.push({lat:t.geolocation.split(",")[0],lng:t.geolocation.split(",")[1],geo:t.geolocation,index:s.currentSkip*s.itemsPerPage+n+1,item:t});createItem(t,r,$("#templateEvent"),s.currentSkip*s.itemsPerPage+n+1);createItem(t,i,$("#templateEvent"),s.currentSkip*s.itemsPerPage+n+1)}),u||($(".mobile-accordion").html(""),$.each(n.dealFilters,function(t,i){createFilterItem(i,$(".mobile-accordion"),$("#templateMainFilter"),t==0?"":"chbFilter_0");n.dealFilters.length==t+1&&setTimeout(function(){CustomFormButtons.init(".hotels-criteria");$(".has-sub-cat .dropdown-icon").on("click",function(){var n=$(this);$(".sub-cat, .dropdown-icon",n.parent()).toggleClass("open")})},100)}))):n.categoriesCount>0?(s.wrappers.events.show(),$(".directory-results-number").html(n.categories.length+" "+$("#of").val()+" "+n.categoriesCount+" "+$("#results").val()),DTCM.MarkersArray.remove(),$.each(n.categories,function(n,t){var r=div("",'class="events-wrapper"'),i;s.containers.events.append(r);i=div("",'class="events-wrapper"');s.containers.mapview.append(i);t.geolocation&&t.geolocation.indexOf(",")>-1&&s.pins.push({lat:t.geolocation.split(",")[0],lng:t.geolocation.split(",")[1],geo:t.geolocation,index:s.currentSkip*s.itemsPerPage+n+1,item:t});createItem(t,r,$("#templateEvent"),s.currentSkip*s.itemsPerPage+n+1);createItem(t,i,$("#templateEvent"),s.currentSkip*s.itemsPerPage+n+1)}),u||($(".mobile-accordion").html(""),$.each(n.categoryFilters,function(t,i){createFilterItem(i,$(".mobile-accordion"),$("#templateMainFilter"),t==0?"":"chbFilter_0");n.categoryFilters.length==t+1&&setTimeout(function(){CustomFormButtons.init(".hotels-criteria");$(".has-sub-cat .dropdown-icon").on("click",function(){var n=$(this);$(".sub-cat, .dropdown-icon",n.parent()).toggleClass("open")})},100)}))):(s.wrappers.events.hide(),$(".mobile-accordion").html("")),n.events!=null&&n.eventsCount==0&&(s.headers.events.dates.text($("#newEvents").val()),s.wrappers.events.show(),$(".select-items-per-page, .search-result-page").addClass("hidden")),n.deals!=null&&n.dealsCount==0&&(s.headers.events.dates.text($("#newDeals").val()),s.wrappers.events.show(),$(".select-items-per-page, .search-result-page").addClass("hidden")),n.categories!=null&&n.categoriesCount==0&&(e&&s.headers.events.dates.text("0 "+$("#resultsFor").val()+" '"+e+"'"),$(".directory-results-number").html("0 "+$("#of").val()+" 0 "+$("#results").val()),s.wrappers.events.show(),$(".select-items-per-page, .search-result-page").addClass("hidden")),s.currentSearchCase=="textsearch"&&(s.headers.events.dates.text(n.eventsCount+" "+$("#resultsFor").val()+" '"+e+"'"),s.wrappers.events.show()),n.eventsCount>$(".select-items-per-page .dd-selected-value").val()||n.dealsCount>$(".select-items-per-page .dd-selected-value").val()||n.categoriesCount>$(".select-items-per-page .dd-selected-value").val()){v=0;v=n.eventsCount>0?n.eventsCount:n.dealsCount>0?n.dealsCount:n.categoriesCount;$(".select-items-per-page, .search-result-page").removeClass("hidden");$(".search-result-page a").hide();$(".search-result-page ul").html("");var l=$(".search-result-page ul"),a=DTCM.is.mobileBrowser()?4:9,h=Math.floor(v/Number($(".select-items-per-page .dd-selected-value").val())),c=r,t=1,y=a;for(c>Math.ceil(a/2)&&(t=c-Math.ceil(a/2)),y=Math.min(t+a,h),f="",c==0&&(f=' class="current"'),l.append('<li><a href="javascript:goToCalendarPage();" data-page="1"'+f+">1<\/a><\/li>"),t>1&&l.append("<li>...<\/li>"),t;t<=y-1;t++)f="",t==c&&(f=' class="current"'),l.append('<li><a href="javascript:goToCalendarPage('+t+');" data-page="'+(t+1)+'"'+f+">"+(t+1)+"<\/a><\/li>");y<h&&l.append("<li>...<\/li>");f="";f=c==h?' class="current last"':' class="last"';l.append('<li><a href="javascript:goToCalendarPage('+h+');" data-page="'+(h+1)+'"'+f+">"+(h+1)+"<\/a><\/li>");$(".search-result-page a").show();c==0?$(".search-result-page a").eq(0).hide():c==h&&$(".search-result-page a").eq(-1).hide()}else s.totalEvents<=10&&$(".select-items-per-page, .search-result-page").addClass("hidden"),$(".search-result-page").addClass("hidden"),$(".search-result-page ul").html("");n.festivals!=null&&n.festivals.length>0?(s.wrappers.festivals.show(),$.each(n.festivals,function(n,t){var i=div("",'class="festivals-wrapper"');s.containers.festivals.append(i);createItem(t,i,$("#templateFestival"));$.each(t.events,function(n,t){createItem(t,i,$("#templateEvent"))})})):s.wrappers.festivals.hide();n.otherEvents!=null&&n.otherEvents.length>0?(s.wrappers.others.show(),$.each(n.otherEvents,function(n,t){var i=div("",'class="others-wrapper"');s.containers.others.append(i);createItem(t,i,$("#templateEvent"))})):s.wrappers.others.hide();i?(s.totalEvents<=s.itemsPerPage?s.pagination.current.text("All"):(p=Math.min(s.itemsPerPage*(1+s.currentPage),s.totalEvents),s.pagination.current.text(s.itemsPerPage*s.currentPage+1+"-"+p)),s.pagination.total.text(s.totalEvents)):(s.showAllContent("events"),s.showInitial("festivals"),s.showInitial("others"));s.pins&&s.pins[0]&&s.createMap(s.pins[0].lat+","+s.pins[0].lng,s.pins);s.checkPaging();s.checkShowAll();s.__LOADING__=!1;console.log("end");stopAnimation();jQuery.isFunction(o)&&setTimeout(function(){o()},120)}).fail(function(n,t,i){console.log(i);s.__LOADING__=!1;s.forceCall=!1})}},ajaxLoadEvents:function(){var u,s,t,f;if(startAnimation(),this.__LOADING__!==!0||this.forceCall===!0){var n=this,r=n.SearchObject.Skip?n.SearchObject.Skip:0,e="/api/events/GetEventsAsync",o=new Date($("#from").val()),i=new Date($("#to").val());$("#to").val()==""&&(i=o);$("#datepicker-select").val()=="all"&&(i=new Date(i.getFullYear()+5,i.getMonth(),i.getDay()));n.SearchObject.SearchBy.toLowerCase()=="keyword"&&(e="/api/events/EventsByKeywordAsync");u=getQueryStrings();s=u.name;this.view=="list"?this.resetPaging():this.clearView("list");this.pins=[];this.filters=new DTCM.FilterControl("[data-multi-filter]","/api/events/filters",-1);t={Language:this.language,StartDate:DTCM.DateToUTC(o),EndDate:DTCM.DateToUTC(i),CategoryID:$("#ddlEventType").val()==undefined?"allevents":$("#ddlEventType").val(),CategoryIDs:DTCM.CalendarControl.SearchObject.ReloadFilters===!0?"":this.filters.getCheckedFilters(),TabValue:n.SearchObject.TabValue,SearchText:n.SearchObject.SearchValue,BusinessOnly:n.SearchObject.BusinessOnly,CalenderNodeId:n.SearchObject.CalenderNodeId};f=DTCM.is.mobileBrowser()?5:10;t.Take=Number($(".select-items-per-page .dd-selected-value").val())?Number($(".select-items-per-page .dd-selected-value").val()):f;t.Skip=r*t.Take;this.currentSkip=r;this.itemsPerPage=t.Take;this.__LOADING__=!0;$.ajax({url:e,type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(t),dataType:"json"}).done(function(t){var h,u,l;if(filterItemIndex=0,n.clearView(),n.showAllEvents.show(),n.showAllFestivals.show(),n.forceCall=!1,n.period=t.period,t.eventsCount>0&&(n.totalEvents=t.eventsCount),n.totalFestivals=t.festivalsCount,n.totalOthers=t.otherEventsCount,n.headers.events.dates.text($("#ddlEventType option:selected").text()),n.SearchObject.SearchBy.toLowerCase()=="period"&&n.SearchObject.SearchValue!="all"&&n.headers.events.dates.text(t.period),n.SearchObject.SearchBy.toLowerCase()=="keyword"&&(n.headers.events.dates.text(t.eventsCount+" "+$("#resultsFor").val()+" '"+n.SearchObject.SearchValue+"'"),n.wrappers.events.show()),n.SearchObject.TabValue===""&&$(".calendar-switch-tabs").removeClass("active"),n.headers.events.count.text(t.eventsCount),n.headers.mapview.dates.text(t.period),n.headers.mapview.count.text(t.eventsCount),n.headers.festivals.count.text(t.festivalsCount),n.headers.others.count.text(t.otherEventsCount),(t.eventsAndFestivalsCount||t.eventsAndFestivalsCount==0)&&n.eventsTab.html("("+t.eventsAndFestivalsCount+")"),(t.experiencesAndActivitiesCount||t.experiencesAndActivitiesCount==0)&&n.experiencesTab.html("("+t.experiencesAndActivitiesCount+")"),n.wrappers.events.show(),DTCM.MarkersArray.remove(),$.each(t.events,function(t,i){var r=div("",'class="events-wrapper"'),u;n.containers.events.append(r);u=div("",'class="events-wrapper"');n.containers.mapview.append(u);i.geolocation&&i.geolocation.indexOf(",")>-1&&n.pins.push({lat:i.geolocation.split(",")[0],lng:i.geolocation.split(",")[1],geo:i.geolocation,index:n.currentPage*n.itemsPerPage+t+1,item:i});n.SearchObject.CalenderNodeId=="{61FCA7CA-7584-4BE4-A03F-D32D557432E5}"?createItem(i,r,$("#templateEvent"),n.currentPage*n.itemsPerPage+t+1):createItem(i,r,$("#templateEvent"));createItem(i,u,$("#templateEvent"),n.currentPage*n.itemsPerPage+t+1)}),n.SearchObject.ReloadFilters&&($(".mobile-accordion").html(""),$.each(t.eventFilters,function(n,i){createFilterItem(i,$(".mobile-accordion"),$("#templateMainFilter"),n==0?"":"chbFilter_0");t.eventFilters.length==n+1&&setTimeout(function(){CustomFormButtons.init(".hotels-criteria");$(".has-sub-cat .dropdown-icon").on("click",function(){var n=$(this);$(".sub-cat, .dropdown-icon",n.parent()).toggleClass("open")})},100)})),t.events!=null&&t.eventsCount==0&&(n.headers.events.dates.text($("#newEvents").val()),n.wrappers.events.show(),$(".select-items-per-page, .search-result-page").addClass("hidden")),t.eventsCount>$(".select-items-per-page .dd-selected-value").val()){h=0;t.eventsCount>0&&(h=t.eventsCount-1);$(".select-items-per-page, .search-result-page").removeClass("hidden");$(".search-result-page a").hide();$(".search-result-page ul").html("");var o=$(".search-result-page ul"),s=DTCM.is.mobileBrowser()?4:9,f=Math.floor(h/Number($(".select-items-per-page .dd-selected-value").val())),e=r,i=1,c=s;for(e>Math.ceil(s/2)&&(i=e-Math.ceil(s/2)),c=Math.min(i+s,f),u="",e==0&&(u=' class="current"'),o.append('<li><a href="javascript:goToCalendarPageNew();" data-page="1"'+u+">1<\/a><\/li>"),i>1&&o.append("<li>...<\/li>"),i;i<=c-1;i++)u="",i==e&&(u=' class="current"'),o.append('<li><a href="javascript:goToCalendarPageNew('+i+');" data-page="'+(i+1)+'"'+u+">"+(i+1)+"<\/a><\/li>");c<f&&o.append("<li>...<\/li>");u="";u=e==f?' class="current last"':' class="last"';o.append('<li><a href="javascript:goToCalendarPageNew('+f+');" data-page="'+(f+1)+'"'+u+">"+(f+1)+"<\/a><\/li>");$(".search-result-page a").show();e==0?$(".search-result-page a").eq(0).hide():e==f&&$(".search-result-page a").eq(-1).hide()}else n.totalEvents<=10&&$(".select-items-per-page, .search-result-page").addClass("hidden"),$(".search-result-page").addClass("hidden"),$(".search-result-page ul").html("");t.festivals!=null&&t.festivals.length>0?(n.wrappers.festivals.show(),$.each(t.festivals,function(t,i){var r=div("",'class="festivals-wrapper"');n.containers.festivals.append(r);createItem(i,r,$("#templateFestival"));$.each(i.events,function(n,t){createItem(t,r,$("#templateEvent"))})})):n.wrappers.festivals.hide();t.otherEvents!=null&&t.otherEvents.length>0?(n.wrappers.others.show(),$.each(t.otherEvents,function(t,i){var r=div("",'class="others-wrapper"');n.containers.others.append(r);createItem(i,r,$("#templateEvent"))})):n.wrappers.others.hide();n.totalEvents<=n.itemsPerPage?n.pagination.current.text("All"):(l=Math.min(n.itemsPerPage*(1+n.currentPage),n.totalEvents),n.pagination.current.text(n.itemsPerPage*n.currentPage+1+"-"+l));n.pagination.total.text(n.totalEvents);n.pins&&n.pins[0]&&n.createMap(n.pins[0].lat+","+n.pins[0].lng,n.pins);n.checkPaging();n.checkShowAll();n.__LOADING__=!1;stopAnimation()}).fail(function(t,i,r){console.log(r);n.__LOADING__=!1;n.forceCall=!1})}},ajaxLoadDeals:function(){var f,o,r,t,i;if(console.log("ajaxLoadDeals start"),startAnimation(),this.__LOADING__!==!0||this.forceCall===!0){var n=this,u=n.SearchObject.Skip?n.SearchObject.Skip:0,e="/api/deals/DealsByType";n.SearchObject.SearchBy.toLowerCase()=="keyword"&&(e="/api/deals/DealsByKeyword");f=getQueryStrings();o=f.name;this.view=="list"?this.resetPaging():this.clearView("list");this.pins=[];r="";(n.SearchObject.DSFDealsNode===undefined||n.SearchObject.DSFDealsNode==="")&&(r=n.SearchObject.TabValue==""?"aqua_exclusive":n.SearchObject.TabValue);n.SearchObject.DSFDealsNode!=null&&(r=n.SearchObject.TabValue==""?"aqua_exclusive":n.SearchObject.TabValue);t={Language:this.language,CategoryID:n.SearchObject.CategoryID,CategoryIDs:DTCM.CalendarControl.SearchObject.ReloadFilters===!0?"":this.filters.getCheckedFilters(),TabValue:r,SearchText:n.SearchObject.SearchValue.trim(),DSFDealsNode:n.SearchObject.DSFDealsNode};i=DTCM.is.mobileBrowser()?5:10;t.Take=Number($(".select-items-per-page .dd-selected-value").val())?Number($(".select-items-per-page .dd-selected-value").val()):i;t.Skip=u*t.Take;this.currentSkip=u;this.itemsPerPage=t.Take;this.__LOADING__=!0;$.ajax({url:e.toLowerCase(),type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(t),dataType:"json"}).done(function(t){var c,f,a;if(filterItemIndex=0,n.clearView(),n.showAllEvents.show(),n.showAllFestivals.show(),n.forceCall=!1,n.period=t.period,t.dealsCount>0&&(n.totalEvents=t.dealsCount),t.aquaExclusiveDealsCount>0?$("#hlAquaExclusive").show():n.SearchObject.TabValue=="aqua_exclusive"&&n.SearchObject.SearchValue=="aqua_exclusive"&&$(".calendar-switch-tabs").eq(1).addClass("active"),n.totalFestivals=t.festivalsCount,n.totalOthers=t.otherEventsCount,n.showFeaturedOnly?n.headers.events.dates.text($("#featuredEvents").val()):n.headers.events.dates.text(t.period),$(".current_cat")&&$(".current_cat").val()!=""&&n.headers.events.dates.text($("#businessEvents").val()),t.deals!=null&&t.dealsCount>0&&(n.SearchObject.TabValue=="aqua_exclusive"&&t.aquaExclusiveDealsCount>0?n.headers.events.dates.text($("#aquaExclusiveDeals").val()):n.headers.events.dates.text($("#latestOffersAndDeals").val())),n.headers.events.count.text(t.eventsCount),n.headers.mapview.dates.text(t.period),n.headers.mapview.count.text(t.eventsCount),n.headers.festivals.count.text(t.festivalsCount),n.headers.others.count.text(t.otherEventsCount),(t.featuredDealsCount||t.featuredDealsCount==0)&&n.featuredTab.html("("+t.featuredDealsCount+")"),(t.aquaExclusiveDealsCount||t.aquaExclusiveDealsCount==0)&&n.travelTab.html("("+t.aquaExclusiveDealsCount+")"),(t.experiencesDealsCount||t.experiencesDealsCount==0)&&n.dealExperiencesTab.html("("+t.experiencesDealsCount+")"),(t.shoppingDealsCount||t.shoppingDealsCount==0)&&n.shoppingTab.html("("+t.shoppingDealsCount+")"),t.dealsCount>0?(n.wrappers.events.show(),DTCM.MarkersArray.remove(),$.each(t.deals,function(t,i){var u=div("",'class="events-wrapper"'),r;n.containers.events.append(u);r=div("",'class="events-wrapper"');n.containers.mapview.append(r);i.geolocation&&i.geolocation.indexOf(",")>-1&&n.pins.push({lat:i.geolocation.split(",")[0],lng:i.geolocation.split(",")[1],geo:i.geolocation,index:n.currentSkip*n.itemsPerPage+t+1,item:i});createDealItem(i,u,$("#templateEvent"),n.currentSkip*n.itemsPerPage+t+1);createDealItem(i,r,$("#templateEvent"),n.currentSkip*n.itemsPerPage+t+1)}),DTCM.CalendarControl.SearchObject.ReloadFilters&&($(".mobile-accordion").html(""),$.each(t.dealFilters,function(n,i){createFilterItem(i,$(".mobile-accordion"),$("#templateMainFilter"),n==0?"":"chbFilter_0");t.dealFilters.length==n+1&&setTimeout(function(){CustomFormButtons.init(".hotels-criteria");$(".has-sub-cat .dropdown-icon").on("click",function(){var n=$(this);$(".sub-cat, .dropdown-icon",n.parent()).toggleClass("open")})},100)}))):(n.wrappers.events.hide(),$(".mobile-accordion").html("")),t.deals!=null&&t.dealsCount==0&&(n.headers.events.dates.text($("#newDeals").val()),n.wrappers.events.show(),$(".select-items-per-page, .search-result-page").addClass("hidden")),n.SearchObject.SearchBy.toLowerCase()=="keyword"&&(n.SearchObject.DSFDealsNode==null?n.headers.events.dates.text(t.dealsCount+" "+$("#resultsFor").val()+" '"+$('.search-field input[type="text"]').val().trim()+"'"):n.headers.events.dates.text($("#DSSSearchResultText").val()),n.wrappers.events.show()),$(".select-items-per-page .dd-selected-value").val()!=undefined&&(i=$(".select-items-per-page .dd-selected-value").val()),t.dealsCount>i){c=0;t.dealsCount>0&&(c=t.dealsCount-1);$(".select-items-per-page, .search-result-page").removeClass("hidden");$(".search-result-page a").hide();$(".search-result-page ul").html("");var s=$(".search-result-page ul"),h=DTCM.is.mobileBrowser()?4:9,e=Math.floor(c/Number(i)),o=u,r=1,l=h;for(o>Math.ceil(h/2)&&(r=o-Math.ceil(h/2)),l=Math.min(r+h,e),f="",o==0&&(f=' class="current"'),s.append('<li><a href="javascript:goToDealsPage();" data-page="1"'+f+">1<\/a><\/li>"),r>1&&s.append("<li>...<\/li>"),r;r<=l-1;r++)f="",r==o&&(f=' class="current"'),s.append('<li><a href="javascript:goToDealsPage('+r+');" data-page="'+(r+1)+'"'+f+">"+(r+1)+"<\/a><\/li>");l<e&&s.append("<li>...<\/li>");f="";f=o==e?' class="current last"':' class="last"';s.append('<li><a href="javascript:goToDealsPage('+e+');" data-page="'+(e+1)+'"'+f+">"+(e+1)+"<\/a><\/li>");$(".search-result-page a").show();o==0?$(".search-result-page a").eq(0).hide():o==e&&$(".search-result-page a").eq(-1).hide()}else n.totalEvents<=10&&$(".select-items-per-page, .search-result-page").addClass("hidden"),$(".search-result-page").addClass("hidden"),$(".search-result-page ul").html("");if(n.wrappers.festivals.hide(),n.wrappers.others.hide(),n.totalEvents<=n.itemsPerPage?n.pagination.current.text("All"):(a=Math.min(n.itemsPerPage*(1+n.currentPage),n.totalEvents),n.pagination.current.text(n.itemsPerPage*n.currentPage+1+"-"+a)),n.pagination.total.text(n.totalEvents),n.pins&&n.pins[0])try{n.createMap(n.pins[0].lat+","+n.pins[0].lng,n.pins)}catch(v){}n.checkPaging();n.checkShowAll();n.__LOADING__=!1;stopAnimation()}).fail(function(t,i,r){console.log(r);n.__LOADING__=!1;n.forceCall=!1})}},ajaxLoadCategories:function(){var u,t,i;if(startAnimation(),this.__LOADING__!==!0||this.forceCall===!0){var n=this,r=n.SearchObject.Skip?n.SearchObject.Skip:0,f="/api/categories/GetCategoryItemsAsync";n.SearchObject.SearchBy.toLowerCase()=="keyword"&&n.SearchObject.SearchValue.trim()!=""?f="/api/categories/GetCategoryItemsByKeywordAsync":n.SearchObject.SearchBy="type";this.view=="list"?this.resetPaging():this.clearView("list");this.pins=[];u="";(n.SearchObject.DSFDealsNode===undefined||n.SearchObject.DSFDealsNode==="")&&(u=n.SearchObject.TabValue==""?"aqua_exclusive":n.SearchObject.TabValue);t={Language:this.language,CategoryID:n.SearchObject.CategoryID,CategoryIDs:DTCM.CalendarControl.SearchObject.ReloadFilters===!0?"":this.filters.getCheckedFilters(),TabValue:u,SearchText:n.SearchObject.SearchValue.trim(),DSFDealsNode:n.SearchObject.DSFDealsNode};i=DTCM.is.mobileBrowser()?5:10;t.Take=Number($(".select-items-per-page .dd-selected-value").val())?Number($(".select-items-per-page .dd-selected-value").val()):i;t.Skip=r*t.Take;this.currentSkip=r;this.itemsPerPage=t.Take;this.__LOADING__=!0;$.ajax({url:f.toLowerCase(),type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(t),dataType:"json"}).done(function(t){var c,f,a;if(n.clearView(),n.showAllEvents.show(),n.showAllFestivals.show(),n.forceCall=!1,n.totalEvents=t.categoriesCount,n.headers.events.dates.text(""),n.headers.events.dates.addClass("hide"),n.headers.events.count.text(t.eventsCount),n.headers.mapview.dates.text(t.period),n.headers.mapview.count.text(t.eventsCount),t.categoriesCount>0?(n.currentSkip*n.itemsPerPage>t.categoriesCount&&(r=n.currentSkip=0),n.wrappers.events.show(),$(".directory-results-number").html(t.categories.length+" "+$("#of").val()+" "+t.categoriesCount+" "+$("#results").val()),DTCM.MarkersArray.remove(),$.each(t.categories,function(t,i){var u=div("",'class="events-wrapper"'),r;n.containers.events.append(u);r=div("",'class="events-wrapper"');n.containers.mapview.append(r);i.geolocation&&i.geolocation.indexOf(",")>-1&&n.pins.push({lat:i.geolocation.split(",")[0],lng:i.geolocation.split(",")[1],geo:i.geolocation,index:n.currentSkip*n.itemsPerPage+t+1,guid:i.guid,item:i});createItem(i,u,$("#templateEvent"),n.currentSkip*n.itemsPerPage+t+1);createItem(i,r,$("#templateEvent"),n.currentSkip*n.itemsPerPage+t+1)}),n.SearchObject.ReloadFilters&&($(".mobile-accordion").html(""),$.each(t.categoryFilters,function(i,r){console.log("start data.categoryFilters");createFilterItem(r,$(".mobile-accordion"),$("#templateMainFilter"),i==0?"":"chbFilter_0");t.categoryFilters.length==i+1&&setTimeout(function(){CustomFormButtons.init(".hotels-criteria");$(".has-sub-cat .dropdown-icon").on("click",function(){var n=$(this);$(".sub-cat, .dropdown-icon",n.parent()).toggleClass("open")});n.SearchObject.SelectedCategoryID!=""&&setTimeout(function(){$(".id-chbAll").trigger("click");setTimeout(function(){try{$(".id-"+n.SearchObject.SelectedCategoryID).trigger("click");var i=$(".id-"+n.SearchObject.SelectedCategoryID).attr("for"),t=$("#"+i).data("check-related");t=="chbFilter_0"&&(t=i);$("#"+t).parent().find(".dropdown-icon").trigger("click")}catch(r){console.log(r)}},100)},100)},100)})),DTCM.LoadTripAdvisorRatingsAsync()):(n.wrappers.events.hide(),$(".mobile-accordion").html("")),n.SearchObject.SearchBy.toLowerCase()=="keyword"&&(n.headers.events.dates.text(t.categoriesCount+" "+$("#resultsFor").val()+" '"+n.SearchObject.SearchValue+"'"),n.headers.events.dates.removeClass("hide"),n.wrappers.events.show()),$(".select-items-per-page .dd-selected-value").val()!=undefined&&(i=$(".select-items-per-page .dd-selected-value").val()),t.categoriesCount>i){c=0;t.categoriesCount>0&&(c=t.categoriesCount-1);$(".select-items-per-page, .search-result-page").removeClass("hidden");$(".search-result-page a").hide();$(".search-result-page ul").html("");var s=$(".search-result-page ul"),h=DTCM.is.mobileBrowser()?4:9,e=Math.floor(c/Number(i)),o=r,u=1,l=h;for(o>Math.ceil(h/2)&&(u=o-Math.ceil(h/2)),l=Math.min(u+h,e),f="",o==0&&(f=' class="current"'),s.append('<li><a href="javascript:goToCategoryPage();" data-page="1"'+f+">1<\/a><\/li>"),u>1&&s.append("<li>...<\/li>"),u;u<=l-1;u++)f="",u==o&&(f=' class="current"'),s.append('<li><a href="javascript:goToCategoryPage('+u+');" data-page="'+(u+1)+'"'+f+">"+(u+1)+"<\/a><\/li>");l<e&&s.append("<li>...<\/li>");f="";f=o==e?' class="current last"':' class="last"';s.append('<li><a href="javascript:goToCategoryPage('+e+');" data-page="'+(e+1)+'"'+f+">"+(e+1)+"<\/a><\/li>");$(".search-result-page a").show();o==0?$(".search-result-page a").eq(0).hide():o==e&&$(".search-result-page a").eq(-1).hide()}else n.totalEvents<=10&&$(".select-items-per-page, .search-result-page").addClass("hidden"),$(".search-result-page").addClass("hidden"),$(".search-result-page ul").html("");n.totalEvents<=n.itemsPerPage?n.pagination.current.text("All"):(a=Math.min(n.itemsPerPage*(1+n.currentPage),n.totalEvents),n.pagination.current.text(n.itemsPerPage*n.currentPage+1+"-"+a));n.pagination.total.text(n.totalEvents);n.pins&&n.pins[0]&&n.createMap(n.pins[0].lat+","+n.pins[0].lng,n.pins);n.checkPaging();n.checkShowAll();n.__LOADING__=!1;stopAnimation()}).fail(function(t,i,r){console.log(r);n.__LOADING__=!1;n.forceCall=!1})}},ajaxLoadCategoryFilters:function(n,t,i,r,u,f,e){var o,c,l;r=r?r:0;i=!0;o=this;o.currentSearchCase=="textsearch"&&(e=$('.search-field input[type="text"]').val());var s="/api/events/CalendarSearch",a=getQueryStrings(),h=a.name;switch(f){case"festivals":s="/api/events/GetEventsAndFestivals";break;case"experiences":s="/api/events/GetExperiencesAndActivities";break;case"deals":s="/api/deals/GetDealsPaged";break;case"featured":h?(e=h,s="/api/deals/FeaturedDealsFiltered"):s="/api/deals/FeaturedDealsPaged";break;case"travel":h?(e=h,s="/api/deals/TravelDealsFiltered"):s="/api/deals/TravelDealsPaged";break;case"deal_experiences":h?(e=h,s="/api/deals/ExperiencesDealsFiltered"):s="/api/deals/ExperiencesDealsPaged";break;case"shopping":h?(e=h,s="/api/deals/ShoppingDealsFiltered"):s="/api/deals/ShoppingDealsPaged";break;case"categories":s="/api/categories/GetCategoriesPaged"}if(n&&!t?(n=new Date(n),t=new Date,t.setDate(n.getDate()+7)):(n=new Date(n),t=new Date(t)),this.ready==0&&this.init("test init"),this.view=="list"?this.resetPaging():this.clearView("list"),!this.forceCall&&!this.showFeaturedOnly&&this.startDate&&this.toDate)if(n.getTime()!=this.startDate.getTime()||t.getTime()!=this.toDate.getTime()||i)n.getTime()!=this.startDate.getTime()&&t.getTime()!=this.toDate.getTime()&&i&&this.resetPaging();else return;this.startDate=n;this.toDate=t;this.pins=[];c={Language:this.language,StartDate:DTCM.DateToUTC(n),EndDate:DTCM.DateToUTC(t),CategoryID:$(".current_cat").val(),CategoryIDs:u===!0?this.filters.getCheckedFilters():"",FeaturedOnly:this.showFeaturedOnly};l=DTCM.is.mobileBrowser()?5:10;c.Take=Number($(".select-items-per-page .dd-selected-value").val())?Number($(".select-items-per-page .dd-selected-value").val()):l;c.Skip=r*c.Take;this.currentSkip=r;this.itemsPerPage=c.Take;this.__LOADING__=!0;$.ajax({url:s.toLowerCase(),type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(c),dataType:"json"}).done(function(f){var y,h,w;if(filterItemIndex=0,o.clearView(),o.showAllEvents.show(),o.showAllFestivals.show(),o.forceCall=!1,o.period=f.period,o.totalEvents=f.eventsCount>0?f.eventsCount:f.dealsCount>0?f.dealsCount:f.categoriesCount,o.totalFestivals=f.festivalsCount,o.totalOthers=f.otherEventsCount,o.showFeaturedOnly?o.headers.events.dates.text($("#featuredEvents").val()):o.headers.events.dates.text(f.period),f.deals!=null&&f.dealsCount>0&&o.headers.events.dates.text($("#latestOffersAndDeals").val()),f.categories!=null&&f.categoriesCount>0&&o.headers.events.dates.text(""),o.headers.events.count.text(f.eventsCount),o.headers.mapview.dates.text(f.period),o.headers.mapview.count.text(f.eventsCount),o.headers.festivals.count.text(f.festivalsCount),o.headers.others.count.text(f.otherEventsCount),o.currentSearchCase!="textsearch"&&(f.eventsAndFestivalsCount||f.eventsAndFestivalsCount==0)&&o.eventsTab.html("("+f.eventsAndFestivalsCount+")"),o.currentSearchCase!="textsearch"&&(f.experiencesAndActivitiesCount||f.experiencesAndActivitiesCount==0)&&o.experiencesTab.html("("+f.experiencesAndActivitiesCount+")"),(f.featuredDealsCount||f.featuredDealsCount==0)&&o.featuredTab.html("("+f.featuredDealsCount+")"),(f.travelDealsCount||f.travelDealsCount==0)&&o.travelTab.html("("+f.travelDealsCount+")"),(f.experiencesDealsCount||f.experiencesDealsCount==0)&&o.dealExperiencesTab.html("("+f.experiencesDealsCount+")"),(f.shoppingDealsCount||f.shoppingDealsCount==0)&&o.shoppingTab.html("("+f.shoppingDealsCount+")"),f.eventsCount>0?(o.wrappers.events.show(),DTCM.MarkersArray.remove(),$.each(f.events,function(n,t){var r=div("",'class="events-wrapper"'),i;o.containers.events.append(r);i=div("",'class="events-wrapper"');o.containers.mapview.append(i);t.geolocation&&t.geolocation.indexOf(",")>-1&&o.pins.push({lat:t.geolocation.split(",")[0],lng:t.geolocation.split(",")[1],geo:t.geolocation,index:o.currentPage*o.itemsPerPage+n+1,item:t});createItem(t,r,$("#templateEvent"));createItem(t,i,$("#templateEvent"),o.currentPage*o.itemsPerPage+n+1)}),u||($(".mobile-accordion").html(""),$.each(f.eventFilters,function(n,t){createFilterItem(t,$(".mobile-accordion"),$("#templateMainFilter"),n==0?"":"chbFilter_0");f.eventFilters.length==n+1&&setTimeout(function(){CustomFormButtons.init(".hotels-criteria");$(".has-sub-cat .dropdown-icon").on("click",function(){var n=$(this);$(".sub-cat, .dropdown-icon",n.parent()).toggleClass("open")})},100)}))):f.dealsCount>0?(o.wrappers.events.show(),DTCM.MarkersArray.remove(),$.each(f.deals,function(n,t){var r=div("",'class="events-wrapper"'),i;o.containers.events.append(r);i=div("",'class="events-wrapper"');o.containers.mapview.append(i);t.geolocation&&t.geolocation.indexOf(",")>-1&&o.pins.push({lat:t.geolocation.split(",")[0],lng:t.geolocation.split(",")[1],geo:t.geolocation,index:o.currentSkip*o.itemsPerPage+n+1,item:t});createItem(t,r,$("#templateEvent"),o.currentSkip*o.itemsPerPage+n+1);createItem(t,i,$("#templateEvent"),o.currentSkip*o.itemsPerPage+n+1)}),u||($(".mobile-accordion").html(""),$.each(f.dealFilters,function(n,t){createFilterItem(t,$(".mobile-accordion"),$("#templateMainFilter"),n==0?"":"chbFilter_0");f.dealFilters.length==n+1&&setTimeout(function(){CustomFormButtons.init(".hotels-criteria");$(".has-sub-cat .dropdown-icon").on("click",function(){var n=$(this);$(".sub-cat, .dropdown-icon",n.parent()).toggleClass("open")})},100)}))):f.categoriesCount>0?(o.wrappers.events.show(),$(".directory-results-number").html(f.categories.length+" "+$("#of").val()+" "+f.categoriesCount+" "+$("#results").val()),DTCM.MarkersArray.remove(),$.each(f.categories,function(n,t){var r=div("",'class="events-wrapper"'),i;o.containers.events.append(r);i=div("",'class="events-wrapper"');o.containers.mapview.append(i);t.geolocation&&t.geolocation.indexOf(",")>-1&&o.pins.push({lat:t.geolocation.split(",")[0],lng:t.geolocation.split(",")[1],geo:t.geolocation,index:o.currentSkip*o.itemsPerPage+n+1,item:t})}),u||($(".mobile-accordion").html(""),$.each(f.categoryFilters,function(n,t){createFilterItem(t,$(".mobile-accordion"),$("#templateMainFilter"),n==0?"":"chbFilter_0");f.categoryFilters.length==n+1&&setTimeout(function(){CustomFormButtons.initCategory(".hotels-criteria",e);$(".has-sub-cat .dropdown-icon").on("click",function(){var n=$(this);$(".sub-cat, .dropdown-icon",n.parent()).toggleClass("open")})},100)}))):(o.wrappers.events.hide(),$(".mobile-accordion").html("")),f.events!=null&&f.eventsCount==0&&(o.headers.events.dates.text($("#newEvents").val()),o.wrappers.events.show(),$(".select-items-per-page, .search-result-page").addClass("hidden")),f.deals!=null&&f.dealsCount==0&&(o.headers.events.dates.text($("#newDeals").val()),o.wrappers.events.show(),$(".select-items-per-page, .search-result-page").addClass("hidden")),f.categories!=null&&f.categoriesCount==0&&(e&&o.headers.events.dates.text("0 "+$("#resultsFor").val()+" '"+e+"'"),$(".directory-results-number").html("0 "+$("#of").val()+" 0 "+$("#results").val()),o.wrappers.events.show(),$(".select-items-per-page, .search-result-page").addClass("hidden")),o.currentSearchCase=="textsearch"&&(o.headers.events.dates.text(f.eventsCount+" "+$("#resultsFor").val()+" '"+e+"'"),o.wrappers.events.show()),f.eventsCount>$(".select-items-per-page .dd-selected-value").val()||f.dealsCount>$(".select-items-per-page .dd-selected-value").val()||f.categoriesCount>$(".select-items-per-page .dd-selected-value").val()){y=0;y=f.eventsCount>0?f.eventsCount:f.dealsCount>0?f.dealsCount:f.categoriesCount;$(".select-items-per-page, .search-result-page").removeClass("hidden");$(".search-result-page a").hide();$(".search-result-page ul").html("");var a=$(".search-result-page ul"),v=DTCM.is.mobileBrowser()?4:9,c=Math.floor(y/Number($(".select-items-per-page .dd-selected-value").val())),l=r,s=1,p=v;for(l>Math.ceil(v/2)&&(s=l-Math.ceil(v/2)),p=Math.min(s+v,c),h="",l==0&&(h=' class="current"'),a.append('<li><a href="javascript:goToCalendarPage();" data-page="1"'+h+">1<\/a><\/li>"),s>1&&a.append("<li>...<\/li>"),s;s<=p-1;s++)h="",s==l&&(h=' class="current"'),a.append('<li><a href="javascript:goToCalendarPage('+s+');" data-page="'+(s+1)+'"'+h+">"+(s+1)+"<\/a><\/li>");p<c&&a.append("<li>...<\/li>");h="";h=l==c?' class="current last"':' class="last"';a.append('<li><a href="javascript:goToCalendarPage('+c+');" data-page="'+(c+1)+'"'+h+">"+(c+1)+"<\/a><\/li>");$(".search-result-page a").show();l==0?$(".search-result-page a").eq(0).hide():l==c&&$(".search-result-page a").eq(-1).hide()}else $(".search-result-page").addClass("hidden"),$(".search-result-page ul").html("");f.festivals!=null&&f.festivals.length>0?(o.wrappers.festivals.show(),$.each(f.festivals,function(n,t){var i=div("",'class="festivals-wrapper"');o.containers.festivals.append(i);createItem(t,i,$("#templateFestival"));$.each(t.events,function(n,t){createItem(t,i,$("#templateEvent"))})})):o.wrappers.festivals.hide();f.otherEvents!=null&&f.otherEvents.length>0?(o.wrappers.others.show(),$.each(f.otherEvents,function(n,t){var i=div("",'class="others-wrapper"');o.containers.others.append(i);createItem(t,i,$("#templateEvent"))})):o.wrappers.others.hide();i?(o.totalEvents<=o.itemsPerPage?o.pagination.current.text("All"):(w=Math.min(o.itemsPerPage*(1+o.currentPage),o.totalEvents),o.pagination.current.text(o.itemsPerPage*o.currentPage+1+"-"+w)),o.pagination.total.text(o.totalEvents)):(o.showAllContent("events"),o.showInitial("festivals"),o.showInitial("others"));o.pins&&o.pins[0]&&o.createMap(o.pins[0].lat+","+o.pins[0].lng,o.pins);o.checkPaging();o.checkShowAll();o.__LOADING__=!1;o.forceCall=!0;o.ajaxLoadSearchResults(n,t,!0,0,!0,"categories")}).fail(function(n,t,i){console.log(i);o.__LOADING__=!1;o.forceCall=!1})}});DTCM.Extend("MapControl",{language:currentLanguage,itemsPerPage:10,currentPage:1,totalPages:0,visiblePages:9,searchFeatured:!0,searchText:null,map:null,travelMode:null,timer:null,searchDelay:500,directionsRenderer:null,DirectionsNoResults:"No directions found.",appendResults:!1,init:function(){function t(t,i){var r=t||n.searchField;r.on("keydown.mapcontrol",function(t){DTCM.is.enterChar(t)&&(i?i():n.loadResults(n.searchField.val()))})}function i(t){var i=t||n.searchField;i.off("keydown.mapcontrol")}var n=this,u,r;this.initSteps();this.container=$(".directions");this.mapFrom=$("#map_from");this.mapTo=$("#map_to");this.directionsSearch=$("#map_directions_button");this.searchField=$("#search-location, #mobile-search-location");this.pagingContainer=$(".search-result-page.map-page");this.mobileLoadMore=$("[data-map-load-more]");this.searchContainer=$(".search-field");this.resultCurrent=$("[data-visible-results]");this.resultTotal=$("[data-total-results]");this.listResults=$(".map-list-items");this.loader=new DTCM.Loader($(".map_left"));u=null;DTCM.is.mobileBrowser()&&(this.searchDelay*=2,this.mobileLoadMore.removeClass("hidden"));this.searchField.on({focus:function(){t()},blur:function(){i()}});IsChinaInstance()=="False"&&(r={focus:function(){n.mapFrom.val()!=""&&(t(n.mapTo,function(){n.GetDirections(n.mapFrom.val(),n.mapTo.val())}),t(n.mapFrom,function(){n.GetDirections(n.mapFrom.val(),n.mapTo.val())}))},blur:function(){i(n.mapTo);i(n.mapFrom)}});this.mapTo.on(r);this.mapFrom.on(r);this.searchContainer.find('input[type="submit"]').on("click",function(t){t.preventDefault();n.searchText=n.searchField.val();n.loadResults(n.searchText)});this.tabs=this.container.find(".tabs li");this.reverse=$(".direction_reverse");this.reverse.on("click",function(){var t=n.mapFrom.val();n.mapFrom.val(n.mapTo.val());n.mapTo.val(t);IsChinaInstance()=="False"&&n.GetDirections(n.mapFrom.val(),n.mapTo.val())});this.tabs.on("click",function(){var t=$(this);n.tabs.removeClass("active");t.addClass("active");n.setTravelMode(t.data("travel-mode"));$(".travel_mode").html(t.data("word-to-mode"));IsChinaInstance()=="False"&&n.GetDirections()});if(IsChinaInstance()=="False")this.directionsSearch.on("click",function(){n.GetDirections(n.mapFrom.val(),n.mapTo.val())});this.mobileLoadMore.on("click",function(t){t.preventDefault();t.stopPropagation();n.appendResults=!0;goToMapNext()});this.filters=new DTCM.FilterControl("[data-filter-select]","/api/map/filters")},setTravelMode:function(n){this.travelMode=n?google.maps.TravelMode[n.toUpperCase()]?google.maps.TravelMode[n.toUpperCase()]:google.maps.TravelMode.DRIVING:google.maps.TravelMode.DRIVING},setLang:function(n){this.language=n||"en"},GenerateMap:function(n,t){var u=n.split(",")[0],f=n.split(",")[1],r,i,o=$("body").attr("data-chineseinstance"),s,h,e;o=="False"?(this.mapOptions={zoom:12,scrollwheel:!1,styles:[{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"transit.station.airport",stylers:[{visibility:"off"}]}],center:new google.maps.LatLng(u,f)},this.map=new google.maps.Map(document.getElementById("map-canvas"),this.mapOptions),window.location.href.indexOf("dubai-shopping-festival")>-1&&(r={clickable:!1},i={north:25.272978,south:25.231175,east:55.398246,west:55.338078},historicalOverlay=new google.maps.GroundOverlay("/assets/map/images/a.png",i,r),historicalOverlay.setMap(this.map),i={north:25.287743,south:25.182095,east:55.375307,west:55.281494},historicalOverlay=new google.maps.GroundOverlay("/assets/map/images/b.png",i,r),historicalOverlay.setMap(this.map),i={north:25.233487,south:25.171047,east:55.312299,west:55.251016},historicalOverlay=new google.maps.GroundOverlay("/assets/map/images/c.png",i,r),historicalOverlay.setMap(this.map),i={north:25.251653,south:25.09925,east:55.303201,west:55.168709},historicalOverlay=new google.maps.GroundOverlay("/assets/map/images/d.png",i,r),historicalOverlay.setMap(this.map),i={north:25.114051,south:25.038235,east:55.175936,west:55.099032},historicalOverlay=new google.maps.GroundOverlay("/assets/map/images/e.png",i,r),historicalOverlay.setMap(this.map),i={north:25.118932,south:24.982955,east:55.319822,west:55.161422},historicalOverlay=new google.maps.GroundOverlay("/assets/map/images/f.png",i,r),historicalOverlay.setMap(this.map),i={north:25.277294,south:25.060212,east:55.471703,west:55.365617},historicalOverlay=new google.maps.GroundOverlay("/assets/map/images/g.png",i,r),historicalOverlay.setMap(this.map)),this.GenerateMarkers(this.map,t)):(s=null,h=null,osLat=u,osLng=f,e=[],t==null||t=="undefined"?($(".events-wrapper").each(function(){var n=$(this).data("itemid");e.push(n)}),$.ajax({url:"/api/map/getpins",type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(e),dataType:"json"}).done(function(i){var r=[];$.each(i,function(i,u){u.geolocation&&u.geolocation.indexOf(",")>-1&&r.push({lat:u.geolocation.split(",")[0],lng:u.geolocation.split(",")[1],geo:u.geolocation,index:n*t+i+1,guid:u.guid,item:{name:u.name,location:u.location,url:u.url,rating:u.rating,address:u.address,category:[u.category],imageurl:u.imageURL}})});initopenstreet(u,f,r)})):initopenstreet(u,f,t))},GenerateMarkers:function(n,t){var o,r,i,f,e,u;if(n=n||this.map,t&&n){for(o=DTCM.Markup.pin,r=new google.maps.LatLngBounds,i=0;i<t.length;i++)t[i].geo.length>0&&(typeof t[i].item.imageurl=="undefined"?f=t[i].imageurl:typeof t[i].imageurl=="undefined"&&(f=t[i].item.imageurl),e={guid:t[i].guid,geo:t[i].geo,index:t[i].index,name:t[i].item.name,location:t[i].item.location,url:t[i].item.url,rating:t[i].item.rating,address:t[i].item.address,category:t[i].item.category,imageurl:f},u=new DTCM.LabelMarker(n,e),r.extend(u.getPosition()),this.markers&&this.markers.push(u));u&&(n.fitBounds(r),n.setCenter(r.getCenter()),n.getZoom()>15&&n.setZoom(15));t.length<10&&n.setZoom(11)}},GetDirections:function(n,t){if(n&&t||(this.mapFrom.val().length>0&&(n=this.mapFrom.val()),this.mapTo.val().length>0&&(t=this.mapTo.val()),n&&t)){this.loader.start();this.travelMode||this.setTravelMode();this.map||this.GenerateMap("25.0738579,55.2298444");this.directionsRenderer||(this.directionsRenderer=new google.maps.DirectionsRenderer);this.directionsRenderer.setMap(this.map);var i={origin:n,destination:t,travelMode:this.travelMode},r=new google.maps.DirectionsService;r.route(i,function(i,r){r==google.maps.DirectionsStatus.OK?(DTCM.MapControl.directionsRenderer.setDirections(i),DTCM.MapControl.createSteps(i,n,t)):(r=="ZERO_RESULTS"||r=="NOT_FOUND")&&DTCM.MapControl.noDirections();DTCM.MapControl.loader.stop()})}},initSteps:function(){this.directionsContainer=$(".driving_directions");this.directionsContainer.css({width:"100%","box-sizing":"border-box"});this.directionsFromTo=this.directionsContainer.find(".directions_to").eq(0);this.directionsFrom=this.directionsContainer.find(".directions_from").eq(0);this.directionSteps=this.directionsContainer.find(".direction_steps");this.step=function(n,t,i){var r=new div(n,'class="column-1 font_50"'),u=new div(t,'class="column-8 font_25"'),f=new div(i,'class="column-2 font_25 color_8 last"');return(new li).append(r).append(u).append(f)}},noDirections:function(){this.directionsFromTo.html("").append(DTCM.MapControl.DirectionsNoResults)},createSteps:function(n,t,i){var o=n.routes[0],u=o.legs[0].steps,r,f,e;for(this.directionsFromTo.html("").append(i),this.directionsFrom.html("").append(t),this.directionSteps.html(""),r=0;r<u.length;r++)f=u[r].instructions,e=u[r].distance.text,this.directionSteps.append(new this.step(r+1+".",f,e));this.directionsContainer.show()},generatePaging:function(){var t=this.pagingContainer.find("ul"),n,i;if(t.children().remove(),this.paging){for(n=1,i=this.visiblePages,this.currentPage>Math.ceil(this.visiblePages/2)&&(n=this.currentPage-Math.ceil(this.visiblePages/2)),i=Math.min(n+this.visiblePages,this.totalPages),n>1&&t.append("<li>...<\/li>"),n;n<=i;n++)t.append(('<li data-map-paing="{index}"><a class="'+(n==this.currentPage?"current":"")+'" href="#" data-map-paging="{index}" title="{index}">{index}<\/a><\/li>').replace(/{index}/gi,n));i<this.totalPages&&t.append("<li>...<\/li>");this.pagingContainer.show()}else this.pagingContainer.hide()},goToPage:function(n){this.paging&&n<=this.totalPages&&this.currentPage!=n&&n>=1&&(this.currentPage=n,this.search(this.searchField.val()))},goToNextPage:function(){this.paging&&this.currentPage<this.totalPages&&(this.currentPage+=1,this.search(this.searchField.val()))},goToPrevPage:function(){this.paging&&this.currentPage>1&&(this.currentPage-=1,this.search(this.searchField.val()))},calculatePages:function(n){n>this.itemsPerPage?(this.totalPages=Math.ceil(n/this.itemsPerPage),this.paging=!0):this.paging=!1},createPaging:function(n){this.calculatePages(n);this.generatePaging()},displayVisible:function(){},loadMore:function(n){var t,r,i;this.searching&&this.currentPage<this.totalPages||(stopAnimation(),startAnimation(),this.currentPage+=1,this.searching=!0,t=this,this.searchText=n,r={Language:this.language,SearchText:this.searchText,PageNumber:this.currentPage,PageSize:this.itemsPerPage},i=this.filters.getLastFilter(),i.index==0&&this.filters.current>0&&(this.filters.current-=1,i=this.filters.getLastFilter()),i&&i.value&&(r.CategoryID=i.value),$.ajax({url:"/api/map/items",type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(r),dataType:"json"}).done(function(n){n.count&&n.count>0?(t.mobileLoadMore.show(),t.calculatePages(n.count)):t.mobileLoadMore.hide();t.populateResults(n);t.searching=!1;stopAnimation()}).fail(function(){t.searching=!1;stopAnimation()}))},search:function(n){var t,r,i;(!this.searching&&n||this.searchFeatured)&&(DTCM.is.mobileBrowser()?DTCM.MobileMapControl.mapLoader.startAnimation():(stopAnimation(),startAnimation()),this.searching=!0,t=this,this.searchText=n,this.searchFeatured,r={Language:this.language,SearchText:this.searchText,PageNumber:this.currentPage,PageSize:this.itemsPerPage},i=this.filters.getLastFilter(),i.index==0&&this.filters.current>0&&(this.filters.current-=1,i=this.filters.getLastFilter()),i&&i.value&&(r.CategoryID=i.value),$.ajax({url:"/api/map/items",type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(r),dataType:"json"}).done(function(n){n.count&&n.count>0?(t.pagingContainer.show(),t.createPaging(n.count)):t.pagingContainer.hide();t.populateResults(n);t.searching=!1;DTCM.is.mobileBrowser()?DTCM.MobileMapControl.mapLoader.stopAnimation():stopAnimation()}).fail(function(){t.searching=!1;DTCM.is.mobileBrowser()?DTCM.MobileMapControl.mapLoader.stopAnimation():stopAnimation()}))},populateResults:function(n,t){var i,f,e,u,s,h;if(n&&n.length!=0){this.resultsContainer=$(".map_search_results .search-results-container");var r=n.items,c=!1,l=[],o=0;if(t?o=this.resultsContainer.find(".map_item").length:(DTCM.MarkersArray.remove(),this.resultsContainer.html("")),r.length==0)this.resultsContainer.html('<p class="noResults">'+$("#noResultsFound").val()+"<\/p>");else for(i=0;i<r.length;i++)f=i+o+1,e=DTCM.Markup.search.replace(/{index}/gi,f),e=DTCM.Markup.replace(r[i],e),r[i].geo||r[i].geolocation?(u={geo:r[i].geolocation,index:i+o+1,item:{name:r[i].name,location:r[i].location||"",url:r[i].url,address:r[i].address,rating:r[i].rating}},u.geo&&!c&&u.geo.indexOf(",")>-1&&(c=u.geo.split(",")),l.push(u)):f=null,s='onclick="PoiItemClick('+f+', this);"',h=new div(e,'data-href="'+r[i].url+'" class="map_item d-table full-width" '+s+""),this.resultsContainer.append(h);$(".mobile-list-paging").text(this.itemsPerPage*this.currentPage+1+" - "+(this.itemsPerPage*this.currentPage+r.length));stopAnimation();r.length>0?(this.GenerateMarkers(this.map,l),setTimeout(function(){api&&(api.reinitialise(),api.scrollTo(0,0))},500)):this.map.setCenter(new google.maps.LatLng("25.0738579","55.2298444"))}},loadResults:function(n,t,i,r,u){var f,e;this.searching||($("[data-switch-default]").click(),this.itemsPerPage=$(".select-items-per-page .dd-selected-value").val()?Number($(".select-items-per-page .dd-selected-value").val()):DTCM.is.mobileBrowser()?5:10,this.loader.start(),i=i?i:0,this.searching=!0,f=this,this.searchText=n,this.currentPage=Math.floor(i/this.itemsPerPage),n=="DSFMap"?(this.searchText="",e={Language:this.language,SearchText:this.searchText,PageNumber:this.currentPage<=0?1:this.currentPage,PageSize:this.itemsPerPage,CategoryID:r===!0?u:""}):e={Language:this.language,SearchText:this.searchText,PageNumber:this.currentPage<=0?1:this.currentPage,PageSize:this.itemsPerPage,CategoryID:r===!0?this.filters.getCheckedFilters():""},e.Take=this.itemsPerPage,e.Skip=i*e.Take,$.ajax({url:"/api/map/items",type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(e),dataType:"json"}).done(function(n){var c,y,a,u;if(DTCM.MarkersArray.remove(),c=[],y=n.count>0?e.Skip+f.itemsPerPage>n.count?n.count:e.Skip+f.itemsPerPage:0,f.resultCurrent.text(y),f.resultTotal.text(n.count),f.appendResults!==!0&&f.listResults.html(""),$.each(n.items,function(n,t){var r=div("",'class="events-wrapper"');f.listResults.append(r);t.geolocation&&t.geolocation.indexOf(",")>-1&&c.push({lat:t.geolocation.split(",")[0],lng:t.geolocation.split(",")[1],geo:t.geolocation,index:i*e.Take+n+1,guid:t.guid,item:t,imageurl:t.imageURL});createItem(t,r,$("#templateEvent"),i*e.Take+n+1)}),DTCM.LoadTripAdvisorRatingsAsync(),c.length>0&&f.GenerateMarkers(f.map,c),r||($(".mobile-accordion").html(""),$.each(n.filters,function(t,i){createFilterItem(i,$(".mobile-accordion"),$("#templateMainFilter"),t==0?"":"chbFilter_0");n.filters.length==t+1&&setTimeout(function(){CustomFormButtons.init(".hotels-criteria");$(".has-sub-cat .dropdown-icon").on("click",function(){var n=$(this);$(".sub-cat, .dropdown-icon",n.parent()).toggleClass("open")})},100)})),n.count>$(".select-items-per-page .dd-selected-value").val()){a=0;n.count>0&&(a=n.count-1);$(".select-items-per-page, .search-result-page").removeClass("hidden");$(".search-result-page a").hide();$(".search-result-page ul").html("");var h=$(".search-result-page ul"),l=DTCM.is.mobileBrowser()?4:9,o=Math.floor(a/Number($(".select-items-per-page .dd-selected-value").val())),s=i,t=1,v=l;for(s>Math.ceil(l/2)&&(t=s-Math.ceil(l/2)),v=Math.min(t+l,o),u="",s==0&&(u=' class="current"'),h.append('<li><a href="javascript:goToMapPage();" data-page="1"'+u+">1<\/a><\/li>"),t>1&&h.append("<li>...<\/li>"),t;t<=v-1;t++)u="",t==s&&(u=' class="current"'),h.append('<li><a href="javascript:goToMapPage('+t+');" data-page="'+(t+1)+'"'+u+">"+(t+1)+"<\/a><\/li>");v<o&&h.append("<li>...<\/li>");u="";u=s==o?' class="current last"':' class="last"';h.append('<li><a href="javascript:goToMapPage('+o+');" data-page="'+(o+1)+'"'+u+">"+(o+1)+"<\/a><\/li>");$(".search-result-page a").show();s==0?$(".search-result-page a").eq(0).hide():s==o&&$(".search-result-page a").eq(-1).hide()}else f.totalEvents<=10&&$(".select-items-per-page, .search-result-page").addClass("hidden"),$(".search-result-page").addClass("hidden"),$(".search-result-page ul").html("");n.count<=10&&$(".select-items-per-page").addClass("hidden");DTCM.is.mobileBrowser()&&($(".events-wrapper").length>=n.count?f.mobileLoadMore.hide():f.mobileLoadMore.show());f.searching=!1;f.appendResults=!1;f.loader.stop()}).fail(function(){f.searching=!1;f.appendResults=!1;f.loader.stop()}))},LoadPins:function(n,t){var i=this,r=[];$(".events-wrapper").each(function(){var n=$(this).data("itemid");r.push(n)});$.ajax({url:"/api/map/getpins",type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(r),dataType:"json"}).done(function(r){var u=[];$.each(r,function(i,r){r.geolocation&&r.geolocation.indexOf(",")>-1&&u.push({lat:r.geolocation.split(",")[0],lng:r.geolocation.split(",")[1],geo:r.geolocation,index:n*t+i+1,guid:r.guid,item:{name:r.name,location:r.location,url:r.url,rating:r.rating,address:r.address,category:[r.category],imageurl:r.imageURL}})});i.GenerateMarkers(i.map,u)}).fail(function(){i.searching=!1;i.appendResults=!1})}});DTCM.Extend("MobileMapControl",{_isMobile:!1,isMobile:function(){return DTCM.is.mobileBrowser()},level:0,init:function(){var n=this;this.timer=null;this.filters=$(".mobile-filters");this.filterTrigger=$(".mobile-filter-trigger");this.backButton=this.filters.find(".nav-back");this.header=this.filters.find("h3");this.steps=this.filters.find(".filter-slide-container");this.loader=new DTCM.Loader(this.filters);this.mapLoader=new DTCM.Loader($(".mapContainer"));this.backButton.on("click",function(){var t=$(this).parents(".filter-slide-container");t.hasClass("slide-level-1")?n.hideFilters():n.revert()});this.filterTrigger.on("click",function(){n.showFilters()});this.filters.on("click","[data-filter-anchor]",function(){n.loader.startAnimation();var i=$(this).data("filter-level"),t=$(this).data("filter-anchor"),r=$(this).text();t==undefined||t.length==0?(n.loader.stopAnimation(),n.hideFilters()):n.mobileFilters.setFilter(i,t,function(t,i){n.loader.stopAnimation();n.updateFilters();i.length>0&&(n.level<2&&n.level++,n.advance(r))})});this.mobileFilters=DTCM.MapControl.filters},updateFilters:function(){var t=[[],[],[]],n;for(DTCM.MapControl.filters.filters.each(function(n){var i=$(this).find("option");i.each(function(){t[n].push({text:$(this).text(),value:$(this).val(),level:n})})}),this.options=t,n=0;n<t.length;n++)this.generateList(t[n],n)},generateList:function(n,t){var f=n.length,t=t!=undefined&&t>=0?t:this.level,r=this.steps.eq(t).find(".filters-list"),i,u;for(r.html(""),i=0;i<f;i++)u=new anchor(n[i].text,"javascript:;",'data-filter-anchor="'+n[i].value+'" data-filter-level="'+n[i].level+'"'),r.append(u)},showFilters:function(){var n=this;$("html").css("overflow","hidden");this.filters.removeClass("hidden");setTimeout(function(){n.filters.addClass("opened");n.advance()})},hideFilters:function(){var n=this;$("html").css("overflow","auto");this.filters.removeClass("opened");this.timer=setTimeout(function(){n.filters.addClass("hidden")},500)},advance:function(n){if(this.steps.eq(this.level).find("[data-filter-anchor]").length>0){var t=this;this.steps.eq(this.level).removeClass("hidden");setTimeout(function(){t.steps.eq(t.level).addClass("opened")});n&&this.steps.eq(this.level).find("h3").text(n)}},revert:function(){var t=this,n=this.level;this.steps.eq(n).removeClass("opened");this.timer=setTimeout(function(){t.steps.eq(n).addClass("hidden")},500);this.level--}});DTCM.Extend("CheckboxFilterControl",function(n){var n=n||"[data-checkbox-filters]"});DTCM.Extend("FilterControl",function(n,t,i){var n=n||"[data-filter-select]",r=this;return this.working=!1,this.startFrom=i,this.current=1,this.filter=[{id:null,name:""}],this.language="en",this.ID="",this.url=t||"/api/map/filters",this.filters=$(n),this.setLanguage=function(n){n&&(this.language=n)},this.setID=function(n){n&&(this.ID=n)},this.addFilter=function(n,t){if(t!==undefined)return n||(n=""),this.removeFilter(n),this.filter.push({name:n,value:t}),this.filter},this.removeFilter=function(n){for(var t=0;t<this.filter.length;t++)this.filter[t].name==n&&this.filter.splice(t,1);return this.filter},this.removeFilterByIndex=function(n){n&&n<this.filter.length&&this.filter.splice(n,1)},this.resetFilters=function(){return this.filter=[],this},this.resetSelectedFilters=function(){this._resetting=!0;this.setFilter(0,"");this._resetting=!1},this.getFilters=function(){for(var t=[],n=null,i=0;i<=this.current;i++)n=this.filters.eq(i).data("ddslick"),n&&t.push({name:n.selectedData.text,value:n.selectedData.value,index:n.selectedIndex});return t.length==0&&t.push({name:null,id:null}),t},this.getCheckedFilters=function(){var t="",i="",r=!0,n=$(".right-side-filter-container .checkbox-field input:checkbox");return n=n.length>0?n.filter(":checked"):$(".checkbox-field input:checkbox:checked"),n.each(function(){$("#"+$(this).attr("name").toString().replace("chb","hf")).val()&&(n.parent().parent().hasClass("sub-cat"),t=t+i+$("#"+$(this).attr("name").toString().replace("chb","hf")).val(),r&&(r=!1,i=","))}),t},this.getLastFilter=function(){var n=this.getFilters();return n[n.length-1]},this.toObject=function(){var i={},n=this.getFilters(),t;for(t in n)i[n[t].name]=n[t].value;return i},this.getName=function(n){if(n!==undefined)return this.filters.eq(n).find(":selected").text();this.filters.eq(0).find(":selected").text()},this.getIndex=function(n,t){if(n!==undefined)return t!==undefined?this.filters.eq(n).find('option[value="'+t+'"]').index():this.filters.eq(n).find(":selected").index()},this.setFilter=function(n,t,i){if(n!==undefined){if(t!==undefined){var r=Math.max(0,this.getIndex(n,t));this.filters.eq(n).ddslick("select",{index:r});i&&(this.callback=i)}return this}},this.addFilter(this.getName(0),this.filters.eq(0).val()),this.getNextLevel=function(){var n,t;this.current+1>=this.filters.length||this.working||(this.working=!0,n=this.getLastFilter(),n.index==0&&this.current>0&&(this.current-=1,n=this.getLastFilter()),t={language:this.language,id:n.value},$.ajax({url:this.url,type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(t),dataType:"json",success:function(t){r.populateDropDown(t.filters,n.value);r.working=!1}}))},this.populateDropDown=function(n,t){var u,i,f;if(this.current<this.filters.length){for(this.startFrom!==null&&(this.current=this.startFrom,this.startFrom=null),this.current+=1,u=this.current;u<this.filters.length;u++)this.filters.eq(u).children().remove().andSelf().ddslick("destroy").parents(".dropdown-wrapper").hide();if((n.length<=1||t=="")&&!DTCM.is.mobileBrowser()){this.current-=1;return}for(i=0;i<n.length;i++)this.filters.eq(this.current).append(new option(n[i].id,n[i].name));f=!0;this.filters.eq(this.current).ddslick({onSelected:function(n){if(!f&&(r.current=$(n.original).data("filter-index"),r.removeFilterByIndex(r.current),r.addFilter(n.selectedData.text,n.selectedData.value),r.getNextLevel(),r.onChange))r.onChange(r,r.current)}}).parents(".dropdown-wrapper").show();f=!1;this.callback&&this.callback(this,n);this.callback=!1}return this},this.setOnChange=function(n){this.onChange=n},this.filters.each(function(n){var t=$(this);t.data("filter-index",n);t.off("change").on("change",function(){if($(this).trigger("change.ddslick"),r.removeFilterByIndex(n),r.addFilter(r.getName(n),$(this).val()),r.current=n,r.getNextLevel(),r.onChange)r.onChange(r,n)});n==0&&t.trigger("change")}),this});window.location.href.indexOf("dubai-shopping-festival")>-1?DTCM.Extend("Markup",{replace:function(n,t){var i,r;for(i in n){var f=typeof n.push=="function"?n[i][0]:n[i],u=new RegExp("{"+$.trim(i)+"}","gi"),e=t.match(u);if(e)for(r=0;r<e.length;r++)t=t.replace(u,$.trim(f));else t=t.replace(u,$.trim(f))}return t},pin:'<div class="info-box"><p><strong class="font_33"><a href="{url}" title="{name}" target="_blank">{name}<\/a><\/strong><\/p><p>{location}<\/p><p>{address}<\/p><p>{phone}<\/p><img src=\'{imageurl}\'><div class="tripAdvisorRating r{rating}" data-tripadvisorguid="{tripadvisorguid}"><div class="trip-advisor-icon"><\/div><div class="stars"><\/div><\/div><\/div>',search:'<div class="d-cell column-1 color_3 font_38 margin-top-bottom-10">{index}<\/div><div class="d-cell column-8"><div class="font_50">{name}<\/div><div class="font_49">{address}<\/div><\/div><div class="d-cell column-1  margin-top-bottom-10 last"><a onclick="$tripPlanner.addActivity(\'{tripPlannerID}\', this);return false;" href="#" class="red_button">+<\/a><\/div>'}):window.location.href.indexOf("itineraries")>-1?DTCM.Extend("Markup",{replace:function(n,t){var i,r;for(i in n){var f=typeof n.push=="function"?n[i][0]:n[i],u=new RegExp("{"+$.trim(i)+"}","gi"),e=t.match(u);if(e)for(r=0;r<e.length;r++)t=t.replace(u,$.trim(f));else t=t.replace(u,$.trim(f))}return t},pin:'<div class="info-box"><p><strong class="font_33">{name}<\/strong><\/p><p>{location}<\/p><p>{address}<\/p><p>{phone}<\/p><img src=\'{imageurl}\'><div class="tripAdvisorRating r{rating}" data-tripadvisorguid="{tripadvisorguid}"><div class="trip-advisor-icon"><\/div><div class="stars"><\/div><\/div><\/div>',search:'<div class="d-cell column-1 color_3 font_38 margin-top-bottom-10">{index}<\/div><div class="d-cell column-8"><div class="font_50">{name}<\/div><div class="font_49">{address}<\/div><\/div><div class="d-cell column-1  margin-top-bottom-10 last"><a onclick="$tripPlanner.addActivity(\'{tripPlannerID}\', this);return false;" href="#" class="red_button">+<\/a><\/div>'}):DTCM.Extend("Markup",{replace:function(n,t){var i,r;for(i in n){var f=typeof n.push=="function"?n[i][0]:n[i],u=new RegExp("{"+$.trim(i)+"}","gi"),e=t.match(u);if(e)for(r=0;r<e.length;r++)t=t.replace(u,$.trim(f));else t=t.replace(u,$.trim(f))}return t},pin:'<div class="info-box"><p><strong class="font_33"><a href="{url}" title="{name}" target="_blank">{name}<\/a><\/strong><\/p><p>{location}<\/p><p>{address}<\/p><p>{phone}<\/p><img src=\'{imageurl}\'><div class="tripAdvisorRating r{rating}" data-tripadvisorguid="{tripadvisorguid}"><div class="trip-advisor-icon"><\/div><div class="stars"><\/div><\/div><p class="view-deals">{view_deals}<\/p><\/div>',pinPOI:'<div class="info-box"><p><strong class="font_33"><a title="{name}">{name}<\/a><\/strong><\/p><p>{location}<\/p><p>{address}<\/p><p>{phone}<\/p><img src=\'{imageurl}\'><div class="tripAdvisorRating r{rating}" data-tripadvisorguid="{tripadvisorguid}"><div class="trip-advisor-icon"><\/div><div class="stars"><\/div><\/div><\/div>',pinCalendar:'<div class="info-box"><p><strong class="font_33"><a href="{url}" title="{name}" target="_blank">{name}<\/a><\/strong><\/p><p>{location}<\/p><p>{address}<\/p><p>{phone}<\/p><div class="tripAdvisorRating r{rating}" data-tripadvisorguid="{tripadvisorguid}"><div class="trip-advisor-icon"><\/div><div class="stars"><\/div><\/div><\/div>',search:'<div class="d-cell column-1 color_3 font_38 margin-top-bottom-10">{index}<\/div><div class="d-cell column-8"><div class="font_50">{name}<\/div><div class="font_49">{address}<\/div><\/div><div class="d-cell column-1  margin-top-bottom-10 last"><a onclick="$tripPlanner.addActivity(\'{tripPlannerID}\', this);return false;" href="#" class="red_button">+<\/a><\/div>'});isMapEnabled=!1;DTCM.Extend("ParseDate",function(n){var i=n.getDate(),t=n.getMonth()+1,r=n.getFullYear();return t=t<10?"0"+t:t,t+"/"+i+"/"+r});DTCM.Extend("DateToUTC",function(n){if(n)return Date.UTC(n.getFullYear(),n.getMonth(),n.getDate())});infiStartNumber=8;infiIncrement=3;$(function(){var t,n,i;fakeInfiHide();i=$(".arrow-next-chip");$("#nav").find(".remote-switch").on("click",function(){if($(window).width()>1024)return!1;$(this).parent().toggleClass("active")});$(".tab_button").mouseover(function(){var n=$(this).attr("data-menu"),t;$(".trip_menu").hide();$(n).show().siblings().hide();t=$(n).find(".content_cell").height();t>250&&$(n).find(".mega_submenu, .scroll-pane").css("height",t)});$(".tab_button").not(".tab_button_demo").mouseover(function(){$(".main_menu_dropdown").hide();$(".mega_submenu").hide();$(".tab_button").removeClass("hovered");$(".submenu_link").removeClass("active")});$(".main_menu_content, .main_nav_container").mouseleave(function(){$(".main_menu_dropdown").hide();$(".mega_submenu").hide();$(".submenu_link").removeClass("active");$(".hovered").removeClass("hovered")});$(".mega_menu_links .link_button_v3").mouseover(function(n){if($(".submenu_link").removeClass("active"),$(this).hasClass("mega_submenu_demo_trigger")){n.preventDefault();var i=$(this).attr("data-menu");$(i).is(":visible")?$(i).hide():($(this).addClass("active"),clearTimeout(t),t=setTimeout(function(){$(".mega_submenu").hide();$(i).css("display","table-cell");$(i).data("scrollPane")||($(i).find(".scroll-pane").jScrollPane(),$(i).data("scrollPane",!0))},750))}else $(".mega_submenu").hide()});n=$(".three-column-lists ul li.link_widget_v1").length;n==2?$(".three-column-lists").removeClass().addClass(".two-column-lists"):n==4&&$(".three-column-lists").removeClass().addClass(".four-column-lists")});$(function(){function h(i,r){t=$(".signup_nav").outerHeight();var u=e?t+n:n;r>u?$.each(i,function(n,t){if($(t).hasClass("main_nav_container")&&$(t).addClass("nav-moving"),it&&Modernizr.touch){k.on("focus",function(){$(t).stop().css({top:$(t).top=window.pageYOffset,position:"absolute"});v=!0});k.blur(function(){$(t).stop().css({top:0,position:"fixed"});v=!1})}v?$(t).stop().css({top:$(t).top=window.pageYOffset,position:"absolute"}):$(t).stop().css({top:0,position:"fixed"})}):$.each(i,function(n,t){$(t).hasClass("main_nav_container")&&$(t).removeClass("nav-moving");$(t).css("top")!=$(t).data("top")&&$(t).stop().css({top:$(t).data("top"),position:"absolute"})})}function g(){o.signup.show();o.forgotten.hide();o.confirm.hide()}function c(t,i){var r=t?1:500;$(".homepage_section").stop().animate({paddingTop:n-2},r,function(){i&&i()});$(".main_nav_container").animate({top:n},r,function(){$(this).css("position","absolute")}).data("top",n);$(".mobile_nav").animate({top:n},r).data("top",n);e=!1;d.removeClass("active")}function y(i,r){var u=i?1:500;$(".accessibility-section").hide();$(".homepage_section").stop().animate({paddingTop:t+n},u,function(){r&&r()});$(".main_nav_container").animate({position:"absolute",top:t+n},u).data("top",t+n);$(".mobile_nav").animate({top:t+n},u).data("top",t+n);e=!0;d.addClass("active")}function nt(){var n=$(".photo-description");$.each(n,function(n,t){var r=$.trim($(t).html()),u=r.length,i=50;if(u>i){if(r.charAt(i)!=" "||r.charAt(i)!=","||r.charAt(i)!=".")while(r.charAt(i)!=" ")i--;$(t).html(r.slice(0,i)+"...")}})}var i=$(".map_dubai"),s=$(".filter_directory"),p=$(".saved_places"),l=$(".directions"),r=$(".sidebar_menu"),u=$(".map_search_results"),w=$(".print_options, .modal-window-print"),tt,b;$(".btn_saved_places").click(function(n){n.preventDefault();$(p).show();$(s).hide();$(r).hide();$(u).hide();$(l).hide();$(i).css("background","white")});$(".saved_places .close_tile").click(function(n){n.preventDefault();$(p).hide();$(r).show();$(u).show();$(i).css("background","#f2f2f2")});$(".btn_get_directions").click(function(n){n.preventDefault();$(s).hide();$(r).hide();$(u).hide();$(l).show();$(i).css("background","#f2f2f2")});$(".directions .close_tile").click(function(n){n.preventDefault();$(l).hide();$(r).show();$(u).show();$(i).css("background","#f2f2f2")});$(".btn_filter_directory").click(function(n){n.preventDefault();$(s).show();$(r).hide();$(u).hide();$(i).css("background","black")});$(".filter_directory .close_tile").click(function(n){n.preventDefault();$(s).hide();$(r).show();$(u).show();$(i).css("background","#f2f2f2")});$(".btn_print_options").click(function(n){n.preventDefault();$(w).show()});$(".modal-window-print .close_tile").click(function(n){n.preventDefault();$(w).hide()});$(".nav_p").hover(function(){setTimeout(function(){$("body").append('<div class="megamenu-overlay" />')},200)},function(){setTimeout(function(){$(".megamenu-overlay").remove()},200)});$("#language-dropdown").appendTo("#language-dropdown-div");$("#language-dropdown").removeAttr("style");$("#small-popup-content").appendTo("#small_popup");$("#small-popup-content").removeAttr("style");var it=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1,a=$(document).scrollTop(),n=$(".meta_nav").outerHeight(),f=$(document).scrollTop(),t=$(".signup_nav").outerHeight()+0,k=$(".content_cell").find('input[type="text"], textarea').not(".trip-datepicker"),e=!1,v=!1;DTCM.is.mobileBrowser()&&($(document).bind("touchstart",function(n){a=!1;n.originalEvent.touches&&n.originalEvent.touches.length>0&&(tt=n.originalEvent.touches[0].clientY)}),$(document).bind("touchmove",function(){f=$(window).scrollTop();h([".mobile_nav",".main_nav_container",".mobile-toggle"],f)}));$(document).ready(function(){$(window).scroll(function(){$(".nav_prompt").hasClass("active")||$(".label-accessibility").hasClass("active")||(f=$(document).scrollTop(),h([".mobile_nav",".main_nav_container",".mobile-toggle"],f),a=!1,n=$(".meta_nav").outerHeight(),$(".main_nav_container, .mobile_nav").data("top",n));Modernizr.touch||$(".autocomplete-suggestions").hide();var t=$(".gallery-item").not(".invisible").last();t.length&&t.position().top+t.outerHeight()<$(".main_nav").offset().top&&fakeInfiShow()})});a>n?(b=$(document).scrollTop()-30,h([".mobile_nav",".main_nav_container",".mobile-toggle"],b)):$(".main_nav_container").css("top",n);$(".main_nav_container, .mobile_nav").data("top",n);var ut=$(".signup_nav"),d=$(".nav_prompt"),o={signup:$(".signup_nav_wrap"),forgotten:$(".forgotten_nav_wrap"),confirm:$(".confirmation_nav_wrap")},rt=$(".font_64");DTCM.is.mobileResize();$(window).on("load, resize",function(){if(DTCM.is.mobileBrowser()&&DTCM.is.mobileResize()||!DTCM.is.mobileBrowser()){rt.css("z-index",1);var i=e?t+n:n;f>n?$(".main_nav_container").css("top",0):$(".main_nav_container").css("top",i)}});DTCM.Proxy.add(c,"hideLogin");DTCM.Proxy.add(y,"showLogin");$(".label-accessibility").click(function(){$(this).toggleClass("active");e?c():y();$(".nav_prompt").removeClass("active");$(".accessibility-section").show()});$(".forgotten_login").click(function(){o.signup.hide();o.forgotten.show()});$(".close_signup").click(function(){c();g()});nt()});$(function(){if($(".init-calendar-flights").length){var n=$(".init-calendar-flights");n.find(".trip-datepicker").datepicker({dateFormat:"dd/mm/y",minDate:n.find(".check-in-datepicker").val()==""?0:n.find(".check-in-datepicker").val(),onSelect:function(){if($(this).hasClass("check-in-datepicker")){n.find(".check-out-datepicker").datepicker("destroy");n.find(".check-out-datepicker").val("").text("");var t=$(".init-calendar-flights").find(".check-in-datepicker").val().toString().split("/"),i=new Date(Number(t[2])+2e3,Number(t[1])-1,Number(t[0])+1);n.find(".check-out-datepicker").datepicker({dateFormat:"dd/mm/y",minDate:i})}}});n.find(".banner-buttons-red").on("click",function(){var u=0,h=/^(?:(?:31(\/)(?:0?[13578]|1[02]))\1|(?:(?:29|30)(\/)(?:0?[1,3-9]|1[0-2])\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:29(\/|-|\.)0?2\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\d|2[0-8])(\/|-|\.)(?:(?:0?[1-9])|(?:1[0-2]))\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$/,f=n.find(".from input, .trip-datepicker"),e,t,i,r,o,s;if(f.removeClass("error"),f.each(function(){if($(this).hasClass("trip-datepicker")){var n=this.value;h.test(n)||($(this).addClass("error"),u++)}else $(this).val().toString()==""&&($(this).addClass("error"),u++)}),u>0)return!1;e="?emailAddress=&action=search&destination=DXB&cabin=e&trip=2&currency=USD";t=$(".input-container.from input").val().toString();t=t.split("[");t=t[t.length-1];t=t.replace("]","");t="&departure="+t.replace("]","");i=$(".booking-widget-flights .check-in-input input").val().toString();i=i.split("/");i[i.length-1]=(Number(i[i.length-1])+2e3).toString();i="&departureDate="+i.join("");r=$(".booking-widget-flights .check-out-input input").val().toString();r=r.split("/");r[r.length-1]=(Number(r[r.length-1])+2e3).toString();r="&returnDate="+r.join("");o="&passengers="+$(".book-flight-dropdowns .dd-selected-value").eq(0).val()+"&children="+$(".book-flight-dropdowns .dd-selected-value").eq(1).val()+"&infants="+$(".book-flight-dropdowns .dd-selected-value").eq(2).val();s=flightDomain+e+t+i+r+o;ga("send","event","Booking Widget SearchFlights Clicks","Booking Widget SearchFlights Clicks","'"+BookNowPageElementPageID+"'");$(this).attr("href",s)})}$(".widget-tab-btn").on("click",function(){var t=$(this),n,i;if($(t.parent().parent().parent().parent().parent()).hasClass("horizontal-booking-widget")){if($(".horizontal-booking-widget .widget-tab-btn").removeClass("active"),t.addClass("active"),n=$(".horizontal-booking-widget .booking-widget-"+t.attr("data-widget-href")),i=$(".horizontal-booking-widget .check-in-datepicker",n).val()==""?0:$(".horizontal-booking-widget .check-in-datepicker",n).val(),$(".horizontal-booking-widget .booking-widget-tab").addClass("hide"),n.removeClass("hide").promise().done(function(){$(".horizontal-booking-widget .trip-datepicker",n).datepicker({dateFormat:"dd/mm/y",minDate:$(".horizontal-booking-widget .check-in-datepicker",n).val()==""?0:$(".horizontal-booking-widget .check-in-datepicker",n).val(),onSelect:function(){if($(this).hasClass("check-in-datepicker")){$(".horizontal-booking-widget .check-out-datepicker",n).datepicker("destroy");$(".horizontal-booking-widget .check-out-datepicker",n).val("").text("");var t=$(".horizontal-booking-widget .check-in-datepicker",n).val().toString().split("/"),i=new Date(Number(t[2])+2e3,Number(t[1])-1,Number(t[0])+1);$(".horizontal-booking-widget .check-out-datepicker",n).datepicker({dateFormat:"dd/mm/y",minDate:i})}}})}),t.attr("data-widget-href")=="flights")$(".horizontal-booking-widget .booking-widget-flights .banner-buttons-red").on("click",function(){var r=0,s=/^(?:(?:31(\/)(?:0?[13578]|1[02]))\1|(?:(?:29|30)(\/)(?:0?[1,3-9]|1[0-2])\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:29(\/|-|\.)0?2\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\d|2[0-8])(\/|-|\.)(?:(?:0?[1-9])|(?:1[0-2]))\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$/,u=$(".horizontal-booking-widget .from input,.horizontal-booking-widget  .trip-datepicker",$(".horizontal-booking-widget .booking-widget-flights")),f,n,t,i,e,o;if(u.removeClass("error"),u.each(function(){if($(this).hasClass("trip-datepicker")){var n=this.value;s.test(n)||($(this).addClass("error"),r++)}else $(this).val().toString()==""&&($(this).addClass("error"),r++)}),r>0)return!1;f="?emailAddress=&action=search&destination=DXB&cabin=e&trip=2&currency=USD";n=$(".horizontal-booking-widget .input-container.from input").val().toString();n=n.split("[");n=n[n.length-1];n=n.replace("]","");n="&departure="+n.replace("]","");t=$(".horizontal-booking-widget .booking-widget-flights .check-in-input input").val().toString();t=t.split("/");t[t.length-1]=(Number(t[t.length-1])+2e3).toString();t="&departureDate="+t.join("");i=$(".horizontal-booking-widget .booking-widget-flights .check-out-input input").val().toString();i=i.split("/");i[i.length-1]=(Number(i[i.length-1])+2e3).toString();i="&returnDate="+i.join("");e="&passengers="+$(".book-flight-dropdowns .dd-selected-value").eq(0).val()+"&children="+$(".book-flight-dropdowns .dd-selected-value").eq(1).val()+"&infants="+$(".book-flight-dropdowns .dd-selected-value").eq(2).val();o=flightDomain+f+n+t+i+e;ga("send","event","Booking Widget SearchFlights Clicks","Booking Widget SearchFlights Clicks","'"+BookNowPageElementPageID+"'");$(this).attr("href",o)})}else if($(".vertical-booking-widget .widget-tab-btn").removeClass("active"),t.addClass("active"),n=$(".vertical-booking-widget .booking-widget-"+t.attr("data-widget-href")),i=$(".vertical-booking-widget .check-in-datepicker",n).val()==""?0:$(".vertical-booking-widget .check-in-datepicker",n).val(),$(".vertical-booking-widget .booking-widget-tab").addClass("hide"),n.removeClass("hide").promise().done(function(){$(".vertical-booking-widget .trip-datepicker",n).datepicker({dateFormat:"dd/mm/y",minDate:$(".vertical-booking-widget .check-in-datepicker",n).val()==""?0:$(".vertical-booking-widget .check-in-datepicker",n).val(),onSelect:function(){if($(this).hasClass("check-in-datepicker")){$(".vertical-booking-widget .check-out-datepicker",n).datepicker("destroy");$(".vertical-booking-widget .check-out-datepicker",n).val("").text("");var t=$(".vertical-booking-widget .check-in-datepicker",n).val().toString().split("/"),i=new Date(Number(t[2])+2e3,Number(t[1])-1,Number(t[0])+1);$(".vertical-booking-widget .check-out-datepicker",n).datepicker({dateFormat:"dd/mm/y",minDate:i})}}})}),t.attr("data-widget-href")=="flights")$(".vertical-booking-widget .booking-widget-flights .banner-buttons-red").on("click",function(){var r=0,s=/^(?:(?:31(\/)(?:0?[13578]|1[02]))\1|(?:(?:29|30)(\/)(?:0?[1,3-9]|1[0-2])\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:29(\/|-|\.)0?2\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\d|2[0-8])(\/|-|\.)(?:(?:0?[1-9])|(?:1[0-2]))\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$/,u=$(".vertical-booking-widget .from input, .vertical-booking-widget .trip-datepicker",$(".vertical-booking-widget .booking-widget-flights")),f,n,t,i,e,o;if(u.removeClass("error"),u.each(function(){if($(this).hasClass("trip-datepicker")){var n=this.value;s.test(n)||($(this).addClass("error"),r++)}else $(this).val().toString()==""&&($(this).addClass("error"),r++)}),r>0)return!1;f="?emailAddress=&action=search&destination=DXB&cabin=e&trip=2&currency=USD";n=$(".vertical-booking-widget .input-container.from input").val().toString();n=n.split("[");n=n[n.length-1];n=n.replace("]","");n="&departure="+n.replace("]","");t=$(".vertical-booking-widget .booking-widget-flights .check-in-input input").val().toString();t=t.split("/");t[t.length-1]=(Number(t[t.length-1])+2e3).toString();t="&departureDate="+t.join("");i=$(".vertical-booking-widget .booking-widget-flights .check-out-input input").val().toString();i=i.split("/");i[i.length-1]=(Number(i[i.length-1])+2e3).toString();i="&returnDate="+i.join("");e="&passengers="+$(".book-flight-dropdowns .dd-selected-value").eq(0).val()+"&children="+$(".book-flight-dropdowns .dd-selected-value").eq(1).val()+"&infants="+$(".book-flight-dropdowns .dd-selected-value").eq(2).val();o=flightDomain+f+n+t+i+e;ga("send","event","Booking Widget SearchFlights Clicks","Booking Widget SearchFlights Clicks","'"+BookNowPageElementPageID+"'");$(this).attr("href",o)})});$(".tout_filter_demo").click(function(n){n.preventDefault();var t=$(".filter_options");$(t).is(":visible")?($(t).slideUp(200),$(this).removeClass("active")):($(".search_subnav_1").hide(),$(".autocomplete-suggestions").hide(),$(".search_button").removeClass("active"),$(".trip_subnav_2").hide(),$(".trip_button_demo").removeClass("active"),$(t).slideDown(200),$(this).addClass("active"))});$(".filter_options").click(function(n){n.preventDefault();var t=$(this).find(".active").text();$(".filter_options_wrap .tout_button").css("width",t.length*5+45);$(".active_filter").fadeOut(100,"linear",function(){$(".active_filter").text(t);$(".active_filter").fadeIn(100,"linear",function(){$(".filter_options_wrap .tout_button").css("width",$(".filter_options_wrap .tout_button_title").width()+45)})});$(this).hide();DTCM.MQ.init()})});$(function(){$(".weather_unit_link").click(function(n){n.preventDefault();$(".weather_imperial").toggleClass("hide");$(".weather_metric").toggleClass("hide")})});$(function(){var n=$(".search_subnav_1"),t=n.parents("li").attr("id","dd_li_parent");$("#search").val("");$(".search_button").click(function(t){$(window).width()>=1200&&(t.preventDefault(),n.toggleClass("open"),$(this).toggleClass("active"),n.is(":visible")&&n.css("display")!="none"?isIE||$('input[type="text"]',$(this).parent()).focus():($(".filter_options").hide(),$(".tout_filter_demo").removeClass("active"),$(".trip_subnav_2").hide(),$(".subnav.trip_planner").hide(),$(".trip_button").removeClass("active")))});$(document).on("click",function(n){var t=$(n.target);t.parents("#dd_li_parent").length<=0&&($(".search_subnav_1").each(function(n,t){$(t).hasClass("mob")||$(t).removeClass("open")}),$(".search_button").removeClass("active"))});$(document).on("click",".footer .section h3",function(){$(this).parent().toggleClass("expanded")});$(document).on("click",".footer .section h3 a",function(){if($(window).width()<641)return!1})});$(function(){$(".arrow-next-panel").on("click",function(){$("html, body").animate({scrollTop:$(this).parent().parent().next().offset().top-$(".main_nav_wrap").height()},600)})});DTCM.btnApplyDatesClick=function(){userSetDates&&(DTCM.CalendarControl.SearchObject.Skip=0,searchEventCalendarRange(),DTCM.CalendarControl.SearchObject.ReloadFilters=!0,DTCM.CalendarControl.SearchObject.TabValue="",DTCM.CalendarControl.SearchObject.SearchBy="period",DTCM.CalendarControl.SearchObject.SearchValue="mydates",DTCM.CalendarControl.ajaxLoadEvents())};var pickerNoShow=!1,userSetDates=!1,selectingRange=!1;fiveYears=new Date;fiveYears.setYear(parseInt(fiveYears.getFullYear())+5);$.datepicker._defaults.maxDate=fiveYears;$(function(){var r=new Date,e,u,n,f;r.setDate(r.getDate()+1);$("#check-in").datepicker({minDate:new Date,maxDate:"01/01/"+((new Date).getFullYear()+2),numberOfMonths:1,onSelect:function(n){var u=$.datepicker.parseDate($.datepicker._defaults.dateFormat,$("#check-in").val()),r=new Date(n),t=new Date(n),i;t.setDate(r.getDate()+1);$("#check-in").val(n);e=$("#ui-datepicker-div").datepicker("getDate");$("#ui-datepicker-div").datepicker("option","minDate",t);e<t&&($("#ui-datepicker-div").datepicker("setDate",t),$("#check-out").val($.datepicker.formatDate($.datepicker._defaults.dateFormat,$("#ui-datepicker-div").datepicker("getDate"))));$("#ui-datepicker-div").datepicker("refresh");i=$("#check-in").val().split("/");i[1]=parseFloat(i[1])+1;$("#check-out").datepicker("option","minDate",i.join("/"))}});$("#check-out").datepicker({minDate:r,maxDate:"01/01/"+((new Date).getFullYear()+2),numberOfMonths:1,onSelect:function(){var n=$.datepicker.parseDate($.datepicker._defaults.dateFormat,$("#check-out").val()),t=$("#check-in").val()}});$("#datepicker-start").datepicker({minDate:new Date,maxDate:fiveYears,numberOfMonths:$(window).width()<=768?1:2,changeMonth:!1,gotoCurrent:!1,beforeShowDay:function(n){var t=$.datepicker.parseDate($.datepicker._defaults.dateFormat,$("#from").val()),i=$.datepicker.parseDate($.datepicker._defaults.dateFormat,$("#to").val());return t&&n.getTime()==t.getTime()?[!0,"date-range-selected-start-end ui-datepicker-current-day"]:i&&n.getTime()==i.getTime()?[!0,"date-range-selected-start-end ui-datepicker-current-day"]:[!0,t&&i&&n>t&&n<i?"date-range-selected":""]},onChangeMonthYear:function(){userSetDates||setTimeout(function(){$("#datepicker-start").find("td").removeClass("date-range-selected date-range-selected-start-end ui-datepicker-current-day")},24)},beforeShow:function(){userSetDates?$(".calendar-search-now").removeClass("inactive"):$(".calendar-search-now").addClass("inactive")},onSelect:function(n){var t=$("#selectStartDate").val();$(".calendar-search-now").addClass("inactive");var i=$.datepicker.parseDate($.datepicker._defaults.dateFormat,$("#from").val()),r=$.datepicker.parseDate($.datepicker._defaults.dateFormat,$("#to").val()),u=$.datepicker.parseDate($.datepicker._defaults.dateFormat,n);!i||r?($("#from").val(n),$("#to").val(""),$(this).datepicker(),$(".start-date-text").addClass("hide"),$(".end-date-text").removeClass("hide"),$(".show-events-text").addClass("hide"),t=$("#selectEndDate").val()):u<i?($("#to").val($("#from").val()),$("#from").val(n),$(this).datepicker(),$(".calendar-search-now").removeClass("inactive"),$(".end-date-text").addClass("hide"),$(".show-events-text").removeClass("hide")):($("#to").val(n),$(this).datepicker(),$(".calendar-search-now").removeClass("inactive"),$(".end-date-text").addClass("hide"),$(".show-events-text").removeClass("hide"));setTimeout(function(){$("#from").val()==""&&$("#to").val()==""&&(t=$("#selectStartDate").val(),userSetDates=!1,$(".calendar-search-now").addClass("inactive"));Modernizr.touch||$('#datepicker-start td:not(".ui-state-disabled")').append('<div class="tooltip select-start">'+t+"<\/div>")},24);$("#from").val().length>0&&$("#to").val().length>0&&DTCM.CalendarControl.ajaxLoadContent&&($("#datepicker-horizontal").datepicker("refresh"),$("#datepicker-horizontal").find(".ui-datepicker-purple").removeClass("ui-datepicker-purple"),$("#datepicker-horizontal").find(".dp-highlight").first().addClass("ui-datepicker-purple"),$("#datepicker-horizontal").find(".dp-highlight").last().addClass("ui-datepicker-purple"),selectingRange=!1);userSetDates=!0;$(".calendar-search-now").removeClass("inactive")}}).promise().done(function(){Modernizr.touch||$('#datepicker-start td:not(".ui-state-disabled")').append('<div class="tooltip select-start">'+$("#selectStartDate").val()+"<\/div>")});$("#datepicker-horizontal").datepicker({minDate:new Date,maxDate:fiveYears,numberOfMonths:[6,1],beforeShowDay:function(n){var t=$.datepicker.parseDate($.datepicker._defaults.dateFormat,$("#from").val()),i=$.datepicker.parseDate($.datepicker._defaults.dateFormat,$("#to").val());return[!0,t&&(n.getTime()==t.getTime()||i&&n>=t&&n<=i)?"dp-highlight":""]},onSelect:function(n){var t=$.datepicker.parseDate($.datepicker._defaults.dateFormat,$("#from").val()),r=$.datepicker.parseDate($.datepicker._defaults.dateFormat,$("#to").val()),u=$.datepicker.parseDate($.datepicker._defaults.dateFormat,n),f=$("#selectStartDate").val(),i=!1;!t||r?($("#from").val(n),$("#to").val(""),$(this).datepicker(),i=!0,$(".start-date-text").addClass("hide"),$(".end-date-text").removeClass("hide"),$(".show-events-text").addClass("hide"),f=$("#selectEndDate").val()):u<t?($("#to").val($("#from").val()),$("#from").val(n),$(this).datepicker(),$(".calendar-search-now").removeClass("inactive"),$(".end-date-text").addClass("hide"),$(".show-events-text").removeClass("hide")):($("#to").val(n),$(this).datepicker(),$(".calendar-search-now").removeClass("inactive"),$(".end-date-text").addClass("hide"),$(".show-events-text").removeClass("hide"));DTCM.CalendarControl.showFeaturedOnly=!1;DTCM.CalendarControl.currentSearchCase="";setTimeout(function(){$("#datepicker-start").datepicker("refresh").datepicker("setDate",$.datepicker.parseDate($.datepicker._defaults.dateFormat,n)).promise().done(function(){Modernizr.touch||$('#datepicker-start td:not(".ui-state-disabled")').append('<div class="tooltip select-start">'+$("#selectStartDate").val()+"<\/div>")});$("#datepicker-horizontal").find(".ui-datepicker-purple").removeClass("ui-datepicker-purple");$("#datepicker-horizontal").find(".dp-highlight").first().addClass("ui-datepicker-purple");$("#datepicker-horizontal").find(".dp-highlight").last().addClass("ui-datepicker-purple");$(".datepicker-horizontal tr").eq(2).addClass("nextWeek");DTCM.CalendarControl.currentSearchCase="festivals";$(".calendar-switch-tabs").removeClass("active");$(".calendar-switch-tabs").eq(0).addClass("active");i?DTCM.CalendarControl.ajaxLoadSearchResults($("#from").val(),$("#from").val(),!0,0,!1,DTCM.CalendarControl.currentSearchCase):DTCM.CalendarControl.ajaxLoadSearchResults($("#from").val(),$("#to").val(),!0,0,!1,DTCM.CalendarControl.currentSearchCase);selectingRange=!1;searchEventCalendarRange()});window.noTrigger=!0;resetRange();window.noTrigger=!1;userSetDates=!0}});$(window).on("resize orientationchange",function(){if($("#datepicker-horizontal").length>0&&$("#datepicker-horizontal").find(".dp-highlight").length>0){var n=$("#datepicker-horizontal").find(".dp-highlight").position().left-$(".datepicker-horizontal .ui-datepicker-current-day").outerWidth();$("#datepicker-horizontal").css("left",-n).data("left",-n)}});if($("#datepicker-months").length<=0){u=$("#datepicker-horizontal").datepicker("option","monthNamesShort");n='<style id="datepicker-months"> #datepicker-horizontal p {display: block !important;}';for(f in u)n+="td[data-month='"+f+"'] p:after {content:'"+u[f]+"';}";n+="<\/style>";$("#datepicker-horizontal").prepend(n)}var t=function(){return $(".datepicker-horizontal .ui-datepicker-current-day").outerWidth()},o=function(){var t=$(".datepicker-horizontal tr.nextWeek").next().filter(i),n,r;t.length==0?(n=$(".datepicker-horizontal tr.nextWeek").removeClass("nextWeek").parents(".ui-datepicker-group"),r=n.next().next().find("tr").eq(1).addClass("nextWeek")):$(".datepicker-horizontal tr.nextWeek").removeClass("nextWeek").next().filter(i).addClass("nextWeek")},s=function(){var t=$(".datepicker-horizontal tr.nextWeek").prev().filter(i),n,r;t.length==0?(n=$(".datepicker-horizontal tr.nextWeek").removeClass("nextWeek").parents(".ui-datepicker-group"),r=n.prev().prev().find("tr").eq(1).addClass("nextWeek")):$(".datepicker-horizontal tr.nextWeek").removeClass("nextWeek").prev().filter(i).addClass("nextWeek")},i=function(){return $(this).parents("thead").length==0};$(".datepicker-horizontal tr").eq(2).addClass("nextWeek");$("body").css("direction")!="rtl"?($(".datepicker-horizontal-wrapper a.next").click(function(n){var i;i=$(".datepicker-horizontal").data("left")?$(".datepicker-horizontal").data("left"):$(".datepicker-horizontal").position().left;i=i-t();$(".datepicker-horizontal").css("left",i);$(".datepicker-horizontal").data("left",i);o();n.preventDefault()}),$(".datepicker-horizontal-wrapper a.prev").click(function(n){var i,r;i=isNaN(parseInt($(".datepicker-horizontal").data("left")))?$(".datepicker-horizontal").data("left"):$(".datepicker-horizontal").position().left;r=$(".ui-datepicker-calendar td:visible").width();i=i+t();i>=r&&(i=r);$(".datepicker-horizontal").css("left",i);$(".datepicker-horizontal").data("left",i);s();n.preventDefault()})):($(".datepicker-horizontal-wrapper a.prev").click(function(n){var i,r;i=isNaN(parseInt($(".datepicker-horizontal").data("right")))?$(".datepicker-horizontal").outerWidth()-($(".datepicker-horizontal-wrapper").outerWidth()-$(".datepicker-horizontal-wrapper a.next").outerWidth()-$(".datepicker-horizontal-wrapper a.prev").outerWidth())+$(".datepicker-horizontal").position().left:$(".datepicker-horizontal").data("right");r=$(".ui-datepicker-calendar td:visible").width();i=i-t();$(".datepicker-horizontal").css("right",i);$(".datepicker-horizontal").data("right",i);n.preventDefault();o()}),$(".datepicker-horizontal-wrapper a.next").click(function(n){var i,r;i=isNaN(parseInt($(".datepicker-horizontal").data("right")))?$(".datepicker-horizontal").outerWidth()-($(".datepicker-horizontal-wrapper").outerWidth()-$(".datepicker-horizontal-wrapper a.next").outerWidth()-$(".datepicker-horizontal-wrapper a.prev").outerWidth())+$(".datepicker-horizontal").position().left:$(".datepicker-horizontal").data("right");r=$(".ui-datepicker-calendar td:visible").width();i=i+t();i>=r&&(i=r);$(".datepicker-horizontal").css("right",i);$(".datepicker-horizontal").data("right",i);n.preventDefault();s()}));$(document).on("click",function(n){if($("#datepicker").length>0){var i=$("#datepicker").is(":visible"),t=$(n.target);if(!i)return;!t.is("#datepicker")&&t.parents("#datepicker").length<=0&&t.attr("href")!="#datepicker"&&t.parents('[href="#datepicker"]').length<=0&&!t.hasClass("ui-datepicker-next")&&!t.hasClass("ui-datepicker-prev")&&!t.hasClass(".icon-close")&&!t.is("#datepicker-select")&&t.parents("#datepicker-select").length<=0&&($(".calendar-overlay").hide(),$("html").removeClass("calendar-overlay-enable"),$("#datepicker").hide())}});if(Modernizr.touch){$(".hasDatepicker").on("click",function(){$(this).attr("readonly","readonly")});$(".hasDatepicker").on("touchleave",function(){$(this).removeAttr("readonly")})}else $(".hasDatepicker").attr("readonly","readonly").focus(function(){$(this).attr("readonly","readonly")}),$(".hasDatepicker").blur(function(){$(this).removeAttr("readonly")});$(".ui-datepicker-trigger").click(function(n){n.preventDefault();var t=$(this).attr("href");$(t).is(":visible")?$(t).hide():$(t).show()});$(".ui-datepicker-trigger.button").click(function(n){n.preventDefault();$("#datepicker-select").ddslick("select",{index:$("#datepicker-select option").length-1});$("html, body").animate({scrollTop:45},500)});$(document).on("click",".icon-close",function(){$($(this).data("datepicker")).hide();$(".calendar-overlay").hide();$("html").removeClass("calendar-overlay-enable")});$("#datepicker-horizontal").find(".ui-datepicker-purple").removeClass("ui-datepicker-purple");$("#datepicker-horizontal").find(".dp-highlight").first().addClass("ui-datepicker-purple");$("#datepicker-horizontal").find(".dp-highlight").last().addClass("ui-datepicker-purple")});$(function(){function t(){$(".slideshow").length>=1&&($(".slideshow").each(function(){var n=$(this).hasClass("header_slider"),t=isRTLbool?"scrollRTL":"scrollHorz";$(this).cycle({after:i,cleartypeNoBg:!0,fx:t,next:n?null:".next_button",nowrap:0,prev:n?null:".prev_button",pager:n?".hero_wrap_pagination":null,slideResize:!1,rev:0,timeout:5e3})}),$(window).resize(function(){clearTimeout(n);n=setTimeout(function(){$(".header_slider").each(function(){$(this).height($(this).find(".dubai_event").height())})},50)}))}function i(n,t,i){var r=i.currSlide+1+"/"+i.slideCount;$(".slide_count").html(r)}t();var n=null});tileAnimation=!1;current=-1;$(function(){function n(){$(".hero_content").css("height",$(".hero_wrap").height());$(".hero-wrap-content-container").css("height",$(".headerImage").height())}DTCM.CollapseTile=collapseTile;$(".tout").each(function(n){$(this).data("tile-index",n)});$(".tile_trigger").click(function(n){(n.preventDefault(),n.stopPropagation(),n.target.className.match("weather_unit_link"))||(current==$(this).data("tile-index")?collapseTile():(collapseTile(!0),expandTile($(this))))});$(".test-navi").on("click",function(){$(this).toggleClass("open")});$(".close_tile").click(function(n){n.preventDefault();n.stopPropagation();collapseTile()});n();$(window).on("resize",function(){DTCM.MQ.check();n()})});var cTotalFrames=18,cIndex=0,cXpos=0,cPreloaderTimeout=!1,SECONDS_BETWEEN_FRAMES=0,ANIMATION_RUNNING;$(function(){$(".accordion div").show();setTimeout("$('.accordion div').slideToggle('slow');",1e3);$(".accordion h3").click(function(){$(this).next(".pane").slideToggle("slow").siblings(".pane:visible").slideUp("slow");$(this).toggleClass("current");$(this).siblings("h3").removeClass("current")})});DTCM.Extend("LoadTripAdvisorSingleRatingsAsync",function(n,t){var i=$("div[data-tripadvisorguid='"+n+"']"),r={itemGUID:n};$.ajax({url:"/api/TripAdvisorRatings/GetRatingData",type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(r),dataType:"json"}).done(function(n){var r,u;n.rating!="0"&&n.rating!=null?(r=$("#"+t).clone(),r.removeAttr("id"),$(r).addClass("tripAdvisorRating r"+n.ratingForMap),u=r.find("[data-template-piece='tripadvisor-reviews']"),$(u).text(n.reviewsCount),$(i).replaceWith(r)):$(i).remove()}).fail(function(){$(i).remove()})});DTCM.Extend("LoadTripAdvisorRatingsAsync",function(){var n=[];$("div[data-tripadvisorguid]").each(function(){var t=$(this).data("tripadvisorguid");n.push(t)});$.ajax({url:"/api/TripAdvisorRatings/GetMultipleRatingData",type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(n),dataType:"json"}).done(function(n){$.each(n,function(n,t){$("div[data-tripadvisorguid='"+t.guid+"'").each(function(){var n,i,r,s,u,h,f,e,o;t.rating!="0"&&t.rating!=null?(n=$("#tripAdvisorHtmlTemplate").clone(),n.removeAttr("id"),$(n).addClass("tripAdvisorRating r"+t.ratingForMap),i=$(this).data("showreviews"),i===!0&&(r=n.find("[data-template-piece='tripadvisor-reviews-label']"),s=$("<a href='javascript:void(0);' />").text(r.text()).bind("click",function(){$(".tab_menu li").removeClass("active_tab");$(".tab_panels_wrap .tab_panel:last").show();$(".tab_menu li:last").addClass("active_tab");$(".tab_panels_wrap").find(".tab_panel").hide().removeClass("map-init");$(".tab_panels_wrap .tab_panel:last").show();var n=$(".tab_menu li:last").position().top;$(window).scrollTop(n)}),r.replaceWith(s)),u=n.find("[data-template-piece='tripadvisor-reviews']"),u.length&&($(u).text(t.reviewsCount),$(this).replaceWith(n)),h=$(this).data("tripadvisorshortview"),h===!0&&(f=n.find("[data-template-piece='tripadvisor-name']"),f.length&&$(f).remove(),e=n.find("[data-template-piece='tripadvisor-basedon']"),e.length&&$(e).remove()),i===!0&&(o=$("li[data-tab='tareviews'").first(),o.length&&$(o).removeClass("hide"))):$(this).remove()})})}).fail(function(){$("div[data-tripadvisorguid]").each(function(){$(this).remove()})})});DTCM.Extend("Loader",function(n){var t=this;this.parent=$(n);this.parent.append('<div class="loaderContainer"><div class="loaderImage"><\/div><\/div>');this.loader=this.parent.find(".loaderContainer");this.image=this.loader.find(".loaderImage")[0];this.cTotalFrames=18;this.cIndex=0;this.cXpos=0;this.cPreloaderTimeout=!1;this.SECONDS_BETWEEN_FRAMES=0;this.ANIMATION_RUNNING;this.startAnimation=function(){this.ANIMATION_RUNNING&&this.stopAnimation();this.ANIMATION_RUNNING=!0;this.loader.show();this.SECONDS_BETWEEN_FRAMES=1/12;setTimeout(function(){t.continueAnimation()},this.SECONDS_BETWEEN_FRAMES/1e3)};this.start=this.startAnimation;this.continueAnimation=function(){this.cXpos+=128;this.cIndex+=1;this.cIndex>=this.cTotalFrames&&(this.cXpos=0,this.cIndex=0);this.image&&(this.image.style.backgroundPosition=-this.cXpos+"px 0");this.cPreloaderTimeout=setTimeout(function(){t.continueAnimation()},this.SECONDS_BETWEEN_FRAMES*1e3)};this.stopAnimation=function(){clearTimeout(this.cPreloaderTimeout);this.cPreloaderTimeout=!1;this.loader.hide();this.ANIMATION_RUNNING=!1};this.stop=this.stopAnimation});$(document).ready(function(){openInfowindowFromList()});$(document).ready(function(){$(window).width()<=740&&(window.isRTLbool?$(".tiles-container").not(".slick-initialized").slick({slide:".default",slidesToScroll:1,rtl:!0}):$(".tiles-container").not(".slick-initialized").slick({slide:".default",slidesToScroll:1}))});$(document).ready(function(){if($(window).width()<=740){$(".tiles").not(".slick-initialized").slick({slide:".row",slidesToScroll:1,rtl:window.isRTLbool});$(".tiles").on("afterChange",function(){$(".lazyImageLoad").lazy()})}});$(document).ready(function(){$(".slideshow").css("height","400")});$(document).ready(function(){$(window).width()<=740&&(window.isRTLbool?$(".slick-you-may").not(".slick-initialized").slick({slide:".deal-section-sm-img",arrows:!1,slidesToShow:1,slidesToScroll:1,speed:300,infinite:!0,autoplay:!1,autoplaySpeed:3e3,rtl:!0}):$(".slick-you-may").not(".slick-initialized").slick({slide:".deal-section-sm-img",arrows:!1,slidesToShow:1,slidesToScroll:1,speed:300,infinite:!0,autoplay:!1,autoplaySpeed:3e3}))});$(document).ready(function(){var e,r,o,s,p,w;if($(window).width()<=740){var h=document.getElementById("hdfShowBigPopup"),n=document.getElementById("hdfShowSmallPopup"),c=!1,t=!1;h!=null&&h.value=="1"&&(c=!0);n!=null&&n.value=="1"&&(t=!0);var l=document.getElementById("hdfBigPopupName"),a=document.getElementById("hdfSmallPopupName"),i="",f="";l!=null&&(i=l.value);a!=null&&(f=a.value);var v=document.getElementById("hdfBigPopupDays"),y=document.getElementById("hdfSmallPopupDays"),u=7,b=1;v!=null&&(u=parseInt(v.value));y!=null&&(b=parseInt(y.value));e=navigator.userAgent||navigator.vendor||window.opera||window.safari||window.chrome||window.browser;e.match(/Android/i)&&(c&&i!=""&&getCookie(i)!="1"&&(r="#dialog",t=!1,o=$(document).height(),s=$(window).width(),$("#mask").css({width:s,height:o}),$("#mask").fadeIn(500)&&($("body").css("overflow","hidden"),$("body").css("position","fixed")),$("#mask").fadeTo("slow",.9),p=$(window).height(),w=$(window).width(),$(r).fadeIn(2e3),$(r).css("display","table-caption"),$(r).css("vertical-align","middle"),$(r).css("height","100%"),$(".window .close").click(function(r){r.preventDefault();setCookie(i,"1",u);n!=null&&n.value=="1"&&(t=!0,showSmallPopup());$("#mask").fadeOut(500)&&(document.body.style.overflow="visible",$("body").css("position","relative"),$("body").css("overflow-x","hidden"));$(".window").fadeOut(500)&&(document.body.style.overflow="visible",$("body").css("position","relative"),$("body").css("overflow-x","hidden"))}),$(".storeimg").click(function(){setCookie(i,"1",u);n!=null&&n.value=="1"&&(t=!0,showSmallPopup());$("#mask").fadeOut(500)&&(document.body.style.overflow="visible",$("body").css("position","relative"),$("body").css("overflow-x","hidden"));$(".window").fadeOut(500)&&(document.body.style.overflow="visible",$("body").css("position","relative"),$("body").css("overflow-x","hidden"))}),$("#mask").click(function(){setCookie(i,"1",u);n!=null&&n.value=="1"&&(t=!0,showSmallPopup());$(this).fadeOut(500);$(".window").fadeOut(500);document.body.style.overflow="visible";$("body").css("position","relative");$("body").css("overflow-x","hidden")}),getMobileOperatingSystem()),t&&f!=""&&getCookie(f)!="1"&&showSmallPopup())}});$(document).ready(function(){document.getElementById("imageGallery")!=null&&($(window).width()>=740?window.isRTLbool?$("#imageGallery").lightSlider({gallery:!0,item:1,loop:!0,thumbItem:10,slideMargin:0,currentPagerPosition:"right",rtl:!0,onSliderLoad:function(){}}):$("#imageGallery").lightSlider({gallery:!0,item:1,loop:!0,thumbItem:10,slideMargin:0,currentPagerPosition:"left",onSliderLoad:function(){}}):window.isRTLbool?$(".imageGallery").not(".slick-initialized").slick({slide:".liImg",arrows:!1,slidesToScroll:1,rtl:!0}):$(".imageGallery").not(".slick-initialized").slick({slide:".liImg",arrows:!1,slidesToScroll:1}));$(".tooltip1").length>0&&($(window).width()<=740?$(".tooltip1").tooltipster({trigger:"click"}):$(".tooltip1").tooltipster())});$(document).ready(function(){$(".img-block img").error(function(){$(this).hide()})});dateFormat=function(){var t=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,i=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,r=/[^-+\dA-Z]/g,n=function(n,t){for(n=String(n),t=t||2;n.length<t;)n="0"+n;return n};return function(u,f,e){var h=dateFormat;if(arguments.length!=1||Object.prototype.toString.call(u)!="[object String]"||/\d/.test(u)||(f=u,u=undefined),u=u?new Date(u):new Date,isNaN(u))throw SyntaxError("invalid date");f=String(h.masks[f]||f||h.masks["default"]);f.slice(0,4)=="UTC:"&&(f=f.slice(4),e=!0);var o=e?"getUTC":"get",c=u[o+"Date"](),y=u[o+"Day"](),l=u[o+"Month"](),p=u[o+"FullYear"](),s=u[o+"Hours"](),w=u[o+"Minutes"](),b=u[o+"Seconds"](),a=u[o+"Milliseconds"](),v=e?0:u.getTimezoneOffset(),k={d:c,dd:n(c),ddd:h.i18n.dayNames[y],dddd:h.i18n.dayNames[y+7],m:l+1,mm:n(l+1),mmm:h.i18n.monthNames[l],mmmm:h.i18n.monthNames[l+12],yy:String(p).slice(2),yyyy:p,h:s%12||12,hh:n(s%12||12),H:s,HH:n(s),M:w,MM:n(w),s:b,ss:n(b),l:n(a,3),L:n(a>99?Math.round(a/10):a),t:s<12?"a":"p",tt:s<12?"am":"pm",T:s<12?"A":"P",TT:s<12?"AM":"PM",Z:e?"UTC":(String(u).match(i)||[""]).pop().replace(r,""),o:(v>0?"-":"+")+n(Math.floor(Math.abs(v)/60)*100+Math.abs(v)%60,4),S:["th","st","nd","rd"][c%10>3?0:(c%100-c%10!=10)*c%10]};return f.replace(t,function(n){return n in k?k[n]:n.slice(1,n.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};Date.prototype.format=function(n,t){return dateFormat(this,n,t)};isIE=!!window.ActiveXObject||!!window.MSStream;itDetailPage=!1;isIE&&$("html").addClass("ie");typeof console=="undefined"&&(console=window.console={log:function(){},dir:function(){},warn:function(){},error:function(){}});switchTo5x=!0;checkChina=$("body").attr("data-chineseinstance"),function(n){n(function(){function b(){n(".nav-back").on("click",function(n){n.preventDefault();n.stopPropagation();mobileNav.back()})}var c,l,a,e,i,r,o,v,t,y,p,u;DTCM.Translate.init();DTCM.SlideDown.init();DTCM.Modal.init();DTCM.Counter.init();DTCM.VideoTile.init();DTCM.ViewSwitcher.init();DTCM.CalendarControl.init();DTCM.Tooltip("[data-tooltip-content]",{});window.shouldSubmit=!1;n("form").on("keydown",function(n){n.keyCode==13&&!window.shouldSubmit});if(setAutoCompleteSearch(dynamicSelectors.searchClientID,dynamicSelectors.submitSearchClientID),setAutoCompleteSearch(dynamicSelectors.mobileSearchClientID,dynamicSelectors.mobileSubmitSearchClientID),n("#tbPassword,#tbUsername").keydown(function(n){n.keyCode==13&&Page_ClientValidate("Login")&&__doPostBack(dynamicSelectors.lbtnSubmitUniqueID,"")}),n("#txtResetPasswordEmail").keydown(function(n){n.keyCode==13&&__doPostBack(dynamicSelectors.btnSendAccountResetUniqueID,"")}),bindSelects(),n('.form-leftside input[type="text"], .form-leftside textarea').bind("blur",function(){var t=n(this).attr("id");Page_Validators.forEach(function(i){i.controltovalidate==t&&(i.isvalid?(n("#"+i.controltovalidate).removeClass("error"),n(i).parent().removeClass("error"),i.id==dynamicSelectors.revEmail&&n("#"+i.controltovalidate).val()==""&&(n("#"+i.controltovalidate).addClass("error"),n(i).parent().addClass("error"))):(n("#"+i.controltovalidate).addClass("error"),n(i).parent().addClass("error")))})}),n(".load-more, .show-less").length){n(".less-loaded").each(function(){n(".checkbox-field",n(this)).length<6&&n(".load-more, .show-less",n(this)).addClass("hidden")});n(".load-more, .show-less").on("click",function(){n(this).parent().toggleClass("less-loaded")})}if(n("#tabMenu").length){n(".tab_panels_wrap .tab_panel:first").show();n(".tab_menu li:first").addClass("active_tab");n(".tab_menu li:first").hasClass("location")&&(n("#location").show().attr("class","tab_panel map-initialized"),initializeMapPOIs(dynamicSelectors.singlePageMapCenter,dynamicSelectors.pinsArray));n(".tab_menu li").on("click",function(){var t,i;n(this).hasClass("active_tab")||(n(".tab_menu li").removeClass("active_tab"),n(this).addClass("active_tab"),n(".tab_panels_wrap").find(".tab_panel").hide().removeClass("map-init"),n(".tab_panels_wrap .tab_panel:eq("+n(".tab_menu > li").index(this)+")").show(),n(".tab_panels_wrap .tab_panel:eq("+n(".tab_menu > li").index(this)+")").attr("id")==="location"&&(n(".tab_panels_wrap .tab_panel:eq("+n(".tab_menu > li").index(this)+")").hasClass("map-initialized")||(IsChinaInstance()=="False"?initializeMapPOIs(dynamicSelectors.singlePageMapCenter,dynamicSelectors.pinsArray):(t=dynamicSelectors.centerOfMap.split(","),t.length==2&&(i=new OpenLayers.LonLat(parseFloat(t[0]),parseFloat(t[1])),initopenstreet(i.lon,i.lat,dynamicSelectors.pinsArray))),n(".tab_panels_wrap .tab_panel:eq("+n(".tab_menu > li").index(this)+")").addClass("map-initialized"))),n("#mapevent").val()!=undefined&&n("#mapevent").val()=="mapevent"&&initializeMap2())}).mouseover(function(){n(this).addClass("mouseover");n(this).removeClass("mouseout")}).mouseout(function(){n(this).addClass("mouseout");n(this).removeClass("mouseover")});n(".open_reviews_tab").on("click",function(){n(".tab_menu li").removeClass("active_tab");n(".tab_panels_wrap .tab_panel:last").show();n(".tab_menu li:last").addClass("active_tab");n(".tab_panels_wrap").find(".tab_panel").hide().removeClass("map-init");n(".tab_panels_wrap .tab_panel:last").show()})}if(n(".hotels-criteria").length&&n(".availability-link").length){n(".availability-link").on("click",function(){n(".availability-content").not(n(this).parent().next()).removeClass("open");n(this).parent().next().toggleClass("open");n(".availability-link").not(n(this)).removeClass("active");n(this).toggleClass("active").promise().done(function(){var i=n(".availability-datepicker-first",n(this).parent().next()).val()==""?0:n("#tbCheckIn").val(),t=n(this).parent().next();if(n(".availability-datepicker").datepicker("destroy"),n(this).hasClass("active")?(n(".availability-datepicker",n(this).parent().next()).datepicker({dateFormat:"dd/mm/y",minDate:i,onSelect:function(){if(n(this).hasClass("availability-datepicker-first")){var t=n(".availability-datepicker-first",n(this).parent().parent().parent()).val().toString().split("/"),i=new Date(Number(t[2])+2e3,Number(t[1])-1,Number(t[0])+1);n(".availability-datepicker-last",n(this).parent().parent().parent()).datepicker("destroy");n(".availability-datepicker-last",n(this).parent().parent().parent()).val("").text("");n(".availability-datepicker-last",n(this).parent().parent().parent()).datepicker({dateFormat:"dd/mm/y",minDate:i})}}}),n(".select-items-cat select").ddslick()):n(".availability-datepicker",n(this).parent().next()).datepicker("destroy"),t.find(".hasDatepicker").attr("readonly","readonly").focus(function(){n(this).attr("readonly","readonly")}),t.find(".hasDatepicker").blur(function(){n(this).removeAttr("readonly")}),Modernizr.touch){t.find(".hasDatepicker").on("click",function(){n(this).attr("readonly","readonly")});t.find(".hasDatepicker").on("touchleave",function(){n(this).removeAttr("readonly")})}})});c=n(".input-container-currency option[selected]").attr("data-currency-sign");n(".currency-synbol").text(c);n(".hotels-criteria").on("change",function(){n(".currency-synbol").text(n("option:selected",n(this)).attr("data-currency-sign"))});var s=n("#tbRangeFrom").attr("value"),h=n("#tbRangeTo").attr("value"),w=4e3,f=100/w;n("#tbRangeFrom").attr("value",s).parent().css({left:f*s+"%"});n("#tbRangeTo").attr("value",h).parent().css({left:f*h+"%"});n(".slider-range").slider({range:!0,min:0,max:w,values:[s,h],slide:function(t,i){n("#tbRangeFrom").attr("value",i.values[0]).parent().css({left:f*i.values[0]+"%"});n("#tbRangeTo").attr("value",i.values[1]).parent().css({left:f*i.values[1]+"%"})}});l=n("#tbCheckIn").val()==""||window.location.toString().search("checkIn")>-1?0:n("#tbCheckIn").val();n(".trip-datepicker").not(".availability-datepicker").datepicker({dateFormat:"dd/mm/y",minDate:l,onSelect:function(){if(n(this).attr("id")=="tbCheckIn"){n("#tbCheckOut").datepicker("destroy");n("#tbCheckOut").val("").text("");var t=n("#tbCheckIn").val().toString().split("/"),i=new Date(Number(t[2])+2e3,Number(t[1])-1,Number(t[0])+1);n("#tbCheckOut").datepicker({dateFormat:"dd/mm/y",minDate:i})}}});n(".availability-content.open .show-more").on("click",function(){n(this).prev().toggleClass("show-all");n(".full-results-text, .show-less-text",n(this)).toggleClass("hidden")});a=n("#filters_container").find(".directory-go-button");e=n("#filters_container").find(".trip-datepicker");a.on("click",function(){var t=0,i=/^(?:(?:31(\/)(?:0?[13578]|1[02]))\1|(?:(?:29|30)(\/)(?:0?[1,3-9]|1[0-2])\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:29(\/|-|\.)0?2\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\d|2[0-8])(\/|-|\.)(?:(?:0?[1-9])|(?:1[0-2]))\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$/;return e.removeClass("error"),e.each(function(){var r=this.value;i.test(r)||(n(this).addClass("error"),t++)}),t>0?!1:void 0})}if(n(".gallery-script-init").length&&(actionPressButton=n("#"+dynamicSelectors.pressClientID),allPressCheckboxes=n(".photo-gallery-container").find('input[type="checkbox"]'),disableLinkButton(dynamicSelectors.pressClientID)),n(".deals-offers-init").length){n("a[data-dealtype]").each(function(){var t=n(this).data("dealtype"),i=n(this).attr("id");n(this).attr("href","javascript:TabClick('"+t+"', '"+i+"');")});DTCM.CalendarControl.SearchObject.Skip=0;DTCM.CalendarControl.SearchObject.TabValue="aqua_exclusive";DTCM.CalendarControl.SearchObject.SearchValue="aqua_exclusive";n(".has-sub-cat .dropdown-icon").on("click",function(){var t=n(this);n(".sub-cat, .dropdown-icon",t.parent()).toggleClass("open")});n(".has-sub-cat .sub-cat").removeClass("open");CustomFormButtons.init(".hotels-criteria")}if(n(".calendar-page-init").length){n(".map_view_switch").find("a").on("click",function(){var t=n(this).attr("data-switch-view").split("|")[0];t=t.charAt(0).toUpperCase()+t.slice(1);ga("send","event","Events Calendar","EC View Changes",t)});n(".has-sub-cat .dropdown-icon").on("click",function(){var t=n(this);n(".sub-cat, .dropdown-icon",t.parent()).toggleClass("open")});DTCM.CalendarControl.showFeaturedOnly=!0;DTCM.CalendarControl.language=currentLanguage}if(n(".calendar-page-init").length&&n("#cached").val()!="true"&&(i=new Date,r=new Date,r.setDate(i.getDate()+6),n("#from").val()==""?n("#from").val(DTCM.ParseDate(i)):i=new Date(n("#from").val()),n("#to").val()==""?n("#to").val(DTCM.ParseDate(r)):r=new Date(n("#to").val()),dynamicSelectors.showSearchResults==="True"&&(DTCM.CalendarControl.showAllFestivals.hide(),DTCM.CalendarControl.showAllOthers.hide(),DTCM.CalendarControl.wrappers.festivals.hide(),DTCM.CalendarControl.wrappers.others.hide())),o=!0,n(".select-items-per-page select:not(.select-image-dropdown)").ddslick({onSelected:function(t){var i=Number(t.selectedData.text);o||(n(".calendar-page-init").length&&(DTCM.CalendarControl.SearchObject.Skip=0,DTCM.CalendarControl.ajaxLoadEvents(),DTCM.CalendarControl.moveToTop()),n(".deals-offers-init").length&&(DTCM.CalendarControl.SearchObject.Skip=0,DTCM.CalendarControl.ajaxLoadDeals()),n(".cat-dir-page-content").length&&(DTCM.CalendarControl.SearchObject.ReloadFilters=!1,DTCM.CalendarControl.SearchObject.Skip=0,DTCM.CalendarControl.ajaxLoadCategories(),DTCM.CalendarControl.moveToTop()),n(".dubai-map-init").length&&(n(".dubai-dsf-map").length?DTCM.MapControl.loadResults("DSFMap",!0,0,!0,DSFMapCategory):DTCM.MapControl.loadResults(DTCM.MapControl.searchText,!0,0,!0),DTCM.Page.goToTop()));o=!1}}),n("[data-display-text]").each(function(){n(this).attr("displayText",n(this).attr("data-display-text"))}),n(".hotel-detail-page-init").length){n(".availability-content").attr("style","");v=n(".availability-datepicker-first").val()==""?0:n(".availability-datepicker-first").val();n(".availability-datepicker").datepicker({dateFormat:"dd/mm/y",minDate:v,onSelect:function(){if(n(this).hasClass("availability-datepicker-first")){var t=n(".availability-datepicker-first").val().toString().split("/"),i=new Date(Number(t[2])+2e3,Number(t[1])-1,Number(t[0])+1);n(".availability-datepicker-last").datepicker("destroy");n(".availability-datepicker-last").val("").text("");n(".availability-datepicker-last").datepicker({dateFormat:"dd/mm/y",minDate:i})}}});n(".select-items-cat select").ddslick();n(".availability-link").on("click",function(){n(this).parent().next().toggleClass("open");n(this).toggleClass("active")})}if(n(".init-custom-form-buttons").length&&CustomFormButtons.init(".hotels-criteria"),n(".cat-dir-page-content").length){DTCM.CalendarControl.SearchObject.SelectedCategoryID=dynamicSelectors.selectedCategoryID;DTCM.CalendarControl.SearchObject.ReloadFilters=!0;DTCM.CalendarControl.SearchObject.CategoryID=dynamicSelectors.categoryID;n(".map_view_switch").find("a").on("click",function(){var t=n(this).attr("data-switch-view").split("|")[0];t=t.charAt(0).toUpperCase()+t.slice(1);ga("send","event",dynamicSelectors.categoryID,"EC View Changes",t)});n(".has-sub-cat .dropdown-icon").on("click",function(){var t=n(this);n(".sub-cat, .dropdown-icon",t.parent()).toggleClass("open")});n(".has-sub-cat .sub-cat").removeClass("open");CustomFormButtons.init(".hotels-criteria");DTCM.LoadTripAdvisorRatingsAsync();dynamicSelectors.selectedCategoryID!=""&&(t=dynamicSelectors.selectedCategoryID.replace("{","").replace("}","").toLowerCase(),setTimeout(function(){n(".id-chbAll").trigger("click");setTimeout(function(){var i,r;try{i=n("#chbFilter_"+t);document.getElementById("chbFilter_"+t)===undefined||document.getElementById("chbFilter_"+t)===null?(i=n("#chbSubFilter_"+t),r=i.data("check-related"),n("#"+r).parent().find(".dropdown-icon").trigger("click")):n(i).parent().find(".dropdown-icon").trigger("click");i.trigger("click")}catch(u){console.log(u)}},100)},100))}if(n(".dubai-map-init").length){DTCM.MapControl.init();DTCM.MobileMapControl.init();DTCM.MapControl.DirectionsNoResults=dynamicSelectors.DirectionsNoResults;DTCM.MapControl.searchText="";n(".has-sub-cat .dropdown-icon").on("click",function(){var t=n(this);n(".sub-cat, .dropdown-icon",t.parent()).toggleClass("open")});if(n(".has-sub-cat .sub-cat").removeClass("open"),CustomFormButtons.init(".hotels-criteria"),IsChinaInstance()=="False")n("#map_directions_button").on("click",function(t){t.preventDefault();DTCM.MapControl.GetDirections(n("#map_from").val(),n("#map_to").val())});DTCM.MapControl.GenerateMap("25.0738579,55.2298444");y=Number(n("#hfMapItemsPerPage").val());p=Number(n("#hfMapCurrentPage").val());DTCM.MapControl.LoadPins(p,y);google.maps.event.addDomListener(window,"resize",function(){var n=DTCM.MapControl.map.getCenter();google.maps.event.trigger(DTCM.MapControl.map,"resize");DTCM.MapControl.map.setCenter(n)});function k(){var n=document.getElementById("map_from"),t=document.getElementById("map_to"),i=new google.maps.places.Autocomplete(n),r=new google.maps.places.Autocomplete(t)}google.maps.event.addDomListener(window,"load",k);function d(n){for(var i,t=0;t<n.length;t++)i={geo:n[t].geo,index:n[t].index,name:n[t].item.name,location:n[t].item.location,url:n[t].item.url,rating:n[t].item.rating,address:n[t].item.address},new DTCM.LabelMarker(DTCM.MapControl.map,i)}function g(t,i){if(!t){i&&n(i).data("href")&&n(i).data("href").length>0&&(window.location=n(i).data("href"));return}if(t--,DTCM.InfoWindows.collection[t]){DTCM.InfoWindows.closeAll();DTCM.InfoWindows.deactivateMarkers(DTCM.MarkersArray.markers,"map_marker");var r=DTCM.MarkersArray.find(t+1);r&&(DTCM.InfoWindows.activateMarker(r,"map_marker black_marker"),DTCM.InfoWindows.collection[t].open(r.map,r),n(".map_item.active").removeClass("active"),n(i).hasClass("map_item")?n(i).addClass("active"):n(i).parents(".map_item").addClass("active"))}}DTCM.LoadTripAdvisorRatingsAsync()}$tripPlanner.buildCountBadge(n(".trip_count"),"tp_badge");n(".gallery-carousel").each(function(){if(n(this).find("li").length>1)n(this).PikaChoose({carousel:!0,transitions:[0],beforeAnimation:function(n,t){t?n.video.parent().addClass("pika-iframe-wrap"):n.video.parent().removeClass("pika-iframe-wrap")},animationFinished:function(n){n.anchor&&n.anchor.attr("href",n.active.attr("ref")?n.active.attr("ref"):n.active.attr("src"))},buildFinished:function(t){var i=Math.round(Math.random()*1e3);t.anchor&&(t.anchor.attr("data-lightbox","lightbox-gallery-"+i),t.list.find("li").each(function(){var t=n(this),r=t.find("img").attr("ref")?t.find("img").attr("ref"):t.find("img").attr("src");t.append('<a class="hidden" href="'+r+'" data-lightbox="lightbox-gallery-'+i+'" />')}))}});else{var t=n(this).find("img").attr("src"),i=n(this).find("a");i.attr("href",t).attr("data-lightbox","lightbox")}});n(".subnav-dropdown").hide();n(".share").find(".gray_button_v1").on("click",function(t){t.preventDefault();t.stopPropagation();var i=n(".main_nav_container").hasClass("nav-moving")?n(".main_nav_container").offset().top:0,r=n(this).offset().top+n(this).outerHeight()-i;n(".share").toggleClass("dropdown");n(".subnav-dropdown").slideToggle(function(){if(n(".share").hasClass("dropdown")){n("body").append('<div class="megamenu-overlay" style="top: '+r+'px;" />');n("html").css({overflow:"hidden"});n(".megamenu-overlay").on("click",function(){n(this).remove()})}else n("html").removeAttr("style"),n(".megamenu-overlay").remove()})});n(document).on("click",function(t){var i=n(t.target);!i.hasClass("gray_button_v1")&&!i.hasClass("share")&&i.parents(".share").length<=0&&(n(".share").removeClass("dropdown"),n(".subnav-dropdown").slideUp(function(){n(".megamenu-overlay").remove()}),n("html").removeAttr("style"))});n(".tiles-container").length>0&&n(".tiles-container").mixitup({targetSelector:".tout",filterSelector:".filter",sortSelector:".sort",buttonEvent:"click",effects:["fade","scale"],listEffects:null,easing:"smooth",layoutMode:"grid",targetDisplayGrid:"inline-block",targetDisplayList:"block",gridClass:"",listClass:"",transitionSpeed:600,showOnLoad:"default",sortOnLoad:!1,multiFilter:!1,filterLogic:"or",resizeContainer:!0,minHeight:0,failClass:"fail",perspectiveDistance:"3000",perspectiveOrigin:"50% 50%",animateGridList:!0,onMixLoad:null,onMixStart:function(){DTCM.CollapseTile&&DTCM.CollapseTile(!0)},onMixEnd:function(){setTimeout(DTCM.MQ.check,400)}});mobileNav=window.mobileNav={isVisible:!1,showNav:function(){this.isVisible=!0;try{DTCM.MobileMapControl.hideFilters()}catch(t){}n(window).scrollTop(1);n(".mobile_nav").show();n("[data-mobile-trigger]").addClass("active");n(".tab_nav li.tab_spacer").hide();setTimeout(function(){n(".homepage_section, html").css({overflow:"hidden",position:"fixed"}).addClass("nav-open");n(".homepage_wrap").attr("style","");n(".homepage_wrap").removeClass("restore-item").addClass("push-item");n(".mobile_nav, .main_nav_container").addClass("transit push-left");n(".sub-level").addClass("hidden");u()})},hideParentNav:function(){},hideNav:function(){this.back();this.isVisible=!1;n(".homepage_wrap").removeClass("push-item").addClass("restore-item");n(".mobile_nav, .main_nav_container").addClass("transit").removeClass("push-left");setTimeout(function(){n(".mobile_nav, .main_nav_container").removeClass("transit")},450);n("html").attr("style","");n(".homepage_section").css({overflow:"initial",position:"absolute"}).removeClass("nav-open");n("[data-mobile-trigger]").removeClass("active");n(".tab_nav li.tab_spacer").show();setTimeout(function(){n(".homepage_wrap").removeClass("restore-item");n(window).width()<600&&n(".homepage_wrap").css("overflow","hidden")},450)},expandChild:function(t){if(t&&!(t.length<=0)){var i=t.find(".sub-menu-expand"),u=t.find(".has-expand"),r=0;n.each(i.children(),function(t,i){r+=n(i).outerHeight(!0)});i.css("height",r);u.addClass("expanded")}},collapseChild:function(n){if(n&&!(n.length<=0)){var t=n.find(".sub-menu-expand"),i=n.find(".has-expand");t.css("height",0);i.removeClass("expanded")}},initExpandable:function(n){if(n&&!(n.length<=0)){var t=n.find(".sub-menu-expand");t.data("height",t.height()).height(0)}},pushChild:function(t){if(t&&!(t.length<=0)){var i=t.parents(".main-nav"),r=t.parent().find(".sub-menu-push");n(".sub-menu-push").hide();t.addClass("pushed");i.append('<div class="scrolledMobileMenu">'+r.html()+"<\/div>");setTimeout(function(){i.addClass("push-item-full")},500);b()}},revertChild:function(n){if(n&&!(n.length<=0)){var t=n.find(".sub-menu-push");t.removeClass("translated").addClass("restore-item")}},back:function(t){t?(t.parent().parent().parent().removeClass("push-item-full"),t.parent().removeClass("hidden")):(n(".push-item-full").removeClass("push-item-full"),n(".sub-level").removeClass("hidden"));t&&t.parent().parent().parent().parent().removeClass("level-opened");setTimeout(function(){n(".pushed").removeClass("pushed");n(".scrolledMobileMenu").remove();n(".sub-level").addClass("hidden");t&&n(t.parent().parent().parent()).removeClass("hidden")},450)},createBackButton:function(){var t=this;if(DTCM.Translate.isLoaded){n(".high-level").find(".item-section-header").after('<li class="nav-back"><span class="mobile-nav-arrow-back"><\/span>'+DTCM.Translate.GetValue("Back",currentLanguage)+"<\/li>");var i=n(".main-nav"),r=i.find(".nav-back"),u=this;r.on("click",function(t){t.preventDefault();u.back(n(this))})}else setTimeout(function(){t.createBackButton()},200)},init:function(){var t=this;t.createBackButton();this.animDuration=600;this.timeout=null;this.main=null;this.signDropdown=n(".signup_nav");this.signTrigger=n(".nav_prompt");var i=n(".main-nav"),e=i.find(".nav-section li a"),o=i.find(".nav-item > a"),r=i.find(".high-level"),f=i.find(".mobile-nav-arrow").parent();this.main=i;this.hideNav();e.each(function(){n(this).data("expanded",!1);n(this).parent().find(".sub-menu-expand").length>0&&(n(this).addClass("has-expand"),t.initExpandable(n(this).parent()))}).on("click",function(i){var r,u;n(window).width()>1200||(n(this).hasClass("has-expand")&&(i.preventDefault(),r=n(this).hasClass("expanded"),r?(t.collapseChild(n(this).parent()),n(this).data("expanded",!1)):(n(".sub-menu-expand").css("height",0),n(".has-expand").removeClass("expanded"),t.expandChild(n(this).parent()),n(this).data("expanded",!0))),n(this).next().hasClass("sub-level")&&(i.preventDefault(),u=n(this).next(),n(this).parent().parent().addClass("push-item-full"),n(".main-nav").addClass("level-opened"),n(".sub-level").attr("style","").addClass("hidden").removeClass("sub-showing"),n(this).next().removeClass("hidden").addClass("sub-showing"),n(this).parent().parent().removeClass("hidden")))});r.on("mouseover",function(){r.removeClass("hover");n(this).addClass("hover")});i.on("mouseover",function(){n(window).width()<1201||(n(".sub-level,.nav-column-middle").removeClass("open-menu"),n(".megamenu-overlay").length&&(n(".megamenu-overlay").remove(),n(".share").removeClass("dropdown"),n(".subnav-dropdown").slideUp()),n("html").removeAttr("style"),n(this).addClass("hover"),n("body").append('<div class="megamenu-overlay" />'))}).on("mouseout",function(){n(window).width()<1201||(n(this).removeClass("hover"),n(".megamenu-overlay").remove())});f.on("click",function(t){(n(this).hasClass("accordion-trigger")&&t.preventDefault(),n(window).width()<1201)||(f.removeClass("focus"),n(this).addClass("focus"),n(this).next(".sub-level").find("a").attr("tabindex","7"))});n(".sub-level").addClass("hidden");o.each(function(){n(this).data("expanded",!1);n(this).parent().find(".sub-menu-push").length>0&&n(this).addClass("has-push")}).on("click",function(i){n(this).hasClass("has-push")&&(i.preventDefault(),t.pushChild(n(this)),n(".scrolledMobileMenu").height(n(".mobile_nav").outerHeight()-n(".mobile-search").outerHeight()-n(".meta_nav").outerHeight()))});n(".homepage_wrap, .mobile-toggle").on("click",function(i){t.isVisible&&(n(i.target).parents(".mobile_nav").length<=0||n(i.target).hasClass("mobile-toggle"))&&t.hideNav()});n(window).on("orientationchange",function(){setTimeout(u)});u()}};u=function(){};mobileNav.init();n("[data-mobile-trigger]").on("click",function(n){n.preventDefault();n.stopPropagation();mobileNav.isVisible?mobileNav.hideNav():mobileNav.showNav()});setTimeout(function(){DTCM.Grid.refresh()},500);n(window).on("resize",function(){DTCM.Grid.sizeTwitter()});DTCM.Extend("Grid",{init:function(){this.refresh()},refresh:function(){var t=n(".feed-container").not(".photo-gallery-container");t&&(t.isotope({itemSelector:".masonry-item",layoutMode:"masonry",masonry:{columnWidth:t.width()/4}}),DTCM.Grid.Masonry=t)},sizeTwitter:function(){function i(){var i;DTCM.Grid.Masonry||DTCM.Grid.refresh();DTCM.Grid.Masonry.find(".item.instagram-item").length>0?(i=DTCM.Grid.Masonry.find(".item.instagram-item").addClass("auto-height").outerHeight(),DTCM.Grid.Masonry.find(".item.instagram-item").removeClass("auto-height")):i=DTCM.Grid.Masonry.find(".item.twitter-item .socialhub-relative-container").outerWidth();i=240;n(window).width()>480?DTCM.Grid.Masonry.find(".item.twitter-item .socialhub-relative-container").animate({height:i},100,function(){DTCM.Grid.refresh();delete t.resizeTimeout}):(DTCM.Grid.refresh(),delete t.resizeTimeout)}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var t=this;this.resizeTimeout=setTimeout(i,250)},destroy:function(n){this.refresh();DTCM.Grid.Masonry.isotope("destroy");n&&n()},addItems:function(t){var i,u,r;for(this.refresh(),i=[],u=0,r=0;r<t.length;r++)i.push(t[r][0]);DTCM.Grid.Masonry.find(".item").length>0&&(u=DTCM.Grid.Masonry.find(".item").last().offset().top+DTCM.Grid.Masonry.find(".item").last().outerHeight()-n(".main_nav_container").height());DTCM.Grid.Masonry.append(i).isotope("appended",i).isotope("layout");imagesLoaded(DTCM.Grid.Masonry,function(){DTCM.Grid.Masonry.isotope("layout");DTCM.Grid.sizeTwitter()})},reset:function(){DTCM.Grid.Masonry.html("").height("auto").attr("data-page-number",-1)}});n(".select-image-dropdown").each(function(){var i=!0,t=n(this);n(this).ddslick({onSelected:function(r,u,f){if(i||window.noTrigger||u&&!f||(f||r.selectedData.selected&&t.attr("id")!="plhcontent_0_ddlNetworks"||n(r.original).val(r.selectedData.value).change(),t.attr("id")=="datepicker-select"&&(selectDateRange(r.selectedData.value,n("#datepicker-start"),n("#datepicker-end")),r.selectedData.value!="mydates"&&(DTCM.CalendarControl.SearchObject.Skip=0,DTCM.CalendarControl.SearchObject.ReloadFilters=!0,DTCM.CalendarControl.SearchObject.TabValue="",DTCM.CalendarControl.SearchObject.SearchBy="period",DTCM.CalendarControl.SearchObject.SearchValue=r.selectedData.value,DTCM.CalendarControl.ajaxLoadEvents())),t.attr("id")=="ddlEventType"&&(DTCM.CalendarControl.SearchObject.Skip=0,DTCM.CalendarControl.SearchObject.ReloadFilters=!0,DTCM.CalendarControl.SearchObject.TabValue="",DTCM.CalendarControl.SearchObject.SearchBy="type",DTCM.CalendarControl.SearchObject.SearchValue=r.selectedData.value,DTCM.CalendarControl.ajaxLoadEvents()),t.hasClass("dd-currency")&&n(".currency-synbol").each(function(){n(this).html(n('option[value="'+r.selectedData.value+'"]',t).attr("data-currency-sign"))})),!i)switch(r.original.context.id){case"ddlLanguageSelector":GAtrack.homepageButtons(r.selectedData.value);break;case"ddlEventType":case"datepicker-select":GAtrack.eventsCalendar(r.selectedData.text)}}});i=!1});n("#literalLanguage .dd-container").click(function(){n("#literalLanguage .dd-option-image").Lazy()});n(window).on("resize",function(){clearTimeout(DTCM.MQTimeout);DTCM.MQTimeout=setTimeout(function(){DTCM.MQ.check()})}).trigger("resize")});DTCM.MQ.init();n(window).on("resize",function(){n(window).width()>815&&!Modernizr.touch&&mobileNav.hideNav()})}(jQuery);scrollkeys={37:1,38:1,39:1,40:1};$(document).ready(function(){$('a.smoothanchor[href*="#"]:not([href="#"])').click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var n=$(this.hash);if(n=n.length?n:$("[name="+this.hash.slice(1)+"]"),n.length)return $("html, body").animate({scrollTop:n.offset().top-150},1e3),!1}});$("#ddlLanguageSelector").change(function(){typeof Page_ClientValidate=="function"&&Page_ClientValidate("")})});$(function(){$(".lazyImageLoad").Lazy()});$(".accordion_new_updated h3").click(function(){$(this).next(".pane").hasClass("closed")?($(this).next(".pane").removeClass("closed"),$(this).next(".pane").show()):($(this).next(".pane").addClass("closed"),$(this).next(".pane").hide())});$(".menu-tile-back").each(function(){var n=$(this).find(".tout_header_v2 .lang").height()+$(this).find(".tout_subheader_v2 .lang").height();$(this).css("top",220-n)});iframeWidth=460;iframeHeight=320,function(){var n,t,i;n=jQuery;i=function(){function n(){this.fadeDuration=500;this.fitImagesInViewport=!0;this.resizeDuration=700;this.showImageNumberLabel=!0;this.wrapAround=!1}return n.prototype.albumLabel=function(n,t,i){return i.find("iframe").is(":hidden")?i18n&&i18n.lightbox&&i18n.lightbox.album?n+" / "+t:"Image "+n+" of "+t:"Video "+n+" of "+t},n.prototype.closeLabel=function(){return i18n&&i18n.lightbox&&i18n.lightbox.close?i18n.lightbox.close:""},n.prototype.nextLabel=function(){return i18n&&i18n.lightbox&&i18n.lightbox.next?i18n.lightbox.next:""},n.prototype.prevLabel=function(){return i18n&&i18n.lightbox&&i18n.lightbox.prev?i18n.lightbox.prev:""},n}();t=function(){function t(n){this.options=n;this.album=[];this.currentImageIndex=void 0;this.init()}return t.prototype.init=function(){return this.enable(),this.build()},t.prototype.enable=function(){var t=this;return n("a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]").click(function(i){return n(this).hasClass("video-content")||n(this).hasClass("video-content1")?t.$lightbox.addClass("video-contains"):t.$lightbox.removeClass("video-contains"),t.hasDownloadButton=n(i.currentTarget).hasClass("has-download-button"),t.isSiloPage=n(i.currentTarget).hasClass("tile"),t.start(n(i.currentTarget)),!1})},t.prototype.build=function(){var t=this;n("<div id='lightboxOverlay' class='lightboxOverlay'><\/div><div id='lightbox' class='lightbox'><div class='lb-dataContainer top-text font_55'><div class='top-holder'><p class='lb-title'><\/p><a class='lb-close r-arrow aaa-screenreader-hidden-Text' href='javascript:;'>X<\/a><\/div><\/div><div class='lb-outerContainer'><div class='lb-container'><img class='lb-image' src='' alt='lb-image' /><iframe allowscriptaccess='always' id='playerid' class='lb-iframe' src=''><\/iframe><a class='lb-prev' href='javascript:;' ><span>"+this.options.prevLabel()+"<\/span><\/a><a class='lb-next' href='javascript:;' ><span>"+this.options.nextLabel()+"<\/span><\/a><div class='lb-loader'><a class='lb-cancel r-arrow'>cancel<\/a><\/div><\/div><\/div><div class='lb-dataContainer'><div class='lb-data'><div class='lb-details'><a href='javascript:;' class='font_45' id='btnLightboxDownloadImage'><span class='lightbox-download-button'><\/span><span class='download-text'>"+DTCM.Translate.GetValue("Download Image",currentLanguageTwoLetterISO)+"<\/span><\/a><span class='lb-caption'><\/span><span class='lb-number font_25'><\/span><\/div><div class='lb-closeContainer bottom-close'><\/div><\/div><\/div><\/div>").appendTo(n("body"));this.$lightbox=n("#lightbox");this.$overlay=n("#lightboxOverlay");this.$outerContainer=this.$lightbox.find(".lb-outerContainer");this.$container=this.$lightbox.find(".lb-container");this.$btnLightboxDownloadImage=n("#btnLightboxDownloadImage");this.containerTopPadding=parseInt(this.$container.css("padding-top"),10);this.containerRightPadding=parseInt(this.$container.css("padding-right"),10);this.containerBottomPadding=parseInt(this.$container.css("padding-bottom"),10);this.containerLeftPadding=parseInt(this.$container.css("padding-left"),10);this.$overlay.hide().on("click",function(){return t.end(),!1});this.$lightbox.hide().on("click",function(i){return n(i.target).attr("id")==="lightbox"&&t.end(),!1});this.$btnLightboxDownloadImage.on("click",function(t){t.preventDefault();window.location.href=n(this).attr("href")});this.$outerContainer.on("click",function(i){return n(i.target).attr("id")==="lightbox"&&t.end(),!1});this.$lightbox.find(".lb-prev").on("click",function(){return t.currentImageIndex===0?t.changeImage(t.album.length-1):t.changeImage(t.currentImageIndex-1),!1});this.$lightbox.find(".lb-next").on("click",function(){return t.currentImageIndex===t.album.length-1?t.changeImage(0):t.changeImage(t.currentImageIndex+1),!1});return this.$lightbox.find(".lb-loader, .lb-close").on("click",function(){return t.end(),!1})},t.prototype.start=function(t){var f,i,s,a,r,e,v,y,h,c,p,w,u,l,o=[];n(window).on("resize",this.sizeOverlay);if(n("select, object, embed").css({visibility:"hidden"}),this.hasDownloadButton?(this.$lightbox.addClass("gallery-download"),this.options.showImageNumberLabel=!1):(this.$lightbox.removeClass("gallery-download"),this.options.showImageNumberLabel=!0),this.$overlay.width(n(document).width()).height(n(document).height()).fadeIn(this.options.fadeDuration),this.album=[],e=0,s=t.attr("data-lightbox"),a=n(".imageCaption"),n.each(a,function(t,i){o.push(n(i).text())}),s)for(u=n(t.prop("tagName")+'[data-lightbox="'+s+'"]'),u.filter(".hidden").length>0&&(u=u.filter(".hidden")),r=h=0,p=u.length;h<p;r=++h)i=u[r],this.album.push({link:n(i).attr("href"),title:n(i).attr("title"),scID:n(i).attr("data-imgid"),caption:o[r],description:n(i).attr("data-description"),videotitle:n(i).attr("data-title")}),n(i).attr("href")===t.attr("href")&&(e=r);else if(t.attr("rel")==="lightbox")this.album.push({link:t.attr("href"),title:t.attr("title"),scID:t.attr("data-imgid"),caption:o[r],description:n(i).attr("data-description"),videotitle:n(i).attr("data-title")});else for(l=n(t.prop("tagName")+'[rel="'+t.attr("rel")+'"]'),r=c=0,w=l.length;c<w;r=++c)i=l[r],this.album.push({link:n(i).attr("href"),title:n(i).attr("title"),scID:n(i).attr("data-imgid"),caption:o[r],description:n(i).attr("data-description"),videotitle:n(i).attr("data-title")}),n(i).attr("href")===t.attr("href")&&(e=r);f=n(window);y=f.scrollTop()+f.height()/5;v=f.scrollLeft();this.$lightbox.find(".lb-iframe").show();this.$lightbox.find(".lb-outerContainer").show();this.$lightbox.find(".mapContainer").length!=0&&this.$lightbox.find(".mapContainer").remove();this.$lightbox.css({top:y+"px",left:v+"px"}).fadeIn(this.options.fadeDuration);this.changeImage(e)},t.prototype.changeImage=function(t){var r,i,f,u=this;this.disableKeyboardNav();r=this.$lightbox.find(".lb-image");f=this.$lightbox.find(".lb-desc");$downloadBtn=n("#btnLightboxDownloadImage");this.$btnLightboxDownloadImage.find(".download-text").text(DTCM.Translate.GetValue("Download Image",currentLanguageTwoLetterISO));this.sizeOverlay();this.$overlay.fadeIn(this.options.fadeDuration);n(".lb-loader").fadeIn("slow");this.$lightbox.find(".lb-image, .lb-iframe, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption",".lb-title").hide();this.$lightbox.find(".lb-title").html("");this.$outerContainer.addClass("animating");this.$lightbox.removeClass("lightbox-video");this.album[t].scID!=undefined&&n("#btnLightboxDownloadImage").attr("href","/api/events/DownloadImage?imgID="+this.album[t].scID);this.album[t].link.indexOf("youtube")>0?(this.$lightbox.find(".lb-iframe").attr({src:this.album[t].link,width:iframeWidth,height:iframeHeight,allowfullscreen:!0}),this.isSiloPage&&this.$lightbox.addClass("lightbox-video"),this.sizeContainer(iframeWidth,iframeHeight,"iframe")):(i=new Image,i.onload=function(){var a,e,o,s,h,c,l;return r.attr("src",u.album[t].link),u.album[t].caption!=undefined&&u.album[t].caption.length!=0?f.text(u.album[t].caption):f.remove(),a=n(i),r.width(i.width),r.height(i.height),u.options.fitImagesInViewport&&(l=n(window).width(),c=n(window).height(),h=l-u.containerLeftPadding-u.containerRightPadding-20,s=c-u.containerTopPadding-u.containerBottomPadding-110,(i.width>h||i.height>s)&&(i.width/h>i.height/s?(o=h,e=parseInt(i.height/(i.width/o),10),r.width(o),r.height(e)):(e=s,o=parseInt(i.width/(i.height/e),10),r.width(o),r.height(e)))),u.sizeContainer(r.width(),r.height(),"image")},i.src=this.album[t].link);this.currentImageIndex=t},t.prototype.sizeOverlay=function(){return n("#lightboxOverlay").width(n(document).width()).height(n(document).height())},t.prototype.sizeContainer=function(n,t,i){var r,f,e,o,u=this;o=this.$outerContainer.outerWidth();e=this.$outerContainer.outerHeight();f=n+this.containerLeftPadding+this.containerRightPadding;r=t+this.containerTopPadding+this.containerBottomPadding;this.$outerContainer.animate({width:f,height:r},this.options.resizeDuration,"swing");setTimeout(function(){u.$lightbox.find(".lb-dataContainer").width(f);u.$lightbox.find(".lb-prevLink").height(r);u.$lightbox.find(".lb-nextLink").height(r);u.showImage(i)},this.options.resizeDuration)},t.prototype.showImage=function(n){this.$lightbox.find(".lb-loader").hide();n=="image"?this.$lightbox.find(".lb-image").fadeIn("slow"):n=="iframe"&&this.$lightbox.find(".lb-iframe").fadeIn("slow");this.updateNav();this.updateDetails();this.preloadNeighboringImages();this.enableKeyboardNav()},t.prototype.updateNav=function(){this.$lightbox.find(".lb-nav").show();this.album.length>1&&(this.options.wrapAround?this.$lightbox.find(".lb-prev, .lb-next").show():(this.currentImageIndex>0&&this.$lightbox.find(".lb-prev").show(),this.currentImageIndex<this.album.length-1&&this.$lightbox.find(".lb-next").show()))},t.prototype.updateDetails=function(){var t=this;n("#hdnFestivalVideo").val()!=undefined&&n("#hdnFestivalVideo").val()=="1"?(typeof this.album[this.currentImageIndex].description!="undefined"&&this.album[this.currentImageIndex].description!==""?this.$lightbox.find(".lb-caption").html(this.album[this.currentImageIndex].description).fadeIn("fast"):this.$lightbox.find(".lb-caption").hide(),typeof this.album[this.currentImageIndex].videotitle!="undefined"&&this.album[this.currentImageIndex].videotitle!==""?this.$lightbox.find(".lb-title").html(this.album[this.currentImageIndex].videotitle).fadeIn("fast"):this.$lightbox.find(".lb-title").hide(),this.$lightbox.find(".lb-number").hide()):(typeof this.album[this.currentImageIndex].title!="undefined"&&this.album[this.currentImageIndex].title!==""?this.$lightbox.find(".lb-caption").html(this.album[this.currentImageIndex].title).fadeIn("fast"):this.$lightbox.find(".lb-caption").hide(),this.album.length>1&&this.options.showImageNumberLabel?this.$lightbox.find(".lb-number").text(this.options.albumLabel(this.currentImageIndex+1,this.album.length,this.$lightbox)).fadeIn("fast"):this.$lightbox.find(".lb-number").hide());this.$outerContainer.removeClass("animating");this.$lightbox.find(".lb-dataContainer").fadeIn(this.resizeDuration,function(){return t.sizeOverlay()})},t.prototype.preloadNeighboringImages=function(){var n,t;this.album.length>this.currentImageIndex+1&&(n=new Image,n.src=this.album[this.currentImageIndex+1].link);this.currentImageIndex>0&&(t=new Image,t.src=this.album[this.currentImageIndex-1].link)},t.prototype.enableKeyboardNav=function(){n(document).on("keyup.keyboard",n.proxy(this.keyboardAction,this))},t.prototype.disableKeyboardNav=function(){n(document).off(".keyboard")},t.prototype.keyboardAction=function(n){var r,u,f,i,t;r=27;u=37;f=39;t=n.keyCode;i=String.fromCharCode(t).toLowerCase();t===r||i.match(/x|o|c/)?this.end():i==="p"||t===u?this.currentImageIndex!==0&&this.changeImage(this.currentImageIndex-1):(i==="n"||t===f)&&this.currentImageIndex!==this.album.length-1&&this.changeImage(this.currentImageIndex+1)},t.prototype.end=function(){this.disableKeyboardNav();var t=document.getElementById("playerid");return t.src="",n(window).off("resize",this.sizeOverlay),this.$lightbox.fadeOut(this.options.fadeDuration),this.$overlay.fadeOut(this.options.fadeDuration),n("select, object, embed").css({visibility:"visible"})},t}();n(function(){var n;return n=new i,new t(n)})}.call(this);GAtrack={labelText:"",activeSilo:$(".test-navi").find(".active").text(),megaMenu:function(){var n=$(".signup_nav_wrap .social").find("a"),t=$(".signup_nav_wrap .form").find(".submit"),i=$(".tab_nav").find(".icon_button");n.on("click",function(){GAtrack.labelText=$(this).attr("class").charAt(0).toUpperCase()+$(this).attr("class").slice(1);window.dataLayer.push({event:"generic",eventCategory:"Navigation",eventAction:"Mega Menu",eventLabel:"Sign-in - Social"})});t.on("click",function(){window.dataLayer.push({event:"generic",eventCategory:"Navigation",eventAction:"Mega Menu",eventLabel:"Sign-in - Regular"})});i.on("click",function(){GAtrack.labelText=$(this).attr("title")+" Clicks";(window.dataLayer!=undefined||window.dataLayer!=null)&&window.dataLayer.push({event:"generic",eventCategory:"Navigation",eventAction:"Mega Menu",eventLabel:GAtrack.labelText})})},megaMenuMobile:function(){},footerMenu:function(){var n=$(".footer .section").find("a");n.on("click",function(){for(var n=$(this).href,t=n.split("/"),i=0;i<4;i++)t.shift();n="+"+t.join("/");window.dataLayer.push({event:"generic",eventCategory:"Navigation",eventAction:"Footer",eventLabel:n})})},homepageButtons:function(n){n&&window.dataLayer.push({event:"generic",eventCategory:"Navigation",eventAction:"Language Selector",eventLabel:"Language: "+currentLanguage+">"+n})},siloSupercategory:function(n,t){n=$(n);var i=n.parent().parent().parent();switch(i.attr("class")){case"ac-small_p":if(GAtrack.labelText+=i.parent().parent().parent().parent().parent().prev().text()+"; "+i.prev().find("span").text(),t)break;GAtrack.labelText+="; "+n.text();break;case"ac-container_p":GAtrack.labelText+=i.parent().parent().parent().prev().text()+"; "+n.text()}GAtrack.labelText=GAtrack.labelText+"; ID: "+n.attr("data-track-id");window.dataLayer.push({event:"generic",eventCategory:"homepage",eventAction:"Silo - Supercategory",eventLabel:GAtrack.activeSilo+"; "+$.trim(GAtrack.labelText)})},userProfiles:function(){},panels:function(){var n=$(".row").find(".tile"),t=$("#nav").find("a").not(".remote-switch");if(n.length){n.on("click",function(){$(this).find(".twitter_icon").length?GAtrack.labelText="Tweeter Tile":$(this).find(".weather_icon").length?GAtrack.labelText="Weather Tile":(GAtrack.labelText+=$(this).find(".chip_tag a").length?"Tag: "+$.trim($(this).find(".chip_tag a").text())+"; ":"",GAtrack.labelText+=$(this).find(".tile_head a").length?"Head: "+$.trim($(this).find(".tile_head a").text())+"; ":"",GAtrack.labelText+=$(this).find(".tile_subhead a").length?"SubHead: "+$.trim($(this).find(".tile_subhead a").text())+";":"",GAtrack.labelText+=$(this).find(".category-tile-text").length?"Head: "+$.trim($(this).find(".category-tile-text").text())+";":"");GAtrack.labelText.length>3&&window.dataLayer.push({event:"generic",eventCategory:"Panel",eventAction:"Chip Clicks",eventLabel:GAtrack.labelText})});t.on("click",function(){window.dataLayer&&window.dataLayer.push({event:"generic",eventCategory:"Panel",eventAction:"Remote Click Item",eventLabel:$(this).text()})})}},outboundLink:function(){},socialActions:function(){},eventsCalendar:function(n){GAtrack.labelText="Calendar Drop Down: "+n;window.dataLayer.push({event:"generic",eventCategory:"Events Calendar",eventAction:"Dropdown",eventLabel:GAtrack.labelText})},tripPlanner:function(){},tripAdvisor:function(){},socialMediaButtons:function(){var n=$(".footer-social").find("a");n.on("click",function(){GAtrack.labelText=$(this).find("span").text();window.dataLayer!=undefined&&window.dataLayer.push({event:"generic",eventCategory:"Social Media Buttons",eventAction:"Social Buttons Clicks",eventLabel:GAtrack.labelText})})},bookingWidget:function(){},RFPs:function(){},complaintForms:function(){},SOSButton:function(){},appDownloadLinks:function(){},errors:function(){window.dataLayer.push({event:"generic",eventCategory:"Error 404",eventAction:document.location,eventLabel:document.referrer})}};GAtrack.megaMenu();GAtrack.homepageButtons();GAtrack.panels();GAtrack.socialMediaButtons();GAtrack.footerMenu();PanelPageContent=PanelPageContent||{};PanelPageContent.Data={attractionsDataArray:null,HdnPdfCurrentId:$("#PanelPageContent-HdnPdfCurrentId").val(),IsMobile:$("#PanelPageContent-IsMobile").val()},function(){$(".homepage_wrap").addClass("no-transition")}();$(document).ready(function(){if(PanelPageContent.Data.IsMobile=="1"){var t=$(".socialchip-slider").data("autoplayspeed"),n=3e3;if(t!="")try{n=parseInt(n)}catch(i){}$(".socialchip-slider").sss({speed:n});$(".chip-slider").sss({speed:n})}else $(".chip-slider").not(".slick-initialized").slick({slide:"div.chip-items",dots:!1,infinite:!0,speed:500,fade:!0,cssEase:"linear",autoplay:!0,autoplaySpeed:5e3,rtl:window.isRTLbool}),$(".socialchip-slider").not(".slick-initialized").slick({slide:"div.socialchip-items",dots:!1,infinite:!0,speed:500,fade:!0,cssEase:"linear",autoplay:!0,rtl:window.isRTLbool}),$(".chip-items").css("display","block")});downLoadLinkButtonId="",function(n,t){if(typeof exports=="object"&&exports)t(exports);else{var i={};t(i);typeof define=="function"&&define.amd?define(i):n.Mustache=i}}(this,function(n){function l(n,t){return b.call(n,t)}function a(n){return!l(k,n)}function u(n){return typeof n=="function"}function e(n){return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function v(n){return String(n).replace(/[&<>"'\/]/g,function(n){return g[n]})}function s(n){if(!o(n)||n.length!==2)throw new Error("Invalid tags: "+n);return[new RegExp(e(n[0])+"\\s*"),new RegExp("\\s*"+e(n[1]))]}function y(t,i){function st(){if(et&&!rt)while(g.length)delete b[g.pop()];else g=[];et=!1;rt=!1}var l,f,o,k,ut,v,d,ot;i=i||n.tags;t=t||"";typeof i=="string"&&(i=i.split(h));for(var y=s(i),u=new r(t),ft=[],b=[],g=[],et=!1,rt=!1;!u.eos();){if(l=u.pos,o=u.scanUntil(y[0]),o)for(d=0,ot=o.length;d<ot;++d)k=o.charAt(d),a(k)?g.push(b.length):rt=!0,b.push(["text",k,l,l+1]),l+=1,k==="\n"&&st();if(!u.scan(y[0]))break;if(et=!0,f=u.scan(it)||"name",u.scan(nt),f==="="?(o=u.scanUntil(c),u.scan(c),u.scanUntil(y[1])):f==="{"?(o=u.scanUntil(new RegExp("\\s*"+e("}"+i[1]))),u.scan(tt),u.scanUntil(y[1]),f="&"):o=u.scanUntil(y[1]),!u.scan(y[1]))throw new Error("Unclosed tag at "+u.pos);if(ut=[f,o,l,u.pos],b.push(ut),f==="#"||f==="^")ft.push(ut);else if(f==="/"){if(v=ft.pop(),!v)throw new Error('Unopened section "'+o+'" at '+l);if(v[1]!==o)throw new Error('Unclosed section "'+v[1]+'" at '+l);}else f==="name"||f==="{"||f==="&"?rt=!0:f==="="&&(y=s(i=o.split(h)))}if(v=ft.pop(),v)throw new Error('Unclosed section "'+v[1]+'" at '+u.pos);return w(p(b))}function p(n){for(var u=[],t,i,r=0,f=n.length;r<f;++r)t=n[r],t&&(t[0]==="text"&&i&&i[0]==="text"?(i[1]+=t[1],i[3]=t[3]):(u.push(t),i=t));return u}function w(n){for(var u=[],r=u,i=[],t,e,f=0,o=n.length;f<o;++f){t=n[f];switch(t[0]){case"#":case"^":r.push(t);i.push(t);r=t[4]=[];break;case"/":e=i.pop();e[5]=t[2];r=i.length>0?i[i.length-1][4]:u;break;default:r.push(t)}}return u}function r(n){this.string=n;this.tail=n;this.pos=0}function t(n,t){this.view=n==null?{}:n;this.cache={".":this.view};this.parent=t}function i(){this.cache={}}var b=RegExp.prototype.test,k=/\S/,d=Object.prototype.toString,o=Array.isArray||function(n){return d.call(n)==="[object Array]"},g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},nt=/\s*/,h=/\s+/,c=/\s*=/,tt=/\s*\}/,it=/#|\^|\/|>|\{|&|=|!/,f;r.prototype.eos=function(){return this.tail===""};r.prototype.scan=function(n){var i=this.tail.match(n),t;return i&&i.index===0?(t=i[0],this.tail=this.tail.substring(t.length),this.pos+=t.length,t):""};r.prototype.scanUntil=function(n){var i=this.tail.search(n),t;switch(i){case-1:t=this.tail;this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,i);this.tail=this.tail.substring(i)}return this.pos+=t.length,t};t.prototype.push=function(n){return new t(n,this)};t.prototype.lookup=function(n){var t,i,r,f;if(n in this.cache)t=this.cache[n];else{for(i=this;i;){if(n.indexOf(".")>0)for(t=i.view,r=n.split("."),f=0;t!=null&&f<r.length;)t=t[r[f++]];else t=i.view[n];if(t!=null)break;i=i.parent}this.cache[n]=t}return u(t)&&(t=t.call(this.view)),t};i.prototype.clearCache=function(){this.cache={}};i.prototype.parse=function(n,t){var r=this.cache,i=r[n];return i==null&&(i=r[n]=y(n,t)),i};i.prototype.render=function(n,i,r){var u=this.parse(n),f=i instanceof t?i:new t(i);return this.renderTokens(u,f,r,n)};i.prototype.renderTokens=function(t,i,r,f){function v(n){return y.render(n,i,r)}for(var c,a,h="",y=this,s,e,l=0,p=t.length;l<p;++l){s=t[l];switch(s[0]){case"#":if(e=i.lookup(s[1]),!e)continue;if(o(e))for(c=0,a=e.length;c<a;++c)h+=this.renderTokens(s[4],i.push(e[c]),r,f);else if(typeof e=="object"||typeof e=="string")h+=this.renderTokens(s[4],i.push(e),r,f);else if(u(e)){if(typeof f!="string")throw new Error("Cannot use higher-order sections without the original template");e=e.call(i.view,f.slice(s[3],s[5]),v);e!=null&&(h+=e)}else h+=this.renderTokens(s[4],i,r,f);break;case"^":e=i.lookup(s[1]);(!e||o(e)&&e.length===0)&&(h+=this.renderTokens(s[4],i,r,f));break;case">":if(!r)continue;e=u(r)?r(s[1]):r[s[1]];e!=null&&(h+=this.renderTokens(this.parse(e),i,r,e));break;case"&":e=i.lookup(s[1]);e!=null&&(h+=e);break;case"name":e=i.lookup(s[1]);e!=null&&(h+=n.escape(e));break;case"text":h+=s[1]}}return h};n.name="mustache.js";n.version="0.8.1";n.tags=["{{","}}"];f=new i;n.clearCache=function(){return f.clearCache()};n.parse=function(n,t){return f.parse(n,t)};n.render=function(n,t,i){return f.render(n,t,i)};n.to_html=function(t,i,r,f){var e=n.render(t,i,r);if(u(f))f(e);else return e};n.escape=v;n.Scanner=r;n.Context=t;n.Writer=i}),function(n,t){if(typeof define=="function"&&define.amd)define(["mustache"],function(n){t(n)});else if(typeof exports!="undefined"){var i=require("mustache");t(i)}else t(n.Mustache)}(this,function(n){n.Formatters={};n.Context.prototype.parseParam=function(n){var t,i,r;return(t=/^[\'\"](.*)[\'\"]$/g,i=/^[+-]?\d+$/g,r=/^[+-]?\d*\.\d+$/g,t.test(n))?n.replace(t,"$1"):i.test(n)?parseInt(n,10):r.test(n)?parseFloat(n):this._lookup(n)};n.Context.prototype.applyFilter=function(t,i){var f,e,r,u,o=[t];for(f=/^\s*([^\:]+)/g,e=/\:\s*([\'][^\']*[\']|[\"][^\"]*[\"]|[^\:]+)\s*/g,r=f.exec(i),u=r[1].trim();r=e.exec(i);)o.push(this.parseParam(r[1].trim()));return n.Formatters.hasOwnProperty(u)?(i=n.Formatters[u],i.apply(i,o)):t};n.Context.prototype._lookup=n.Context.prototype.lookup;n.Context.prototype.lookup=function(n){var i,u,t,r;for(r=n.split("|"),t=r.shift().trim(),t=this._lookup(t),i=0,u=r.length;i<u;++i)t=this.applyFilter(t,r[i]);return t}});Mustache.Formatters={uppercase:function(n){return n.toUpperCase()},curreny:function(n){return n?n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):""},decimal:function(n){return n?n.toFixed(2):n},activetab1:function(n){if(n){var t=n.split(",");if(t.length>0)return t[0]}return""},activetab2:function(n){if(n){var t=n.split(",");if(t.length>1)return t[1]}return""},activetab3:function(n){if(n){var t=n.split(",");if(t.length>2)return t[2]}return""},date:function(n){var t=Mustache.Formatters.lpad,i=t(n.getDate(),2,"0"),r=t(n.getMonth()+1,2,"0");return i+"/"+r+"/"+n.getFullYear()},getstars:function(n){return n=="5"?'<li><a href="javascript:void(0);"><span class="glyphicon glyphicon-star" aria-hidden="true"><\/span><\/a><\/li><li><a href="javascript:void(0);"><span class="glyphicon glyphicon-star" aria-hidden="true"><\/span><\/a><\/li><li><a href="javascript:void(0);"><span class="glyphicon glyphicon-star" aria-hidden="true"><\/span><\/a><\/li><li><a href="javascript:void(0);"><span class="glyphicon glyphicon-star" aria-hidden="true"><\/span><\/a><\/li><li><a href="javascript:void(0);"><span class="glyphicon glyphicon-star" aria-hidden="true"><\/span><\/a><\/li>':n=="4"?'<li class="hidden-xs"><a href="javascript:void(0);"><\/a><\/li><li><a href="javascript:void(0);"><span class="glyphicon glyphicon-star" aria-hidden="true"><\/span><\/a><\/li><li><a href="javascript:void(0);"><span class="glyphicon glyphicon-star" aria-hidden="true"><\/span><\/a><\/li><li><a href="javascript:void(0);"><span class="glyphicon glyphicon-star" aria-hidden="true"><\/span><\/a><\/li><li><a href="javascript:void(0);"><span class="glyphicon glyphicon-star" aria-hidden="true"><\/span><\/a><\/li>':n=="3"?'<li><a href="javascript:void(0);"><span class="glyphicon glyphicon-star" aria-hidden="true"><\/span><\/a><\/li> <li class="forward-slash">/<\/li><li><a href="javascript:void(0);"><span class="glyphicon glyphicon-star" aria-hidden="true"><\/span><\/a><\/li><li><a href="javascript:void(0);"><span class="glyphicon glyphicon-star" aria-hidden="true"><\/span><\/a><\/li><li><a href="javascript:void(0);"><span class="glyphicon glyphicon-star" aria-hidden="true"><\/span><\/a><\/li>':""}};!function(n,t){function v(n,t,r){var e=n.children(),o=!1,u,s,f;for(n.empty(),u=0,s=e.length;s>u;u++){if(f=e.eq(u),n.append(f),r&&n.append(r),i(n,t)){f.remove();o=!0;break}r&&r.detach()}return o}function f(t,r,u,e,o){var s=!1,h="a, table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style",c="script, .dotdotdot-keep";return t.contents().detach().each(function(){var a=this,l=n(a);if("undefined"==typeof a)return!0;if(l.is(c))t.append(l);else{if(s)return!0;t.append(l);!o||l.is(e.after)||l.find(e.after).length||t[t.is(h)?"after":"append"](o);i(u,e)&&(s=3==a.nodeType?y(l,r,u,e,o):f(l,r,u,e,o));s||o&&o.detach()}}),r.addClass("is-truncated"),s}function y(t,f,o,h,c){var l=t[0],nt,k,d,tt;if(!l)return!1;var y=s(l),it=-1!==y.indexOf(" ")?" ":"",p="letter"==h.wrap?"":it,a=y.split(p),g=-1,w=-1,b=0,v=a.length-1;for(h.fallbackToLetter&&0==b&&0==v&&(p="",a=y.split(p),v=a.length-1);v>=b&&(0!=b||0!=v);){if(nt=Math.floor((b+v)/2),nt==w)break;w=nt;u(l,a.slice(0,w+1).join(p)+h.ellipsis);o.children().each(function(){n(this).toggle().toggle()});i(o,h)?(v=w,h.fallbackToLetter&&0==b&&0==v&&(p="",a=a[0].split(p),g=-1,w=-1,b=0,v=a.length-1)):(g=w,b=w)}return-1==g||1==a.length&&0==a[0].length?(k=t.parent(),t.detach(),d=c&&c.closest(k).length?c.length:0,(k.contents().length>d?l=r(k.contents().eq(-1-d),f):(l=r(k,f,!0),d||k.detach()),l&&(y=e(s(l),h),u(l,y),d&&c))&&(tt=c.parent(),n(l).parent().append(c),n.trim(tt.html())||tt.remove())):(y=e(a.slice(0,g+1).join(p),h),u(l,y)),!0}function i(n,t){return n.innerHeight()>t.maxHeight}function e(t,i){for(;n.inArray(t.slice(-1),i.lastCharacter.remove)>-1;)t=t.slice(0,-1);return n.inArray(t.slice(-1),i.lastCharacter.noEllipsis)<0&&(t+=i.ellipsis),t}function o(n){return{width:n.innerWidth(),height:n.innerHeight()}}function u(n,t){n.innerText?n.innerText=t:n.nodeValue?n.nodeValue=t:n.textContent&&(n.textContent=t)}function s(n){return n.innerText?n.innerText:n.nodeValue?n.nodeValue:n.textContent?n.textContent:""}function h(n){do n=n.previousSibling;while(n&&1!==n.nodeType&&3!==n.nodeType);return n}function r(t,i,u){var f,e=t&&t[0];if(e){if(!u){if(3===e.nodeType)return e;if(n.trim(t.text()))return r(t.contents().last(),i)}for(f=h(e);!f;){if(t=t.parent(),t.is(i)||!t.length)return!1;f=h(t[0])}if(f)return r(n(f),i)}return!1}function p(t,i){return t?"string"==typeof t?(t=n(t,i),t.length?t:!1):t.jquery?t:!1:!1}function w(n){for(var t,r=n.innerHeight(),u=["paddingTop","paddingBottom"],i=0,f=u.length;f>i;i++)t=parseInt(n.css(u[i]),10),isNaN(t)&&(t=0),r-=t;return r}var c,l,a;n.fn.dotdotdot||(n.fn.dotdotdot=function(t){var r,h;if(0==this.length)return n.fn.dotdotdot.debug('No element found for "'+this.selector+'".'),this;if(this.length>1)return this.each(function(){n(this).dotdotdot(t)});r=this;h=r.contents();r.data("dotdotdot")&&r.trigger("destroy.dot");r.data("dotdotdot-style",r.attr("style")||"");r.css("word-wrap","break-word");"nowrap"===r.css("white-space")&&r.css("white-space","normal");r.bind_events=function(){return r.bind("update.dot",function(t,o){switch(r.removeClass("is-truncated"),t.preventDefault(),t.stopPropagation(),typeof u.height){case"number":u.maxHeight=u.height;break;case"function":u.maxHeight=u.height.call(r[0]);break;default:u.maxHeight=w(r)}u.maxHeight+=u.tolerance;"undefined"!=typeof o&&(("string"==typeof o||"nodeType"in o&&1===o.nodeType)&&(o=n("<div />").append(o).contents()),o instanceof n&&(h=o));s=r.wrapInner('<div class="dotdotdot" />').children();s.contents().detach().end().append(h.clone(!0)).find("br").replaceWith("  <br />  ").end().css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var c=!1,l=!1;return e.afterElement&&(c=e.afterElement.clone(!0),c.show(),e.afterElement.detach()),i(s,u)&&(l="children"==u.wrap?v(s,u,c):f(s,r,s,u,c)),s.replaceWith(s.contents()),s=null,n.isFunction(u.callback)&&u.callback.call(r[0],l,h),e.isTruncated=l,l}).bind("isTruncated.dot",function(n,t){return n.preventDefault(),n.stopPropagation(),"function"==typeof t&&t.call(r[0],e.isTruncated),e.isTruncated}).bind("originalContent.dot",function(n,t){return n.preventDefault(),n.stopPropagation(),"function"==typeof t&&t.call(r[0],h),h}).bind("destroy.dot",function(n){n.preventDefault();n.stopPropagation();r.unwatch().unbind_events().contents().detach().end().append(h).attr("style",r.data("dotdotdot-style")||"").removeClass("is-truncated").data("dotdotdot",!1)}),r};r.unbind_events=function(){return r.unbind(".dot"),r};r.watch=function(){if(r.unwatch(),"window"==u.watch){var t=n(window),i=t.width(),f=t.height();t.bind("resize.dot"+e.dotId,function(){i==t.width()&&f==t.height()&&u.windowResizeFix||(i=t.width(),f=t.height(),l&&clearInterval(l),l=setTimeout(function(){r.trigger("update.dot")},100))})}else a=o(r),l=setInterval(function(){if(r.is(":visible")){var n=o(r);a.width==n.width&&a.height==n.height||(r.trigger("update.dot"),a=n)}},500);return r};r.unwatch=function(){return n(window).unbind("resize.dot"+e.dotId),l&&clearInterval(l),r};var u=n.extend(!0,{},n.fn.dotdotdot.defaults,t),e={},a={},l=null,s=null;return u.lastCharacter.remove instanceof Array||(u.lastCharacter.remove=n.fn.dotdotdot.defaultArrays.lastCharacter.remove),u.lastCharacter.noEllipsis instanceof Array||(u.lastCharacter.noEllipsis=n.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis),e.afterElement=p(u.after,r),e.isTruncated=!1,e.dotId=c++,r.data("dotdotdot",!0).bind_events().trigger("update.dot"),u.watch&&r.watch(),r},n.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",fallbackToLetter:!0,lastCharacter:{},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0},n.fn.dotdotdot.defaultArrays={lastCharacter:{remove:[" ","",",",";",".","!","?"],noEllipsis:[]}},n.fn.dotdotdot.debug=function(){},c=1,l=n.fn.html,n.fn.html=function(i){return i!=t&&!n.isFunction(i)&&this.data("dotdotdot")?this.trigger("update",[i]):l.apply(this,arguments)},a=n.fn.text,n.fn.text=function(i){return i!=t&&!n.isFunction(i)&&this.data("dotdotdot")?(i=n("<div />").text(i).html(),this.trigger("update",[i])):a.apply(this,arguments)})}(jQuery);jQuery(document).ready(function(n){n(".dot-ellipsis").each(function(){var r=n(this).hasClass("dot-resize-update"),u=n(this).hasClass("dot-timer-update"),i=0,f=n(this).attr("class").split(/\s+/),t;n.each(f,function(n,t){var r=t.match(/^dot-height-(\d+)$/);null!==r&&(i=Number(r[1]))});t={};u&&(t.watch=!0);r&&(t.watch="window");i>0&&(t.height=i);n(this).dotdotdot(t)})});jQuery(window).on("load",function(){jQuery(".dot-ellipsis.dot-load-update").trigger("update.dot")});$back_to_top=$(".cd-top");silofirstload=!0;$(document).ready(function(){$(".color-slector input").change(function(){$(this).attr("id")==="dtcm-colours"?($("#contrast-mode").remove(),$("html").removeClass("contrast-mode"),setCookie("color-mode","",1)):$(this).attr("id")==="colours-blind"&&($("body").append('<link id="contrast-mode" rel="stylesheet" href="/assets/css/accessibility/contrast.css?v=123"/>'),$("html").addClass("contrast-mode"),setCookie("color-mode","contrast",1))});$(".font-selector a").click(function(){$(".font-mode").remove();$(".font-selector a").removeClass("active");$(this).addClass("active");$(this).hasClass("font-75")?($("body").append('<link class="font-mode" rel="stylesheet" href="/assets/css/accessibility/font-75.css?v=123"/>'),$("html").addClass("font-75"),setCookie("font-mode","font-75",1)):$(this).hasClass("font-125")?($("body").append('<link class="font-mode" rel="stylesheet" href="/assets/css/accessibility/font-125.css?v=123"/>'),$("html").addClass("font-125"),setCookie("font-mode","font-125",1)):$(this).hasClass("font-150")?($("body").append('<link class="font-mode" rel="stylesheet" href="/assets/css/accessibility/font-150.css?v=123"/>'),$("html").addClass("font-150"),setCookie("font-mode","font-150",1)):$(this).hasClass("font-200")?($("body").append('<link class="font-mode" rel="stylesheet" href="/assets/css/accessibility/font-200.css?v=123"/>'),$("html").addClass("font-200"),setCookie("font-mode","font-200",1)):$(this).hasClass("font-default")&&(setCookie("font-mode","",1),$("html").removeClass("font-200 font-150 font-125 font-75 "))});setAccessibilityModes()});$aaa_previousActiveElement=null;$aaa_lastMenuItem=!1;$(document).on("keyup",function(n){if(aaa_getKeyCode(n)=="9"){$aaa_previousActiveElement!=null&&$aaa_previousActiveElement.removeClass("active-shadow");var t=$(document.activeElement);$aaa_lastMenuItem&&closeMenu();$aaa_lastMenuItem=t.parents(".nav-column-middle").length===1?!0:!1;t.addClass("active-shadow");$aaa_previousActiveElement=t;t.hasClass("category-link")&&openMenu(".category-link.active-shadow");t.parents(".essential-items").length===1&&openMenu(".category-link:last");t.parents(".essential-items").length===1&&($aaa_lastMenuItem=$(".essential-items a:last").hasClass("active-shadow")?!0:!1);t.parents(".accessibility-bar").length===1?$(".accessibility-bar").addClass("active"):$(".accessibility-bar").removeClass("active")}(n.altKey&&n.which==48||n.altKey&&n.which==96)&&($aaa_previousActiveElement!=null&&$aaa_previousActiveElement.removeClass("active-shadow"),$aaa_barItemClicked=!1,$(".accessibility-bar").show().addClass("active"),$(".accessibility-bar-link").eq(0).focus().addClass("active-shadow"),$aaa_previousActiveElement=$(".accessibility-bar-link").eq(0));aaa_getKeyCode(n)=="27"&&($(".accessibility-bar").hide().removeClass("active"),$aaa_barItemClicked=!0)});$(document).click(function(){$aaa_previousActiveElement!=null&&($aaa_previousActiveElement.removeClass("active-shadow"),$aaa_previousActiveElement.parents(".signup_nav_wrap").length===1&&$(".nav_prompt").trigger("click"),$aaa_previousActiveElement.parents("open-menu").length===1&&($(".sub-level").removeClass("open-menu"),$(".megamenu-overlay").remove()))});$(document).ready(function(){$(".accessibility-bar-link").click(function(n){n.preventDefault();var i=$(this).attr("href"),r=$(i).find(":tabbable"),t=0;$(".accessibility-bar-link").removeClass("active-shadow");i==="#header"&&(t=3);r.eq(t).focus().addClass("active-shadow");setTimeout(function(){$aaa_previousActiveElement=r.eq(t)},100);$(".accessibility-bar").removeClass("active");$(".accessibility-bar").hide();$aaa_barItemClicked=!0});$("div#sliderList").slick({slide:"div.slider-banner-home",autoplay:$("div#sliderList").data("autoplay"),autoplaySpeed:$("div#sliderList").data("autoplaymilliseconds"),speed:400,cssEase:"ease-out",infinite:!0,dots:!0,lazyLoad:"ondemand",draggable:!1,rtl:window.isRTLbool});$(".aaa-video-control").click(function(){$(this).toggleClass("aaa-play aaa-pause");$(this).hasClass("aaa-play")?document.getElementById("aaa-page-video").pause():document.getElementById("aaa-page-video").play()})});$(window).load(function(){});disableEnableTabindexintialized=!1;$(document).keyup(function(n){disableEnableTabindexintialized||(disableEnableTabindex(),disableEnableTabindexintialized=!0);var t=n.keyCode?n.keyCode:n.which;t==9&&$(".main-nav .category-link:focus").length&&$(".accordion-trigger").addClass("focus")});jQuery(document).ready(function(n){var i=300,r=1200,u=700,t=n(".cd-top");n("#accessibility-accordion .acc-content h4").click(function(){n(this).next("p").slideToggle();n(this).toggleClass("active")});setTimeout(function(){n(".feedback-modal").addClass("feedback-modal-display")},12e4);n(window).scroll(function(){n(this).scrollTop()>i?t.addClass("cd-is-visible"):t.removeClass("cd-is-visible cd-fade-out");n(this).scrollTop()>r&&t.addClass("cd-fade-out")});t.on("click",function(t){t.preventDefault();n("body,html").animate({scrollTop:0},u)})});$(".also_like_list").slick({slidesToShow:4,slidesToScroll:4,dots:!0,arrows:!1,variableWidth:!0,rtl:window.isRTLbool,responsive:[{breakpoint:767,settings:{variableWidth:!1,slidesToShow:1,slidesToScroll:1}}]});jQuery(document).ready(function(){$(".also_like_list").on("init",function(){$(".also_like ul.also_like_list li .info p").dotdotdot({ellipsis:"... ",watch:"window"})});$(".mCustomScrollbar").length>0&&$(".mCustomScrollbar").mCustomScrollbar({theme:"minimal"});$(".career-slick-slider ul").slick({slidesToShow:3,slidesToScroll:3,infinite:!1,variableWidth:!1,rtl:window.isRTLbool,dots:!0,draggable:!1,arrows:!1,responsive:[{breakpoint:1024,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:600,settings:{slidesToShow:1,slidesToScroll:1}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]})});$(window).load(function(){typeof stackHolderReports!="undefined"&&$(".select-image-dropdown2").ddslick({onSelected:function(n){GetCountryData(n.selectedData.value)}})});jQuery(document).ready(function(n){var i=300,r=1200,u=700,t=n(".cd-top");n(window).scroll(function(){n(this).scrollTop()>i?t.addClass("cd-is-visible"):t.removeClass("cd-is-visible cd-fade-out");n(this).scrollTop()>r&&t.addClass("cd-fade-out")});t.on("click",function(t){t.preventDefault();n("body,html").animate({scrollTop:0},u)})});$(".silo-select").ddslick({onSelected:function(n){silofirstload?silofirstload=!1:window.location.href=n.selectedData.value}});$(".main-nav").mouseover(function(){$(".essential-items").css("display","block")}).mouseout(function(){$(".essential-items").css("display","none")})